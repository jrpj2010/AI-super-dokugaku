(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[844],{52596:function(e,t,r){"use strict";function s(e){return[].concat(e)}function i(e){return e.startsWith(":")}function a(e){return o(e)&&("*"===e||e.length>1&&":>~.+*".includes(e.slice(0,1))||c(e))}function n(e,t){return(o(t)||"number"==typeof t)&&"--"!==e&&!i(e)&&!l(e)}function l(e){return e.startsWith("@media")}function o(e){return e+""===e}function c(e){return o(e)&&(e.startsWith("&")||i(e))}function d(e,t=""){return e.filter(Boolean).join(t)}function u(e,t){let r=0;if(0===t.length)return r.toString();for(let e=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e),r&=r;return`${e??"cl"}_${r.toString(36)}`}r.d(t,{S:function(){return g},cx:function(){return function e(...t){return d(t.reduce((t,r)=>(r instanceof Set?t.push(...r):"string"==typeof r?t.push(r):Array.isArray(r)?t.push(e(...r)):"object"==typeof r&&Object.entries(r).forEach(([e,r])=>{r&&t.push(e)}),t),[])," ").trim()}}});var h=class e{constructor(e,t,r,s){this.sheet=e,this.property=t,this.value=r,this.selector=s,this.property=t,this.value=r,this.joined=`${t}:${r}`;let i=this.selector.preconditions.concat(this.selector.postconditions);this.hash=this.selector.hasConditions?this.selector.scopeClassName:u(this.sheet.name,this.joined),this.key=d([this.joined,i,this.hash])}toString(){let t=m(this.selector.preconditions,{right:this.hash});return t=m(this.selector.postconditions,{left:t}),`${t} {${e.genRule(this.property,this.value)}}`}static genRule(e,t){var r,s;return r=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),s="content"===e?`"${t}"`:t,`${r}:${s};`}};function m(e,{left:t="",right:r=""}={}){let s=e.reduce((e,t)=>i(t)?e+t:c(t)?e+t.slice(1):d([e,t]," "),t);return d([s,r?`.${r}`:""]," ")}var p=class e{constructor(e,t=null,{preconditions:r,postconditions:i}={}){this.sheet=e,this.preconditions=[],this.scopeClassName=null,this.scopeName=null,this.postconditions=[],this.preconditions=r?s(r):[],this.postconditions=i?s(i):[],this.setScope(t)}setScope(e){return e&&(this.scopeClassName||(this.scopeName=e,this.scopeClassName=u(this.sheet.name,e+this.sheet.count))),this}get hasConditions(){return this.preconditions.length>0||this.postconditions.length>0}addScope(t){return new e(this.sheet,t,{preconditions:this.preconditions,postconditions:this.postconditions})}addPrecondition(t){return new e(this.sheet,this.scopeClassName,{postconditions:this.postconditions,preconditions:this.preconditions.concat(t)})}addPostcondition(t){return new e(this.sheet,this.scopeClassName,{preconditions:this.preconditions,postconditions:this.postconditions.concat(t)})}createRule(e,t){return new h(this.sheet,e,t,this)}},f=class{constructor(e,t){this.name=e,this.rootNode=t,this.storedStyles={},this.storedClasses={},this.style="",this.count=0,this.id=`flairup-${e}`,this.styleTag=this.createStyleTag()}getStyle(){return this.style}append(e){var t;this.style=(t=this.style)?`${t}
${e}`:e}apply(){this.count++,this.styleTag&&(this.styleTag.innerHTML=this.style)}isApplied(){return!!this.styleTag}createStyleTag(){if("undefined"==typeof document||this.isApplied()||null===this.rootNode)return this.styleTag;let e=document.createElement("style");return e.type="text/css",e.id=this.id,(this.rootNode??document.head).appendChild(e),e}addRule(e){let t=this.storedClasses[e.key];return o(t)?t:(this.storedClasses[e.key]=e.hash,this.storedStyles[e.hash]=[e.property,e.value],this.append(e.toString()),e.hash)}};function x(e,t){for(let r in e)t(r.trim(),e[r])}function g(e,t){let r=new f(e,t);return{create:function(e){let t={};return(function e(t,r,s){let i=[];return x(r,(n,l)=>{if(a(n))return e(t,l,s.addPrecondition(n)).forEach(e=>i.push(e));i.push([n,r[n],s.addScope(n)])}),i})(r,e,new p(r)).forEach(([e,i,o])=>{(function e(t,r,i){let o=new Set;return x(r,(r,c)=>{let d=[];if(a(r))d=e(t,c,i.addPostcondition(r));else if("."===r)d=s(c);else if(l(r))d=function(t,r,s,i){t.append(s+" {");let a=e(t,r,i);return t.append("}"),a}(t,c,r,i);else if("--"===r)d=function(t,r,s){let i=new Set,a=[];if(x(r,(r,l)=>{if(n(r,l)){a.push(h.genRule(r,l));return}v(e(t,l??{},s),i)}),!s.scopeClassName)return i;if(a.length){let e=a.join(" ");t.append(`${m(s.preconditions,{right:s.scopeClassName})} {${e}}`)}return i.add(s.scopeClassName),i}(t,c,i);else if(n(r,c)){let e=i.createRule(r,c);t.addRule(e),o.add(e.hash)}return v(d,o)}),o})(r,i,o).forEach(r=>{t[e]=t[e]??new Set,t[e].add(r)})}),r.apply(),t},getStyle:r.getStyle.bind(r),isApplied:r.isApplied.bind(r)}}function v(e,t){return e.forEach(e=>t.add(e)),t}},22454:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/topic/[id]",function(){return r(63315)}])},84375:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(41650).Z)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},34379:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(41650).Z)("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},65213:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(41650).Z)("clipboard-copy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]])},68644:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(41650).Z)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},36336:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(41650).Z)("file-pen-line",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]])},26745:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(41650).Z)("list-collapse",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"m3 10 3-3-3-3",key:"i7pm08"}],["path",{d:"m3 20 3-3-3-3",key:"20gx1n"}]])},95808:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(41650).Z)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},88637:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(41650).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},27151:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(41650).Z)("users-round",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]])},44644:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(41650).Z)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},47850:function(e,t,r){"use strict";r.d(t,{Z:function(){return k}});var s=r(52676),i=r(75271),a=r(72135),n=r.n(a),l=r(351),o=r(59427);r(13963),r(33685),r(87518);var c=r(97571),d=r(72070),u=r.n(d),h=r(7717),m=r(62033),p=r(72881),f=r(30674),x=r(4460),g=r(69194),v=r(29871);let _=n()(()=>Promise.resolve().then(r.t.bind(r,4460,19)).then(e=>e.Viewer),{loadableGenerated:{webpack:()=>[4460]},ssr:!1}),j=n()(()=>Promise.resolve().then(r.t.bind(r,4460,19)).then(e=>e.Worker),{loadableGenerated:{webpack:()=>[4460]},ssr:!1});var b=e=>{let{fileUrl:t,fileType:r}=e,{isMobile:a}=(0,v.Z)(),n=(0,o.toolbarPlugin)(),{renderDefaultToolbar:d,Toolbar:b}=n,[w,y]=(0,i.useState)(""),[k,N]=(0,i.useState)(""),[F,S]=(0,i.useState)(""),P=e=>({...e,Download:()=>(0,s.jsx)(s.Fragment,{}),EnterFullScreen:()=>(0,s.jsx)(s.Fragment,{}),SwitchTheme:()=>(0,s.jsx)(s.Fragment,{}),Open:()=>(0,s.jsx)(s.Fragment,{}),Print:()=>(0,s.jsx)(s.Fragment,{}),ShowSearchPopover:()=>(0,s.jsx)(s.Fragment,{})}),D=(0,l.defaultLayoutPlugin)({renderToolbar:()=>(0,s.jsx)(b,{children:d(P)}),sidebarTabs:e=>a?[]:[e[0]]}),C=()=>{let{activateTab:e}=D;e(0)},T=(0,i.useRef)(null),{isDark:E}=(0,c.Z)(),Z=(0,h.useTranslations)(),z=(0,h.useLocale)(),M=(0,p.b)(r);(0,i.useEffect)(()=>{let e=async()=>{try{let e=encodeURIComponent(btoa(t)),r=await (0,g.D)({fileUrl:e});if(500===r)return S("error"),null;return y(r.data),r.data}catch(e){return console.error("Error fetching data:",e),null}};if("PDF"===r){let r=new Promise(e=>{setTimeout(()=>e(null),1e3)});Promise.race([e(),r]).then(e=>{N(e||t)})}else e()},[t,r]),(0,i.useEffect)(()=>{T.current&&T.current.scrollTo(0,0)},[k]);let I=e=>(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{children:"Error loading PDF"}),(0,s.jsx)("p",{children:e.message})]}),A=e=>(0,s.jsx)(j,{workerUrl:"https://unpkg.com/pdfjs-dist@3.4.120/build/pdf.worker.min.js",children:(0,s.jsx)("div",{ref:T,className:"w-full h-full",children:(0,s.jsx)(_,{defaultScale:x.SpecialZoomLevel.PageFit,theme:E?"dark":"light",fileUrl:"/api/fetchFile?url=".concat(encodeURIComponent(e)),plugins:[D,n],onDocumentLoad:C,localization:m.f[z],renderError:I})})}),L=e=>(0,s.jsx)("div",{className:"h-full",children:(0,s.jsx)("iframe",{src:"https://view.officeapps.live.com/op/view.aspx?src=".concat(encodeURIComponent(e)),className:"w-full h-full ",frameBorder:"0"})}),O=()=>(0,s.jsxs)("div",{className:"h-full p-4 h-full  text-center pt-32",children:[(0,s.jsx)("div",{className:"flex justify-center mb-4",children:(0,s.jsx)(u(),{src:M,alt:r,width:80,height:80})}),(0,s.jsxs)("div",{className:"break-words text-[#0A1C38] dark:text-[#FFF] text-lg mb-8",children:[t.split("/").pop(),".",r]}),(0,s.jsx)("div",{className:"text-[#0A1C38] dark:text-[#FFF] text-base",children:Z("file_preview_notification")})]}),R=()=>(0,s.jsx)("div",{className:"h-full p-4 text-center pt-32",children:(0,s.jsx)(f.c,{label:Z("topic.loading")})});return(0,s.jsx)("div",{className:"h-full",children:(()=>{if("PDF"===r)return k?A(k):R();if(F)switch(r){case"PPTX":case"PPT":case"DOC":case"DOCX":case"XLS":case"XLSX":return L(t);default:return O()}return w?["XLSX","XLS","CSV","HTML"].includes(r)?(0,s.jsx)("div",{className:"",children:(0,s.jsx)("iframe",{src:w,className:"w-full h-full ",frameBorder:"0"})}):A(w):R()})()})},w=r(4814),y=r(17224),k=e=>{let{file_type:t,file_url:r}=e,i=(0,y.useRouter)(),a=t||i.query.fileType||"",n=r||i.query.fileUrl;return(0,s.jsx)("div",{className:"w-full h-[100%]",children:"pdf"===a||"doc"===a||"docx"===a||"ppt"===a||"pptx"===a?(0,s.jsx)(b,{fileUrl:n,fileType:a.toLocaleUpperCase(),fileName:"PPT"}):"txt"===a?(0,s.jsx)("iframe",{src:n,className:"w-full h-[100%]"}):(0,s.jsx)("iframe",{src:"https://view.officeapps.live.com/op/view.aspx?src=".concat(encodeURIComponent(n)),loading:"eager",className:(0,w.Z)("w-full","h-[100%]","border-1 border-gray-200 rounded-lg overflow-hidden dark:border-gray-600"),title:"PPT"})})}},62421:function(e,t,r){"use strict";r.d(t,{$0:function(){return p},dN:function(){return m},kN:function(){return h},ng:function(){return d},nt:function(){return u},tl:function(){return c}});var s=r(52676),i=r(75271),a=r(77249),n=r(8924),l=(r(68644),r(37481)),o=r(25010);let c=e=>{let{className:t,...r}=e;return(0,s.jsx)("nav",{role:"navigation","aria-label":"pagination",className:(0,l.cn)("mx-auto flex w-full justify-center",t),...r})};c.displayName="Pagination";let d=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,s.jsx)("ul",{ref:t,className:(0,l.cn)("flex flex-row items-center gap-1",r),...i})});d.displayName="PaginationContent";let u=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,s.jsx)("li",{ref:t,className:(0,l.cn)("",r),...i})});u.displayName="PaginationItem";let h=e=>{let{className:t,isActive:r,size:i="icon",...a}=e;return(0,s.jsx)("a",{"aria-current":r?"page":void 0,className:(0,l.cn)((0,o.d)({variant:r?"outline":"ghost",size:i}),t),...a})};h.displayName="PaginationLink";let m=e=>{let{className:t,...r}=e;return(0,s.jsx)(h,{"aria-label":"Go to previous page",size:"default",className:(0,l.cn)("gap-1 pl-2.5",t),...r,children:(0,s.jsx)(a.Z,{className:"h-4 w-4"})})};m.displayName="PaginationPrevious";let p=e=>{let{className:t,...r}=e;return(0,s.jsx)(h,{"aria-label":"Go to next page",size:"default",className:(0,l.cn)("gap-1 pr-2.5",t),...r,children:(0,s.jsx)(n.Z,{className:"h-4 w-4"})})};p.displayName="PaginationNext"},63315:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return e6},default:function(){return e5}});var s=r(52676),i=r(93992),a=r.n(i),n=r(87582),l=r(7717);r(85625);var o=r(16023),c=r(75271),d=r(65819),u=r(29634),h=r(9455),m=r(30674),p=r(26595),f=r(51131),x=r(40598),g=r(49759),v=r(56975),_=r(47014),j=r(74538),b=r(64657),w=r(5687),y=r(55383),k=r(93650),N=r(49983),F=r(72454),S=r(39071),P=r(1962),D=r(89335),C=r(17112),T=e=>{let t=(0,P.Z)(e=>e.bindTopic);return{bindThreadsToTopic:async(r,s)=>{try{await (0,D.Zo)({topicId:e.short_id,threadShortIds:r})?(t({rids:r,topic:e}),s&&s()):C.Z.error("Failed to bind topic")}catch(e){console.error("Failed to fetch topics:",e)}}}},E=r(97571),Z=r(34180),z=r(96164),M=r(46571),I=r(13061),A=e=>{let{topicSelected:t,onTopicSelected:r}=e,i=(0,l.useTranslations)(),{isDark:a}=(0,E.Z)(),n=(0,d.ZP)(e=>e.isLogin),o=(0,P.Z)(e=>e.list),u=(0,P.Z)(e=>e.pageInfo),h=(0,P.Z)(e=>e.getList),p=(0,c.useRef)(null),f=(0,c.useRef)(null),x=(0,c.useMemo)(()=>{let{page:e,pages:t}=u;return!e||e<t},[u]),{data:g,translateDateKey:v}=(0,I.Z)({list:o});return(0,c.useEffect)(()=>(p.current&&p.current.disconnect(),p.current=new IntersectionObserver(e=>{e[0].isIntersecting&&n&&x&&h()}),f.current&&p.current.observe(f.current),()=>{p.current&&p.current.disconnect()}),[f.current,n]),(0,c.useEffect)(()=>{if(void 0===n)return;let{getList:e,cleanList:t}=P.Z.getState();n?o.length||e():t()},[n]),(0,s.jsxs)("ul",{children:[g.map(e=>{let[a,n]=e;return(0,s.jsxs)(c.Fragment,{children:[(0,s.jsx)("li",{className:"text-sm font-medium text-theme-font-500 dark:text-theme-font-dark-500 p-2 mt-2",children:v(a)}),n.map(e=>{let a=(0,s.jsx)("span",{className:"flex-1 line-clamp-1 mr-4 break-words",title:e.title?e.title:i("untitled"),style:{wordBreak:"break-word"},children:e.title?e.title:i("untitled")}),n=!!e.topic,l=(0,s.jsxs)("div",{className:"flex items-center text-gray-300 dark:text-gray-600",children:[(0,s.jsx)(Z.K,{isDisabled:!0}),(0,s.jsx)(z.e,{delay:0,content:i("topic.binded_other_topic"),children:a})]});return(0,s.jsx)("li",{className:(0,M.cn)("text-sm","ml-1.5 rounded-xl relative group py-2 px-3","flex items-center",!n&&"cursor-pointer hover:text-theme-font-900 hover:bg-[#edf0f3] dark:hover:bg-[#2f333c] hover:dark:text-white","text-theme-font-600 dark:text-theme-font-dark-600"),children:n?l:(0,s.jsx)(Z.K,{isDisabled:n,isSelected:null==t?void 0:t.some(t=>t.short_id===e.short_id),onValueChange:()=>{null==r||r(e)},children:a})},e.short_id)})]},a)}),(0,s.jsx)("section",{ref:f,className:"flex items-center justify-center",children:x&&n&&(0,s.jsx)("section",{className:"my-5",children:(0,s.jsx)(m.c,{color:a?"white":"default",size:"sm",className:"".concat(o.length?"":"hidden")})})})]})},L=e=>{let{isOpen:t,onClose:r,onSelected:i}=e,a=(0,l.useTranslations)(),n=(0,P.Z)(e=>e.list),o=(0,P.Z)(e=>e.inited),[d,u]=(0,c.useState)([]),h=()=>{u([]),r()};return(0,s.jsx)(b.R,{isOpen:t,onClose:h,placement:"center",scrollBehavior:"inside",size:"2xl",children:(0,s.jsxs)(w.A,{children:[(0,s.jsx)(y.k,{children:(0,s.jsx)("h3",{className:"text-lg font-semibold",children:a("topic.add_old_thread")})}),(0,s.jsx)(k.I,{children:(0,s.jsxs)("section",{className:"max-h-[60vh] overflow-x-hidden",children:[(0,s.jsx)(A,{topicSelected:d,onTopicSelected:e=>{d.some(t=>t.short_id===e.short_id)?u(d.filter(t=>t.short_id!==e.short_id)):u([...d,e])}}),o&&!n.length&&(0,s.jsx)("p",{className:"text-center text-gray-500 my-10",children:a("no_data")})]})}),(0,s.jsx)(N.R,{children:(0,s.jsx)(p.A,{color:"primary",onPress:()=>{i(d),h()},isDisabled:!d.length,children:a("topic.add_to_topic")})})]})})},O=r(84781),R=e=>{let{topic:t,onCallback:r,canEdit:i}=e,a=(0,l.useTranslations)();(0,P.Z)(e=>e.list)[0];let{isOpen:n,onOpen:o,onClose:d}=(0,h.q)(),{bindThreadsToTopic:u}=T(t),[m]=(0,c.useState)(),f=async e=>{u(e.map(e=>e.short_id),()=>{r&&r()})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"h-full flex flex-col justify-center items-center text-center gap-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-400",children:a("topic.no_questions_added")}),(0,s.jsx)("p",{className:"text-gray-500 text-sm whitespace-pre-line",children:a("topic.add_questions_tip")}),(0,s.jsx)("div",{className:"flex justify-center gap-4",children:i&&(0,s.jsx)(p.A,{color:"primary",variant:"light",size:"lg",startContent:(0,s.jsx)(O.GB,{className:"w-6 h-6"}),onPress:o,children:a("topic.add_old_thread")})})]}),(0,s.jsx)(L,{isOpen:n,onClose:d,onSelected:f})]})},B=r(75963),U=r(12045),W=r(67241);let V=(0,r(75910).Ue)((e,t)=>({file:[],website:[],thread:[],inited:{file:!1,website:!1,thread:!1},setFile:t=>e(e=>({...e,file:t})),setWebsite:t=>e(e=>({...e,website:t})),setThread:t=>e(e=>({...e,thread:t})),clean:()=>e({file:[],website:[],thread:[],inited:{file:!1,website:!1,thread:!1}}),setInited:t=>e(e=>({...e,inited:t}))}));var X=e=>{let{canEdit:t,topic:r,onListChange:i,fetchData:a}=e,n=(0,l.useTranslations)(),o=(0,B.useRouter)(),{bindThreadsToTopic:u}=T(r),P=(0,d.ZP)(e=>e.userInfo),{thread:C,setThread:E,inited:Z}=V(),[z,I]=(0,c.useState)(!0),[A,X]=(0,c.useState)(null),[$,q]=(0,c.useState)(!1),[K,G]=(0,c.useState)(null),H=(0,c.useRef)(null),{isOpen:J,onOpen:Y,onClose:Q}=(0,h.q)(),{isOpen:ee,onOpen:et,onClose:er}=(0,h.q)();(0,c.useEffect)(()=>{Z&&Z.thread?I(!1):I(!0)},[Z]),(0,c.useEffect)(()=>{if(J){var e;null===(e=H.current)||void 0===e||e.focus()}},[J]);let es=async()=>{if(K){q(!0);try{if(await (0,D.vU)({topicId:r.short_id,threadShortId:K.short_id})){let e=C.filter(e=>e.short_id!==K.short_id);E(e),i&&i(e)}else X("Failed to unbind thread from topic")}catch(e){X("An error occurred while unbinding the thread"),console.error("Error unbinding thread:",e)}finally{G(null),Q(),q(!1)}}},ei=async e=>{u(e.map(e=>e.short_id),()=>{a()})};return z?(0,s.jsx)("section",{className:"flex items-center justify-center h-full w-full",children:(0,s.jsx)(m.c,{label:n("topic.loading"),size:"sm"})}):A?(0,s.jsxs)("div",{className:"flex items-center justify-center h-full w-full",children:["Error: ",A]}):(0,s.jsxs)("section",{children:[(0,s.jsxs)("section",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 dark:text-[#FFFFFF]",children:[(0,s.jsx)(O.qU,{className:"w-6 h-6"}),(0,s.jsx)("h2",{className:"text-xl font-semibold",children:n("topic.post")})]}),C.length>0&&t&&(0,s.jsx)("section",{className:"flex items-center gap-4 flex-wrap justify-between",children:(0,s.jsx)("div",{className:"flex gap-2 flex-wrap",children:(0,s.jsx)(p.A,{variant:"light",size:"lg",color:"primary",radius:"md",startContent:(0,s.jsx)(F.Z,{size:16}),onPress:et,children:n("topic.add_old_thread")})})})]}),(0,s.jsx)(f.j,{className:"my-4"}),(0,s.jsx)("section",{className:"mt-6",children:C.length?(0,s.jsx)(s.Fragment,{children:C.map(e=>(0,s.jsxs)("div",{className:"border-b py-4",children:[(0,s.jsxs)("div",{className:"px-2 pt-0 pb-0 mb-2 cursor-pointer",onClick:()=>{o.push("/search/".concat(e.short_id))},children:[(0,s.jsx)("p",{className:"font-bold mb-2 line-clamp-3 text-[#30394A] dark:text-[#FFFFFF] break-words",style:{wordBreak:"break-word"},children:e.title}),e.answer&&(0,s.jsx)("p",{className:"text-sm text-gray-400 dark:text-[#D0D4DC] mb-2 line-clamp-3",style:{wordBreak:"break-word"},children:e.answer})]}),(0,s.jsx)("div",{className:"mt-0 pt-0 px-2 w-full",children:(0,s.jsxs)("div",{className:"w-full flex justify-between items-center text-sm text-gray-500 dark:text-[#D0D4DC]",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(F.Z,{size:16}),(0,s.jsx)("span",{children:(0,U.l)(e.updated_at,n)})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 ",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[e.referenced_links.slice(0,3).map((e,t)=>(0,s.jsx)(x.h,{src:"https://www.google.com/s2/favicons?domain=".concat(e.link,"&sz=24"),className:(0,M.cn)("w-6 h-6",0!==t?"-ml-2":""),size:"md"},t)),e.referenced_links.length>3&&(0,s.jsx)("p",{className:"text-small text-foreground font-medium ms-2 dark:text-[#D0D4DC]",children:n("topic.sources_count",{count:e.referenced_links.length})})]}),(t||e.uid===(null==P?void 0:P.uid))&&(0,s.jsxs)(g.F,{children:[(0,s.jsx)(v.S,{children:(0,s.jsx)(p.A,{className:"dark:text-[#D0D4DC] my-1",size:"sm",variant:"light",isIconOnly:!0,children:(0,s.jsx)(W.xt,{})})}),(0,s.jsx)(_.a,{"aria-label":"More options",children:(0,s.jsx)(j.W,{startContent:(0,s.jsx)(S.Z,{size:16,className:"text-danger"}),onPress:()=>{G(e),Y()},children:(0,s.jsx)("div",{className:"text-danger",children:n("topic.move_out")})},"move")})]})]})]})})]},e.short_id))}):(0,s.jsx)(R,{topic:r,onCallback:a,canEdit:t})}),(0,s.jsx)(b.R,{isOpen:J,onClose:Q,hideCloseButton:!0,children:(0,s.jsxs)(w.A,{children:[(0,s.jsx)(y.k,{children:n("topic.remove_topic")}),(0,s.jsx)(k.I,{children:n("topic.revisit_post")}),(0,s.jsxs)(N.R,{children:[(0,s.jsx)(p.A,{onPress:Q,children:n("cancel")}),(0,s.jsx)(p.A,{autoFocus:!0,color:"danger",onPress:es,isLoading:$,ref:H,children:n("confirm")})]})]})}),(0,s.jsx)(L,{isOpen:ee,onClose:er,onSelected:ei})]})},$=r(17240),q=e=>{let{topic:t,fetchData:r}=e,i=(0,d.ZP)(e=>e.userInfo),a=(0,d.ZP)(e=>e.isLogin),{clean:n}=V(),l=(0,c.useMemo)(()=>{var e,r;if(!t)return!1;let s=t.uid;return a?s==i.uid||s===(null===(r=i.user_org_member)||void 0===r?void 0:null===(e=r.org_member)||void 0===e?void 0:e.member_id):s==u.Z.get("visitor_id")},[a,t]);return(0,c.useEffect)(()=>()=>{n()},[]),(0,s.jsxs)("section",{className:"space-y-12",children:[(0,s.jsx)($.Z,{className:"mb-14",autoFocus:!0,topicId:t.short_id,isFresh:!0,isMyTopic:l,needLogin:!0}),(0,s.jsx)(X,{canEdit:l,topic:t,fetchData:r})]})},K=r(62500),G=r(25794),H=r(31063),J=r(60161),Y=r(17436),Q=function(e){let{topic:t}=e,r=(0,d.ZP)(e=>e.isLogin),[s,i]=(0,c.useState)((null==t?void 0:t.name)||""),[a,n]=(0,c.useState)(!1),l=(0,c.useMemo)(()=>{if(!t||!r)return!1;let{userInfo:e}=d.ZP.getState();return t.uid==e.uid},[r,t]);(0,c.useEffect)(()=>{(null==t?void 0:t.name)&&i(t.name)},[t]);let o=async()=>{if(t)try{try{let e=await (0,D.Cn)({topicId:t.short_id,name:s,description:(null==t?void 0:t.description)||"",instruction:(null==t?void 0:t.instruction)||"",icon:(null==t?void 0:t.icon)||""});e?(i(s),Y.Z.getState().updateItem(e)):C.Z.error("Failed to update topic title")}catch(e){C.Z.error("An error occurred while updating the title"),console.error("Error updating topic title:",e)}finally{n(!1)}}catch(e){}};return{canEdit:l,updateTitle:s,setUpdateTitle:i,isEditMode:a,setIsEditMode:n,onSave:o}},ee=r(91165),et=r(64862),er=r(68644),es=r(36336),ei=r(19073),ea=r(29871),en=r(70017),el=r(60635),eo=r(77844),ec=r(52766),ed=r(14386),eu=r(69082),eh=r(59167),em=r(8924),ep=r(9369),ef=r(84706),ex=r(41650);let eg=(0,ex.Z)("circle-minus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);var ev=r(25568),e_=r(4590),ej=r(70262),eb=e=>{let{file:t,handleDeleteFile:r,handleForeverDeleteFile:i,deletingFiles:a,canEdit:n,isModal:o,onFileClick:c}=e,d=(0,l.useTranslations)(),{isMobile:u}=(0,ea.Z)();return(0,s.jsx)("div",{className:(0,M.cn)("relative border-gray-200 rounded dark:border-[#545D6F] hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors overflow-hidden",o?"border-b":"rounded-lg"),children:(0,s.jsxs)("div",{className:"flex items-center h-10",children:[(0,s.jsxs)("div",{className:"flex items-center flex-1",children:[(0,s.jsx)("div",{className:"w-6 h-6 flex items-center justify-center mr-2",children:(e=>{var t;switch((null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase())||""){case"pdf":return(0,s.jsx)(ev.X,{className:"w-8 h-8"});case"doc":return(0,s.jsx)(ev.LV,{className:"w-8 h-8"});case"docx":return(0,s.jsx)(ev.h_,{className:"w-8 h-8"});case"txt":return(0,s.jsx)(ev.Ot,{className:"w-8 h-8"});case"xls":return(0,s.jsx)(ev.MA,{className:"w-8 h-8"});case"xlsx":return(0,s.jsx)(ev.um,{className:"w-8 h-8"});default:return(0,s.jsx)(ev.vU,{className:"w-8 h-8"})}})(t.title)}),(0,s.jsx)("div",{className:(0,M.cn)("font-medium line-clamp-1 text-sm text-[#30394A] dark:text-[#FFFFFF]",o?"w-[220px]":"break-all",(0,ej.Af)(c,t.status)?"cursor-pointer hover:text-[#0080FF] dark:hover:text-[#0694FF]":""),onClick:()=>{(0,ej.Af)(c,t.status)&&c(t)},children:t.title}),"completed"===t.status&&o&&(0,s.jsxs)("div",{className:"flex items-center gap-2 ml-2 dark:text-[#D0D4DC]",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400 dark:text-[#D0D4DC] whitespace-nowrap",children:t.size}),(0,s.jsx)("div",{className:"text-sm text-gray-400 dark:text-[#D0D4DC] whitespace-nowrap",children:d("topic.file_manager.unit.page",{count:t.pages})})]}),(0,s.jsxs)("span",{className:(0,M.cn)("text-sm whitespace-nowrap ml-2","error"===t.status?"text-danger":"text-[#0080FF]"),children:["uploading"===t.status&&d("topic.file_manager.status.uploading",{progress:Math.round(t.progress)}),"analyzing"===t.status&&d("topic.file_manager.status.analyzing",{progress:Math.round(t.progress)}),"completed"===t.status&&(0,s.jsx)(s.Fragment,{}),"error"===t.status&&d("topic.file_manager.status.failed")]})]}),o&&!u&&(0,s.jsx)("div",{className:"w-[200px] text-[#5F7698] dark:text-[#D0D4DC] text-sm text-gray-400",children:(0,e_.h5)(t.modified_at)}),(0,s.jsx)("div",{className:(0,M.cn)("flex items-center",o?"w-[100px]":"ml-auto"),children:n&&(0,s.jsxs)(g.F,{className:"p-0",children:[(0,s.jsx)(v.S,{children:(0,s.jsx)(p.A,{className:"dark:text-gray-500 my-1",size:"sm",variant:"light",isIconOnly:!0,children:(0,s.jsx)(W.xt,{className:"dark:text-[#ffffff]"})})}),(0,s.jsxs)(_.a,{"aria-label":"More options",style:{pointerEvents:"auto"},className:"dark:bg-[#353B46] p-2 rounded-lg",children:[(0,s.jsx)(j.W,{onPress:()=>{var e;return r((null===(e=t.attributes)||void 0===e?void 0:e.drive_file_id)||"")},startContent:(0,s.jsx)(eg,{className:"w-4 h-4 text-[#30394A] dark:text-[#FFFFFF]"}),children:(0,s.jsx)("div",{className:"text-[#30394A] dark:text-[#FFFFFF]",children:d("topic.move_out")})},"move"),"error"===t.status?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(j.W,{onPress:()=>i(t),startContent:(0,s.jsx)(S.Z,{size:16,className:"text-danger"}),children:(0,s.jsx)("div",{className:"text-danger",children:d("drive.delete_forever")})},"moveForever")]})]})})]})})},ew=r(8096),ey=r(80626);let ek=e=>{let t=null;if(e)try{return e.startsWith("http")||(e="https://".concat(e)),(!(t=new URL(e)).pathname||"/"===t.pathname)&&!t.search&&!t.hash}catch(e){console.warn("parse url failed: ".concat(e))}return!1};var eN=e=>{let{link:t,handleDelete:r,deletingLinks:i,canEdit:a,isModal:n}=e,o=(0,l.useTranslations)(),{isMobile:c}=(0,ea.Z)();return(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)("div",{className:(0,M.cn)("relative border-gray-200 rounded dark:border-[#545D6F] hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors overflow-hidden",n?"border-b":"rounded-lg"),children:(0,s.jsxs)("div",{className:"w-full flex items-center h-10",children:[(0,s.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,s.jsx)("div",{className:"flex-none dark:text-[#FFFFFF]",children:ek(t.url)?(0,s.jsx)(ew.Z,{size:20}):(0,s.jsx)(ey.Z,{size:20})}),(0,s.jsx)("div",{className:"flex items-center overflow-hidden cursor-pointer",children:(0,s.jsx)("div",{onClick:()=>{let e=t.url.includes("http")?t.url:"https://".concat(t.url);window.open(e,"_blank")},className:"text-sm text-[#30394A] line-clamp-1 text-[#30394A] dark:text-[#FFFFFF]",style:{wordBreak:"break-word"},children:t.url})})]}),n&&!c&&(0,s.jsx)("div",{className:"w-[200px] text-sm text-[#5F7698] dark:text-[#D0D4DC]",children:(0,e_.h5)(t.modified_at)}),(0,s.jsxs)("div",{className:(0,M.cn)("flex items-center",n?"w-[100px]":"ml-auto"),children:[a&&n&&(0,s.jsx)(p.A,{isIconOnly:!0,variant:"light",className:"text-[#30394A] hover:text-danger dark:text-[#D0D4DC] ",onPress:()=>r(t.id),isLoading:i.includes(t.id),children:(0,s.jsx)(S.Z,{size:16})}),a&&!n&&(0,s.jsxs)(g.F,{children:[(0,s.jsx)(v.S,{children:(0,s.jsx)(p.A,{className:"dark:text-gray-500 my-1 ml-auto",size:"sm",variant:"light",isIconOnly:!0,children:(0,s.jsx)(W.xt,{className:"dark:text-[#ffffff]"})})}),(0,s.jsx)(_.a,{"aria-label":"More options",children:(0,s.jsx)(j.W,{onPress:()=>r(t.id),startContent:(0,s.jsx)(S.Z,{size:16,className:"text-danger"}),children:(0,s.jsx)("div",{className:"text-danger",children:o("topic.move_out")})},"move")})]})]})]})})},t.id)},eF=r(65105),eS=r(61258),eP=r(29847),eD=r(43378),eC=r(64412),eT=r(5588),eE=r(63998),eZ=r(62421),ez=e=>{let{totalPages:t,currentPage:r,handlePageChange:i}=e;return(0,s.jsx)(s.Fragment,{children:t>0&&(0,s.jsx)("div",{className:"mx-auto  mt-8 w-full relative",children:(0,s.jsx)(eZ.tl,{className:"flex justify-end w-full box-border ",children:(0,s.jsxs)(eZ.ng,{children:[(0,s.jsx)(eZ.nt,{className:"cursor-pointer",children:(0,s.jsx)(eZ.dN,{onClick:()=>r>1&&i(r-1),className:1===r?"pointer-events-none opacity-50":"hover:dark:bg-[#353B46]"})}),(()=>{let e=[],a=Math.max(1,r-Math.floor(2.5)),n=Math.min(t,a+5-1);n-a+1<5&&t>=5&&(a=Math.max(1,n-5+1)),a>1&&(e.push((0,s.jsx)(eZ.nt,{className:"cursor-pointer",children:(0,s.jsx)(eZ.kN,{className:"hover:dark:bg-[#353B46]",onClick:()=>i(1),children:"1"})},1)),a>2&&e.push((0,s.jsx)(eZ.nt,{children:(0,s.jsx)("span",{className:"px-4",children:"..."})},"ellipsis1")));for(let t=a;t<=n;t++)e.push((0,s.jsx)(eZ.nt,{className:"cursor-pointer",children:(0,s.jsx)(eZ.kN,{className:"".concat(r===t?"dark:bg-[#353B46]":""," hover:dark:bg-[#353B46]"),onClick:()=>i(t),isActive:r===t,children:t})},t));return n<t&&(n<t-1&&e.push((0,s.jsx)(eZ.nt,{children:(0,s.jsx)("span",{className:"px-4",children:"..."})},"ellipsis2")),e.push((0,s.jsx)(eZ.nt,{children:(0,s.jsx)(eZ.kN,{className:"hover:dark:bg-[#353B46] cursor-pointer",onClick:()=>i(t),children:t})},t))),e})(),(0,s.jsx)(eZ.nt,{className:"cursor-pointer",children:(0,s.jsx)(eZ.$0,{onClick:()=>r<t&&i(r+1),className:r===t?"pointer-events-none opacity-50 ":"hover:dark:bg-[#353B46]"})})]})})})})},eM=e=>{let{maxFileCount:t,currentFileCount:r,showLibrary:i,setShowLibrary:a,importFileList:n}=e,o=(0,l.useTranslations)(),{isMobile:d}=(0,ea.Z)(),[u,h]=(0,c.useState)(1),[f,x]=(0,c.useState)(1),[g,v]=(0,c.useState)([]),[_,j]=(0,c.useState)(!0),[b,w]=(0,c.useState)(""),[y,k]=(0,c.useState)([]);(0,c.useEffect)(()=>{N(u)},[u,b]),(0,c.useEffect)(()=>{i||(k([]),h(1))},[i]);let N=async e=>{j(!0);try{let t=await (0,eE.AN)({page_size:50,page_current:e,search_words:b,type_list:["DOCX","DOC","PDF","TXT"]});200===t.status&&(v(t.data.data),x(Math.ceil(t.data.total/50)))}catch(e){console.error("Failed to fetch drive list:",e)}finally{j(!1)}},F=e=>{k(t=>t.some(t=>t.drive_file_id===e.drive_file_id)?t.filter(t=>t.drive_file_id!==e.drive_file_id):[...t,e])};return(0,s.jsx)(eD.Vq,{open:i,onOpenChange:a,children:(0,s.jsxs)(eD.cZ,{className:"max-w-2xl dark:bg-[#454E5D] ",onKeyDown:e=>{("/"===e.key||"、"===e.key)&&e.stopPropagation()},onOpenAutoFocus:e=>e.preventDefault(),children:[(0,s.jsx)(eD.fK,{children:(0,s.jsx)(eD.$N,{children:o("drive.import_file")})}),(0,s.jsxs)(eD.a7,{className:"space-y-4 h-[50vh] mt-0 pt-0",children:[(0,s.jsxs)("p",{className:"text-xs text-[#4B5F7E] mt-1 dark:text-[#F3F5F7]",children:[o("topic.file_manager.upload_limit_hint",{count:t,size:25,pages:500}),(0,s.jsxs)("span",{className:"text-primary",children:["(",r,"/",t,")"]})]}),(0,s.jsx)(eT.I,{placeholder:o("drive.placeholder_input"),onChange:e=>w(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(h(1),N(1))},value:b,className:"dark:bg-[#202531]"}),(0,s.jsxs)("div",{className:"border border-[#EBEEF3] dark:border-[#545D6F] rounded-xl p-4",children:[(0,s.jsxs)("div",{className:"flex border-b border-[#EBEEF3] dark:border-[#545D6F] pb-2  items-center text-sm text-[#5F7698] dark:text-[#D0D4DC]",children:[(0,s.jsx)("div",{className:"flex-[3]",children:o("drive.name")}),!d&&(0,s.jsx)("div",{className:"flex-[2]",children:o("drive.lastUpdated")}),(0,s.jsx)("div",{className:"flex-[1] text-center",children:o("ppt.control_title")})]}),(0,s.jsx)("div",{className:"list overflow-y-auto text-sm max-h-[30vh] custom-scrollbar",children:_?(0,s.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,s.jsx)(m.c,{})}):g.map(e=>(0,s.jsxs)("div",{className:" h-[64px] text-sm text-[#30394A] dark:text-[#fff] w-full flex justify-between items-center box-border border-b border-gray-200 dark:border-[#545D6F]",children:[(0,s.jsx)("div",{className:"flex-[3] min-w-0 pr-5",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(eC.Q,{fileName:(0,e_.JB)(e.file_type),w:6,h:6}),(0,s.jsx)("div",{className:"truncate max-w-[240px]",title:e.file_name,children:e.file_name})]})}),!d&&(0,s.jsx)("div",{className:"flex-[2] text-[#5F7698] dark:text-[#D0D4DC]",children:(0,e_.h5)(e.last_modified)}),(0,s.jsx)("div",{className:"flex-1 text-center",children:(0,s.jsx)(Z.K,{type:"checkbox",classNames:{wrapper:"dark:bg-[#353B46]"},isSelected:y.some(t=>t.drive_file_id===e.drive_file_id),onChange:()=>F(e)})})]},e.drive_file_id))})]}),(0,s.jsx)(ez,{totalPages:f,currentPage:u,handlePageChange:e=>{h(e)}})]}),(0,s.jsxs)(eD.cN,{className:"mt-6 flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-300",children:o("drive.select_file_counts",{count:y.length})}),(0,s.jsx)(p.A,{color:"primary",isDisabled:0===y.length||y.length+r>t,onClick:()=>{a(!1),n(y),k([])},children:o("drive.import")})]})]})})},eI=r(17224),eA=r(15133),eL=r(86968),eO=r(64155),eR=e=>{let{topic:t,handleDeleteFile:r,handleForeverDeleteFile:i,deletingFiles:a,canEdit:n,MAX_FILE_COUNT:o,MAX_FILE_COUNT_PRO:d,initData:u,onFileClick:h}=e,m=(0,l.useTranslations)();(0,eF.WI)();let{file:f,setFile:x}=V(),{isMobile:g}=(0,ea.Z)(),v=(0,eI.useRouter)(),[_,j]=(0,c.useState)(!1),[b,w]=(0,c.useState)(!1),y=(0,c.useRef)(null);(0,c.useRef)(0);let[k,N]=(0,c.useState)(!1),[F,S]=(0,c.useState)(!1),[P,T]=(0,c.useState)(1),E=(0,c.useMemo)(()=>Math.ceil(f.length/10),[f.length,10]),Z=(0,c.useMemo)(()=>f.slice((P-1)*10,10*P),[f,P,10]),z=(0,c.useMemo)(()=>f.length>=o,[f,o]),I=(0,c.useCallback)(()=>f.some(e=>"uploading"===e.status||"analyzing"===e.status),[f]);(0,c.useEffect)(()=>{let e=e=>{if(I()&&v.asPath.includes(t.short_id)){let t=m("topic.file_manager.leave_warning");return e.preventDefault(),e.returnValue=t,t}},r=()=>{if(I()&&!window.confirm(m("topic.file_manager.leave_warning"))){v.replace(v.asPath);return}};return window.addEventListener("beforeunload",e),window.addEventListener("popstate",r),()=>{window.removeEventListener("beforeunload",e),window.removeEventListener("popstate",r)}},[I,m]);let A=e=>["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain"].includes(e.type)?e.size>26214400?(C.Z.error(m("topic.error_file_size_exceeded",{size:25})),!1):!z||(C.Z.error(m("topic.error_max_files_exceeded",{count:o})),!1):(C.Z.error(m("topic.error_file_type_not_supported")),!1),L=(e,t)=>{let r=0,s=setInterval(()=>{r+=1.9*Math.random()+.1,x(V.getState().file.map(s=>s.id===e?{...s,progress:Math.min(r,95),status:t||"analyzing"}:s)),r>=95&&clearInterval(s)},800);return s},O=async e=>{if(e.length+f.length>o){C.Z.error(m("topic.error_max_files_exceeded",{count:o}));return}if(z||_)return;j(!0);let r=new Map;for(let[s,i]of Array.from(e).entries()){new FormData().append("file",i);let e=(0,eO.Z)();if(!A(i)){j(!1);continue}(0,H.fk)(J.U.TOPIC_UPLOAD_FILES,{topicId:t.short_id,fileName:i.name},!0),x([{id:e,title:i.name,size:(0,ej.sS)(i.size),token:0,pages:0,progress:0,status:"uploading",type:i.type,created_at:new Date().toISOString(),modified_at:new Date().toISOString(),attributes:{drive_file_id:e||""}},...V.getState().file]);let s=L(e,"uploading");try{r.set(i.name,!0),(0,D.Vj)({topicId:t.short_id,file:i,onProgress:t=>{if(!r.has(t.file_id)){clearInterval(s);let a=V.getState().file;x(a.map(r=>r.id===e?{...r,id:t.file_id,attributes:{drive_file_id:t.file_id||""}}:r)),e=t.file_id;let n=L(e);r.set(e,n),r.delete(i.name)}},onDone:s=>{r.has(e)&&(clearInterval(r.get(e)),r.delete(e),0===r.size&&j(!1));let i=V.getState().file;x(i.map(t=>t.id===e?{...t,progress:100,status:"completed"}:t)),(0,D.WY)({topicId:t.short_id,file_id:e}).then(t=>{t?x(V.getState().file.map(r=>{var i;return r.id===e?{...r,id:t.id,token:t.token_count,pages:(null===(i=t.attributes)||void 0===i?void 0:i.page_count)||0,progress:100,status:"completed",attributes:{...t.attributes,drive_file_id:(null==s?void 0:s.driveFileId)||""}}:r})):x(i.map(t=>t.id===e?{...t,progress:100,status:"error"}:t))})},onError:()=>{C.Z.error(m("server.INTERNAL_SERVER_ERROR")),r.delete(i.name),0===r.size&&j(!1);let t=V.getState().file;x(t.map(t=>t.id===e?{...t,progress:100,status:"error"}:t))}})}catch(e){j(!1)}S(!1)}},R=async e=>{if(z||_)return;if(e.length+f.length>o){C.Z.error(m("topic.error_max_files_exceeded",{count:o}));return}j(!0);let r=new Map;for(let s of e){let e="";(0,H.fk)(J.U.TOPIC_BIND_DRIVE_FILES,{topicId:t.short_id,fileName:s.file_name},!0);try{r.set(s.file_name,!0),(0,D.mX)({topicId:t.short_id,driveFileId:s.drive_file_id,onProgress:t=>{if(e||(e=t.file_id),!r.has(e)){let t=[{id:e,title:s.file_name,size:"--",token:0,pages:0,progress:0,status:"uploading",type:(0,ej.ex)(s.file_name),created_at:new Date().toISOString(),modified_at:new Date().toISOString()}],i=V.getState().file;x([...t,...i]);let a=L(e);r.set(e,a),r.delete(s.file_name)}},onDone:s=>{r.has(e)&&(clearInterval(r.get(e)),r.delete(e),0===r.size&&j(!1));let i=V.getState().file;x(i.map(t=>t.id===e?{...t,progress:100,status:"completed"}:t)),(0,D.WY)({topicId:t.short_id,file_id:e||""}).then(t=>{t?x(V.getState().file.map(r=>{var i;return r.id===e?{...r,id:t.id,token:t.token_count,size:(0,ej.sS)(t.attributes.file_size||0),pages:(null===(i=t.attributes)||void 0===i?void 0:i.page_count)||0,progress:100,status:"completed",attributes:{...t.attributes,drive_file_id:(null==s?void 0:s.driveFileId)||""}}:r})):x(i.map(t=>t.id===e?{...t,progress:100,status:"error"}:t))})},onError:()=>{C.Z.error(m("server.INTERNAL_SERVER_ERROR")),r.delete(s.file_name),0===r.size&&j(!1);let t=V.getState().file;x(t.map(t=>t.id===e?{...t,progress:100,status:"error"}:t))}})}catch(e){j(!1)}}S(!1)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"w-full h-full space-y-4 flex flex-col",children:[(0,s.jsxs)("div",{className:(0,M.cn)("flex items-center ",g?"mt-3":"mt-[-52px] ml-auto"),children:[!g&&(0,s.jsxs)(p.A,{className:"flex bg-transparent border border-[#0080FF] text-[#0080FF] dark:border-[#0694FF] dark:text-[#0694FF] items-center gap-2 h-[36px] px-3",onClick:()=>N(!0),children:[(0,s.jsx)(eA.Z,{className:"w-4 h-4"}),m("drive.library_import")]}),(0,s.jsx)("input",{type:"file",ref:y,className:"hidden",multiple:!0,accept:".pdf,.doc,.docx,.txt,.xls,.xlsx,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",onChange:e=>{let{files:t}=e.target;t&&O(t),e.target.value=""}}),(0,s.jsxs)(p.A,{className:"bg-transparent border border-[#0080FF] text-[#0080FF] dark:border-[#0694FF] dark:text-[#0694FF] flex items-center gap-2 ml-2 h-[36px] px-3",onClick:()=>{var e;null===(e=y.current)||void 0===e||e.click()},children:[(0,s.jsx)(eL.Z,{className:"w-4 h-4"}),m("topic.file_manager.upload_document")]})]}),(0,s.jsxs)("div",{className:"border-b text-[#5F7698] dark:text-[#D0D4DC] mt-3 text-sm border-gray-200 dark:border-[#545D6F] py-2 flex items-center",children:[(0,s.jsx)("div",{className:"flex-1",children:m("drive.name")}),!g&&(0,s.jsx)("div",{className:"w-[200px]",children:m("drive.lastUpdated")}),(0,s.jsx)("div",{className:"w-[100px]",children:m("ppt.control_title")})]}),0===f.length&&(0,s.jsx)("div",{className:"flex h-[30vh] items-center text-sm justify-center w-full",children:g?m("error.must_has_file"):m("topic.file_update_placeholder")}),(0,s.jsx)("div",{className:"space-y-2 flex-1 overflow-y-auto custom-scrollbar",children:Z.map(e=>(0,s.jsx)(eb,{file:e,handleDeleteFile:()=>r(e),handleForeverDeleteFile:i,deletingFiles:a,canEdit:n,isModal:!0,onFileClick:h},e.id))}),(0,s.jsx)(ez,{totalPages:E,currentPage:P,handlePageChange:e=>{T(e)}}),(0,s.jsx)("div",{className:"flex items-center text-[#ACB9CD] dark:text-[#737F96] text-sm justify-center w-full",children:m("topic.file_update_description")})]}),(0,s.jsx)(eM,{setShowLibrary:N,showLibrary:k,maxFileCount:o,currentFileCount:f.length,importFileList:e=>{R(e)}})]})},eB=r(34379),eU=r(48958),eW=e=>{let{MAX_LINK_COUNT:t,topic:r,showLinkModal:i,setShowLinkModal:a}=e,n=(0,l.useTranslations)(),{isMobile:o}=(0,ea.Z)(),{website:d,setWebsite:u}=V(),[h,m]=(0,c.useState)(null),[f,x]=(0,c.useState)(""),[g,v]=(0,c.useState)(!1),_=e=>{x(e),m(null)},j=e=>{if(!e.trim())return n("topic.error_input_url");if(e.includes("http")||(e="http://"+e),!e.includes(".")||/[^\x00-\x7F]/.test(e))return n("topic.error_input_correct_url");try{new URL(e);return}catch(e){return n("topic.error_input_correct_url")}},b=async e=>{try{let t=await (0,D.bg)({topicId:r.short_id,url:e});if(t)return t;return null}catch(e){throw Error(n("topic.error_fetch_link_info",{message:e.message}))}},w=async()=>{try{v(!0);try{var e;let t=null;!ek(f)&&((t=await b(f))||(t=null),t&&"detail"in t&&(t=null));let s=await (0,D.tN)({topicId:r.short_id,link:f,title:(null==t?void 0:t.title)||f,content:(null==t?void 0:t.snippet)||""});if(!s)return m(n("topic.error_create_link_failed",{value:f})),null;if(s&&"detail"in s){if("Resource already exists"===s.detail)return m(n("topic.link_exists")),null;return m(n("topic.error_create_link_failed",{value:f})),null}let i=[{id:s.id,title:s.title,content:(null===(e=s.attributes)||void 0===e?void 0:e.content)||"",url:f,token:s.token_count,created_at:s.created_at,modified_at:s.modified_at},...d].sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime());u(i),x(""),v(!1),a(!1)}catch(e){return m(n("topic.error_process_link_failed",{value:f})),v(!1),null}}catch(e){e instanceof Error?m(e.message):m(n("topic.error_unknown_error"))}finally{v(!1)}};return(0,s.jsx)(eD.Vq,{open:i,onOpenChange:a,children:(0,s.jsxs)(eD.cZ,{className:"max-w-2xl dark:bg-[#454E5D]",onKeyDown:e=>{("/"===e.key||"、"===e.key)&&e.stopPropagation()},onOpenAutoFocus:e=>e.preventDefault(),children:[(0,s.jsx)(eD.fK,{children:(0,s.jsx)(eD.$N,{children:n("topic.add_link")})}),(0,s.jsxs)(eD.a7,{className:"space-y-4 pt-0",children:[(0,s.jsx)("p",{className:"text-sm text-[#4B5F7E] mt-1 dark:text-[#F3F5F7]",children:n.rich("topic.summarize_web_content",{count:d.length,max:t,highlight:e=>(0,s.jsx)("span",{className:"text-[#0080FF] font-medium mx-1 dark:text-[#2F95FB]",children:e})})}),(0,s.jsx)(eU.Y,{variant:"bordered",className:"max-w-[622px]",autoFocus:!o,placeholder:n("topic.add_link_placeholder"),isInvalid:!!h,errorMessage:h,classNames:{errorMessage:"whitespace-normal break-words",base:"w-full h-auto",inputWrapper:"h-auto py-2.5 dark:bg-[#202531] border-[#ACB9CD] [&[data-focus=true]]:!border-[#ACB9CD] dark:border-[#545D6F] px-4 text-base [&[data-focus=true]]:!ring-0 dark:[&[data-focus=true]]:!border-[#545D6F]",input:"text-base"},value:f,size:"md",isDisabled:d.length===t,onChange:e=>_(e.target.value)}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 text-sm",children:[(0,s.jsx)("div",{className:"flex items-center text-sm gap-2 text-[#30394A] dark:text-[#ffffff]",children:n("topic.support_example")}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-[#5F7698] mt-2 dark:text-[#D0D4DC]",children:[(0,s.jsx)(O.Mc,{className:"w-5 h-5"}),n("topic.link_desc_1")]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-[#5F7698] dark:text-[#D0D4DC]",children:[(0,s.jsx)(O.Mc,{className:"w-5 h-5"}),n("topic.link_desc_2")]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-[#5F7698] dark:text-[#D0D4DC]",children:[(0,s.jsx)(O.Mc,{className:"w-5 h-5"}),n("topic.link_desc_3")]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-[#5F7698] dark:text-[#D0D4DC]",children:[(0,s.jsx)(O.Mc,{className:"w-5 h-5"}),n("topic.link_desc_4")]})]})]}),(0,s.jsx)(eD.cN,{className:"mt-0 pt-0 flex justify-between items-center",children:(0,s.jsx)(p.A,{color:"primary",className:"h-[36px] px-3",onClick:()=>{if(d.length>=t){m(n("topic.max_links",{count:t}));return}let e=j(f);if(e){m(e);return}m(null),w()},isLoading:g,isDisabled:d.length===t,children:n("topic.add_link")})})]})})},eV=e=>{let{topic:t,canEdit:r,MAX_LINK_COUNT:i,MAX_LINK_COUNT_PRO:a}=e,n=(0,l.useTranslations)(),{isMobile:o}=(0,ea.Z)(),{website:d,setWebsite:u}=V(),[h,m]=(0,c.useState)([]),[f,x]=(0,c.useState)(!1),g=(0,c.useRef)(null),[v,_]=(0,c.useState)(1),j=(0,c.useMemo)(()=>Math.ceil(d.length/10),[d.length,10]),b=(0,c.useMemo)(()=>d.slice((v-1)*10,10*v),[d,v,10]);(0,c.useEffect)(()=>{if(!t.short_id)return},[t]),(0,c.useEffect)(()=>{var e;null===(e=g.current)||void 0===e||e.focus()},[]);let w=async e=>{m(t=>[...t,e]);try{if(await (0,D.$x)(t.short_id,e)){let t=V.getState().website;u(t.filter(t=>t.id!==e))}else C.Z.error(n("topic.error_delete_resource_failed"))}catch(e){C.Z.error(n("topic.error_delete_resource_failed"))}finally{m(t=>t.filter(t=>t!==e))}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"w-full h-full space-y-4 flex flex-col",children:[(0,s.jsx)("div",{className:(0,M.cn)("flex items-center ",o?"mt-3":"mt-[-52px] ml-auto"),children:(0,s.jsxs)(p.A,{className:"flex bg-transparent border border-[#0080FF] text-[#0080FF] dark:border-[#0694FF] dark:text-[#0694FF] items-center gap-2 h-[36px] px-3",onClick:()=>x(!0),children:[(0,s.jsx)(eB.Z,{className:"w-5 h-5"}),n("topic.add_link")]})}),(0,s.jsxs)("div",{className:"border-b mt-3 text-sm  text-[#5F7698] dark:text-[#D0D4DC] border-gray-200 dark:border-[#545D6F] py-2 flex items-center",children:[(0,s.jsx)("div",{className:"flex-1",children:n("drive.name")}),!o&&(0,s.jsx)("div",{className:"w-[200px]",children:n("drive.lastUpdated")}),(0,s.jsx)("div",{className:"w-[100px]",children:n("ppt.control_title")})]}),0===d.length&&(0,s.jsx)("div",{className:"flex h-[30vh] items-center text-sm justify-center w-full",children:n("topic.link_update_placeholder")}),(0,s.jsx)("div",{className:"flex-1 space-y-2 overflow-y-auto custom-scrollbar",children:b.map(e=>(0,s.jsx)(eN,{link:e,handleDelete:w,deletingLinks:h,canEdit:r,isModal:!0},e.id))}),(0,s.jsx)(ez,{totalPages:j,currentPage:v,handlePageChange:e=>{_(e)}})]}),(0,s.jsx)(eW,{MAX_LINK_COUNT:i,topic:t,showLinkModal:f,setShowLinkModal:x})]})};let eX=(0,ex.Z)("folders",[["path",{d:"M20 17a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3.9a2 2 0 0 1-1.69-.9l-.81-1.2a2 2 0 0 0-1.67-.9H8a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2Z",key:"4u7rpt"}],["path",{d:"M2 8v11a2 2 0 0 0 2 2h14",key:"1eicx1"}]]);var e$=e=>{let{topic:t,isModalOpen:r,closeModal:i,activeTab:a,setActiveTab:n,handleDeleteFile:o,handleForeverDeleteFile:c,deletingFiles:d,canEdit:u,MAX_FILE_COUNT:h,MAX_LINK_COUNT:m,MAX_FILE_COUNT_PRO:p,MAX_LINK_COUNT_PRO:f,initData:x,onFileClick:g}=e,v=(0,l.useTranslations)();return(0,s.jsx)(eD.Vq,{open:r,onOpenChange:i,children:(0,s.jsxs)(eD.cZ,{className:"max-w-3xl dark:bg-[#454E5D]",onKeyDown:e=>{("/"===e.key||"、"===e.key)&&e.stopPropagation()},onOpenAutoFocus:e=>e.preventDefault(),children:[(0,s.jsx)(eD.fK,{children:(0,s.jsx)(eD.$N,{children:v("topic.topic_source")})}),(0,s.jsxs)(eD.a7,{className:"space-y-4 h-[50vh]",children:[(0,s.jsxs)(eS.n,{"aria-label":"Options",selectedKey:a,onSelectionChange:e=>{n(e)},classNames:{tabList:"gap-6 w-full relative rounded-none p-0 border-b border-divider",cursor:"w-full text-primary",tab:"max-w-fit px-0",tabContent:"dark:text-[#D0D4DC] group-data-[selected=true]:text-primary"},color:"primary",variant:"underlined",children:[(0,s.jsx)(eP.r,{title:(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-base font-bold",children:[(0,s.jsx)(eX,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:v("topic.file")})]})},"file"),(0,s.jsx)(eP.r,{title:(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-base font-bold",children:[(0,s.jsx)(ey.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:v("topic.link")})]})},"link")]}),"file"===a&&(0,s.jsx)(eR,{topic:t,handleDeleteFile:e=>o(e),handleForeverDeleteFile:c,deletingFiles:d,canEdit:u,MAX_FILE_COUNT:h,MAX_FILE_COUNT_PRO:p,initData:x,onFileClick:g}),"link"===a&&(0,s.jsx)(eV,{topic:t,canEdit:u,MAX_LINK_COUNT:m,MAX_LINK_COUNT_PRO:f})]}),(0,s.jsx)(eD.cN,{className:"mt-6"})]})})},eq=r(72153),eK=r(52597),eG=r(47850),eH=e=>{let{topic:t,onUpdateTitle:r}=e,i=(0,l.useTranslations)(),[a,n]=(0,c.useState)(!1),{file:o,setFile:f,setInited:x,website:g,setWebsite:v,clean:_,setThread:j}=V(),b=(0,eF.P2)(),[w,y]=(0,c.useState)(new Set),[k,N]=(0,c.useState)([]),[F,S]=(0,c.useState)(!1),[P,T]=(0,c.useState)(!1),[E,Z]=(0,c.useState)(!1),z=(0,d.ZP)(e=>e.isLogin),I=(0,d.ZP)(e=>e.userInfo),[A,L]=(0,c.useState)(!0),{isOpen:R,onOpen:B,onClose:U}=(0,h.q)(),W=(0,eF.WI)();(0,eF.GT)();let[X,$]=(0,c.useState)(!1),[q,K]=(0,c.useState)(null),[G,H]=(0,c.useState)(!1),[J,Y]=(0,c.useState)(0),Q=(0,eF.ZP)(e=>e.isSearchOnlyProduct),[ee,et]=(0,c.useState)(!1),[er,es]=(0,c.useState)(),ei=(0,c.useMemo)(()=>{var e,r;if(!t)return!1;let s=t.uid;return z?s==I.uid||s===(null===(r=I.user_org_member)||void 0===r?void 0:null===(e=r.org_member)||void 0===e?void 0:e.member_id):s==u.Z.get("visitor_id")},[z,t]),ea=(0,c.useMemo)(()=>{var e;return(null==b?void 0:null===(e=b.topicFileUsage)||void 0===e?void 0:e.total)||0},[b]),en=(0,c.useMemo)(()=>W&&!Q?50:10,[W]),[el,eo]=(0,c.useState)("file"),ec=()=>{ef.$.publish("showSubscriptionPlan",void 0)},ed=e=>{eo(e),n(!0)},eu=async function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];H(!0),y(t=>new Set([...t,e]));try{let s=V.getState().file,a=s.find(t=>{var r;return(null===(r=t.attributes)||void 0===r?void 0:r.drive_file_id)===e});if(a&&(null==a?void 0:a.status)!=="completed"){f(s.filter(t=>{var r;return(null===(r=t.attributes)||void 0===r?void 0:r.drive_file_id)!==e}));return}(r?await (0,eE.Di)({drive_file_id:e}):await (0,eE.GD)({drive_file_id:e,object_id:t.short_id,type:"TOPIC"}))?f(s.filter(t=>{var r;return(null===(r=t.attributes)||void 0===r?void 0:r.drive_file_id)!==e})):C.Z.error(i("topic.error_delete_resource_failed"))}catch(e){C.Z.error(i("topic.error_delete_resource_failed"))}finally{$(!1),H(!1),y(t=>{let r=new Set(t);return r.delete(e),r})}},ex=async e=>{N(t=>[...t,e]);try{if(await (0,D.$x)(t.short_id,e)){let t=V.getState().website;v(t.filter(t=>t.id!==e))}else C.Z.error(i("topic.error_delete_resource_failed"))}catch(e){C.Z.error(i("topic.error_delete_resource_failed"))}finally{N(t=>t.filter(t=>t!==e))}},eg=(0,c.useCallback)(async()=>{try{if(Z(!0),(null==q?void 0:q.id)&&!G){var e;await eu((null==q?void 0:null===(e=q.attributes)||void 0===e?void 0:e.drive_file_id)||"",!0)}}finally{Z(!1)}},[q]),ev=async e=>{try{var t;let r=null===(t=e.attributes)||void 0===t?void 0:t.drive_file_id;if(!r){C.Z.error(i("topic.error_fetch_resources_failed"));return}let s=await (0,eE.aR)(r);if(s&&s.data){let t=s.data,r=(0,ej.ex)(e.title);et(!0),es({url:t,file_type:r})}else C.Z.error(i("topic.error_fetch_resources_failed"))}catch(e){console.error("Error previewing file:",e),C.Z.error(i("topic.error_fetch_resources_failed"))}},ew=async()=>{try{let e=await (0,D.TF)({topicId:t.short_id});if(!e)return;let r=e.items,s=r.filter(e=>"file"===e.resource_type).map(e=>({id:e.id,title:e.title,size:(0,ej.sS)(e.attributes.file_size||0),token:e.token_count,pages:e.attributes.page_count||0,progress:100,status:"completed",type:"",created_at:e.created_at,modified_at:e.modified_at,attributes:e.attributes}));f(s),x({...V.getState().inited,file:!0});let i=r.filter(e=>"website"===e.resource_type).map(e=>{var t;return{id:e.id,title:e.title,content:(null===(t=e.attributes)||void 0===t?void 0:t.content)||"",url:e.resource_key,token:e.token_count,created_at:e.created_at,modified_at:e.modified_at}});v(i),x({...V.getState().inited,website:!0});let a=r.filter(e=>"thread"===e.resource_type).map(e=>({...e,...e.attributes,token:e.token_count,short_id:e.resource_key,referenced_links:(0,e_.YY)(e.attributes.referenced_links,"link")}));j(a),x({...V.getState().inited,thread:!0}),L(!1),e.total>999&&(ey(),ek(),eS())}catch(e){C.Z.error(i("topic.error_fetch_resources_failed")),console.error("Failed to fetch topic resources:",e)}},ey=async e=>{try{let r=await (0,D.TF)({topicId:t.short_id,resource_type:"file",size:1e3,page:e});if(!r)return;let s=r.items.filter(e=>"file"===e.resource_type).map(e=>({id:e.id,title:e.title,size:(0,ej.sS)(e.attributes.file_size||0),token:e.token_count,pages:e.attributes.page_count||0,progress:100,status:"completed",type:"",created_at:e.created_at,modified_at:e.modified_at,attributes:e.attributes}));if(e&&e>1){let e=V.getState().file;f([...e,...s])}else f(s);Y(r.total)}catch(e){C.Z.error(i("topic.error_fetch_resources_failed")),console.error("Failed to fetch topic resources:",e)}},ek=async()=>{try{let e=await (0,D.TF)({topicId:t.short_id,resource_type:"website"});if(!e)return;let r=e.items.filter(e=>"website"===e.resource_type).map(e=>{var t;return{id:e.id,title:e.title,content:(null===(t=e.attributes)||void 0===t?void 0:t.content)||"",url:e.resource_key,token:e.token_count,created_at:e.created_at,modified_at:e.modified_at}});v(r)}catch(e){C.Z.error(i("topic.error_fetch_resources_failed")),console.error("Failed to fetch topic resources:",e)}},eS=async()=>{try{let e=await (0,D.TF)({topicId:t.short_id,resource_type:"thread"});if(!e)return;let r=e.items.filter(e=>"thread"===e.resource_type).map(e=>({...e,...e.attributes,token:e.token_count,short_id:e.resource_key,referenced_links:(0,e_.YY)(e.attributes.referenced_links,"link")}));j(r)}catch(e){C.Z.error(i("topic.error_fetch_resources_failed")),console.error("Failed to fetch topic resources:",e)}};(0,c.useEffect)(()=>{J>1e3&&ey(2)},[J]);let eP=(0,c.useMemo)(()=>t.short_id,[t.short_id]);(0,c.useEffect)(()=>{_(),x({file:!1,website:!1,thread:!1}),t.short_id&&ew()},[eP]);let eC=e=>{let{className:t,canEdit:r,isIconOnly:a}=e;return r&&(a?(0,s.jsx)(p.A,{color:"primary",isIconOnly:!0,size:"sm",className:(0,M.cn)(t,"bg-[#EBEEF3] dark:bg-[#454E5D]"),variant:"light",radius:"full",onPress:()=>ed("file"),children:(0,s.jsx)(eh.Z,{size:20,className:"text-theme-font-600 dark:text-[#ffffff]"})}):(0,s.jsx)(p.A,{color:"primary",radius:"md",size:"lg",className:t,variant:"light",startContent:(0,s.jsx)(O.GB,{className:"w-6 h-6"}),onPress:()=>ed("file"),children:i("topic.select_file")}))},eT=e=>{let{className:t,canEdit:r,isIconOnly:a}=e;return r&&(a?(0,s.jsx)(p.A,{color:"primary",isIconOnly:!0,size:"sm",className:(0,M.cn)(t,"bg-[#EBEEF3] dark:bg-[#454E5D]"),variant:"light",radius:"full",onPress:()=>ed("link"),children:(0,s.jsx)(eh.Z,{size:20,className:"text-theme-font-600 dark:text-[#ffffff]"})}):(0,s.jsx)(p.A,{size:"lg",color:"primary",radius:"md",className:t,variant:"light",startContent:(0,s.jsx)(O.GB,{className:"w-6 h-6"}),onPress:()=>ed("link"),children:i("topic.select_link")}))},eZ="text-sm py-2 rounded-xl";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("section",{className:(0,M.cn)("sticky top-[97px]","rounded-2xl flex flex-col","border","transition-all duration-300","lg:w-[400px]"),children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("h2",{className:"font-medium",children:i("topic.knowledge_source")}),ei]}),ei&&(0,s.jsx)(p.A,{size:"sm",variant:"light",isIconOnly:!0,className:"dark:text-[#ffffff]",onClick:B,children:(0,s.jsx)(O.M_,{className:"dark:text-[#ffffff]"})})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:(0,M.cn)("inset-0 px-4 py-2 mb-4 ","transition-opacity duration-200 flex flex-col gap-2"),children:[(0,s.jsxs)("div",{className:"text dark:text-gray-400 flex items-center",children:[(0,s.jsx)("div",{className:"text-theme-font-600 cursor-pointer mr-2 dark:text-[#ffffff] hover:bg-gray-300 hover:dark:bg-gray-600 rounded",onClick:()=>S(!F),children:F?(0,s.jsx)(em.Z,{size:20}):(0,s.jsx)(ep.Z,{size:20})}),(0,s.jsx)("div",{className:"dark:text-[#ffffff]",children:i("topic.file")}),(0,s.jsxs)("span",{className:"ml-2 dark:text-[#ffffff]",children:[o.length," ",ei&&"/".concat(ea)]}),o.length>0&&(0,s.jsx)(eC,{className:"ml-auto text-base",canEdit:ei,isIconOnly:!0})]}),(0,s.jsxs)("div",{className:"mb-4 ".concat(eZ," ").concat(F?"hidden":""," max-h-64 overflow-y-auto custom-scrollbar"),children:[A&&(0,s.jsx)("div",{className:"flex items-center justify-center h-full w-full dark:text-[#ffffff]",children:(0,s.jsx)(m.c,{label:i("topic.loading"),size:"sm"})}),0===o.length&&!A&&(0,s.jsxs)("div",{className:"text-gray-400 text-sm dark:text-[#ffffff] flex flex-col items-center py-8 gap-2 justify-center",children:[i("topic.no_file_selected"),(0,s.jsx)(eC,{canEdit:ei})]}),o.length>0&&(0,s.jsx)("div",{className:"space-y-2 ",children:o.map(e=>(0,s.jsx)(eb,{file:e,handleDeleteFile:()=>{var t;return eu((null===(t=e.attributes)||void 0===t?void 0:t.drive_file_id)||"")},deletingFiles:w,canEdit:ei,handleForeverDeleteFile:e=>{$(!0),K(e)},onFileClick:ev},e.id))})]}),(0,s.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700"}),(0,s.jsxs)("div",{className:"text dark:text-gray-400 flex items-center mt-4 dark:text-[#ffffff]",children:[(0,s.jsx)("div",{className:"text-theme-font-600 dark:text-[#ffffff] cursor-pointer mr-2 dark:text-theme-font-dark-600 hover:bg-gray-300 hover:dark:bg-gray-600 rounded",onClick:()=>T(!P),children:P?(0,s.jsx)(em.Z,{size:16}):(0,s.jsx)(ep.Z,{size:16})}),(0,s.jsx)("div",{className:"dark:text-[#ffffff]",children:i("topic.link")}),(0,s.jsxs)("span",{className:"ml-2 dark:text-[#ffffff]",children:[g.length," ",ei&&"/".concat(en)]}),g.length>0&&(0,s.jsx)(eT,{className:"ml-auto",canEdit:ei,isIconOnly:!0})]}),(0,s.jsxs)("div",{className:"mb-4 ".concat(eZ,"  ").concat(P?"hidden":""," max-h-64 overflow-y-auto custom-scrollbar"),children:[A&&(0,s.jsx)("div",{className:"flex items-center justify-center h-full w-full",children:(0,s.jsx)(m.c,{label:i("topic.loading"),size:"sm"})}),0===g.length&&!A&&(0,s.jsxs)("div",{className:"text-gray-400 text-sm flex flex-col py-8 items-center gap-2 justify-center",children:[i("topic.no_link_selected"),(0,s.jsx)(eT,{canEdit:ei})]}),g.length>0&&(0,s.jsx)("div",{className:"space-y-2  overflow-y-auto",children:g.map(e=>(0,s.jsx)(eN,{link:e,handleDelete:ex,deletingLinks:k,canEdit:ei},e.id))})]}),!W&&(g.length===en||5===o.length)&&(0,s.jsxs)("button",{className:"bg-gradient-to-r from-[#CBE5FF] flex items-center justify-center to-[#E2E0FF] py-4 px-8 rounded-full text-[#0080FF] font-medium",onClick:e=>{e.preventDefault(),ec()},children:[(0,s.jsx)("span",{className:"mr-2",children:"\uD83D\uDE80"}),i("subscription.upgrade_to_pro"),(0,s.jsx)(eK.u3,{className:"w-4 h-4 ml-2"})]})]})})]}),(0,s.jsx)(e$,{isModalOpen:a,closeModal:()=>{n(!1)},activeTab:el,setActiveTab:eo,topic:t,handleDeleteFile:e=>{var t;return eu((null===(t=e.attributes)||void 0===t?void 0:t.drive_file_id)||"")},handleForeverDeleteFile:e=>{$(!0),K(e)},deletingFiles:w,canEdit:ei,MAX_FILE_COUNT:ea,MAX_LINK_COUNT:en,MAX_FILE_COUNT_PRO:50,MAX_LINK_COUNT_PRO:50,initData:ew,onFileClick:ev}),(0,s.jsx)(eq.Z,{mode:"edit",topic:t,isOpen:R,onClose:U,onEditSuccess:e=>{null==r||r(e.name)}}),(0,s.jsx)(eD.Vq,{open:X,onOpenChange:$,children:(0,s.jsxs)(eD.cZ,{children:[(0,s.jsxs)(eD.fK,{children:[(0,s.jsx)(eD.$N,{children:i("drive.deleteConfirmTitle")}),(0,s.jsx)(eD.Be,{children:i("drive.deleteConfirmDescription")})]}),(0,s.jsxs)(eD.cN,{children:[(0,s.jsx)(p.A,{onClick:()=>$(!1),children:i("cancel")}),(0,s.jsx)(p.A,{className:"bg-[#D14625] hover:bg-[#df8768] text-[#fff]",onClick:eg,isDisabled:G,isLoading:E,children:i("drive.delete")})]})]})}),(0,s.jsx)(eD.Vq,{open:ee,onOpenChange:et,children:(0,s.jsxs)(eD.cZ,{className:"max-w-[90vw] overflow-auto",children:[(0,s.jsx)(eD.fK,{children:(0,s.jsx)(eD.$N,{children:i("ppt.preivew_ppt_btn_new")})}),(0,s.jsx)("div",{className:"w-full h-[90vh]",children:(0,s.jsx)(eG.Z,{file_url:(null==er?void 0:er.url)||"",file_type:null==er?void 0:er.file_type})}),(0,s.jsx)(eD.cN,{})]})})]})},eJ=r(72696),eY=r(25010),eQ=r(80194),e0=r(39109),e1=r(94572),e2=r(43046),e4=r(64105),e6=!0,e5=e=>{var t,r,i,u,h,m,p,f;let{topic:x,url:g}=e;console.log("\uD83D\uDE80 ~ TopicPage ~ ssrTopic:",x);let v=(0,l.useTranslations)(),_=(0,l.useLocale)(),j=(0,e0.Z)(),b=(0,eI.useRouter)(),{isMobile:w}=(0,ea.Z)();(0,en.V)();let{getList:y}=(0,Y.Z)(),k=(null==x?void 0:x.name)||v("page_title"),N=v("topicDescription").slice(0,160),F=(0,d.ZP)(e=>e.userInfo),S=(0,d.c0)(),P=(0,d.gQ)(),[C,T]=(0,c.useState)(x),[E,Z]=(0,c.useState)(null),[z,I]=(0,c.useState)(!1),[A,L]=(0,c.useState)(!1),[O,R]=(0,c.useState)(!1),[B,U]=(0,c.useState)({title:v("topic.add_enterprise_share_title"),desc:v("topic.add_enterprise_share_desc"),submitText:v("topic.add_enterprise_share_confirm_btn"),onSubmit:async()=>{}}),{shareTopicStatus:V,setShowTopicModel:X,setShareTopicId:$,setTopicDetail:eh,setIsSelfTopic:em,setTopicStatus:ep,is_self_topic:ef,setIsChange:ex}=(0,eu.Z)(),{canEdit:eg,updateTitle:ev,setUpdateTitle:e_,isEditMode:ej,setIsEditMode:eb,onSave:ew}=Q({topic:x});(0,c.useMemo)(()=>{var e,t,r;return!P||(null==F?void 0:null===(r=F.user_org_member)||void 0===r?void 0:null===(t=r.org_settings)||void 0===t?void 0:null===(e=t.share_permission_config)||void 0===e?void 0:e.space_content_share)},[null==F?void 0:null===(i=F.user_org_member)||void 0===i?void 0:null===(r=i.org_settings)||void 0===r?void 0:null===(t=r.share_permission_config)||void 0===t?void 0:t.space_content_share,P]);let ey=(0,c.useMemo)(()=>S===e2.gY.OWNER||S===e2.gY.ADMIN,[S]),ek=(0,c.useMemo)(()=>{var e,t,r;return S&&(null==F?void 0:null===(r=F.user_org_member)||void 0===r?void 0:null===(t=r.org_settings)||void 0===t?void 0:null===(e=t.share_permission_config)||void 0===e?void 0:e.space_content_add_role.includes(S))},[S,null==F?void 0:null===(m=F.user_org_member)||void 0===m?void 0:null===(h=m.org_settings)||void 0===h?void 0:null===(u=h.share_permission_config)||void 0===u?void 0:u.space_content_add_role]),eN=(0,c.useMemo)(()=>(null==F?void 0:F.uid)===(null==C?void 0:C.uid),[null==F?void 0:F.uid,null==C?void 0:C.uid]);(0,c.useMemo)(()=>C&&C.thread_count>0,[C]),(0,c.useEffect)(()=>{T(x)},[null==x?void 0:x.short_id]);let eF=async()=>{if(x){Z(null);try{let e=await (0,D.Rh)(x.short_id);e?(T(e),eh(e),$(x.short_id)):Z("Failed to fetch topic details")}catch(e){Z("An error occurred while fetching data"),console.error("Error fetching topic data:",e)}}};(0,c.useEffect)(()=>{C&&(!(0,G.Nh)()||F.uid)&&C.uid!==F.uid&&(0,H.fk)(J.U.COLLECTION_SHARE_VIEW,{topicId:C.short_id,uid:F.uid},!0)},[C,F]),(0,c.useEffect)(()=>{if(!C)return;let e=eo.Z.getState().current,t=new URL("".concat(location.origin,"/topic/").concat(null==x?void 0:x.short_id));e&&t.searchParams.append("invite",e),(0,el.rg)({title:C.name,options:[{action:"share",params:{url:t.toString()}}]})},[C]),(0,c.useEffect)(()=>(0,el.j1)(e=>{"share"===e.action&&X(!0)}),[]),(0,c.useEffect)(()=>{var e;(null==C?void 0:null===(e=C.permission)||void 0===e?void 0:e.read_permission)&&(eh(C),em(C.permission.is_self),ep(C.permission.read_permission,!1),$(x.short_id),ex(C.permission.is_change))},[null==C?void 0:C.short_id]);let eS=async()=>{let e=null==C?void 0:C.short_id;if(e){try{await (0,D.BK)(e)?(j.success(v("delete_success")),await (0,e1.gw)(1e3),y(),b.push("/topic")):j.error(v("topic.delete_fail"))}catch(e){j.error(v("topic.delete_error"))}L(!1)}},eP=e=>{console.log("handleEdit",e),T(e)},eD=(0,c.useCallback)(async()=>{let e=null==x?void 0:x.short_id;if(!e)return;let t=await (0,D.hS)({topic_short_id:e});if(L(!1),t){j.success(v("topic.shared_to_enterprise_success")),await (0,e1.gw)(1e3),y(),b.push("/topic");return}j.error(v("topic.shared_to_enterprise_failure"))},[null==x?void 0:x.short_id]),eC=e=>{T(e),U({title:v("topic.add_enterprise_share_title"),desc:v("topic.add_enterprise_share_desc"),submitText:v("topic.add_enterprise_share_confirm_btn"),onSubmit:eD}),L(!0)},eT=(0,c.useCallback)(async()=>{let e=null==x?void 0:x.short_id;if(!e)return;let t=await (0,D.au)({topic_short_id:e});if(L(!1),t){j.success(v("topic.shared_out_enterprise_success")),await (0,e1.gw)(1e3),y(),b.push("/topic");return}j.error(v("topic.shared_out_enterprise_failure"))},[null==x?void 0:x.short_id]),eE=e=>{T(e),U({title:v("topic.remove_enterprise_share_title"),desc:v("topic.remove_enterprise_share_desc"),submitText:v("topic.remove_enterprise_share_confirm_btn"),onSubmit:eT}),L(!0)};return E?(0,s.jsxs)("div",{children:["Error: ",E]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a(),{children:[(0,s.jsx)("title",{children:ev||k}),(0,s.jsx)("meta",{name:"description",content:N}),(0,s.jsx)("meta",{property:"og:type",content:"website"}),(0,s.jsx)("meta",{property:"og:site_name",content:o.rZ}),(0,s.jsx)("meta",{property:"og:title",content:k}),(0,s.jsx)("meta",{property:"og:description",content:N}),(0,s.jsx)("meta",{property:"og:image",content:n.VI}),(0,s.jsx)("meta",{property:"og:url",content:k}),(0,s.jsx)("meta",{property:"og:locale",content:_}),(0,s.jsx)("meta",{name:"twitter:card",content:"summary"}),(0,s.jsx)("meta",{name:"twitter:title",content:k}),(0,s.jsx)("meta",{name:"twitter:description",content:N}),(0,s.jsx)("meta",{name:"twitter:site",content:"@felo_ai"}),(0,s.jsx)("meta",{name:"twitter:creator",content:"@felo_ai"}),(0,s.jsx)("meta",{name:"twitter:image",content:n.VI})]}),(0,s.jsxs)(K.Z,{children:[(0,s.jsx)("div",{className:"font-semibold truncate flex-grow max-w-[50%] sm:max-w-[50%] md:max-w-[50%] overflow-hidden",children:ej&&eg?(0,s.jsxs)("div",{className:"flex dark:border-[#6D7276] items-center border border-gray-300 pl-2 rounded-md",children:[(0,s.jsx)("input",{value:ev,onChange:e=>{e_(e.target.value),eh({...C,name:e.target.value}),T({...C,name:e.target.value})},onKeyDown:e=>{13==e.keyCode&&(e.preventDefault(),ew())},onBlur:ew,className:"flex-grow border-0 focus:outline-none my-1 mr-1"}),(0,s.jsx)("span",{className:"cursor-pointer",children:(0,s.jsx)("div",{className:"bg-[#0080FF] dark:text-[#0694FF] p-2 rounded-r-md",onClick:ew,children:(0,s.jsx)(ee.Z,{size:16,className:"text-white"})})})]}):(0,s.jsxs)("div",{className:"max-w-100% w-max flex items-center",children:[(0,s.jsx)("div",{className:"min-w-0 flex-grow overflow-hidden whitespace-nowrap text-ellipsis",children:ev}),eg&&(0,s.jsx)(et.Z,{size:16,className:"flex-shrink-0 ml-2 text-[#0080FF] dark:text-[#0694FF] cursor-pointer",onClick:()=>eb(!0)})]})}),(0,s.jsxs)("div",{className:"ml-auto min-w-8 flex items-center gap-2",children:["PRIVATE"!==V||ef?(0,s.jsxs)(eY.z,{variant:"secondary-primary",size:w?"icon":void 0,onClick:()=>{X(!0),(0,H.fk)(J.U.TOPIC_SHARE_CLICK,{id:(null==C?void 0:C.short_id)||""},!0)},children:[(0,s.jsx)("div",{style:{width:"18px"},children:"PRIVATE"===V?(0,s.jsx)(ed.aL,{}):(0,s.jsx)(ed.u_,{})}),!w&&v("topic.share")]}):null,eN?(0,s.jsxs)(eJ.h_,{children:[(0,s.jsx)(eJ.$F,{asChild:!0,children:(0,s.jsx)(eY.z,{variant:"secondary-default",size:w?"icon":void 0,children:(0,s.jsx)(er.Z,{})})}),(0,s.jsxs)(eJ.AW,{side:"bottom",align:"end",className:"min-w-52",children:[eN?(0,s.jsx)(eJ.Xi,{className:"cursor-pointer",onClick:()=>{eP(C),R(!0)},children:(0,s.jsxs)("div",{className:"flex items-center border-0",children:[(0,s.jsx)(es.Z,{size:14,className:"mr-2"}),v("topic.edit_theme")]})},"edit"):null,!P||(null==C?void 0:null===(p=C.org_sharing)||void 0===p?void 0:p.org_id)||!ek?null:(0,s.jsx)(eJ.Xi,{className:"cursor-pointer",onClick:()=>{eC(C)},children:(0,s.jsxs)("div",{className:"flex items-center border-0",children:[(0,s.jsx)(ei.Z,{size:14,className:"mr-2"}),v("topic.add_enterprise_share")]})},"addShare"),P&&(null==C?void 0:null===(f=C.org_sharing)||void 0===f?void 0:f.org_id)&&ey?(0,s.jsx)(eJ.Xi,{className:"cursor-pointer",onClick:()=>{eE(C)},children:(0,s.jsxs)("div",{className:"flex items-center border-0",children:[(0,s.jsx)(ei.Z,{size:14,className:"mr-2"}),v("topic.remove_enterprise_share")]})},"moveOutEnterprise"):null,eN?(0,s.jsx)(eJ.Xi,{className:"cursor-pointer",onClick:()=>{I(!0)},children:(0,s.jsxs)("div",{className:"flex items-center text-danger border-0",children:[(0,s.jsx)(W.vW,{className:"mr-2"}),v("topic.delete")]})},"remove"):null]})]}):null,(0,s.jsx)(e4.Z,{isOpen:!1})]})]}),(0,s.jsx)("div",{className:"mx-auto max-w-7xl my-8 px-5 2xl:px-0 w-full flex-1",children:(0,s.jsxs)("section",{className:(0,M.cn)("flex flex-col h-full","lg:flex-row gap-4 md:gap-20"),children:[(0,s.jsx)("section",{className:"flex-1",children:(0,s.jsx)(q,{topic:C,fetchData:eF})}),(0,s.jsx)("section",{className:"flex-none",children:(0,s.jsx)("section",{className:"relative h-full",children:(0,s.jsx)(eH,{topic:C,onUpdateTitle:e=>{e_(e),eh({...C,name:e})}})})})]},null==C?void 0:C.short_id)}),(0,s.jsx)(ec.Z,{}),(0,s.jsx)(eQ.Z,{isOpen:z,isHideClose:!1,title:v("topic.delete_not"),desc:v("topic.delete_prompt"),onOpenChange:()=>{},onCancel:()=>{I(!1)},onSubmit:eS,submitText:v("confirm"),submitBtnVariant:"destructive"}),(0,s.jsx)(eq.Z,{mode:"edit",topic:x,isOpen:O,onClose:()=>{R(!1)},onEditSuccess:e=>{e_(null==e?void 0:e.name)}}),(0,s.jsx)(eQ.Z,{isOpen:A,isHideClose:!1,title:(null==B?void 0:B.title)||v("topic.add_enterprise_share_title"),desc:(null==B?void 0:B.desc)||v("topic.add_enterprise_share_desc"),onOpenChange:()=>{},onCancel:()=>{L(!1)},onSubmit:null==B?void 0:B.onSubmit,submitText:(null==B?void 0:B.submitText)||v("topic.add_enterprise_share_confirm_btn")})]})}},63998:function(e,t,r){"use strict";r.d(t,{AN:function(){return n},Di:function(){return o},GD:function(){return u},Gr:function(){return c},aR:function(){return d},vl:function(){return l}});var s=r(27976),i=r(13263),a=r(5517);let n=(e,t)=>{let r="".concat(s.nd,"/drive/page");return(0,a.Z)(r,{method:"POST",headers:(0,i.Fe)(),signal:t?t.signal:void 0,body:JSON.stringify({pageCurrent:e.page_current,pageSize:e.page_size,searchWords:e.search_words,type_list:e.type_list})}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>{throw Error(e)})},l=e=>fetch("".concat(s.nd,"/drive/upload"),{method:"POST",headers:{...(0,i.Fe)()},body:e}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>{throw Error(e)}),o=e=>fetch("".concat(s.nd,"/drive/delete?drive_file_id=").concat(e.drive_file_id),{method:"POST",headers:(0,i.Fe)()}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>{throw Error(e)}),c=e=>fetch("".concat(s.nd,"/drive/download?drive_file_id=").concat(e),{method:"GET",headers:{...(0,i.Fe)()}}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>{throw Error(e)}),d=e=>fetch("".concat(s.nd,"/drive/preview?drive_file_id=").concat(e),{method:"GET",headers:(0,i.Fe)()}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>{throw Error(e)}),u=e=>fetch("".concat(s.nd,"/drive/detach?drive_file_id=").concat(e.drive_file_id,"&object_id=").concat(e.object_id,"&type=").concat(e.type),{method:"POST",headers:(0,i.Fe)()}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>{throw Error(e)})},72881:function(e,t,r){"use strict";r.d(t,{b:function(){return s}});let s=e=>{switch(null==e?void 0:e.toLowerCase()){case"pdf":return"/icons/PDF.svg";case"doc":return"/icons/DOC.svg";case"docx":return"/icons/DOCX.svg";case"ppt":return"/icons/PPT.svg";case"pptx":return"/icons/PPTX.svg";case"xls":return"/icons/XLS.svg";case"xlsx":return"/icons/XLSX.svg";case"html":return"/icons/HTML.svg";default:return"/icons/default.svg"}}},62033:function(e,t,r){"use strict";r.d(t,{f:function(){return o}});var s=JSON.parse('{"attachment":{"clickToDownload":"Click to download","noAttachment":"There is no attachment"},"bookmark":{"noBookmark":"There is no bookmark"},"core":{"askingPassword":{"requirePasswordToOpen":"This document requires a password to open","submit":"Submit"},"wrongPassword":{"submit":"Submit","tryAgain":"The password is wrong. Please try again"},"pageLabel":"Page {{pageIndex}}"},"defaultLayout":{"attachment":"Attachment","bookmark":"Bookmark","thumbnail":"Thumbnail"},"download":{"download":"Download"},"drop":{"dragDropFile":"Drag and drop a PDF document here"},"fullScreen":{"enterFullScreen":"Full screen","exitFullScreen":"Exit full screen"},"localeSwitcher":{"switchLocale":"Switch locale"},"open":{"openFile":"Open file"},"pageNavigation":{"enterPageNumber":"Enter a page number","goToFirstPage":"First page","goToLastPage":"Last page","goToNextPage":"Next page","goToPreviousPage":"Previous page"},"print":{"cancel":"Cancel","preparingDocument":"Preparing document ...","print":"Print"},"properties":{"author":"Author","close":"Close","creationDate":"Creation date","creator":"Creator","fileName":"File name","fileSize":"File size","keywords":"Keywords","modificationDate":"Modification date","pageCount":"Page count","pdfProducer":"PDF producer","pdfVersion":"PDF version","showProperties":"Show properties","subject":"Subject","title":"Title"},"rotate":{"rotateBackward":"Rotate counterclockwise","rotateForward":"Rotate clockwise"},"scrollMode":{"pageScrolling":"Page scrolling","horizontalScrolling":"Horizontal scrolling","verticalScrolling":"Vertical scrolling","wrappedScrolling":"Wrapped scrolling","singlePage":"Single Page","dualPage":"Dual Page","dualPageCover":"Dual page with cover"},"search":{"close":"Close","enterToSearch":"Enter to search","matchCase":"Match case","nextMatch":"Next match","previousMatch":"Previous match","search":"Search","wholeWords":"Whole words"},"selectionMode":{"handTool":"Hand tool","textSelectionTool":"Text selection tool"},"theme":{"switchDarkTheme":"Switch to the dark theme","switchLightTheme":"Switch to the light theme"},"thumbnail":{"thumbnailLabel":"Thumbnail of page {{pageIndex}}"},"toolbar":{"moreActions":"More actions"},"zoom":{"actualSize":"Actual size","pageFit":"Page fit","pageWidth":"Page width","zoomDocument":"Zoom document","zoomIn":"Zoom in","zoomOut":"Zoom out"}}'),i=JSON.parse('{"attachment":{"clickToDownload":"クリックしてダウンロードします","noAttachment":"添付ファイルがありません"},"bookmark":{"noBookmark":"ブックマークがありません"},"core":{"askingPassword":{"requirePasswordToOpen":"この文書を開くには、パスワードが必要です","submit":"提出"},"wrongPassword":{"submit":"提出","tryAgain":"パスワードが間違っています。 もう一度やり直してください"},"pageLabel":"ページ {{pageIndex}}"},"defaultLayout":{"attachment":"添付ファイル","bookmark":"ブックマーク","thumbnail":"サムネイル"},"download":{"download":"ダウンロード"},"drop":{"dragDropFile":"ここにPDF文書をドラッグ&ドロップします"},"fullScreen":{"enterFullScreen":"全画面表示","exitFullScreen":"全画面表示を終了します"},"localeSwitcher":{"switchLocale":"ロケールの切り替え"},"open":{"openFile":"ファイルを開きます"},"pageNavigation":{"enterPageNumber":"ページ番号を入力してください","goToFirstPage":"先頭のページ","goToLastPage":"最後のページ","goToNextPage":"次のページ","goToPreviousPage":"前のページ"},"print":{"cancel":"キャンセル","preparingDocument":"文書を準備しています..。","print":"印刷"},"properties":{"author":"著者","close":"クローズ","creationDate":"作成日","creator":"クリエイター","fileName":"ファイル名","fileSize":"ファイルサイズ","keywords":"キーワード","modificationDate":"変更日","pageCount":"ページ数","pdfProducer":"PDFプロデューサー","pdfVersion":"PDFのバージョン","showProperties":"プロパティを表示します","subject":"件名","title":"タイトル"},"rotate":{"rotateBackward":"反時計回りに回転します","rotateForward":"時計回りに回転します"},"scrollMode":{"pageScrolling":"ページスクロール","horizontalScrolling":"水平スクロール","verticalScrolling":"垂直スクロール","wrappedScrolling":"ラップスクロール","singlePage":"単ページ","dualPage":"両ページ","dualPageCover":"カバー付き両ページ"},"search":{"close":"クローズ","enterToSearch":"検索するために入力してください","matchCase":"マッチケース","nextMatch":"次のマッチケース","previousMatch":"前のマッチケース","search":"検索","wholeWords":"全体の単語数"},"selectionMode":{"handTool":"手のひらツール","textSelectionTool":"文字の選択ツール"},"theme":{"switchDarkTheme":"ダークテーマに切り替えます","switchLightTheme":"ライトテーマに切り替えます"},"thumbnail":{"thumbnailLabel":"ページのサムネイル {{pageIndex}}"},"toolbar":{"moreActions":"その他のアクション"},"zoom":{"actualSize":"実際のサイズ","pageFit":"ページに合わせます","pageWidth":"ページの幅","zoomDocument":"ドキュメントの表示を拡大し、縮小します","zoomIn":"ズームイン","zoomOut":"ズームアウト"}}'),a=JSON.parse('{"attachment":{"clickToDownload":"다운로드하려면 클릭하기","noAttachment":"첨부 파일이 없습니다"},"bookmark":{"noBookmark":"책갈피가 없습니다"},"core":{"askingPassword":{"requirePasswordToOpen":"이 문서를 열려면 암호가 필요합니다","submit":"제출"},"wrongPassword":{"submit":"제출","tryAgain":"암호가 잘못되었습니다. 다시 시도하십시오"},"pageLabel":"페이지 {{pageIndex}}"},"defaultLayout":{"attachment":"첨부","bookmark":"책갈피","thumbnail":"썸네일"},"download":{"download":"다운로드"},"drop":{"dragDropFile":"PDF 파일을 여기로 드래그하세요"},"fullScreen":{"enterFullScreen":"전체 화면","exitFullScreen":"전체 화면 종료"},"localeSwitcher":{"switchLocale":"로케일 변경"},"open":{"openFile":"파일 열기"},"pageNavigation":{"enterPageNumber":"페이지 번호를 입력하십시오","goToFirstPage":"첫 페이지","goToLastPage":"마지막 페이지","goToNextPage":"다음 페이지","goToPreviousPage":"이전 페이지"},"print":{"cancel":"취소","preparingDocument":"문서 준비 중...","print":"인쇄"},"properties":{"author":"저자","close":"닫기","creationDate":"만든 날짜","creator":"제작자","fileName":"파일 이름","fileSize":"파일 크기","keywords":"키워드","modificationDate":"수정 날짜","pageCount":"페이지 수","pdfProducer":"PDF 작성하기","pdfVersion":"PDF 버전","showProperties":"상세정보 보기","subject":"주제","title":"제목"},"rotate":{"rotateBackward":"반시계 방향으로 회전","rotateForward":"시계 방향으로 회전"},"scrollMode":{"pageScrolling":"페이지 스크롤","horizontalScrolling":"수평 스크롤","verticalScrolling":"수직 스크롤","wrappedScrolling":"랩 스크롤","singlePage":"단일 페이지","dualPage":"두 페이지","dualPageCover":"커버가 있는 두 페이지"},"search":{"close":"닫기","enterToSearch":"검색하려면 입력하세요","matchCase":"대/소문자 구분","nextMatch":"다음 찾기","previousMatch":"이전 찾기","search":"검색","wholeWords":"단어 단위로"},"selectionMode":{"handTool":"손 도구","textSelectionTool":"선택 도구"},"theme":{"switchDarkTheme":"어두운 테마로 전환","switchLightTheme":"밝은 테마로 전환"},"thumbnail":{"thumbnailLabel":"페이지의 썸네일 {{pageIndex}}"},"toolbar":{"moreActions":"추가 작업"},"zoom":{"actualSize":"실제 크기","pageFit":"페이지에 맞춤","pageWidth":"너비에 맞춤","zoomDocument":"문서 확대/축소","zoomIn":"확대","zoomOut":"축소"}}'),n=JSON.parse('{"attachment":{"clickToDownload":"Нажмите для скачивания","noAttachment":"Нет вложений"},"bookmark":{"noBookmark":"Нет закладок"},"core":{"askingPassword":{"requirePasswordToOpen":"Для открытия этого файла требуется пароль","submit":"Отправить"},"wrongPassword":{"submit":"Отправить","tryAgain":"Неверный пароль. Пожалуйста, попробуйте снова"},"pageLabel":"Страница {{pageIndex}}"},"defaultLayout":{"attachment":"Вложения","bookmark":"Закладки","thumbnail":"Миниатюры"},"download":{"download":"Скачать"},"drop":{"dragDropFile":"Перетащите PDF-документ сюда"},"fullScreen":{"enterFullScreen":"Полный экран","exitFullScreen":"Выйти из полноэкранного режима"},"localeSwitcher":{"switchLocale":"Изменить язык"},"open":{"openFile":"Открыть файл"},"pageNavigation":{"enterPageNumber":"Введите номер страницы","goToFirstPage":"Первая страница","goToLastPage":"Последняя страница","goToNextPage":"Следующая страница","goToPreviousPage":"Предыдущая страница"},"print":{"cancel":"Отмена","preparingDocument":"Подготовка документа...","print":"Печать"},"properties":{"author":"Автор","close":"Закрыть","creationDate":"Дата создания","creator":"Создатель","fileName":"Имя файла","fileSize":"Размер файла","keywords":"Ключевые слова","modificationDate":"Дата изменения","pageCount":"Количество страниц","pdfProducer":"Создано в","pdfVersion":"Версия PDF","showProperties":"Показать свойства","subject":"Тема","title":"Заголовок"},"rotate":{"rotateBackward":"Повернуть против часовой стрелки","rotateForward":"Повернуть по часовой стрелке"},"scrollMode":{"pageScrolling":"Прокрутка страниц","horizontalScrolling":"Горизонтальная прокрутка","verticalScrolling":"Вертикальная прокрутка","wrappedScrolling":"Обтекающая прокрутка","singlePage":"Одна страница","dualPage":"Две страницы","dualPageCover":"Две страницы с обложкой"},"search":{"close":"Закрыть","enterToSearch":"Введите для поиска","matchCase":"Учитывать регистр","nextMatch":"Следующее совпадение","previousMatch":"Предыдущее совпадение","search":"Поиск","wholeWords":"Только целые слова"},"selectionMode":{"handTool":"Инструмент \\"Рука\\"","textSelectionTool":"Инструмент выделения текста"},"theme":{"switchDarkTheme":"Переключить на темную тему","switchLightTheme":"Переключить на светлую тему"},"thumbnail":{"thumbnailLabel":"Миниатюра страницы {{pageIndex}}"},"toolbar":{"moreActions":"Дополнительные действия"},"zoom":{"actualSize":"Реальный размер","pageFit":"По размеру страницы","pageWidth":"По ширине страницы","zoomDocument":"Масштаб документа","zoomIn":"Увеличить","zoomOut":"Уменьшить"}}'),l=JSON.parse('{"attachment":{"clickToDownload":"點擊下載","noAttachment":"沒有附件"},"bookmark":{"noBookmark":"沒有書籤"},"core":{"askingPassword":{"requirePasswordToOpen":"此文件需要密碼才能打開","submit":"提交"},"wrongPassword":{"submit":"提交","tryAgain":"密碼錯誤。請重試"},"pageLabel":"頁面 {{pageIndex}}"},"defaultLayout":{"attachment":"附件","bookmark":"書籤","thumbnail":"縮略圖"},"download":{"download":"下載"},"drop":{"dragDropFile":"將 PDF 文檔拖放到此處"},"fullScreen":{"enterFullScreen":"全屏","exitFullScreen":"退出全屏"},"localeSwitcher":{"switchLocale":"更改區域設置"},"open":{"openFile":"打開文件"},"pageNavigation":{"enterPageNumber":"輸入頁碼","goToFirstPage":"第一頁","goToLastPage":"最後一頁","goToNextPage":"下一頁","goToPreviousPage":"上一頁"},"print":{"cancel":"取消","preparingDocument":"準備文件...","print":"打印"},"properties":{"author":"作者","close":"關閉","creationDate":"創作日期","creator":"創作者","fileName":"文件名稱","fileSize":"文件大小","keywords":"關鍵詞","modificationDate":"修改日期","pageCount":"頁數","pdfProducer":"PDF製作軟體","pdfVersion":"PDF版本","showProperties":"顯示屬性","subject":"主題","title":"標題"},"rotate":{"rotateBackward":"逆時針旋轉","rotateForward":"順時針旋轉"},"scrollMode":{"pageScrolling":"頁面滾動","horizontalScrolling":"水平滾動","verticalScrolling":"垂直滾動","wrappedScrolling":"環繞滾動","singlePage":"單頁","dualPage":"雙頁","dualPageCover":"雙頁帶封面"},"search":{"close":"關閉","enterToSearch":"輸入搜索詞","matchCase":"相符","nextMatch":"下一個相符","previousMatch":"上一個相符","search":"搜索","wholeWords":"全部詞句"},"selectionMode":{"handTool":"手型工具","textSelectionTool":"文本選擇工具"},"theme":{"switchDarkTheme":"切換到深色模式","switchLightTheme":"切換到淺色模式"},"thumbnail":{"thumbnailLabel":"頁面縮略圖 {{pageIndex}}"},"toolbar":{"moreActions":"更多操作"},"zoom":{"actualSize":"實際尺寸","pageFit":"適合頁面","pageWidth":"頁面寬度","zoomDocument":"縮放文件","zoomIn":"放大","zoomOut":"縮小"}}');let o={en:s,ja:i,ko:a,ru:n,"zh-Hans":JSON.parse('{"attachment":{"clickToDownload":"点击下载","noAttachment":"没有附件"},"bookmark":{"noBookmark":"没有书签"},"core":{"askingPassword":{"requirePasswordToOpen":"此文件需要密码才能打开","submit":"提交"},"wrongPassword":{"submit":"提交","tryAgain":"密码错误。请重试"},"pageLabel":"页面 {{pageIndex}}"},"defaultLayout":{"attachment":"附件","bookmark":"书签","thumbnail":"缩略图"},"download":{"download":"下载"},"drop":{"dragDropFile":"将 PDF 文档拖放到此处"},"fullScreen":{"enterFullScreen":"全屏","exitFullScreen":"退出全屏"},"localeSwitcher":{"switchLocale":"更改区域设置"},"open":{"openFile":"打开文件"},"pageNavigation":{"enterPageNumber":"输入页码","goToFirstPage":"第一页","goToLastPage":"最后一页","goToNextPage":"下一页","goToPreviousPage":"上一页"},"print":{"cancel":"取消","preparingDocument":"准备文件...","print":"打印"},"properties":{"author":"作者","close":"关闭","creationDate":"创作日期","creator":"创作者","fileName":"文件名称","fileSize":"文件大小","keywords":"关键词","modificationDate":"修改日期","pageCount":"页数","pdfProducer":"PDF制作软件","pdfVersion":"PDF版本","showProperties":"显示属性","subject":"主题","title":"标题"},"rotate":{"rotateBackward":"逆时针旋转","rotateForward":"顺时针旋转"},"scrollMode":{"pageScrolling":"页面滚动","horizontalScrolling":"水平滚动","verticalScrolling":"垂直滚动","wrappedScrolling":"环绕滚动","singlePage":"单页","dualPage":"双页","dualPageCover":"双页带封面"},"search":{"close":"关闭","enterToSearch":"输入搜索词","matchCase":"相符","nextMatch":"下一个相符","previousMatch":"上一个相符","search":"搜索","wholeWords":"全部词句"},"selectionMode":{"handTool":"手型工具","textSelectionTool":"文本选择工具"},"theme":{"switchDarkTheme":"切换到深色模式","switchLightTheme":"切换到浅色模式"},"thumbnail":{"thumbnailLabel":"页面缩略图 {{pageIndex}}"},"toolbar":{"moreActions":"更多操作"},"zoom":{"actualSize":"实际尺寸","pageFit":"适合页面","pageWidth":"页面宽度","zoomDocument":"缩放文件","zoomIn":"放大","zoomOut":"缩小"}}'),"zh-Hant":l}},12045:function(e,t,r){"use strict";r.d(t,{l:function(){return s},t:function(){return a}});let s=(e,t)=>{if(!e)return"";let r=new Date(e);if(isNaN(r.getTime()))return"";let s=(new Date(i().replace(" ","T")).getTime()-r.getTime())/1e3;return s<0?(console.warn("Future date detected. Returning empty string."),""):s<60?t("time.just_now"):s<3600?t("time.minutes_ago",{minutes:Math.floor(s/60)}):s<=86400?t("time.hours_ago",{hours:Math.floor(s/3600)}):s<=604800?t("time.days_ago",{days:Math.floor(s/86400)}):s<=2592e3?t("time.weeks_ago",{weeks:Math.floor(s/604800)}):s<=31536e3?t("time.months_ago",{months:Math.floor(s/2592e3)}):t("time.years_ago",{years:Math.floor(s/31536e3)})},i=()=>{let e=new Date,t=e.getUTCFullYear(),r=String(e.getUTCMonth()+1).padStart(2,"0"),s=String(e.getUTCDate()).padStart(2,"0"),i=String(e.getUTCHours()).padStart(2,"0"),a=String(e.getUTCMinutes()).padStart(2,"0"),n=String(e.getUTCSeconds()).padStart(2,"0");return"".concat(t,"-").concat(r,"-").concat(s," ").concat(i,":").concat(a,":").concat(n)},a=e=>"".concat(String(Math.floor(e/60)).padStart(2,"0"),":").concat(String(e%60).padStart(2,"0"))},85625:function(){},606:function(){},25210:function(){},21473:function(){},97235:function(){},82605:function(){},40598:function(e,t,r){"use strict";r.d(t,{h:function(){return y}});var s=r(52676),i=()=>(0,s.jsxs)("svg",{"aria-hidden":"true",fill:"none",height:"80%",role:"presentation",viewBox:"0 0 24 24",width:"80%",children:[(0,s.jsx)("path",{d:"M12 2C9.38 2 7.25 4.13 7.25 6.75C7.25 9.32 9.26 11.4 11.88 11.49C11.96 11.48 12.04 11.48 12.1 11.49C12.12 11.49 12.13 11.49 12.15 11.49C12.16 11.49 12.16 11.49 12.17 11.49C14.73 11.4 16.74 9.32 16.75 6.75C16.75 4.13 14.62 2 12 2Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M17.0809 14.1489C14.2909 12.2889 9.74094 12.2889 6.93094 14.1489C5.66094 14.9989 4.96094 16.1489 4.96094 17.3789C4.96094 18.6089 5.66094 19.7489 6.92094 20.5889C8.32094 21.5289 10.1609 21.9989 12.0009 21.9989C13.8409 21.9989 15.6809 21.5289 17.0809 20.5889C18.3409 19.7389 19.0409 18.5989 19.0409 17.3589C19.0309 16.1289 18.3409 14.9889 17.0809 14.1489Z",fill:"currentColor"})]}),[a,n]=(0,r(95374).k)({name:"AvatarGroupContext",strict:!1}),l=r(84563),o=r(38946),c=r(91988),d=(0,o.tv)({slots:{base:["flex","relative","justify-center","items-center","box-border","overflow-hidden","align-middle","text-white","z-0",...c.Dh],img:["flex","object-cover","w-full","h-full","transition-opacity","!duration-500","opacity-0","data-[loaded=true]:opacity-100"],fallback:[...c.z6,"flex","items-center","justify-center"],name:[...c.z6,"font-normal","text-center","text-inherit"],icon:[...c.z6,"flex","items-center","justify-center","text-inherit","w-full","h-full"]},variants:{size:{sm:{base:"w-8 h-8 text-tiny"},md:{base:"w-10 h-10 text-tiny"},lg:{base:"w-14 h-14 text-small"}},color:{default:{base:l.J.solid.default},primary:{base:l.J.solid.primary},secondary:{base:l.J.solid.secondary},success:{base:l.J.solid.success},warning:{base:l.J.solid.warning},danger:{base:l.J.solid.danger}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"},full:{base:"rounded-full"}},isBordered:{true:{base:"ring-2 ring-offset-2 ring-offset-background dark:ring-offset-background-dark"}},isDisabled:{true:{base:"opacity-disabled"}},isInGroup:{true:{base:["-ms-2 data-[hover=true]:-translate-x-3 rtl:data-[hover=true]:translate-x-3 transition-transform","data-[focus-visible=true]:-translate-x-3 rtl:data-[focus-visible=true]:translate-x-3"]}},isInGridGroup:{true:{base:"m-0 data-[hover=true]:translate-x-0"}},disableAnimation:{true:{base:"transition-none",img:"transition-none"},false:{}}},defaultVariants:{size:"md",color:"default",radius:"full"},compoundVariants:[{color:"default",isBordered:!0,class:{base:"ring-default"}},{color:"primary",isBordered:!0,class:{base:"ring-primary"}},{color:"secondary",isBordered:!0,class:{base:"ring-secondary"}},{color:"success",isBordered:!0,class:{base:"ring-success"}},{color:"warning",isBordered:!0,class:{base:"ring-warning"}},{color:"danger",isBordered:!0,class:{base:"ring-danger"}}]});(0,o.tv)({slots:{base:"flex items-center justify-center h-auto w-max",count:"hover:-translate-x-0"},variants:{isGrid:{true:"inline-grid grid-cols-4 gap-3"}}});var u=r(15832),h=r(49336),m=r(48824),p=r(7909),f=r(5421),x=r(85151),g=r(49975),v=r(36064),_=r(75271),j=r(29560),b=r(41721),w=(0,r(82664).Gp)((e,t)=>{let{Component:r,ImgComponent:a,src:l,icon:o=(0,s.jsx)(i,{}),alt:c,classNames:w,slots:y,name:k,showFallback:N,fallback:F,getInitials:S,getAvatarProps:P,getImageProps:D}=function(e={}){var t,r,s,i,a,l,o;let c=(0,u.w)(),w=n(),y=!!w,{as:k,ref:N,src:F,name:S,icon:P,classNames:D,fallback:C,alt:T=S||"avatar",imgRef:E,color:Z=null!=(t=null==w?void 0:w.color)?t:"default",radius:z=null!=(r=null==w?void 0:w.radius)?r:"full",size:M=null!=(s=null==w?void 0:w.size)?s:"md",isBordered:I=null!=(i=null==w?void 0:w.isBordered)&&i,isDisabled:A=null!=(a=null==w?void 0:w.isDisabled)&&a,isFocusable:L=!1,getInitials:O=f.e,ignoreFallback:R=!1,showFallback:B=!1,ImgComponent:U="img",imgProps:W,className:V,onError:X,...$}=e,q=k||"span",K=(0,m.gy)(N),G=(0,m.gy)(E),{isFocusVisible:H,isFocused:J,focusProps:Y}=(0,v.F)(),{isHovered:Q,hoverProps:ee}=(0,b.X)({isDisabled:A}),et=null!=(o=null!=(l=e.disableAnimation)?l:null==c?void 0:c.disableAnimation)&&o,er="loaded"===(0,j.d)({src:F,onError:X,ignoreFallback:R}),es="string"==typeof U,ei=(!F||!er)&&B,ea=(0,_.useMemo)(()=>{var e;return d({color:Z,radius:z,size:M,isBordered:I,isDisabled:A,isInGroup:y,disableAnimation:et,isInGridGroup:null!=(e=null==w?void 0:w.isGrid)&&e})},[Z,z,M,I,A,et,y,null==w?void 0:w.isGrid]),en=(0,x.W)(null==D?void 0:D.base,V),el=(0,_.useMemo)(()=>L||"button"===k,[L,k]),eo=(0,_.useCallback)((e={})=>({ref:K,tabIndex:el?0:-1,"data-hover":(0,g.PB)(Q),"data-focus":(0,g.PB)(J),"data-focus-visible":(0,g.PB)(H),className:ea.base({class:(0,x.W)(en,null==e?void 0:e.className)}),...(0,h.d)($,ee,el?Y:{})}),[el,ea,en,Y,$]),ec=(0,_.useCallback)((e={})=>({ref:G,src:F,"data-loaded":(0,g.PB)(er),className:ea.img({class:null==D?void 0:D.img}),...(0,h.d)(W,e,(0,p.z)({disableAnimation:et},{enabled:es}))}),[ea,er,W,et,F,G,es]);return{Component:q,ImgComponent:U,src:F,alt:T,icon:P,name:S,imgRef:G,slots:ea,classNames:D,fallback:C,isImgLoaded:er,showFallback:ei,ignoreFallback:R,getInitials:O,getAvatarProps:eo,getImageProps:ec}}({...e,ref:t}),C=(0,_.useMemo)(()=>!N&&l?null:F?(0,s.jsx)("div",{"aria-label":c,className:y.fallback({class:null==w?void 0:w.fallback}),role:"img",children:F}):k?(0,s.jsx)("span",{"aria-label":c,className:y.name({class:null==w?void 0:w.name}),role:"img",children:S(k)}):(0,s.jsx)("span",{"aria-label":c,className:y.icon({class:null==w?void 0:w.icon}),role:"img",children:o}),[N,l,F,k,w]);return(0,s.jsxs)(r,{...P(),children:[l&&(0,s.jsx)(a,{...D(),alt:c}),C]})});w.displayName="NextUI.Avatar";var y=w},24903:function(e,t,r){"use strict";r.d(t,{fC:function(){return k},z$:function(){return N}});var s=r(75271),i=r(49204),a=r(42478),n=r(29161),l=r(30710),o=r(54066),c=r(93475),d=r(48101),u=r(22413),h=r(52676),m="Checkbox",[p,f]=(0,a.b)(m),[x,g]=p(m),v=s.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:a,checked:o,defaultChecked:c,required:d,disabled:m,value:p="on",onCheckedChange:f,form:g,...v}=e,[_,j]=s.useState(null),k=(0,i.e)(t,e=>j(e)),N=s.useRef(!1),F=!_||g||!!_.closest("form"),[S=!1,P]=(0,l.T)({prop:o,defaultProp:c,onChange:f}),D=s.useRef(S);return s.useEffect(()=>{let e=_?.form;if(e){let t=()=>P(D.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[_,P]),(0,h.jsxs)(x,{scope:r,state:S,disabled:m,children:[(0,h.jsx)(u.WV.button,{type:"button",role:"checkbox","aria-checked":w(S)?"mixed":S,"aria-required":d,"data-state":y(S),"data-disabled":m?"":void 0,disabled:m,value:p,...v,ref:k,onKeyDown:(0,n.M)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,n.M)(e.onClick,e=>{P(e=>!!w(e)||!e),F&&(N.current=e.isPropagationStopped(),N.current||e.stopPropagation())})}),F&&(0,h.jsx)(b,{control:_,bubbles:!N.current,name:a,value:p,checked:S,required:d,disabled:m,form:g,style:{transform:"translateX(-100%)"},defaultChecked:!w(c)&&c})]})});v.displayName=m;var _="CheckboxIndicator",j=s.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:s,...i}=e,a=g(_,r);return(0,h.jsx)(d.z,{present:s||w(a.state)||!0===a.state,children:(0,h.jsx)(u.WV.span,{"data-state":y(a.state),"data-disabled":a.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});j.displayName=_;var b=e=>{let{control:t,checked:r,bubbles:i=!0,defaultChecked:a,...n}=e,l=s.useRef(null),d=(0,o.D)(r),u=(0,c.t)(t);s.useEffect(()=>{let e=l.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==r&&t){let s=new Event("click",{bubbles:i});e.indeterminate=w(r),t.call(e,!w(r)&&r),e.dispatchEvent(s)}},[d,r,i]);let m=s.useRef(!w(r)&&r);return(0,h.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??m.current,...n,tabIndex:-1,ref:l,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function w(e){return"indeterminate"===e}function y(e){return w(e)?"indeterminate":e?"checked":"unchecked"}var k=v,N=j}},function(e){e.O(0,[306,4578,8669,6164,4049,8058,7815,4737,6793,2170,7437,4078,4462,7716,4386,4781,5568,6790,8247,7240,7103,2888,9774,179],function(){return e(e.s=22454)}),_N_E=e.O()}]);