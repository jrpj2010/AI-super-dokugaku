(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5236],{20995:function(e,t,l){"use strict";l.d(t,{Z:function(){return M}});var a=l(52676),r=l(25010),i=l(68782),s=l(7717),n=l(75271),o=l(58014),d=l(39071),c=l(73423),u=e=>{let{item:t,onClick:l,children:i}=e;return(0,s.useTranslations)(),(0,a.jsx)(r.z,{variant:"outline",size:"icon-sm",className:"w-5 h-5 p-1",onClick:l,children:i},t)},h=l(4814),m=l(9369),v=l(98065),p=l(62814),x=l(44433),g=l(70469),f=l(96022),b=l(13976),y=l(19370),C=l(72696),w=l(1167),j=l(89146);let N=[{label:"Noto Sans Japanese",value:'"Noto Sans JP", serif'},{label:"Noto Serif Japanese",value:'"Noto Serif JP", serif'},{label:"Noto Sans Korean",value:'"Noto Sans KR", serif'},{label:"나눔고딕 (Nanum Gothic)",value:'"Nanum Gothic", serif'},{label:"Arial",value:"Arial, sans-serif"},{label:"Times New Roman",value:'"Times New Roman", serif'},{label:"宋体",value:"SimSun, serif"},{label:"黑体",value:"STHeiti, SimHei, sans-serif"},{label:"正黑體",value:'"Microsoft JhengHei"'},{label:"新細明體",value:'"新細明體", PMingLiU'},{label:"國字標準字體",value:"DFKai-SB, BiauKai, 標楷體"}],E=[8,9,10,12,14,16,18,20,24,28,30,36,48,54,60,72,96,128],k=["#000","#4D4D4D","#808080","#CCC","#F2F2F2","#FFF","#EB473E","#EC635D","#ED70C1","#BE71DF","#8455F6","#561DE2","#4395AF","#57BDDB","#82DEE4","#5FB4F9","#5970F6","#1D49A7","#F4DA58","#F1975C","#FB7035","#CDFD85","#94D769","#56BD6D"];var _=e=>{var t,l;let{editToolModal:i,onRemoveBlock:o}=e,c=(0,s.useTranslations)(),[u,h]=(0,n.useState)(!1),[_,S]=(0,n.useState)(!1),[A,T]=(0,n.useState)(!1),[Z,F]=(0,n.useState)("left"),[L,I]=(0,n.useState)("inherit"),[D,P]=(0,n.useState)("14px"),[O,z]=(0,n.useState)("#000000"),R={current:null===(t=i.values)||void 0===t?void 0:t.iframe},M=null===(l=i.values)||void 0===l?void 0:l.page;(0,n.useEffect)(()=>{var e;if(null==i?void 0:null===(e=i.values)||void 0===e?void 0:e.el){let e=getComputedStyle(i.values.el),t=N.find(t=>e.fontFamily===t.value),l=(()=>{let t=parseInt(e.fontWeight);return"number"==typeof t?t>400:e.fontWeight.includes("bold")})(),a="italic"===e.fontStyle,r=e.textDecoration.includes("underline"),s=e.textAlign||"left",n=e.color||"#000000";h(l),S(a),T(r),F(s),I((null==t?void 0:t.value)||"inherit"),E.includes(parseInt(e.fontSize))?P(e.fontSize):P(void 0),z(n)}},[i]);let B=e=>{var t;if(!(null==i?void 0:null===(t=i.values)||void 0===t?void 0:t.el))return;let l=i.values.el;Object.entries(e).forEach(e=>{let[t,a]=e;l.style[t]=a})},H=e=>{var t;let{saveSnapshotForOperation:l}=j.Z.getState();(null===(t=R.current)||void 0===t?void 0:t.contentDocument)&&l(M,"style",R.current.contentDocument),B(e)};return(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsxs)(y.Ph,{value:L,onValueChange:e=>{I(e),H({fontFamily:e})},children:[(0,a.jsx)(y.i4,{className:"w-44 px-2.5 py-1 h-8",children:(0,a.jsx)(y.ki,{placeholder:"Font Family"})}),(0,a.jsxs)(y.Bw,{className:"select-none",children:[(0,a.jsx)(y.Ql,{value:"inherit",children:c("editSlides.font_family_inherit")}),N.map(e=>(0,a.jsx)(y.Ql,{value:e.value,style:{fontFamily:e.value},children:e.label},e.value))]})]}),(0,a.jsxs)(y.Ph,{value:D,onValueChange:e=>{P(e),H({fontSize:e})},children:[(0,a.jsx)(y.i4,{className:"w-20 px-2.5 py-1 h-8",children:(0,a.jsx)(y.ki,{placeholder:c("editSlides.font_size_placeholder")})}),(0,a.jsx)(y.Bw,{className:"select-none",children:E.map(e=>(0,a.jsx)(y.Ql,{value:"".concat(e,"px"),children:e},e))})]}),(0,a.jsxs)(C.h_,{children:[(0,a.jsx)(C.$F,{asChild:!0,children:(0,a.jsxs)(r.z,{variant:"ghost",className:"p-0 w-11 h-8 gap-0",children:[(0,a.jsxs)("span",{className:"block",children:[(0,a.jsx)("span",{className:"text-sx",children:"A"}),(0,a.jsx)("span",{className:"block h-1.5 border -mt-0.5 mb-0.5 w-5 mx-auto",style:{backgroundColor:O}})]}),(0,a.jsx)(m.Z,{className:"h-4 w-4 opacity-50"})]})}),(0,a.jsx)(C.HJ,{align:"start",className:"flex flex-wrap w-[226px] p-4",children:k.map(e=>(0,a.jsx)(C.Xi,{className:"p-1",onClick:()=>{z(e),H({color:e})},children:(0,a.jsx)("div",{className:"w-6 h-6 rounded-full border border-black/10",style:{backgroundColor:e}})},e))})]}),(0,a.jsx)(r.z,{variant:u?"default":"ghost",onClick:()=>{h(!u),H({fontWeight:u?"normal":"bold"})},children:(0,a.jsx)(v.Z,{})}),(0,a.jsx)(r.z,{variant:_?"default":"ghost",onClick:()=>{S(!_),H({fontStyle:_?"normal":"italic"})},children:(0,a.jsx)(p.Z,{})}),(0,a.jsx)(r.z,{variant:A?"default":"ghost",onClick:()=>{T(!A),H({textDecoration:A?"none":"underline"})},children:(0,a.jsx)(x.Z,{})}),(0,a.jsx)(r.z,{variant:"left"===Z?"default":"ghost",onClick:()=>{F("left"),H({textAlign:"left"})},children:(0,a.jsx)(g.Z,{})}),(0,a.jsx)(r.z,{variant:"center"===Z?"default":"ghost",onClick:()=>{F("center"),H({textAlign:"center"})},children:(0,a.jsx)(f.Z,{})}),(0,a.jsx)(r.z,{variant:"right"===Z?"default":"ghost",onClick:()=>{F("right"),H({textAlign:"right"})},children:(0,a.jsx)(b.Z,{})}),(0,a.jsx)("span",{className:"border-r h-4 border-gray-200"}),(0,a.jsxs)(w.u,{children:[(0,a.jsx)(w.aJ,{asChild:!0,children:(0,a.jsx)(r.z,{variant:"ghost",className:"text-red-600 hover:text-red-600",onClick:()=>{o()},children:(0,a.jsx)(d.Z,{})})}),(0,a.jsx)(w._v,{children:c("delete")})]})]})},S=l(37588),A=l(46571),T=l(39109),Z=l(93881),F=l(31162),L=l(67415),I=l(48117),D=l(65819),P=l(27976);let O=["balto.jenna@gmail.com","dreamer_paul@126.com","yunn02417@gmail.com","coldair444@gmail.com","xileiris@gmail.com","stevenv.w.w@gmail.com","chenyuqiang1020@gmail.com"];var z=function(e){var t,l;let{editToolbar:i,onRemoveBlock:o,iframeRef:u,slideIndex:h}=e,m=(0,s.useTranslations)(),v=(0,D.ZP)(e=>!!P.r8||O.includes(e.userInfo.email||"")),p=(null===(l=i.values)||void 0===l?void 0:null===(t=l.el)||void 0===t?void 0:t.tagName)=="IMG",[x,g]=(0,n.useState)(""),[f,b]=(0,n.useState)(void 0),[C,N]=(0,n.useState)(p?"image":"text"),E=e=>{var t;let{initialTab:l,initialReplaceMethod:a,initialContent:r,initialGenerateMode:s}=e;if(!(null===(t=i.values)||void 0===t?void 0:t.el))return;let{resetEditToolbar:n,setEditImagesModalProps:o,setSidebarType:d}=S.Z.getState();n(),d("image"),o({el:i.values.el,page:i.values.page,iframe:i.values.iframe,initialTab:l,initialReplaceMethod:a,initialContent:r,initialGenerateMode:s})},k=()=>{var e,t;if(!(null===(e=i.values)||void 0===e?void 0:e.el))return;let l=i.values.el,a=document.createElement("div");a.className="felo--image__placeholder",a.style.width="".concat(l.clientWidth,"px"),a.style.height="".concat(l.clientHeight,"px"),null===(t=l.parentElement)||void 0===t||t.replaceChild(a,l)},_=()=>{E({initialTab:"replace",initialReplaceMethod:f,initialContent:x,initialGenerateMode:C})};return(0,a.jsx)(w.pn,{delayDuration:0,children:(0,a.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,a.jsxs)(w.u,{children:[(0,a.jsx)(w.aJ,{asChild:!0,children:(0,a.jsx)(r.z,{variant:"ghost",onClick:()=>E({initialTab:"crop"}),children:(0,a.jsx)(Z.Z,{})})}),(0,a.jsx)(w._v,{children:m("slidesImageEditor.crop")})]}),(0,a.jsxs)(w.u,{children:[(0,a.jsx)(w.aJ,{asChild:!0,children:(0,a.jsx)(r.z,{variant:"ghost",onClick:()=>E({initialTab:"replace",initialReplaceMethod:"upload"}),children:(0,a.jsx)(F.Z,{})})}),(0,a.jsx)(w._v,{children:m("slidesImageEditor.replace")})]}),v&&(0,a.jsxs)(w.u,{children:[(0,a.jsx)(w.aJ,{asChild:!0,children:(0,a.jsx)(r.z,{variant:"ghost",onClick:()=>{if("generate"!==f){b("generate"),g("");return}b(void 0)},children:(0,a.jsx)(L.FZ,{className:"scale-125"})})}),(0,a.jsx)(w._v,{children:m("slidesImageEditor.generate_image")})]}),(0,a.jsxs)(w.u,{children:[(0,a.jsx)(w.aJ,{asChild:!0,children:(0,a.jsx)(r.z,{variant:"ghost",onClick:()=>{if("search"!==f){b("search"),g("");return}b(void 0)},children:(0,a.jsx)(L.jV,{})})}),(0,a.jsx)(w._v,{children:m("slidesImageEditor.search_image")})]}),(0,a.jsx)("span",{className:"border-r h-4 border-gray-200"}),(0,a.jsxs)(w.u,{children:[(0,a.jsx)(w.aJ,{asChild:!0,children:(0,a.jsx)(r.z,{variant:"ghost",className:"text-red-600 hover:text-red-600",onClick:()=>{var e,t,l;if(!(null===(e=i.values)||void 0===e?void 0:e.el))return;if("IMG"===i.values.el.tagName){let{saveSnapshotForOperation:e}=j.Z.getState();e(h,"delete-image",null!==(l=null===(t=u.current)||void 0===t?void 0:t.contentDocument)&&void 0!==l?l:void 0),k()}else o();let{resetEditToolbar:a,setEditImagesModalProps:r,sidebarType:s,setSidebarType:n}=S.Z.getState();a(),"image"===s&&n(void 0),r(void 0)},children:(0,a.jsx)(d.Z,{})})}),(0,a.jsx)(w._v,{children:m("delete")})]}),f&&(0,a.jsxs)("div",{className:(0,A.cn)("absolute top-12 w-72 rounded-xl shadow-[0_2px_6px_0px_rgba(0,0,0,0.16)] bg-white overflow-hidden","dark:bg-slate-800 dark:border-slate-600","generate"===f?"left-[75px]":"left-28"),children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(I.g,{placeholder:m("generate"===f?"slidesImageEditor.enter_generate_image_prompt":"slidesImageEditor.enter_you_want_to_search"),className:(0,A.cn)("focus-visible:ring-0 focus-visible:ring-offset-0 border-none resize-none","w-full p-3 text-xs bg-slate-0 dark:bg-slate-800","pb-12"),value:x,onKeyDown:e=>{13==e.keyCode&&!1==e.shiftKey&&(e.preventDefault(),_())},onChange:e=>g(e.target.value)}),"generate"===f&&(0,a.jsx)("div",{className:"absolute left-3 bottom-3",children:(0,a.jsxs)(y.Ph,{value:C,onValueChange:e=>N(e),children:[(0,a.jsx)(y.i4,{className:"py-2 h-8 text-xs rounded-2xl",children:(0,a.jsx)(y.ki,{})}),(0,a.jsxs)(y.Bw,{children:[(0,a.jsx)(y.Ql,{value:"text",children:m("slidesImageEditor.generate_image_by_text")}),(0,a.jsx)(y.Ql,{value:"image",disabled:!p,children:m("slidesImageEditor.generate_image_by_image")})]})]})})]}),(0,a.jsx)("div",{className:"absolute right-3 bottom-3",children:(0,a.jsx)(r.z,{className:"text-xs w-7 h-7 rounded-full disabled:opacity-30",onClick:_,disabled:!x.trim(),size:"icon",children:(0,a.jsx)(c.Z,{})})})]})]})})},R=l(83438),M=e=>{var t,l,m;let{iframeRef:v,onClickRegenerate:p,onClickEditSlideHtml:x}=e,g=(0,s.useTranslations)(),f=(0,T.Z)(),{saveSnapshotForOperation:b}=(0,j.Z)(),y=(0,S.Z)(e=>e.editToolbar),C=(0,S.Z)(e=>e.setIsShowAIInput),N=(0,S.Z)(e=>e.isShowAIInput),E=(0,S.Z)(e=>e.aiInputValue),k=(0,S.Z)(e=>e.setAIInputValue),Z=(0,n.useRef)(null),F=()=>{var e,t;let{editToolbar:l}=S.Z.getState();if(!(null==l?void 0:null===(e=l.values)||void 0===e?void 0:e.el))return;let a=l.values.iframe,r=l.values.page;if(a&&void 0!==r){let e=a.contentDocument||(null===(t=a.contentWindow)||void 0===t?void 0:t.document);e&&b(r,"delete-element",e)}setTimeout(()=>{l.values.el.remove(),S.Z.getState().resetEditToolbar(),null==a||a.focus()},50)},D=()=>{var e,t,l,a,r;let s=null==y?void 0:null===(e=y.values)||void 0===e?void 0:e.page,n=null==y?void 0:null===(t=y.values)||void 0===t?void 0:t.el,o=null==y?void 0:null===(l=y.values)||void 0===l?void 0:l.iframe,d=null==y?void 0:null===(a=y.values)||void 0===a?void 0:a.elementId;if(void 0===s||!n||!o){console.log("AI Edit failed - missing required values:",{page:s,el:!!n,iframe:!!o});return}let c=(null==o?void 0:o.contentDocument)||(null==o?void 0:null===(r=o.contentWindow)||void 0===r?void 0:r.document);if(!c){f.error(g("editSlides.iframe_error"));return}b(s,"ai-edit",c);let u=(0,i.f)(c);if(!u){f.error(g("editSlides.html_error"));return}C(!1),S.Z.getState().resetEditToolbar(),k(""),null==x||x({html:u,element_id:d,ai_input:E,page:s})};return(0,n.useEffect)(()=>{if(!Z.current)return;if(!y){Z.current.style.top="-9999px",Z.current.style.left="-9999px";return}let e=window.innerWidth,t=window.innerHeight,l=Z.current.clientWidth,a=Z.current.clientHeight,r=y.left-l/2,i=0;"top"===y.verticalPosition?i=y.top-a-10:"bottom"===y.verticalPosition&&(i=y.top+10);let s=Math.max(10,Math.min(i,t-a-10));Z.current.style.top="".concat(s,"px"),Z.current.style.left="".concat(Math.max(10,Math.min(r,e-l-10)),"px")},[y]),(0,n.useEffect)(()=>{let e=()=>{S.Z.getState().resetEditToolbar()},t=e=>{Z.current&&Z.current.contains(e.target)||S.Z.getState().resetEditToolbar()};return window.addEventListener("scroll",e),document.body.addEventListener("click",t),()=>{window.removeEventListener("scroll",e),document.body.removeEventListener("click",t),S.Z.getState().resetEditToolbar()}},[]),(0,a.jsx)("div",{ref:Z,"data-edit-html-tool":"true",className:(0,h.Z)("flex flex-col fixed z-50 bg-white p-1 rounded-xl shadow-[0_2px_6px_0px_rgba(0,0,0,0.16)]","dark:bg-slate-800 dark:border-slate-600"),children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(null==y?void 0:y.type)==="image"&&(0,a.jsx)(z,{editToolbar:y,onRemoveBlock:F,iframeRef:{current:null===(t=y.values)||void 0===t?void 0:t.iframe},slideIndex:null===(l=y.values)||void 0===l?void 0:l.page}),(null==y?void 0:y.type)==="icon"?null===R.sY||void 0===R.sY?void 0:R.sY.map(e=>(0,a.jsx)(u,{item:e,onClick:()=>{var t,l,a;let r=(null==v?void 0:null===(t=v.current)||void 0===t?void 0:t.contentDocument)||(null==v?void 0:null===(a=v.current)||void 0===a?void 0:null===(l=a.contentWindow)||void 0===l?void 0:l.document);(0,R.Nv)({name:e,iframeDocument:r})},children:(0,a.jsx)("i",{className:"material-icons text-sm",children:e})},e)):null,(null==y?void 0:y.type)==="wrapper"&&(0,a.jsx)("div",{children:(0,a.jsxs)(r.z,{variant:"ghost",onClick:()=>{var e;let t=null==y?void 0:null===(e=y.values)||void 0===e?void 0:e.page;void 0!==t&&p&&(p(t),S.Z.getState().resetEditToolbar())},children:[(0,a.jsx)(o.Z,{}),g("editSlides.regenerate")]})}),(null==y?void 0:y.type)==="text"&&(0,a.jsx)(w.pn,{delayDuration:0,children:(0,a.jsx)(_,{editToolModal:y,onRemoveBlock:F})}),(null==y?void 0:y.type)==="block"&&(0,a.jsxs)("div",{className:"relative  text-sm",children:[(0,a.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,a.jsx)(w.pn,{delayDuration:0,children:(0,a.jsxs)(w.u,{children:[(0,a.jsx)(w.aJ,{asChild:!0,children:(0,a.jsx)(r.z,{variant:"ghost",onClick:()=>{C(!N)},children:(0,a.jsx)(L.FZ,{className:"scale-125"})})}),(0,a.jsx)(w._v,{side:"top",children:g("editSlides.ai_edit")})]})}),(0,a.jsx)("span",{className:"w-px h-4 bg-gray-200"}),(0,a.jsx)(w.pn,{delayDuration:0,children:(0,a.jsxs)(w.u,{children:[(0,a.jsx)(w.aJ,{asChild:!0,children:(0,a.jsx)(r.z,{variant:"ghost",onClick:F,className:"text-red-500",children:(0,a.jsx)(d.Z,{})})}),(0,a.jsx)(w._v,{side:"top",children:g("editSlides.remove_block")})]})})]}),N?(0,a.jsxs)("div",{className:(0,h.Z)("absolute top-12 left-0 right-0 bottom-0 w-72 rounded-xl shadow-[0_2px_6px_0px_rgba(0,0,0,0.16)] h-24 bg-white overflow-hidden","dark:bg-slate-800 dark:border-slate-600"),children:[(0,a.jsx)(I.g,{placeholder:g("editSlides.ai_edit_placeholder"),className:(0,h.Z)("focus-visible:ring-0 focus-visible:ring-offset-0 h-16 min-h-16  border-none resize-none","w-full p-3 text-xs bg-slate-0 dark:bg-slate-800"),value:E,onChange:e=>k(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||e.nativeEvent.isComposing||(e.preventDefault(),E.trim()&&D())}}),(0,a.jsx)("div",{className:"flex justify-end pr-2 -mt-1",children:(0,a.jsx)(r.z,{className:" text-xs w-7 h-7 rounded-full",onClick:D,disabled:!E.trim(),size:"icon",children:(0,a.jsx)(c.Z,{})})})]}):null]}),(null==y?void 0:y.type)==="echarts"&&(0,a.jsxs)("div",{children:[(0,a.jsx)(w.pn,{delayDuration:0,children:(0,a.jsxs)(w.u,{children:[(0,a.jsx)(w.aJ,{asChild:!0,children:(0,a.jsx)(r.z,{variant:"ghost",className:(0,A.cn)(!(null===(m=y.values)||void 0===m?void 0:m.supportsEdit)&&"opacity-30"),onClick:()=>{let{editToolbar:e,setIsOpenEditChartsModal:t,setEditChartsModalProps:l}=S.Z.getState();if(null==e?void 0:e.values){if(!1===e.values.supportsEdit){f.error(g("editSlides.unsupported_charts_tips"));return}t(!0),l({el:e.values.echartsEl,inst:e.values.inst,page:e.values.page,iframe:e.values.iframe})}},children:(0,a.jsx)("div",{className:"w-4 h-4",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 17 16",fill:"none",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.0288 1.86192C11.8415 1.04928 13.159 1.04928 13.9717 1.86192C14.7843 2.67455 14.7843 3.99209 13.9717 4.80473L5.59649 13.1799C5.58329 13.1931 5.57021 13.2062 5.55724 13.2192C5.36561 13.4112 5.19665 13.5804 4.99296 13.7053C4.81402 13.8149 4.61893 13.8957 4.41485 13.9447C4.18256 14.0005 3.9434 14.0003 3.67214 14C3.65377 14 3.63526 14 3.61659 14H2.50023C2.13204 14 1.83356 13.7015 1.83356 13.3333V12.217C1.83356 12.1983 1.83355 12.1798 1.83353 12.1614C1.83328 11.8902 1.83305 11.651 1.88882 11.4187C1.93782 11.2146 2.01863 11.0196 2.12828 10.8406C2.25311 10.6369 2.42238 10.468 2.61437 10.2763C2.62737 10.2634 2.64047 10.2503 2.65367 10.2371L11.0288 1.86192ZM13.0288 2.80473C12.7369 2.51279 12.2636 2.51279 11.9717 2.80473L3.59648 11.1799C3.34343 11.4329 3.29678 11.4856 3.26514 11.5373C3.22859 11.5969 3.20165 11.662 3.18532 11.73C3.17118 11.7889 3.1669 11.8591 3.1669 12.217V12.6667H3.61659C3.97445 12.6667 4.04472 12.6624 4.10359 12.6482C4.17162 12.6319 4.23665 12.605 4.2963 12.5684C4.34792 12.5368 4.40064 12.4901 4.65368 12.2371L13.0288 3.86192C13.3208 3.56998 13.3208 3.09666 13.0288 2.80473ZM14.95 11.5079C15.2218 11.7564 15.2407 12.178 14.9923 12.4498L14.3255 13.1792L14.3255 13.1792C13.8524 13.6966 13.1974 14 12.5003 14C11.8034 14 11.1486 13.6967 10.6755 13.1796C10.4409 12.9241 10.1368 12.7934 9.83368 12.7934C9.53044 12.7934 9.22611 12.9243 8.99145 13.1801C8.74253 13.4514 8.32081 13.4695 8.04951 13.2206C7.77821 12.9717 7.76006 12.55 8.00898 12.2787C8.48253 11.7625 9.13719 11.46 9.83368 11.46C10.5302 11.46 11.1848 11.7625 11.6584 12.2787L11.6592 12.2795C11.8933 12.5356 12.1974 12.6667 12.5003 12.6667C12.8032 12.6667 13.1073 12.5356 13.3414 12.2796C13.3414 12.2795 13.3415 12.2795 13.3415 12.2795L14.0082 11.5502C14.2566 11.2784 14.6783 11.2595 14.95 11.5079Z",fill:"currentColor"})})})})}),(0,a.jsx)(w._v,{side:"top",sideOffset:8,children:g("editSlides.edit_charts")})]})}),(0,a.jsx)("span",{className:"w-px h-4 bg-gray-200"}),(0,a.jsx)(w.pn,{delayDuration:0,children:(0,a.jsxs)(w.u,{children:[(0,a.jsx)(w.aJ,{asChild:!0,children:(0,a.jsx)(r.z,{variant:"ghost",onClick:F,className:"text-red-500",children:(0,a.jsx)(d.Z,{})})}),(0,a.jsx)(w._v,{side:"top",sideOffset:8,children:g("editSlides.remove_block")})]})})]})]})})}},46024:function(e,t,l){"use strict";l.d(t,{Hf:function(){return o},e:function(){return s},om:function(){return n},pi:function(){return i},vN:function(){return r}});var a=l(52676);let r=e=>(0,a.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"M11.0816 14.2125L10.4441 16.0312C10.3941 16.1687 10.3066 16.2813 10.1816 16.3688C10.0566 16.4563 9.91914 16.5 9.76914 16.5C9.51914 16.5 9.31601 16.3969 9.15976 16.1906C9.00351 15.9844 8.97539 15.7563 9.07539 15.5063L11.9254 7.96875C11.9879 7.83125 12.0816 7.71875 12.2066 7.63125C12.3316 7.54375 12.4691 7.5 12.6191 7.5H13.1816C13.3316 7.5 13.4691 7.54375 13.5941 7.63125C13.7191 7.71875 13.8129 7.83125 13.8754 7.96875L16.7254 15.525C16.8254 15.7625 16.8004 15.9844 16.6504 16.1906C16.5004 16.3969 16.3004 16.5 16.0504 16.5C15.8879 16.5 15.7473 16.4563 15.6285 16.3688C15.5098 16.2813 15.4191 16.1625 15.3566 16.0125L14.7191 14.2125H11.0816ZM6.56289 10.4813L3.30039 13.725C3.16289 13.8625 2.99102 13.9344 2.78477 13.9406C2.57852 13.9469 2.40039 13.875 2.25039 13.725C2.11289 13.5875 2.04414 13.4125 2.04414 13.2C2.04414 12.9875 2.11289 12.8125 2.25039 12.675L5.51289 9.4125C5.07539 8.975 4.67852 8.475 4.32227 7.9125C4.1397 7.62425 3.95468 7.30269 3.77729 6.96178C3.5317 6.4898 3.88878 5.94819 4.42083 5.94819C4.69989 5.94819 4.95397 6.10523 5.09024 6.34875C5.28183 6.69114 5.48216 7.01294 5.66289 7.275C5.91289 7.6375 6.21289 8 6.56289 8.3625C6.97539 7.95 7.40352 7.37188 7.84727 6.62813C8.29102 5.88438 8.62539 5.175 8.85039 4.5H2.02539C1.81289 4.5 1.63477 4.42813 1.49102 4.28438C1.34727 4.14062 1.27539 3.9625 1.27539 3.75C1.27539 3.5375 1.34727 3.35938 1.49102 3.21563C1.63477 3.07188 1.81289 3 2.02539 3H5.77539V2.25C5.77539 2.0375 5.84727 1.85938 5.99102 1.71562C6.13477 1.57187 6.31289 1.5 6.52539 1.5C6.73789 1.5 6.91602 1.57187 7.05977 1.71562C7.20352 1.85938 7.27539 2.0375 7.27539 2.25V3H10.6504C10.8629 3 11.041 3.07188 11.1848 3.21563C11.3285 3.35938 11.4004 3.5375 11.4004 3.75C11.4004 3.9625 11.3285 4.14062 11.1848 4.28438C11.041 4.42813 10.8629 4.5 10.6504 4.5H10.3504C10.0879 5.4 9.69414 6.325 9.16914 7.275C8.64414 8.225 8.12539 8.95 7.61289 9.45L9.0871 10.9549C9.28614 11.1581 9.35066 11.4576 9.25293 11.7247C9.06635 12.2347 8.41136 12.3752 8.03206 11.9865L6.56289 10.4813ZM11.5504 12.9H14.2504L12.9004 9.075L11.5504 12.9Z",fill:"currentColor"})}),i=e=>(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"M22 11.086v.92a10 10 0 1 1-5.93-9.14M22 4L12 14.01l-3-3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),s=e=>(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,a.jsx)("path",{d:"M8.00001 14.6668C11.6667 14.6668 14.6667 11.6668 14.6667 8.00016C14.6667 4.3335 11.6667 1.3335 8.00001 1.3335C4.33334 1.3335 1.33334 4.3335 1.33334 8.00016C1.33334 11.6668 4.33334 14.6668 8.00001 14.6668Z",fill:"#02B66F",stroke:"#02B66F",strokeWidth:"1.33333",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M5.16666 7.99995L7.05332 9.88661L10.8333 6.11328",stroke:"white",strokeWidth:"1.33333",strokeLinecap:"round",strokeLinejoin:"round"})]}),n=e=>(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"M5 21C4.45 21 3.97917 20.8042 3.5875 20.4125C3.19583 20.0208 3 19.55 3 19V5C3 4.45 3.19583 3.97917 3.5875 3.5875C3.97917 3.19583 4.45 3 5 3H19C19.55 3 20.0208 3.19583 20.4125 3.5875C20.8042 3.97917 21 4.45 21 5V19C21 19.55 20.8042 20.0208 20.4125 20.4125C20.0208 20.8042 19.55 21 19 21H5ZM5 19H19V5H5V19ZM7 17H17C17.2 17 17.35 16.9083 17.45 16.725C17.55 16.5417 17.5333 16.3667 17.4 16.2L14.65 12.525C14.55 12.3917 14.4167 12.325 14.25 12.325C14.0833 12.325 13.95 12.3917 13.85 12.525L11.25 16L9.4 13.525C9.3 13.3917 9.16667 13.325 9 13.325C8.83333 13.325 8.7 13.3917 8.6 13.525L6.6 16.2C6.46667 16.3667 6.45 16.5417 6.55 16.725C6.65 16.9083 6.8 17 7 17Z",fill:"currentColor"})}),o=e=>(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"M15.85 12.425C16 12.325 16.075 12.1833 16.075 12C16.075 11.8167 16 11.675 15.85 11.575L10.275 8C10.1083 7.88333 9.9375 7.875 9.7625 7.975C9.5875 8.075 9.5 8.225 9.5 8.425V15.575C9.5 15.775 9.5875 15.925 9.7625 16.025C9.9375 16.125 10.1083 16.1167 10.275 16L15.85 12.425ZM5 21C4.45 21 3.97917 20.8042 3.5875 20.4125C3.19583 20.0208 3 19.55 3 19V5C3 4.45 3.19583 3.97917 3.5875 3.5875C3.97917 3.19583 4.45 3 5 3H19C19.55 3 20.0208 3.19583 20.4125 3.5875C20.8042 3.97917 21 4.45 21 5V19C21 19.55 20.8042 20.0208 20.4125 20.4125C20.0208 20.8042 19.55 21 19 21H5ZM5 19H19V5H5V19Z",fill:"currentColor"})})},67415:function(e,t,l){"use strict";l.d(t,{FZ:function(){return r},GK:function(){return o},PU:function(){return h},Wv:function(){return s},f7:function(){return i},jV:function(){return c},ky:function(){return d},pr:function(){return u},qM:function(){return n},yo:function(){return m}});var a=l(52676);let r=e=>(0,a.jsx)("svg",{width:"78",height:"78",viewBox:"0 0 78 78",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"M43.468 67.8a2.784 2.784 0 0 1-1.907-.74 3.2 3.2 0 0 1-.995-1.878c-.512-2.92-1.035-5.377-1.568-7.37-.531-1.97-1.185-3.582-1.962-4.835a8.96 8.96 0 0 0-2.985-3.017c-1.236-.758-2.81-1.365-4.724-1.821a83.192 83.192 0 0 0-7.084-1.309 3.2 3.2 0 0 1-1.936-.992 2.88 2.88 0 0 1-.74-1.965 2.784 2.784 0 0 1 .768-1.965 3.008 3.008 0 0 1 1.936-.992c2.827-.324 5.207-.705 7.14-1.142 1.935-.435 3.528-1.032 4.78-1.792a9.279 9.279 0 0 0 3.044-3.072c.797-1.29 1.443-2.931 1.936-4.921.492-2.01.958-4.476 1.395-7.399a3.008 3.008 0 0 1 .966-1.875 2.817 2.817 0 0 1 1.933-.742c.742 0 1.378.247 1.907.742a3.071 3.071 0 0 1 1.024 1.875c.512 2.92 1.024 5.377 1.536 7.37.53 1.973 1.184 3.585 1.965 4.835a9.12 9.12 0 0 0 3.014 3.017c1.236.76 2.8 1.367 4.695 1.821 1.916.455 4.277.881 7.085 1.28.795.135 1.44.476 1.936 1.024a2.75 2.75 0 0 1 .768 1.936 2.912 2.912 0 0 1-2.733 2.957c-2.806.324-5.177.714-7.114 1.168-1.933.435-3.535 1.033-4.806 1.792a8.96 8.96 0 0 0-3.043 3.072c-.781 1.29-1.417 2.931-1.908 4.922-.494 2.014-.96 4.48-1.395 7.398a3.04 3.04 0 0 1-.995 1.879 2.744 2.744 0 0 1-1.933.739zM22.412 33.73c-.947 0-1.477-.493-1.59-1.48a51.166 51.166 0 0 0-.685-4.297c-.228-1.043-.608-1.83-1.14-2.361-.528-.553-1.324-.96-2.386-1.223a44.801 44.801 0 0 0-4.439-.8c-1.045-.149-1.568-.68-1.568-1.59 0-.911.465-1.442 1.395-1.594a63.989 63.989 0 0 0 4.554-.937c1.1-.288 1.917-.687 2.448-1.197.53-.531.908-1.3 1.136-2.304.226-1.024.454-2.437.685-4.24.113-1.005.643-1.507 1.59-1.507.93 0 1.462.483 1.594 1.45.228 1.898.456 3.377.685 4.438.245 1.062.633 1.859 1.164 2.39.532.512 1.338.892 2.42 1.14 1.081.247 2.58.503 4.496.767.416.039.757.21 1.024.512a1.6 1.6 0 0 1 .396 1.082c0 .892-.455 1.423-1.366 1.594-1.952.32-3.477.632-4.576.937-1.084.288-1.891.697-2.422 1.226-.532.512-.91 1.28-1.136 2.304-.229 1.024-.457 2.446-.685 4.265a1.6 1.6 0 0 1-1.594 1.424z",fill:"currentColor"})}),i=e=>(0,a.jsxs)("svg",{...e,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M20.7134 8.12811L20.4668 8.69379C20.2864 9.10792 19.7136 9.10792 19.5331 8.69379L19.2866 8.12811C18.8471 7.11947 18.0555 6.31641 17.0677 5.87708L16.308 5.53922C15.8973 5.35653 15.8973 4.75881 16.308 4.57612L17.0252 4.25714C18.0384 3.80651 18.8442 2.97373 19.2761 1.93083L19.5293 1.31953C19.7058 0.89349 20.2942 0.89349 20.4706 1.31953L20.7238 1.93083C21.1558 2.97373 21.9616 3.80651 22.9748 4.25714L23.6919 4.57612C24.1027 4.75881 24.1027 5.35653 23.6919 5.53922L22.9323 5.87708C21.9445 6.31641 21.1529 7.11947 20.7134 8.12811ZM12 2C6.47715 2 2 6.47715 2 12C2 13.5705 2.36203 15.0564 3.00719 16.3789C3.11202 16.5938 3.14729 16.8371 3.09543 17.0705L2.34089 20.466C2.18211 21.1805 2.8195 21.8179 3.534 21.6591L6.92944 20.9046C7.16284 20.8527 7.40621 20.888 7.6211 20.9928C8.94357 21.638 10.4295 22 12 22C17.5228 22 22 17.5228 22 12C22 11.9354 21.9994 11.8709 21.9982 11.8066C21.9877 11.2544 21.4853 10.8622 20.9369 10.9273L20.894 10.9324C20.3692 10.9947 20 11.4715 20 12C20 16.4183 16.4183 20 12 20C10.6655 20 9.38248 19.6745 8.23428 19.0605L7.90752 18.8858C7.69668 18.773 7.45241 18.7395 7.21901 18.7914L4.94096 19.2976C4.79806 19.3294 4.67058 19.2019 4.70234 19.059L5.20857 16.7809C5.26044 16.5475 5.22697 16.3033 5.11422 16.0924L4.93949 15.7657C4.32549 14.6175 4 13.3345 4 12C4 7.58172 7.58172 4 12 4C12.3454 4 12.6852 4.02183 13.0184 4.06411C13.5663 4.13363 14.1116 3.81819 14.2492 3.28332C14.3868 2.74845 14.0649 2.19804 13.519 2.11477C13.0232 2.03916 12.5159 2 12 2Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M6 12C6 11.1716 6.67157 10.5 7.5 10.5C8.32843 10.5 9 11.1716 9 12C9 12.8284 8.32843 13.5 7.5 13.5C6.67157 13.5 6 12.8284 6 12Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M10.5 12C10.5 11.1716 11.1716 10.5 12 10.5C12.8284 10.5 13.5 11.1716 13.5 12C13.5 12.8284 12.8284 13.5 12 13.5C11.1716 13.5 10.5 12.8284 10.5 12Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M15 12C15 11.1716 15.6716 10.5 16.5 10.5C17.3284 10.5 18 11.1716 18 12C18 12.8284 17.3284 13.5 16.5 13.5C15.6716 13.5 15 12.8284 15 12Z",fill:"currentColor"})]}),s=e=>(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"M10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM10 18C5.59 18 2 14.41 2 10C2 5.59 5.59 2 10 2C14.41 2 18 5.59 18 10C18 14.41 14.41 18 10 18ZM15.2975 6.29251C14.9074 5.89963 14.2719 5.89811 13.8804 6.28961L8.14115 12.0289C8.06315 12.1068 7.93673 12.107 7.85858 12.0291L6.11568 10.293C5.72572 9.9045 5.09489 9.90511 4.70568 10.2943C4.31594 10.6841 4.31594 11.3159 4.70568 11.7057L7.29289 14.2929C7.68342 14.6834 8.31658 14.6834 8.70711 14.2929L15.2954 7.70461C15.6849 7.31506 15.6857 6.68343 15.2975 6.29251Z",fill:"#4BB548"})}),n=e=>(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"M9 14.002C9 13.4497 9.44771 13.002 10 13.002C10.5523 13.002 11 13.4497 11 14.002C11 14.5542 10.5523 15.002 10 15.002C9.44771 15.002 9 14.5542 9 14.002ZM9 6.00195C9 5.44967 9.44771 5.00195 10 5.00195C10.5523 5.00195 11 5.44967 11 6.00195V10.002C11 10.5542 10.5523 11.002 10 11.002C9.44771 11.002 9 10.5542 9 10.002V6.00195ZM9.99 0.00195312C4.47 0.00195312 0 4.48195 0 10.002C0 15.522 4.47 20.002 9.99 20.002C15.52 20.002 20 15.522 20 10.002C20 4.48195 15.52 0.00195312 9.99 0.00195312ZM10 18.002C5.58 18.002 2 14.422 2 10.002C2 5.58195 5.58 2.00195 10 2.00195C14.42 2.00195 18 5.58195 18 10.002C18 14.422 14.42 18.002 10 18.002Z",fill:"#BB8824"})}),o=e=>(0,a.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,a.jsx)("path",{d:"M6.99624 13.9998C6.78944 14.0011 6.58987 13.9238 6.43797 13.7834C6.28105 13.6387 6.17828 13.4447 6.14666 13.2336C5.99679 12.3787 5.8438 11.6597 5.68769 11.0764C5.5322 10.4994 5.3408 10.0276 5.11349 9.66107C4.89714 9.30088 4.59742 8.99795 4.23956 8.77777C3.878 8.55608 3.41715 8.37842 2.85701 8.24479C2.17159 8.0872 1.47966 7.95938 0.783177 7.86168C0.566165 7.83404 0.365674 7.73131 0.216479 7.57131C0.0745654 7.41365 -0.002697 7.20829 0.0001039 6.99618C-0.00330804 6.7824 0.0774302 6.57585 0.22491 6.42105C0.370969 6.25695 0.573098 6.15339 0.791607 6.13068C1.61902 6.03576 2.3156 5.9243 2.88136 5.79628C3.44775 5.66889 3.91422 5.49404 4.28078 5.27173C4.64437 5.04632 4.94959 4.73822 5.17157 4.37251C5.40512 3.99471 5.59402 3.5145 5.73827 2.93188C5.88252 2.34364 6.01865 1.62176 6.14666 0.766252C6.1716 0.555135 6.27208 0.360169 6.42954 0.217351C6.58369 0.0756968 6.78596 -0.00199715 6.99531 3.90335e-05C7.21262 3.90335e-05 7.39871 0.0724763 7.55357 0.217351C7.71594 0.35856 7.82229 0.553314 7.85331 0.766252C8.00318 1.62114 8.15306 2.3402 8.30293 2.92345C8.45779 3.50108 8.6495 3.97286 8.87805 4.33879C9.10536 4.70597 9.39948 5.00041 9.76041 5.22209C10.122 5.4444 10.58 5.62206 11.1345 5.75507C11.6953 5.88808 12.3866 6.01297 13.2084 6.12974C13.4413 6.16908 13.6302 6.269 13.7751 6.42948C13.9249 6.59059 13.9999 6.77949 13.9999 6.99618C14.0037 7.2157 13.9226 7.42822 13.7736 7.58945C13.6246 7.75069 13.4191 7.84821 13.1999 7.86168C12.3788 7.9566 11.6847 8.07057 11.1177 8.20358C10.5519 8.33097 10.0829 8.50581 9.71077 8.72812C9.34488 8.95064 9.03904 9.25937 8.81998 9.62735C8.59143 10.0051 8.40534 10.4854 8.26171 11.068C8.11684 11.6575 7.9807 12.3793 7.85331 13.2336C7.82554 13.446 7.72211 13.6412 7.562 13.7834C7.40851 13.9267 7.20612 14.0043 6.99624 13.9998Z",fill:"url(#paint0_linear_1477_5694)"}),(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"paint0_linear_1477_5694",x1:"0",y1:"7",x2:"14",y2:"7",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"currentColor"}),(0,a.jsx)("stop",{offset:"1",stopColor:"currentColor"})]})})]}),d=e=>(0,a.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,a.jsx)("path",{d:"M14.998 9.166a.481.481 0 0 1-.332-.128v-.001a.562.562 0 0 1-.173-.328c-.09-.508-.182-.936-.274-1.284a3.164 3.164 0 0 0-.342-.843 1.552 1.552 0 0 0-.52-.525 2.852 2.852 0 0 0-.824-.316c-.33-.08-.741-.156-1.234-.229a.558.558 0 0 1-.337-.173.493.493 0 0 1-.128-.342.475.475 0 0 1 .133-.342.524.524 0 0 1 .338-.173c.493-.057.907-.123 1.243-.2.292-.059.573-.164.833-.311.217-.134.399-.318.531-.536.156-.266.27-.555.337-.857.1-.425.182-.856.243-1.289a.524.524 0 0 1 .169-.327.476.476 0 0 1 .335-.129.476.476 0 0 1 .334.129c.097.084.16.2.178.327.09.51.18.938.268 1.285.074.295.189.579.342.842.131.214.311.394.525.525.255.147.53.254.818.317.335.08.746.155 1.234.224a.56.56 0 0 1 .338.178.51.51 0 0 1-.343.852c-.416.044-.83.113-1.239.205-.336.076-.616.18-.838.312-.218.132-.395.31-.53.536a3.095 3.095 0 0 0-.332.857c-.085.35-.166.78-.243 1.289a.536.536 0 0 1-.173.327.476.476 0 0 1-.337.128z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M10 2.5a.833.833 0 0 1 0 1.667H4.167v11.666h11.666V10a.833.833 0 0 1 1.667 0v5.833c0 .459-.163.85-.49 1.177-.326.327-.718.49-1.177.49H4.167c-.459 0-.851-.163-1.177-.49a1.605 1.605 0 0 1-.49-1.177V4.167c0-.459.163-.851.49-1.177.326-.327.718-.49 1.177-.49H10z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M5.458 13.937c.084.153.209.23.375.23h8.334a.403.403 0 0 0 .375-.23.367.367 0 0 0-.042-.437l-2.292-3.063a.396.396 0 0 0-.333-.166.396.396 0 0 0-.333.166l-2.167 2.896-1.542-2.062a.396.396 0 0 0-.333-.167.396.396 0 0 0-.333.167L5.5 13.5a.367.367 0 0 0-.042.437z",fill:"currentColor"})]}),c=e=>(0,a.jsx)("svg",{...e,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M9.167 1.603c4.14 0 7.5 3.36 7.5 7.5 0 4.14-3.36 7.5-7.5 7.5-4.14 0-7.5-3.36-7.5-7.5 0-4.14 3.36-7.5 7.5-7.5zm0 13.333A5.832 5.832 0 0 0 15 9.103a5.832 5.832 0 0 0-5.833-5.834 5.832 5.832 0 0 0-5.834 5.834 5.832 5.832 0 0 0 5.834 5.833zm6.482.648a.833.833 0 0 1 1.178 0l1.178 1.179a.833.833 0 0 1-1.178 1.179l-1.178-1.18a.833.833 0 0 1 0-1.178z",fill:"currentColor"})}),u=e=>(0,a.jsxs)("svg",{...e,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M13.9592 13.1942C14.0756 13.0267 14.1311 12.8249 14.1311 12.6011C14.1311 12.0925 13.7892 11.7828 13.4466 11.6228C13.1104 11.4658 12.7041 11.411 12.3561 11.411C11.9853 11.411 11.5535 11.4585 11.2789 11.4944C10.8267 11.0034 10.6114 10.6736 10.5158 10.5021C10.6213 10.1895 10.7901 9.58499 10.8192 8.84919C10.8379 8.36703 10.7409 7.91327 10.4346 7.59484C10.1268 7.27479 9.75515 7.24917 9.63711 7.24917C9.45344 7.24917 9.16985 7.29603 8.93554 7.53263C8.70194 7.76851 8.58688 8.12285 8.58688 8.58676C8.58688 9.2408 8.83157 9.90536 8.96946 10.2292C8.59383 11.2912 8.20726 12.0654 8.03756 12.3858C6.21725 13.1033 5.86884 13.8682 5.86884 14.3198C5.86884 14.6021 5.9738 14.866 6.19551 15.0519C6.40765 15.2297 6.68114 15.2982 6.95552 15.2982C7.32767 15.2982 7.66054 15.1428 7.93348 14.9494C8.20815 14.7548 8.45176 14.5008 8.65466 14.252C8.9766 13.8573 9.22337 13.4412 9.35256 13.2071C9.88484 13.0137 10.5233 12.8767 10.8721 12.8099C11.6225 13.4451 12.4523 13.6326 12.8612 13.6326L12.8751 13.6326C12.9998 13.6328 13.2852 13.6332 13.5461 13.5227C13.6909 13.4614 13.8441 13.36 13.9592 13.1942Z",fill:"currentColor"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.4093 0.925405C11.6105 0.973705 11.8064 1.04056 11.9947 1.12494C12.0058 1.12974 12.0169 1.13477 12.0278 1.14003C12.1462 1.19464 12.2614 1.25622 12.3728 1.3245C12.7109 1.53169 12.9935 1.81455 13.3675 2.1889L16.1444 4.96581C16.5188 5.33982 16.8016 5.62241 17.0088 5.96051C17.0768 6.0715 17.1382 6.18621 17.1926 6.30404C17.1984 6.31596 17.2039 6.32804 17.2091 6.34028C17.2931 6.52802 17.3597 6.72341 17.4079 6.92402C17.5005 7.3096 17.5003 7.70943 17.5 8.2386L17.5 14.3677C17.5 15.0385 17.5 15.5922 17.4632 16.0432C17.4249 16.5116 17.3428 16.9422 17.1367 17.3466C16.8171 17.9738 16.3072 18.4837 15.68 18.8033C15.2755 19.0094 14.8449 19.0915 14.3765 19.1298C13.9255 19.1667 13.3719 19.1667 12.7011 19.1666H7.2989C6.6281 19.1667 6.07447 19.1667 5.62348 19.1298C5.15507 19.0915 4.72448 19.0094 4.32003 18.8033C3.69283 18.4837 3.18289 17.9738 2.86331 17.3466C2.65724 16.9422 2.5751 16.5116 2.53683 16.0432C2.49998 15.5922 2.49999 15.0385 2.5 14.3677V5.63222C2.49999 4.96142 2.49998 4.40778 2.53683 3.95678C2.5751 3.48837 2.65724 3.05778 2.86331 2.65334C3.18289 2.02613 3.69283 1.51619 4.32003 1.19662C4.72448 0.99054 5.15507 0.908404 5.62348 0.870133C6.07448 0.833285 6.62811 0.833293 7.29892 0.833304L10.0947 0.833278C10.6239 0.833026 11.0237 0.832836 11.4093 0.925405ZM10.0098 2.49997C10.4493 2.49997 10.6786 2.50241 10.8333 2.51651L10.8333 5.35993C10.8333 5.57026 10.8333 5.77509 10.8475 5.94856C10.863 6.13905 10.8997 6.36383 11.015 6.59002C11.1748 6.90362 11.4297 7.15859 11.7434 7.31838C11.9695 7.43362 12.1943 7.47035 12.3848 7.48591C12.5583 7.50008 12.7631 7.50006 12.9734 7.50003L15.8168 7.50003C15.8309 7.65478 15.8333 7.88408 15.8333 8.32349V14.3333C15.8333 15.0471 15.8327 15.5324 15.802 15.9074C15.7722 16.2728 15.7181 16.4596 15.6517 16.59C15.4919 16.9036 15.2369 17.1585 14.9233 17.3183C14.793 17.3847 14.6061 17.4388 14.2408 17.4687C13.8657 17.4993 13.3805 17.5 12.6667 17.5H7.33333C6.61952 17.5 6.13427 17.4993 5.7592 17.4687C5.39385 17.4388 5.20702 17.3847 5.07668 17.3183C4.76308 17.1585 4.50811 16.9036 4.34832 16.59C4.28192 16.4596 4.22781 16.2728 4.19796 15.9074C4.16732 15.5324 4.16667 15.0471 4.16667 14.3333V5.66664C4.16667 4.95282 4.16732 4.46758 4.19796 4.0925C4.22781 3.72716 4.28192 3.54032 4.34832 3.40999C4.50811 3.09638 4.76308 2.84142 5.07668 2.68163C5.20702 2.61522 5.39385 2.56111 5.7592 2.53126C6.13427 2.50062 6.61952 2.49997 7.33333 2.49997H10.0098ZM12.5 5.33337V3.67848L14.6549 5.83336H13C12.7529 5.83336 12.6177 5.83272 12.5205 5.82478L12.5095 5.82382L12.5086 5.81284C12.5006 5.71568 12.5 5.58047 12.5 5.33337Z",fill:"currentColor"})]}),h=e=>(0,a.jsx)("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 0C4.92487 0 0 4.92487 0 11C0 17.0751 4.92487 22 11 22C17.0751 22 22 17.0751 22 11C22 4.92487 17.0751 0 11 0ZM16.2071 8.70711C16.5976 8.31658 16.5976 7.68342 16.2071 7.29289C15.8166 6.90237 15.1834 6.90237 14.7929 7.29289L9.5 12.5858L7.20711 10.2929C6.81658 9.90237 6.18342 9.90237 5.79289 10.2929C5.40237 10.6834 5.40237 11.3166 5.79289 11.7071L8.79289 14.7071C9.18342 15.0976 9.81658 15.0976 10.2071 14.7071L16.2071 8.70711Z",fill:"currentColor"})}),m=e=>(0,a.jsx)("svg",{width:"24",height:"21",viewBox:"0 0 24 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.1878 0.668804C11.7051 0.438885 12.2956 0.438814 12.8128 0.668804C13.2121 0.846487 13.4721 1.15903 13.6527 1.41392C13.8302 1.66458 14.0198 1.99327 14.2288 2.35435L22.4964 16.6336C22.7063 16.9961 22.8964 17.3258 23.0257 17.6053C23.1572 17.8895 23.2997 18.2719 23.2542 18.7079C23.1953 19.2718 22.9003 19.7846 22.4417 20.118C22.0873 20.3757 21.6851 20.4429 21.3734 20.4715C21.0666 20.4997 20.6858 20.4999 20.2669 20.4999H3.73275C3.31388 20.4999 2.93305 20.4997 2.62631 20.4715C2.31458 20.4429 1.91236 20.3757 1.55795 20.118C1.09937 19.7846 0.804382 19.2718 0.745449 18.7079C0.7 18.2719 0.842515 17.8895 0.973965 17.6053C1.1033 17.3258 1.29435 16.9961 1.50424 16.6336L9.77084 2.35435C9.97991 1.99316 10.1704 1.66461 10.348 1.41392C10.5286 1.15897 10.7884 0.846422 11.1878 0.668804ZM12.0003 14.9999C11.4481 14.9999 11.0004 15.4476 11.0003 15.9999C11.0003 16.5521 11.448 16.9999 12.0003 16.9999C12.5524 16.9997 13.0003 16.552 13.0003 15.9999C13.0003 15.4478 12.5524 15.0001 12.0003 14.9999ZM12.0003 6.99986C11.4481 6.99986 11.0004 7.44763 11.0003 7.99986V11.9999C11.0003 12.5521 11.448 12.9999 12.0003 12.9999C12.5524 12.9997 13.0003 12.552 13.0003 11.9999V7.99986C13.0003 7.44775 12.5524 7.00006 12.0003 6.99986Z",fill:"currentColor"})})},92540:function(e,t,l){"use strict";let a;l.d(t,{U:function(){return ex},_:function(){return em}});var r=l(52676),i=l(75271),s=l(25010),n=l(86811),o=l(22675),d=l(9164),c=l(4032),u=l(45229),h=l(32373),m=l(68752),v=l(9388),p=l(32437),x=l(18016),g=l(69421),f=l(416),b=l(10852),y=l(1711),C=l(18718),w=l(9088),j=l(95521),N=l(37588),E=l(17224),k=l(19370),_=l(67975),S=l(53986),A=l(72696),T=l(5588),Z=l(46571),F=l(34379),L=l(39071),I=l(8156),D=l(62074),P=l(91708),O=l(42703),z=l(59167),R=l(23344),M=l(7717),B=l(39109);let H=e=>{let t="";for(;e>=0;)t=String.fromCharCode(e%26+65)+t,e=Math.floor(e/26)-1;return t},W=e=>{var t;let{node:l,path:a,onUpdate:i,onAddChild:n,onDelete:o,level:d,seriesItemStyle:c}=e,u=(0,M.useTranslations)(),h=l.children&&l.children.length>0,m=(null===(t=l.itemStyle)||void 0===t?void 0:t.color)||(null==c?void 0:c.color)||"#3B82F6";return(0,r.jsxs)("div",{style:{marginLeft:20*d},children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 p-1 border-b",children:[(0,r.jsx)(T.I,{className:"border-none h-auto bg-transparent text-left text-base flex-1 dark:bg-[#474E5C] dark:text-white",placeholder:u("slidesChartEditor.nodeName"),value:l.name||"",onChange:e=>i(a,"name",e.target.value)}),(0,r.jsx)(T.I,{className:"border-none h-auto bg-transparent text-left text-base w-24 dark:bg-[#474E5C]",type:"number",placeholder:u("slidesChartEditor.value"),value:l.value||"",onChange:e=>i(a,"value",Number(e.target.value))}),(0,r.jsx)(T.I,{className:"h-7 w-10 p-1 border-none bg-transparent",type:"color",value:m,onChange:e=>{i(a,"itemStyle",{...l.itemStyle||{},color:e.target.value})}}),(0,r.jsx)(s.z,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>n(a),title:u("slidesChartEditor.addChild"),children:(0,r.jsx)(F.Z,{className:"h-3.5 w-3.5 text-green-500"})}),(0,r.jsx)(s.z,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>o(a),title:u("slidesChartEditor.deleteNode"),children:(0,r.jsx)(L.Z,{className:"h-3.5 w-3.5 text-destructive"})})]}),h&&l.children.map((e,t)=>(0,r.jsx)(W,{node:e,path:"".concat(a,"-").concat(t),onUpdate:i,onAddChild:n,onDelete:o,level:d+1,seriesItemStyle:c},t))]})},J=e=>{let{x:t,y:l,onClose:a,onInsertAbove:s,onInsertBelow:n,onDuplicate:o,onDelete:d,canDelete:c,type:u}=e,h=(0,M.useTranslations)(),m=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let e=e=>{m.current&&!m.current.contains(e.target)&&a()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[a]),(0,r.jsx)("div",{ref:m,className:"fixed z-50 bg-white dark:bg-[#363B45] rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",style:{left:t,top:l},children:(0,r.jsxs)("div",{className:"py-1",children:[(0,r.jsxs)("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-[#474E5C] flex items-center gap-2",onClick:s,children:[(0,r.jsx)(I.Z,{className:"h-4 w-4"}),h("row"===u?"slidesChartEditor.insertRowAbove":"slidesChartEditor.insertColumnLeft")]}),(0,r.jsxs)("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-[#474E5C] flex items-center gap-2",onClick:n,children:[(0,r.jsx)(D.Z,{className:"h-4 w-4"}),h("row"===u?"slidesChartEditor.insertRowBelow":"slidesChartEditor.insertColumnRight")]}),(0,r.jsxs)("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-[#474E5C] flex items-center gap-2",onClick:o,children:[(0,r.jsx)(P.Z,{className:"h-4 w-4"}),h("row"===u?"slidesChartEditor.duplicateRow":"slidesChartEditor.duplicateColumn")]}),(0,r.jsxs)("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-[#474E5C] flex items-center gap-2 text-destructive disabled:opacity-50 disabled:cursor-not-allowed",onClick:d,disabled:!c,children:[(0,r.jsx)(L.Z,{className:"h-4 w-4"}),h("row"===u?"slidesChartEditor.deleteRow":"slidesChartEditor.deleteColumn")]})]})})};var V=function(e){var t,l,a,n,o,d,c,u,h,m;let{data:v,chartType:p,setData:x}=e,g=(0,M.useTranslations)(),f=(0,B.Z)(),b=["pie","doughnut","funnel"].includes(p),y="heatmap"===p,C="candlestick"===p,w="scatter"===p,j="graph"===p,N="sankey"===p,E="tree"===p,_="sunburst"===p,S="treemap"===p,[F]=(0,i.useState)(()=>JSON.parse(JSON.stringify(v))),[I,D]=(0,i.useState)(null),[P,V]=(0,i.useState)(!1),[G,U]=(0,i.useState)(null),[q,X]=(0,i.useState)(null),Y=()=>{x(JSON.parse(JSON.stringify(F))),V(!1),D(null),f.success(g("slidesChartEditor.dataRestored"))},Q=()=>{D(null),V(!1)},[K,$]=(0,i.useState)({seriesNames:v.series.map(e=>e.name||""),categoryNames:b?(null===(t=v.series[0])||void 0===t?void 0:t.data.map(e=>"object"==typeof e?e.name:""))||[]:(null===(l=v.xAxis)||void 0===l?void 0:l.data)||[],cellValues:v.series.map(e=>e.data.map(e=>"object"==typeof e?e.value:e))});(0,i.useEffect)(()=>{var e,t;let l=b?(null===(e=v.series[0])||void 0===e?void 0:e.data.map(e=>"object"==typeof e?e.name:""))||[]:(null===(t=v.xAxis)||void 0===t?void 0:t.data)||[];$({seriesNames:v.series.map(e=>e.name||""),categoryNames:l,cellValues:v.series.map(e=>e.data.map(e=>"object"==typeof e?e.value:e))})},[v,p,b]);let ee=()=>!["pie","doughnut","funnel","radar","candlestick","gauge"].includes(p),et=()=>{f.error(g("slidesChartEditor.chart_type_not_support_add"),{description:g("slidesChartEditor.unsupported_operation")})},el=e=>{if(!ee()){et();return}if(!v)return;let t={...v};if(b)t.series.forEach(t=>{Array.isArray(t.data)&&t.data.splice(e,1)});else{var l;(null===(l=t.xAxis)||void 0===l?void 0:l.data)&&t.xAxis.data.splice(e,1),t.series.forEach(t=>{Array.isArray(t.data)&&t.data.splice(e,1)})}x(t)},ea=(e,t)=>{$(l=>({...l,categoryNames:l.categoryNames.map((l,a)=>a===e?t:l)}))},er=(e,t,l)=>{$(a=>({...a,cellValues:a.cellValues.map((a,r)=>r===e?a.map((e,a)=>a===t?Number(l)||0:e):a)}))},ei=(e,t)=>{if(!v)return;let l={...v};if(b)l.series.forEach(l=>{if(Array.isArray(l.data)&&e<l.data.length){let a=l.data[e];"object"==typeof a?a.name=t:l.data[e]={name:t,value:a}}});else{var a;(null===(a=l.xAxis)||void 0===a?void 0:a.data)&&(l.xAxis.data[e]=t)}x(l)},es=(e,t,l)=>{if(!v)return;let a={...v},r=a.series[e];if(b){let e=r.data[t];if("object"==typeof e)e.value=l;else{let e=("object"==typeof a.series[0].data[t]?a.series[0].data[t].name:K.categoryNames[t])||"".concat(g("slidesChartEditor.item")," ").concat(t+1);r.data[t]={name:e,value:l}}}else if(y)Array.isArray(r.data)&&t<r.data.length&&(r.data[t]=l);else if(C)Array.isArray(r.data)&&t<r.data.length&&(r.data[t]=l);else{let e=r.data[t];"object"==typeof e&&null!==e?e.value=l:r.data[t]=l}x(a)},en=e=>{if(!ee()){et();return}if(!v)return;let t={...v};if(b){let l="".concat(g("slidesChartEditor.item")," ").concat(e+1);t.series.forEach(t=>{Array.isArray(t.data)&&t.data.splice(e,0,{name:l,value:0})})}else if(C){t.xAxis||(t.xAxis={data:[]});let l="".concat(String(9+Math.floor(e/2)).padStart(2,"0"),":").concat(e%2*30==0?"00":"30");if(t.xAxis.data.splice(e,0,l),t.series.length>=4){let l=Math.max(0,e-1),a=l>=0&&t.series[1].data[l]?t.series[1].data[l]:100,r="object"==typeof a&&null!==a?a.value:a,i="number"==typeof r?r:100,s=i+(Math.random()-.5)*10,n=Math.max(i,s)+5*Math.random(),o=Math.min(i,s)-5*Math.random();t.series[0].data.splice(e,0,i),t.series[1].data.splice(e,0,s),t.series[2].data.splice(e,0,o),t.series[3].data.splice(e,0,n)}}else t.xAxis||(t.xAxis={data:[]}),t.xAxis.data.splice(e,0,"".concat(g("slidesChartEditor.item")," ").concat(e+1)),t.series.forEach(t=>{Array.isArray(t.data)&&t.data.splice(e,0,0)});x(t)},eo=e=>{if(!ee()){et();return}if(!v)return;let t={...v};if(b){let l="".concat(g("slidesChartEditor.item")," ").concat(e+2);t.series.forEach(t=>{Array.isArray(t.data)&&t.data.splice(e+1,0,{name:l,value:0})})}else if(C){t.xAxis||(t.xAxis={data:[]});let l="".concat(String(9+Math.floor((e+1)/2)).padStart(2,"0"),":").concat((e+1)%2*30==0?"00":"30");if(t.xAxis.data.splice(e+1,0,l),t.series.length>=4){let l=t.series[1].data[e]||100,a="object"==typeof l&&null!==l?l.value:l,r="number"==typeof a?a:100,i=r+(Math.random()-.5)*10,s=Math.max(r,i)+5*Math.random(),n=Math.min(r,i)-5*Math.random();t.series[0].data.splice(e+1,0,r),t.series[1].data.splice(e+1,0,i),t.series[2].data.splice(e+1,0,n),t.series[3].data.splice(e+1,0,s)}}else t.xAxis||(t.xAxis={data:[]}),t.xAxis.data.splice(e+1,0,"".concat(g("slidesChartEditor.item")," ").concat(e+2)),t.series.forEach(t=>{Array.isArray(t.data)&&t.data.splice(e+1,0,0)});x(t)},ed=e=>{if(!ee()){et();return}if(!v)return;let t={...v};if(b)t.series.forEach(t=>{if(Array.isArray(t.data)&&e<t.data.length){let l=t.data[e],a="object"==typeof l?{...l,name:"".concat(l.name," ").concat(g("copy"))}:l;t.data.splice(e+1,0,a)}});else if(C){t.xAxis||(t.xAxis={data:[]});let l=t.xAxis.data[e],a="".concat(l," ").concat(g("copy"));t.xAxis.data.splice(e+1,0,a),t.series.length>=4&&t.series.forEach((t,l)=>{if(Array.isArray(t.data)&&e<t.data.length){let l=t.data[e];t.data.splice(e+1,0,l)}})}else{t.xAxis||(t.xAxis={data:[]});let l=t.xAxis.data[e],a="".concat(l," ").concat(g("copy"));t.xAxis.data.splice(e+1,0,a),t.series.forEach(t=>{if(Array.isArray(t.data)&&e<t.data.length){let l=t.data[e];t.data.splice(e+1,0,l)}})}x(t)},ec=b?Math.max(...v.series.map(e=>e.data.length),0):(null===(n=v.xAxis)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.length)||0,eu=e=>{U(e),D(null),V(!1)},eh=()=>{U(null)};if(w){let e=(null===(o=v.series[0])||void 0===o?void 0:o.data)||[];return console.log("\uD83D\uDD0D Scatter Debug Info:",{chartType:p,isScatter:w,seriesCount:v.series.length,firstSeriesData:null===(d=v.series[0])||void 0===d?void 0:d.data,scatterDataLength:e.length,firstPoint:e[0]}),(0,r.jsxs)("div",{className:"relative pr-11 pb-11",children:[(0,r.jsx)("div",{className:"border rounded-lg overflow-hidden flex-1 bg-card shadow-sm ",children:(0,r.jsx)("div",{className:"overflow-auto",children:(0,r.jsxs)("table",{className:"w-full border-collapse border-[#DEE1E5] bg-white dark:border-[#5F6B7D] dark:bg-[#2E3A52]",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"bg-[#F0F1F4] dark:bg-[#2E3A52] text-left p-2.5",children:"X"}),(0,r.jsx)("th",{className:"bg-[#F0F1F4] dark:bg-[#2E3A52] text-left p-2.5",children:"Y"}),(0,r.jsx)("th",{className:"bg-[#F0F1F4] dark:bg-[#2E3A52] text-left p-2.5",children:g("slidesChartEditor.label")||"标签"}),(0,r.jsx)("th",{className:"bg-[#F0F1F4] dark:bg-[#2E3A52] text-left p-2.5",children:"操作"})]})}),(0,r.jsx)("tbody",{children:e.length>0?e.map((t,l)=>{var a,i,n,o,d,c,u;return(0,r.jsxs)("tr",{className:"border-t hover:bg-muted/20 transition-colors dark:border-[#5F6B7D]",children:[(0,r.jsx)("td",{children:(0,r.jsx)(T.I,{className:"border-none h-auto px-2.5 py-5 bg-background/50 text-left text-base dark:text-white dark:border-none dark:focus:ring-2 dark:focus:ring-[#FF6A00] font-bold",type:"number",value:Array.isArray(t)?t[0]:null!==(o=null===(a=t.value)||void 0===a?void 0:a[0])&&void 0!==o?o:0,onChange:e=>{var a,r,i,s,n;let o={...v},d=Array.isArray(t)?[...t]:[null!==(i=null===(a=t.value)||void 0===a?void 0:a[0])&&void 0!==i?i:0,null!==(s=null===(r=t.value)||void 0===r?void 0:r[1])&&void 0!==s?s:0];d[0]=Number(e.target.value),(t.length>=3||d.length>=3)&&(d[2]=null!==(n=d[2])&&void 0!==n?n:""),o.series[0].data[l]=d,x(o)}})}),(0,r.jsx)("td",{children:(0,r.jsx)(T.I,{className:"border-none h-auto px-2.5 py-5 bg-background/50 text-left text-base dark:text-white dark:border-none dark:focus:ring-2 dark:focus:ring-[#FF6A00] font-bold",type:"number",value:Array.isArray(t)?t[1]:null!==(d=null===(i=t.value)||void 0===i?void 0:i[1])&&void 0!==d?d:0,onChange:e=>{var a,r,i,s,n;let o={...v},d=Array.isArray(t)?[...t]:[null!==(i=null===(a=t.value)||void 0===a?void 0:a[0])&&void 0!==i?i:0,null!==(s=null===(r=t.value)||void 0===r?void 0:r[1])&&void 0!==s?s:0];d[1]=Number(e.target.value),(t.length>=3||d.length>=3)&&(d[2]=null!==(n=d[2])&&void 0!==n?n:""),o.series[0].data[l]=d,x(o)}})}),(0,r.jsx)("td",{children:(0,r.jsx)(T.I,{className:"border-none h-auto px-2.5 py-5 bg-background/50 text-left text-base dark:text-white",value:Array.isArray(t)?null!==(c=t[2])&&void 0!==c?c:"":null!==(u=null===(n=t.label)||void 0===n?void 0:n.formatter)&&void 0!==u?u:"",onChange:e=>{var a,r,i,s;let n={...v},o=Array.isArray(t)?[...t]:[null!==(i=null===(a=t.value)||void 0===a?void 0:a[0])&&void 0!==i?i:0,null!==(s=null===(r=t.value)||void 0===r?void 0:r[1])&&void 0!==s?s:0];(e.target.value||o.length>=3)&&(o[2]=e.target.value),n.series[0].data[l]=o,x(n)}})}),(0,r.jsx)("td",{className:"text-left",children:(0,r.jsx)(s.z,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full hover:bg-destructive/10 hover:text-destructive mx-auto",onClick:()=>{let e={...v};e.series[0].data.splice(l,1),x(e)},disabled:e.length<=1,children:(0,r.jsx)(L.Z,{className:"h-3.5 w-3.5"})})})]},l)}):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:4,className:"p-6 text-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,r.jsx)(O.Z,{className:"h-8 w-8 text-muted-foreground"}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:g("slidesChartEditor.noData")})]})})})})]})})}),(0,r.jsx)("button",{className:(0,Z.cn)("absolute left-0 right-0 bottom-0 bg-[#F5F7FC] h-9 dark:bg-black hover:opacity-80","flex justify-center items-center","cursor-pointer","mr-11"),onClick:()=>{let e={...v};Array.isArray(e.series[0].data)||(e.series[0].data=[]);let t=e.series[0].data.some(e=>Array.isArray(e)&&e.length>2);e.series[0].data.push(t?[0,0,""]:[0,0]),x(e)},children:(0,r.jsx)(z.Z,{className:"size-5"})})]})}if(j||N){let e=(null===(c=v.series[0])||void 0===c?void 0:c.data)||[],t=(null===(u=v.series[0])||void 0===u?void 0:u.links)||[],l=(e,t)=>{var l;let a=JSON.parse(JSON.stringify(v)),r=null===(l=a.series[0].data)||void 0===l?void 0:l.find(t=>t.name===e);r&&(r.name=t),a.series[0].links&&(a.series[0].links=a.series[0].links.map(l=>(l.source===e&&(l.source=t),l.target===e&&(l.target=t),l))),x(a)},a=e=>{let t=JSON.parse(JSON.stringify(v));t.series[0].data&&(t.series[0].data=t.series[0].data.filter(t=>t.name!==e)),t.series[0].links&&(t.series[0].links=t.series[0].links.filter(t=>t.source!==e&&t.target!==e)),x(t)},i=(e,t,l)=>{let a=JSON.parse(JSON.stringify(v));a.series[0].links&&a.series[0].links[e]&&(a.series[0].links[e][t]=l,x(a))},n=e=>{let t=JSON.parse(JSON.stringify(v));t.series[0].links&&(t.series[0].links.splice(e,1),x(t))};return(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:[(0,r.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:g("slidesChartEditor.nodes")}),e.map((e,t)=>{var i;return(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(T.I,{value:e.name,onChange:t=>l(e.name,t.target.value),className:"text-left text-base dark:text-white"}),(0,r.jsx)(T.I,{type:"color",value:(null===(i=e.itemStyle)||void 0===i?void 0:i.color)||"#000000",onChange:e=>{let l={...v};l.series[0].data[t].itemStyle||(l.series[0].data[t].itemStyle={}),l.series[0].data[t].itemStyle.color=e.target.value,x(l)},className:"w-10 h-10 p-1"}),(0,r.jsx)(s.z,{variant:"ghost",size:"icon",onClick:()=>a(e.name),children:(0,r.jsx)(L.Z,{className:"h-4 w-4 text-destructive"})})]},t)}),(0,r.jsxs)(s.z,{onClick:()=>{let e=JSON.parse(JSON.stringify(v));e.series[0].data||(e.series[0].data=[]);let t="".concat(g("slidesChartEditor.node")," ").concat(e.series[0].data.length+1);e.series[0].data.push({name:t,itemStyle:{color:"#3B82F6"}}),x(e)},className:"mt-2",children:[(0,r.jsx)(z.Z,{className:"h-4 w-4 mr-2"}),g("slidesChartEditor.addNode")]})]}),(0,r.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:g("slidesChartEditor.links")}),t.map((t,l)=>(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsxs)(k.Ph,{value:t.source,onValueChange:e=>i(l,"source",e),children:[(0,r.jsx)(k.i4,{children:(0,r.jsx)(k.ki,{})}),(0,r.jsx)(k.Bw,{children:e.map(e=>(0,r.jsx)(k.Ql,{value:e.name,children:e.name},e.name))})]}),(0,r.jsxs)(k.Ph,{value:t.target,onValueChange:e=>i(l,"target",e),children:[(0,r.jsx)(k.i4,{children:(0,r.jsx)(k.ki,{})}),(0,r.jsx)(k.Bw,{children:e.map(e=>(0,r.jsx)(k.Ql,{value:e.name,children:e.name},e.name))})]}),N&&(0,r.jsx)(T.I,{type:"number",value:t.value,onChange:e=>i(l,"value",Number(e.target.value)),className:"w-20 text-left text-base dark:text-white"}),(0,r.jsx)(s.z,{variant:"ghost",size:"icon",onClick:()=>n(l),children:(0,r.jsx)(L.Z,{className:"h-4 w-4 text-destructive"})})]},l)),(0,r.jsxs)(s.z,{onClick:()=>{let e=JSON.parse(JSON.stringify(v));e.series[0].links||(e.series[0].links=[]),e.series[0].links.push({source:"",target:"",value:10}),x(e)},className:"mt-2",children:[(0,r.jsx)(z.Z,{className:"h-4 w-4 mr-2"}),g("slidesChartEditor.addLink")]})]})]})}if(E||_||S){let e=(null===(h=v.series[0])||void 0===h?void 0:h.data)||[],t=null===(m=v.series[0])||void 0===m?void 0:m.itemStyle,l=(e,t,l,a)=>{let r=t.split("-").map(Number),i=e;for(let e=0;e<r.length-1;e++)i=i[r[e]].children;let s=r[r.length-1];return i[s]={...i[s],[l]:a},[...e]},a=(e,t)=>{let l=t.split("-").map(Number),a=e;for(let t=0;t<l.length;t++){if(!a[l[t]])return e;a[l[t]].children||(a[l[t]].children=[]),a=a[l[t]].children}let r="".concat(g("slidesChartEditor.newNode"));return a.push({name:r,value:10}),[...e]},i=(e,t)=>{var l,a;let r=t.split("-").map(Number);if(1===r.length)return e.splice(r[0],1),[...e];let i=e;for(let t=0;t<r.length-2;t++){if(!(null===(a=i[r[t]])||void 0===a?void 0:a.children))return e;i=i[r[t]].children}let s=r[r.length-1];return(null===(l=i[r[r.length-2]])||void 0===l?void 0:l.children)&&i[r[r.length-2]].children.splice(s,1),[...e]},n=(t,a,r)=>{let i=l(e,t,a,r);x({...v,series:[{...v.series[0],data:i}]})},o=t=>{let l=a(e,t);x({...v,series:[{...v.series[0],data:l}]})},d=t=>{let l=i(e,t);x({...v,series:[{...v.series[0],data:l}]})};return(0,r.jsxs)("div",{className:"p-4 border rounded-lg bg-card shadow-sm",children:[e.map((e,l)=>(0,r.jsx)(W,{node:e,path:"".concat(l),onUpdate:n,onAddChild:o,onDelete:d,level:0,seriesItemStyle:t},l)),(0,r.jsxs)(s.z,{variant:"outline",className:"mt-4",onClick:()=>{let t=[...e,{name:g("slidesChartEditor.newRootNode"),value:10}];x({...v,series:[{...v.series[0],data:t}]})},children:[(0,r.jsx)(z.Z,{className:" h-4 w-4"}),g("slidesChartEditor.addRootNode")]})]})}return(0,r.jsxs)("div",{onClick:()=>{Q(),eh()},onKeyDown:e=>{"Escape"===e.key&&(Q(),eh(),X(null))},tabIndex:-1,className:"outline-none",children:[(0,r.jsxs)("div",{className:"relative pr-11 pb-11",children:[(0,r.jsx)("div",{className:"border rounded-lg overflow-hidden flex-1 bg-card shadow-sm",children:(0,r.jsx)("div",{className:"overflow-auto",children:(0,r.jsxs)("table",{className:"w-full border-collapse border-[#DEE1E5] dark:border-[#5F6B7D] dark:bg-[#2E3A52]",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsxs)(A.h_,{children:[(0,r.jsx)(A.$F,{asChild:!0,children:(0,r.jsx)("td",{className:"bg-[#F0F1F4] dark:bg-[#2E3A52] p-2.5 font-bold text-white border-r border-[#DEE1E5] dark:border-[#5F6B7D] text-left cursor-pointer",children:" "})}),(0,r.jsxs)(A.AW,{align:"start",side:"bottom",className:"dark:bg-[#363B45]",children:[(0,r.jsxs)(A.Xi,{onClick:e=>{e.stopPropagation(),Y()},className:"dark:hover:bg-[#474E5C]",children:[(0,r.jsx)(R.Z,{className:" h-4 w-4"}),g("slidesChartEditor.restoreOriginalData")]}),(0,r.jsxs)(A.Xi,{onClick:e=>{var t,l;e.stopPropagation();let a={...v};b?a.series.forEach(e=>{Array.isArray(e.data)&&(e.data=[])}):C?((null===(t=a.xAxis)||void 0===t?void 0:t.data)&&(a.xAxis.data=[]),a.series.forEach(e=>{Array.isArray(e.data)&&(e.data=[])})):((null===(l=a.xAxis)||void 0===l?void 0:l.data)&&(a.xAxis.data=[]),a.series.forEach(e=>{Array.isArray(e.data)&&(e.data=[])})),x(a),f.success(g("slidesChartEditor.dataCleared"))},className:"text-[#D14625] dark:hover:bg-[#474E5C]",children:[(0,r.jsx)(L.Z,{className:" h-4 w-4"}),g("slidesChartEditor.clearAllData")]})]})]}),v.series.map((e,t)=>(0,r.jsx)("td",{className:(0,Z.cn)("bg-[#F0F1F4] dark:bg-[#2E3A52] p-2.5 font-bold dark:text-white border-b border-[#DEE1E5] dark:border-[#5F6B7D] text-left cursor-pointer",G===t?"border-2 border-blue-500 dark:border-blue-500":""),onClick:e=>{e.stopPropagation(),eu(t)},children:H(t)},t)),!C&&(0,r.jsx)("td",{className:"bg-[#F0F1F4] dark:bg-[#2E3A52] p-2.5 font-bold dark:text-white border-b border-[#DEE1E5] dark:border-[#5F6B7D] text-left",children:H(v.series.length)})]})}),(0,r.jsx)("tbody",{children:ec>0?Array.from({length:ec}).map((e,t)=>(0,r.jsxs)("tr",{className:(0,Z.cn)("group border-t border-[#DEE1E5] dark:border-[#5F6B7D] bg-[#F5F7FC] dark:bg-[#474E5C]",(null==I?void 0:I.row)===t&&-1===I.col||P?"border-2 border-blue-500 dark:border-blue-500 bg-blue-500/10 dark:bg-blue-400/10":""),onClick:e=>{e.stopPropagation(),D({row:t,col:-1}),V(!1)},onContextMenu:e=>{e.preventDefault(),(null==I?void 0:I.row)===t&&-1===I.col&&X({x:e.clientX,y:e.clientY,rowIndex:t,type:"row"})},children:[(0,r.jsx)("td",{className:(0,Z.cn)("border-r border-[#DEE1E5] dark:border-[#5F6B7D] dark:bg-[#474E5C]",(null==I?void 0:I.row)===t&&-1===I.col||P?"bg-blue-500/10 dark:bg-blue-400/10":""),children:(0,r.jsx)("div",{className:"h-full cursor-pointer w-full flex items-center justify-center bg-[#F0F1F4] dark:bg-[#2E3A52] px-2.5 py-5 text-left",children:t+2})}),(0,r.jsx)("td",{onClick:e=>{e.stopPropagation(),D({row:t,col:0}),V(!1)},onDoubleClick:e=>{var t;null===(t=e.currentTarget.querySelector("input"))||void 0===t||t.focus()},className:(0,Z.cn)("border-r border-[#DEE1E5] dark:border-[#5F6B7D] bg-[#F5F7FC] dark:bg-[#3B4455] font-bold dark:text-white min-w-[120px]",(null==I?void 0:I.row)===t&&0===I.col?"ring-1 ring-inset ring-blue-500":(null==I?void 0:I.row)===t&&-1===I.col||P?"bg-blue-500/10 dark:bg-blue-400/10":""),children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(T.I,{className:"border-none h-auto px-2.5 py-5 bg-transparent text-left text-base dark:text-white dark:border-none dark:focus:ring-2 dark:focus:ring-blue-500",value:K.categoryNames[t]||"",maxLength:50,onChange:e=>ea(t,e.target.value),onBlur:e=>ei(t,e.target.value)}),(0,r.jsx)(s.z,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full hover:bg-destructive/10 hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>el(t),disabled:ec<=1,children:(0,r.jsx)(L.Z,{className:"h-3.5 w-3.5"})})]})}),v.series.map((e,l)=>{var a,i,s;let n=e.data[t],o=null!==(s=null!==(i=null===(a=K.cellValues[l])||void 0===a?void 0:a[t])&&void 0!==i?i:"object"==typeof n?null==n?void 0:n.value:n)&&void 0!==s?s:0;return(0,r.jsx)("td",{onClick:e=>{e.stopPropagation(),D({row:t,col:l+1}),V(!1)},onDoubleClick:e=>{var t;null===(t=e.currentTarget.querySelector("input"))||void 0===t||t.focus()},className:(0,Z.cn)("border-r border-[#DEE1E5] dark:border-[#5F6B7D] dark:bg-[#474E5C] min-w-[120px]",(null==I?void 0:I.row)===t&&I.col===l+1?"ring-1 ring-inset ring-blue-500":(null==I?void 0:I.row)===t&&-1===I.col||P?"bg-blue-500/10 dark:bg-blue-400/10":G===l?"bg-blue-500/10 dark:bg-blue-400/10":""),children:(0,r.jsx)(T.I,{className:"border-none h-auto px-2.5 py-5 bg-transparent text-left text-base dark:text-white dark:border-none dark:focus:ring-2 dark:focus:ring-blue-500",type:"number",value:o,step:C?"0.01":"1",onChange:e=>{let a=e.target.value;a&&Number(a)>1e16?er(l,t,"9999999999999999"):er(l,t,a)},onBlur:e=>es(l,t,e.target.valueAsNumber||0)})},l)})]},t)):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:v.series.length+2,className:"p-6 text-center text-white bg-[#F5F7FC] dark:bg-[#2E3A52]",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,r.jsx)(O.Z,{className:"h-8 w-8 text-muted-foreground"}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:g("slidesChartEditor.noData")})]})})})})]})})}),!C&&(0,r.jsx)("button",{className:(0,Z.cn)("absolute top-0 bottom-0 right-0 bg-[#F5F7FC] w-9 dark:bg-[#31384B] hover:opacity-80 ","flex justify-center items-center","cursor-pointer","mb-11"),onClick:()=>{var e,t,l;if(!ee()){et();return}if(!v||C)return;let a={...v},r="".concat(g("slidesChartEditor.series")," ").concat(a.series.length+1);if(a.legend||(a.legend={data:[]}),a.legend.data||(a.legend.data=a.series.map(e=>e.name||"")),a.legend.data.push(r),b){let t=((null===(e=a.series[0])||void 0===e?void 0:e.data.map(e=>"object"==typeof e?e.name:"".concat(g("slidesChartEditor.item")," ").concat(a.series[0].data.indexOf(e)+1)))||[]).map(e=>({name:e,value:0}));if(0===t.length)for(let e=1;e<=5;e++)t.push({name:"".concat(g("slidesChartEditor.item")," ").concat(e),value:10});a.series.push({name:r,data:t,type:"doughnut"===p?"pie":p,emphasis:{label:!0}})}else{if(!a.xAxis||!a.xAxis.data||0===a.xAxis.data.length){let e=(null===(l=a.series[0])||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.length)||3;a.xAxis={...a.xAxis,data:Array.from({length:e},(e,t)=>"".concat(g("slidesChartEditor.item")," ").concat(t+1))}}let e=Array(a.xAxis.data.length).fill(0);a.series.push({name:r,data:e,type:"area"===p?"line":p,..."area"===p?{areaStyle:{}}:{},emphasis:{label:!0}})}x(a)},children:(0,r.jsx)(z.Z,{className:"size-5"})}),(0,r.jsx)("button",{className:(0,Z.cn)("absolute left-0 right-0 bottom-0 bg-[#F5F7FC] h-9 dark:bg-[#31384B] hover:opacity-80","flex justify-center items-center","cursor-pointer",C?"":"mr-11"),onClick:()=>{if(!ee()){et();return}if(!v)return;let e={...v};if(b){var t;let l="".concat(g("slidesChartEditor.item")," ").concat((null===(t=e.series[0])||void 0===t?void 0:t.data.length)+1);e.series.forEach(e=>{Array.isArray(e.data)&&e.data.push({name:l,value:0})})}else if(C){e.xAxis||(e.xAxis={data:[]}),e.xAxis.data||(e.xAxis.data=[]);let t="".concat(String(9+Math.floor(e.xAxis.data.length/2)).padStart(2,"0"),":").concat(e.xAxis.data.length%2*30==0?"00":"30");if(e.xAxis.data.push(t),e.series.length>=4){let t=e.series[0].data.length-1,l=t>=0?e.series[1].data[t]:100,a="object"==typeof l&&null!==l?l.value:l,r="number"==typeof a?a:100,i=r+(Math.random()-.5)*10,s=Math.max(r,i)+5*Math.random(),n=Math.min(r,i)-5*Math.random();e.series[0].data.push(r),e.series[1].data.push(i),e.series[2].data.push(n),e.series[3].data.push(s)}}else e.xAxis||(e.xAxis={data:[]}),e.xAxis.data.push("".concat(g("slidesChartEditor.item")," ").concat(e.xAxis.data.length+1)),e.series.forEach(e=>{Array.isArray(e.data)&&e.data.push(0)});x(e)},children:(0,r.jsx)(z.Z,{className:"size-5"})})]}),q&&(0,r.jsx)(J,{x:q.x,y:q.y,onClose:()=>X(null),onInsertAbove:()=>{en(q.rowIndex),X(null)},onInsertBelow:()=>{eo(q.rowIndex),X(null)},onDuplicate:()=>{ed(q.rowIndex),X(null)},onDelete:()=>{el(q.rowIndex),X(null)},canDelete:ec>1,type:"row"})]})},G=l(26949);let U=[{value:"default",colors:null,label:"slidesChartEditor.default"},{value:"custom1",colors:["#061058","#0A196B","#102485","#17329F","#2042B9","#5071D5","#7595EA","#A5BDF8","#D1DEFB"],label:"custom1"},{value:"custom2",colors:["#07470A","#0D550C","#1B6A13","#2C7F1B","#409426","#75BE54","#A1DE7B","#CCF4AB","#E7F9D4"],label:"custom2"},{value:"custom3",colors:["#003059","#00436C","#005E86","#007DA0","#01a0bb","#36CBD6","#5EEAE9","#95F8EF","#C9FBF3"],label:"custom3"},{value:"custom4",colors:["#592700","#6C3400","#864601","#A05A01","#bb7102","#D69D37","#EABE5F","#F8DC95","#FBEFC9"],label:"custom4"},{value:"custom5",colors:["#490213","#580311","#6E060E","#830908","#99180c","#C1523B","#E08364","#F4B89A","#F9DECB"],label:"custom5"}],q=[{value:"top",label:"slidesChartEditor.top"},{value:"bottom",label:"slidesChartEditor.bottom"},{value:"left",label:"slidesChartEditor.left"},{value:"right",label:"slidesChartEditor.right"}];var X=l(66292),Y=l.n(X),Q=l(68782),K=l(21516);let $=Y()(async e=>{let{id:t,page:l,iframeDocument:r}=e;if(console.log("save"),!r)return;let i=(0,Q.f)(r);if(!t||!l||!i)return;a&&a.abort(),a=new AbortController;let s=new URLSearchParams(location.search).get("modelType");try{await (0,K.ZN)({business_id:t,business_type:"AGENT_THREAD",page:l,content:i,model_type:s||"",signal:a.signal})}catch(e){if((null==e?void 0:e.name)==="AbortError"){console.log("Request has been cancelled.");return}console.error("Failed to save HTML:",e)}},5e3);var ee=l(63023);let et=e=>e?"left"===e.left?"left":"right"===e.left?"right":"top"===e.top?"top":"bottom"===e.top?"bottom":"":"",el=(e,t)=>{var l,a,r,i,s,n,o;let d=(null===(a=e.series)||void 0===a?void 0:null===(l=a[0])||void 0===l?void 0:l.data)||[],c=(null===(i=e.xAxis)||void 0===i?void 0:null===(r=i[0])||void 0===r?void 0:r.data)||[];return{series:[{name:t("slidesChartEditor.open"),data:d.map(e=>Array.isArray(e)?e[0]:0),type:"candlestick"},{name:t("slidesChartEditor.close"),data:d.map(e=>Array.isArray(e)?e[1]:0),type:"candlestick"},{name:t("slidesChartEditor.low"),data:d.map(e=>Array.isArray(e)?e[2]:0),type:"candlestick"},{name:t("slidesChartEditor.high"),data:d.map(e=>Array.isArray(e)?e[3]:0),type:"candlestick"}],xAxis:{data:c},title:null===(s=e.title)||void 0===s?void 0:s[0],type:"candlestick",itemStyle:null===(o=e.series)||void 0===o?void 0:null===(n=o[0])||void 0===n?void 0:n.itemStyle}},ea=(e,t)=>{var l,a,r,i;let s=(null===(l=e.radar)||void 0===l?void 0:l[0])||e.radar,n=(null==s?void 0:s.indicator)||[],o=n.map(e=>e.name||"".concat(t("slidesChartEditor.indicator")," ").concat(n.indexOf(e)+1)),d=[],c=e.series[0];(null==c?void 0:c.data)&&Array.isArray(c.data)&&c.data.forEach((e,l)=>{let a=Array.isArray(null==e?void 0:e.value)?e.value:Array.isArray(e)?e:[],r=(null==e?void 0:e.name)||"".concat(t("slidesChartEditor.series")," ").concat(l+1);d.push({name:r,data:a,type:"radar",areaStyle:null==e?void 0:e.areaStyle,lineStyle:null==e?void 0:e.lineStyle,itemStyle:null==e?void 0:e.itemStyle})});let u=o.length>0?o:(null===(r=d[0])||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.map((e,l)=>"".concat(t("slidesChartEditor.indicator")," ").concat(l+1)))||[];return{series:d,xAxis:{data:u},radar:{indicator:n.length>0?n:u.map((e,t)=>({name:e,max:1.2*Math.max(...d.map(e=>{var l;return(null===(l=e.data)||void 0===l?void 0:l[t])||0}))||100}))},legend:e.legend,title:null===(i=e.title)||void 0===i?void 0:i[0],type:"radar"}},er=e=>{var t,l,a,r,i,s,n;let o=(null===(l=e.xAxis)||void 0===l?void 0:null===(t=l[0])||void 0===t?void 0:t.data)||[],d=(null===(r=e.yAxis)||void 0===r?void 0:null===(a=r[0])||void 0===a?void 0:a.data)||[],c=(null===(s=e.series)||void 0===s?void 0:null===(i=s[0])||void 0===i?void 0:i.data)||[],u=[];for(let e=0;e<d.length;e++){let t=[];for(let l=0;l<o.length;l++){let a=c.find(t=>Array.isArray(t)&&t[0]===l&&t[1]===e);t.push(a?a[2]:0)}u.push({name:d[e],data:t,type:"heatmap"})}return{series:u,xAxis:{data:o},yAxis:{data:d},title:null===(n=e.title)||void 0===n?void 0:n[0],type:"heatmap"}},ei=(e,t)=>{var l,a,r,i,s;let n=(null===(a=e.xAxis)||void 0===a?void 0:null===(l=a[0])||void 0===l?void 0:l.data)||[],o=(null===(i=e.series)||void 0===i?void 0:null===(r=i[0])||void 0===r?void 0:r.data)||[],d=[];return[t("slidesChartEditor.min"),t("slidesChartEditor.q1"),t("slidesChartEditor.median"),t("slidesChartEditor.q3"),t("slidesChartEditor.max")].forEach((e,t)=>{let l=[];for(let e=0;e<n.length;e++){let a=o[e];l.push(Array.isArray(a)?a[t]:0)}d.push({name:e,data:l,type:"boxplot"})}),{series:d,xAxis:{data:n},title:null===(s=e.title)||void 0===s?void 0:s[0],type:"boxplot"}},es=(e,t)=>{var l,a;let r=(null===(l=e.series)||void 0===l?void 0:l[0])||{};return{series:[{...r,name:r.name||t("slidesChartEditor.graph"),type:"graph",data:r.data||[],links:r.links||[]}],type:"graph",title:null===(a=e.title)||void 0===a?void 0:a[0]}},en=(e,t)=>{var l,a;let r=(null===(l=e.series)||void 0===l?void 0:l[0])||{};return{series:[{...r,name:r.name||t("slidesChartEditor.tree"),type:"tree",data:r.data||[]}],type:"tree",title:null===(a=e.title)||void 0===a?void 0:a[0]}},eo=(e,t)=>{var l,a;let r=(null===(l=e.series)||void 0===l?void 0:l[0])||{};return{series:[{...r,name:r.name||t("slidesChartEditor.sunburst"),type:"sunburst",data:r.data||[]}],type:"sunburst",title:null===(a=e.title)||void 0===a?void 0:a[0]}},ed=(e,t)=>{var l,a;let r=(null===(l=e.series)||void 0===l?void 0:l[0])||{};return{series:[{...r,name:r.name||t("slidesChartEditor.treemap"),type:"treemap",data:r.data||[]}],type:"treemap",title:null===(a=e.title)||void 0===a?void 0:a[0]}},ec=(e,t)=>{var l,a;let r=(null===(l=e.series)||void 0===l?void 0:l[0])||{};return{series:[{...r,name:r.name||t("slidesChartEditor.sankey"),type:"sankey",data:r.data||[],links:r.links||[]}],type:"sankey",title:null===(a=e.title)||void 0===a?void 0:a[0]}},eu=(e,t)=>{var l,a,r,i,s,n,o,d,c,u,h,m,v,p,x,g,f,b,y,C,w,j,N,E;let k=(null===(a=e.xAxis)||void 0===a?void 0:null===(l=a[0])||void 0===l?void 0:l.type)==="value"&&(null===(i=e.yAxis)||void 0===i?void 0:null===(r=i[0])||void 0===r?void 0:r.type)==="category"&&["bar","line"].includes(null===(n=e.series)||void 0===n?void 0:null===(s=n[0])||void 0===s?void 0:s.type)?(null===(d=e.yAxis)||void 0===d?void 0:null===(o=d[0])||void 0===o?void 0:o.data)||[]:(null===(u=e.xAxis)||void 0===u?void 0:null===(c=u[0])||void 0===c?void 0:c.data)||[];if(0===k.length&&(null===(m=e.series)||void 0===m?void 0:null===(h=m[0])||void 0===h?void 0:h.data)){let l=e.series[0].data;k=Array.from({length:l.length},(e,a)=>{var r,i;return null!==(i=null===(r=l[a])||void 0===r?void 0:r.name)&&void 0!==i?i:"".concat(t("slidesChartEditor.item")," ").concat(a+1)})}return"scatter"===((null===(p=e.series)||void 0===p?void 0:null===(v=p[0])||void 0===v?void 0:v.type)||"bar")?{series:e.series.map((e,t)=>({...e,name:e.name||"Series ".concat(t+1),data:e.data||[],type:"scatter",symbolSize:e.symbolSize||8,itemStyle:e.itemStyle||{},emphasis:e.emphasis||{},coordinateSystem:e.coordinateSystem||"cartesian2d",label:e.label||{}})),xAxis:(null===(y=e.xAxis)||void 0===y?void 0:y[0])||{type:"value"},yAxis:(null===(C=e.yAxis)||void 0===C?void 0:C[0])||{type:"value"},legend:e.legend||{},title:(null===(w=e.title)||void 0===w?void 0:w[0])||{},type:"scatter",grid:(null===(j=e.grid)||void 0===j?void 0:j[0])||{},axisPointer:(null===(N=e.axisPointer)||void 0===N?void 0:N[0])||{},tooltip:(null===(E=e.tooltip)||void 0===E?void 0:E[0])||{},backgroundColor:e.backgroundColor,color:e.color}:{series:e.series.map((l,a)=>{var r,i;let s=l.name;if(!s&&(null===(i=e.legend)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r[a])&&(s=e.legend.data[a]),s||(s="Series ".concat(a+1)),["pie","doughnut","funnel"].includes(l.type)&&a>0&&e.series[0].data){let a=e.series[0].data;if(l.data&&l.data.length!==a.length){let e=[];for(let r=0;r<a.length;r++){let i="object"==typeof a[r]?a[r].name:"".concat(t("slidesChartEditor.item")," ").concat(r+1),s=r<l.data.length?"object"==typeof l.data[r]?l.data[r].value:l.data[r]:0;e.push({name:i,value:s})}l.data=e}}return{...l,name:s,data:l.data||[]}}),xAxis:{...null===(x=e.xAxis)||void 0===x?void 0:x[0],data:k},legend:e.legend,title:null===(g=e.title)||void 0===g?void 0:g[0],type:(null===(b=e.series)||void 0===b?void 0:null===(f=b[0])||void 0===f?void 0:f.type)||"bar"}},eh=(e,t)=>{var l,a;switch((null===(a=e.series)||void 0===a?void 0:null===(l=a[0])||void 0===l?void 0:l.type)||"bar"){case"candlestick":return el(e,t);case"radar":return ea(e,t);case"heatmap":return er(e);case"boxplot":return ei(e,t);case"graph":return es(e,t);case"tree":return en(e,t);case"sunburst":return eo(e,t);case"treemap":return ed(e,t);case"sankey":return ec(e,t);default:return eu(e,t)}},em=[{value:"bar",label:"slidesChartEditor.bar_chart",icon:(0,r.jsx)(o.Z,{className:"h-6 w-6"}),type:"basic"},{value:"line",label:"slidesChartEditor.line_chart",icon:(0,r.jsx)(d.Z,{className:"h-6 w-6"}),type:"basic"},{value:"area",label:"slidesChartEditor.area_chart",icon:(0,r.jsx)(c.Z,{className:"h-6 w-6"}),type:"basic"},{value:"scatter",label:"slidesChartEditor.scatter_chart",icon:(0,r.jsx)(u.Z,{className:"h-6 w-6"}),type:"other"},{value:"pie",label:"slidesChartEditor.pie_chart",icon:(0,r.jsx)(h.Z,{className:"h-6 w-6"}),type:"pie"},{value:"doughnut",label:"slidesChartEditor.doughnut_chart",icon:(0,r.jsx)(m.Z,{className:"h-6 w-6"}),type:"pie"},{value:"funnel",label:"slidesChartEditor.funnel_chart",icon:(0,r.jsx)(v.Z,{className:"h-6 w-6"}),type:"pie"},{value:"radar",label:"slidesChartEditor.radar_chart",icon:(0,r.jsx)(p.Z,{className:"h-6 w-6"}),type:"other"},{value:"heatmap",label:"slidesChartEditor.heatmap_chart",icon:(0,r.jsx)(x.Z,{className:"h-6 w-6"}),type:"other"},{value:"boxplot",label:"slidesChartEditor.boxplot_chart",icon:(0,r.jsx)(g.Z,{className:"h-6 w-6"}),type:"other"},{value:"candlestick",label:"candlestick",icon:(0,r.jsx)(o.Z,{className:"h-6 w-6 rotate-90"}),type:"other"},{value:"gauge",label:"gauge",icon:(0,r.jsx)(g.Z,{className:"h-6 w-6"}),type:"other"},{value:"graph",label:"slidesChartEditor.graph_chart",icon:(0,r.jsx)(f.Z,{className:"h-6 w-6"}),type:"other"},{value:"tree",label:"slidesChartEditor.tree_chart",icon:(0,r.jsx)(b.Z,{className:"h-6 w-6"}),type:"other"},{value:"sunburst",label:"slidesChartEditor.sunburst_chart",icon:(0,r.jsx)(y.Z,{className:"h-6 w-6"}),type:"other"},{value:"treemap",label:"slidesChartEditor.treemap_chart",icon:(0,r.jsx)(C.Z,{className:"h-6 w-6"}),type:"other"},{value:"sankey",label:"slidesChartEditor.sankey_chart",icon:(0,r.jsx)(w.Z,{className:"h-6 w-6"}),type:"other"}],ev={chartType:"bar",chartTypeCategory:"basic",isHorizontal:!1,colorPalette:"default",legendPosition:"",showXAxisLabel:!0,showYAxisLabel:!0,showGrid:!0,chartData:null,isLoading:!0,initialRender:!0,originalChartOption:null},ep=(e,t)=>{switch(t.type){case"RESET_STATE":return ev;case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_INITIAL_RENDER":return{...e,initialRender:t.payload};case"SET_ORIGINAL_OPTION":return{...e,originalChartOption:t.payload};case"SET_HORIZONTAL":return{...e,isHorizontal:t.payload};case"SET_CHART_DATA":return{...e,chartData:t.payload};case"SET_CHART_TYPE":return{...e,chartType:t.payload.type,chartTypeCategory:t.payload.category};case"SET_CHART_CONFIG":return{...e,...void 0!==t.payload.legendPosition&&{legendPosition:t.payload.legendPosition},...void 0!==t.payload.showXAxisLabel&&{showXAxisLabel:t.payload.showXAxisLabel},...void 0!==t.payload.showYAxisLabel&&{showYAxisLabel:t.payload.showYAxisLabel},...void 0!==t.payload.showGrid&&{showGrid:t.payload.showGrid},...void 0!==t.payload.colorPalette&&{colorPalette:t.payload.colorPalette}};case"SET_DEFAULT_DATA":return{...e,chartData:{series:[{name:"Series 1",data:[{name:"Item 1",value:10},{name:"Item 2",value:20},{name:"Item 3",value:30}],type:"bar"}],xAxis:{data:["Item 1","Item 2","Item 3"]},legend:{data:["Series 1"]},title:{text:"Chart Title"},type:"bar"},chartType:"bar",chartTypeCategory:"basic",isHorizontal:!1,legendPosition:"bottom",showXAxisLabel:!0,showYAxisLabel:!0,showGrid:!0};default:return e}};function ex(){let e=(0,M.useTranslations)(),t=(0,N.Z)(e=>e.isOpenEditChartsModal),l=(0,N.Z)(e=>e.editChartsModalProps),a=(0,E.useRouter)(),[o,d]=(0,i.useReducer)(ep,ev),{chartData:c,chartType:u,chartTypeCategory:h,isHorizontal:m,colorPalette:v,legendPosition:p,showXAxisLabel:x,showYAxisLabel:g,showGrid:f,isLoading:b,initialRender:y,originalChartOption:C}=o,w=(0,i.useRef)(null),A=(0,i.useRef)(null);(0,i.useEffect)(()=>{let a=null==l?void 0:l.inst;if(t&&a){d({type:"SET_LOADING",payload:!0});try{var r,i,s,n,o,c,u,h,m,v,p,x,g,f,b,y,C,w,j,N;let t=a.getOption();d({type:"SET_ORIGINAL_OPTION",payload:t});let l=(null===(i=t.xAxis)||void 0===i?void 0:null===(r=i[0])||void 0===r?void 0:r.type)==="value"&&(null===(n=t.yAxis)||void 0===n?void 0:null===(s=n[0])||void 0===s?void 0:s.type)==="category"&&["bar","line"].includes(null===(c=t.series)||void 0===c?void 0:null===(o=c[0])||void 0===o?void 0:o.type);d({type:"SET_HORIZONTAL",payload:l});let E=eh(t,e);d({type:"SET_CHART_DATA",payload:E});let k=(null===(h=t.series)||void 0===h?void 0:null===(u=h[0])||void 0===u?void 0:u.type)||"bar",_=em.find(e=>e.value===k);d({type:"SET_CHART_TYPE",payload:{type:k,category:(null==_?void 0:_.type)||"basic"}}),d({type:"SET_CHART_CONFIG",payload:{legendPosition:et(t.legend),showXAxisLabel:(null===(p=t.xAxis)||void 0===p?void 0:null===(v=p[0])||void 0===v?void 0:null===(m=v.axisLabel)||void 0===m?void 0:m.show)!==!1,showYAxisLabel:(null===(f=t.yAxis)||void 0===f?void 0:null===(g=f[0])||void 0===g?void 0:null===(x=g.axisLabel)||void 0===x?void 0:x.show)!==!1,showGrid:(null===(C=t.xAxis)||void 0===C?void 0:null===(y=C[0])||void 0===y?void 0:null===(b=y.splitLine)||void 0===b?void 0:b.show)!==!1||(null===(N=t.yAxis)||void 0===N?void 0:null===(j=N[0])||void 0===j?void 0:null===(w=j.splitLine)||void 0===w?void 0:w.show)!==!1}})}catch(e){console.error("Error getting chart options:",e),d({type:"SET_DEFAULT_DATA"})}finally{d({type:"SET_LOADING",payload:!1}),d({type:"SET_INITIAL_RENDER",payload:!0})}}},[t,l,e]);let T=()=>{d({type:"RESET_STATE"});let{setIsOpenEditChartsModal:e,setEditChartsModalProps:t}=N.Z.getState();if(e(!1),t(void 0),l){var r;let{page:e,iframe:t}=l;$({id:(0,ee.s)()||(Array.isArray(a.query.id)?a.query.id[0]:a.query.id)||"",page:e,iframeDocument:null===(r=t.contentWindow)||void 0===r?void 0:r.document})}},F=(0,i.useCallback)(()=>{var t,l,a,r,i;if(!c)return null;let s=()=>{var t,l,a;let r=(null===(t=c.xAxis)||void 0===t?void 0:t.data)||[];return!(r.length>0)&&(null===(a=c.series)||void 0===a?void 0:null===(l=a[0])||void 0===l?void 0:l.data)?Array.from({length:c.series[0].data.length},(t,l)=>"".concat(e("slidesChartEditor.item")," ").concat(l+1)):r},n=()=>{if("default"===v)return null;let e=U.find(e=>e.value===v);return(null==e?void 0:e.colors)||null},o=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={show:f},l=s();return e?{xAxis:{type:"value",axisLabel:{show:g},splitLine:t},yAxis:{type:"category",data:l,axisLabel:{show:x},splitLine:t}}:{xAxis:{type:"category",data:l,axisLabel:{show:x},splitLine:t},yAxis:{type:"value",axisLabel:{show:g},splitLine:t}}},d={candlestick:()=>{var e,t;let l=Array.from({length:(null===(t=c.series[0])||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.length)||0},(e,t)=>{var l,a,r,i;let s=(null===(l=c.series[0])||void 0===l?void 0:l.data[t])||0;return[s,(null===(a=c.series[1])||void 0===a?void 0:a.data[t])||0,(null===(r=c.series[2])||void 0===r?void 0:r.data[t])||0,(null===(i=c.series[3])||void 0===i?void 0:i.data[t])||0]});return{...o(!1),series:[{type:"candlestick",data:l,itemStyle:c.itemStyle||{color:"#ef4444",color0:"#22c55e",borderColor:"#ef4444",borderColor0:"#22c55e",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}}}],legend:null}},radar:()=>{var e;let t=n(),l=s().map((e,t)=>({name:e,max:1.2*Math.max(...c.series.map(e=>{var l;return(null===(l=e.data)||void 0===l?void 0:l[t])||0}))||100})),a=c.series.map((e,l)=>{let a=e.areaStyle||{color:"rgba(".concat(Math.floor(255*Math.random()),", ").concat(Math.floor(255*Math.random()),", ").concat(Math.floor(255*Math.random()),", 0.4)")};if(null==t?void 0:t.length){let e=l%t.length,r=t[e];a={...a,color:r.replace(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/g,"rgba($1, $2, $3, 0.4)")}}return{value:e.data,name:e.name,areaStyle:a,lineStyle:e.lineStyle||{},itemStyle:e.itemStyle||{}}});return{radar:c.radar||{indicator:l},series:[{name:(null===(e=c.series[0])||void 0===e?void 0:e.name)||"雷达图",type:"radar",data:a,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8,emphasis:{label:{}}}]}},heatmap:()=>{var e,t,l,a,r,i,o;if(!C)return{};let d=JSON.parse(JSON.stringify(C)),u=n(),h=s()||(null===(t=d.xAxis)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.data)||[],m=c.series.map(e=>e.name)||(null===(a=d.yAxis)||void 0===a?void 0:null===(l=a[0])||void 0===l?void 0:l.data)||[];(null===(r=d.xAxis)||void 0===r?void 0:r[0])&&(d.xAxis[0].data=h,d.xAxis[0].axisLabel&&(d.xAxis[0].axisLabel.show=x)),(null===(i=d.yAxis)||void 0===i?void 0:i[0])&&(d.yAxis[0].data=m,d.yAxis[0].axisLabel&&(d.yAxis[0].axisLabel.show=g));let v=[];if(c.series.forEach((e,t)=>{Array.isArray(e.data)&&e.data.forEach((e,l)=>{l<h.length&&v.push([l,t,"object"==typeof e?e.value:e])})}),(null===(o=d.series)||void 0===o?void 0:o[0])&&(d.series[0].data=v),d.visualMap&&(null==u?void 0:u.length)){let e=Math.max(...v.map(e=>e[2]))||100;d.visualMap.max=e,d.visualMap.inRange={color:[u[0],u[Math.floor(u.length/2)],u[u.length-1]]}}return d},boxplot:()=>{var e,t,l,a,r,i,o,d;if(!C)return{};let u=JSON.parse(JSON.stringify(C)),h=n(),m=s()||(null===(t=u.xAxis)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.data)||[];(null===(l=u.xAxis)||void 0===l?void 0:l[0])&&(u.xAxis[0].data=m,u.xAxis[0].axisLabel&&(u.xAxis[0].axisLabel.show=x)),(null===(r=u.yAxis)||void 0===r?void 0:null===(a=r[0])||void 0===a?void 0:a.axisLabel)&&(u.yAxis[0].axisLabel.show=g);let v=Array.from({length:(null===(o=c.xAxis)||void 0===o?void 0:null===(i=o.data)||void 0===i?void 0:i.length)||0},(e,t)=>{let l=[];for(let e=0;e<5&&e<c.series.length;e++){let a=c.series[e].data[t];l.push("object"==typeof a&&null!==a?a.value:a)}for(let e=1;e<l.length;e++)null!=l[e]&&null!=l[e-1]&&l[e]<l[e-1]&&(l[e]=l[e-1]);return l});return(null===(d=u.series)||void 0===d?void 0:d[0])&&(u.series[0].data=v,u.series[0].boxWidth=["40%","40%"],(null==h?void 0:h.length)&&(u.series[0].itemStyle={...u.series[0].itemStyle,color:h[0],borderColor:h[1]||h[0]})),u},funnel:()=>{var e,t,l,a,r,i;let o=s(),d=Array.isArray(c)?c.map((e,t)=>"object"==typeof e&&null!==e?{name:e.name||"Item ".concat(t),value:e.value}:{name:"Item ".concat(t),value:e}):((null===(t=c.series)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.data)||[]).map((e,t)=>{var l;return"object"==typeof e&&null!==e?{name:e.name||"Item ".concat(t),value:e.value}:{name:(null===(l=c.categories)||void 0===l?void 0:l[t])||o[t]||"Item ".concat(t),value:e}}),u=n(),h={type:"funnel",left:"10%",top:60,bottom:60,width:"80%",min:0,max:100,minSize:"0%",maxSize:"100%",sort:"descending",gap:2,label:{show:!0,position:"inside"},labelLine:{length:10,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{fontSize:20}},data:d},m={series:[h]};if(null==u?void 0:u.length)h.data=d.map((e,t)=>({...e,itemStyle:{color:u[t%u.length],borderColor:"#fff",borderWidth:1}})),m.color=u;else if((null==C?void 0:null===(a=C.series)||void 0===a?void 0:null===(l=a[0])||void 0===l?void 0:l.color)?(h.color=C.series[0].color,m.color=C.series[0].color):(null==C?void 0:C.color)&&(h.color=C.color,m.color=C.color),null==C?void 0:null===(i=C.series)||void 0===i?void 0:null===(r=i[0])||void 0===r?void 0:r.data){let e=C.series[0].data;h.data=d.map((t,l)=>{var a;let r=e[l];return(null==r?void 0:null===(a=r.itemStyle)||void 0===a?void 0:a.color)?{...t,itemStyle:{...r.itemStyle,borderColor:"#fff",borderWidth:1}}:t})}return m},pie:()=>({series:c.series.map((t,l)=>{let a=t.radius||("doughnut"===u?0===l?["40%","55%"]:["60%","75%"]:"70%"),r=t.center||["50%","50%"],i=Array.isArray(t.data)?t.data.map((t,l)=>{var a,r,i;return{name:(null==t?void 0:t.name)||(null!==(i=null===(r=c.xAxis)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a[l])&&void 0!==i?i:"".concat(e("slidesChartEditor.item")," ").concat(l+1)),value:"object"==typeof t?t.value:t,itemStyle:(null==t?void 0:t.itemStyle)||{}}}):[];return{...t,type:"doughnut"===u?"pie":u,data:i,radius:a,center:r,colorBy:t.colorBy||"data",itemStyle:{borderColor:"#fff",borderWidth:2,borderJoin:"round",...t.itemStyle||{}},label:{fontSize:10,rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5,...t.label||{}},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"},...t.labelLine||{}},emphasis:{scale:!0,scaleSize:5,label:{show:!0},labelLine:{show:!0},...t.emphasis||{}},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut",clockwise:void 0===t.clockwise||t.clockwise,minAngle:void 0!==t.minAngle?t.minAngle:0,minShowLabelAngle:void 0!==t.minShowLabelAngle?t.minShowLabelAngle:0,selectedOffset:void 0!==t.selectedOffset?t.selectedOffset:10,percentPrecision:void 0!==t.percentPrecision?t.percentPrecision:2,stillShowZeroSum:void 0===t.stillShowZeroSum||t.stillShowZeroSum,startAngle:t.startAngle||90}})}),default:()=>{let e=m&&["bar","line"].includes(u);if("scatter"===u){var t,l,a,r;let e=c.series.map(e=>{let t={...e,type:"scatter"};return t.symbolSize=e.symbolSize||(e=>Array.isArray(e)&&e.length>2&&e[2]||8),t});return{xAxis:{...c.xAxis,axisLabel:{...null===(t=c.xAxis)||void 0===t?void 0:t.axisLabel,show:x},splitLine:{...null===(l=c.xAxis)||void 0===l?void 0:l.splitLine,show:f}},yAxis:{...c.yAxis,axisLabel:{...null===(a=c.yAxis)||void 0===a?void 0:a.axisLabel,show:g},splitLine:{...null===(r=c.yAxis)||void 0===r?void 0:r.splitLine,show:f}},series:e}}let i=o(e),s=c.series.map(e=>{let t={...e,type:"area"===u?"line":u};return"area"!==u||t.areaStyle||(t.areaStyle={opacity:.4}),t});return{...i,series:s}}},b={title:(null==C?void 0:C.title)||"",tooltip:(null==C?void 0:C.tooltip)||{},legend:(()=>{if(!p)return(null==C?void 0:C.legend)||{};let e=["left","right"].includes(p);return{orient:e?"vertical":"horizontal",...e?{left:p}:{top:p,left:"center"},data:c.series.map(e=>e.name)}})()},y={};"candlestick"===u?y=d.candlestick():"radar"===u?y=d.radar():"other"===h?"heatmap"===u&&C?y=d.heatmap():"boxplot"===u&&C?y=d.boxplot():["graph","tree","sunburst","treemap","sankey"].includes(u)?y={series:c.series}:(y=C||{}).series&&(y.series=c.series):"pie"===h?(y="funnel"===u?d.funnel():d.pie(),"radar"!==u&&(delete b.xAxis,delete b.yAxis)):y=d.default(),b={...b,...y},"scatter"===u&&C&&(b={...b,backgroundColor:C.backgroundColor,color:C.color,grid:(null===(a=C.grid)||void 0===a?void 0:a[0])||b.grid,tooltip:(null===(r=C.tooltip)||void 0===r?void 0:r[0])||b.tooltip,axisPointer:(null===(i=C.axisPointer)||void 0===i?void 0:i[0])||b.axisPointer});let w=null==C?void 0:null===(t=C.series)||void 0===t?void 0:t.some(e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.some(e=>{var t;return null==e?void 0:null===(t=e.itemStyle)||void 0===t?void 0:t.color})});return"default"===v||w||(b=(e=>{var t;let l=n();if(!l)return e;let a=JSON.parse(JSON.stringify(e));return(null===(t=a.series)||void 0===t?void 0:t.some(e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.some(e=>{var t;return null===(t=e.itemStyle)||void 0===t?void 0:t.color})}))||(a.color=l,Array.isArray(a.series)&&(a.series=a.series.map((e,t)=>{let a=t%l.length,r=l[a];return("pie"===e.type||"doughnut"===e.type)&&"data"===e.colorBy?(e.color=l,Array.isArray(e.data)&&(e.data=e.data.map((e,t)=>{let a=t%l.length,r=l[a];return"object"!=typeof e||null===e?{value:e,itemStyle:{color:r}}:{...e,itemStyle:{...e.itemStyle||{},color:r}}}))):(e.itemStyle=e.itemStyle||{},e.itemStyle.color=r,"line"===e.type&&(e.lineStyle=e.lineStyle||{},e.lineStyle.color=r,e.areaStyle&&(e.areaStyle.color=r,e.areaStyle.opacity=.4,window.echarts&&(e.areaStyle.color={type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:r},{offset:1,color:"rgba(255, 255, 255, 0.2)"}]}))),Array.isArray(e.data)&&("data"===e.colorBy?e.data=e.data.map((e,t)=>{let a=t%l.length,r=l[a];return"object"!=typeof e||null===e?{value:e,itemStyle:{color:r}}:{...e,itemStyle:{...e.itemStyle||{},color:r}}}):"pie"!==e.type&&"doughnut"!==e.type&&(e.data=e.data.map(e=>"object"!=typeof e||null===e?{value:e,itemStyle:{color:r}}:{...e,itemStyle:{...e.itemStyle||{},color:r}})))),e}))),a})(b)),(null===(l=b.series)||void 0===l?void 0:l.length)||(console.warn("No series data available for chart"),b.series=[{type:u,data:[]}]),"candlestick"===u&&delete b.legend,b},[c,u,m,v,p,x,g,f,h,C,e]),L=(0,i.useCallback)(()=>{var e,t;if(!c||!w.current)return!1;A.current&&(null===(e=A.current)||void 0===e||e.dispose(),A.current=null);try{A.current=j.S1(w.current);let e=F();if(!e)return!1;return null===(t=A.current)||void 0===t||t.setOption(e,!0),setTimeout(()=>{if(A.current)try{var e;null===(e=A.current)||void 0===e||e.resize()}catch(e){console.error("Error resizing chart:",e)}},100),!0}catch(e){return console.error("Error initializing preview chart:",e),!1}},[F,c]),I=(0,i.useCallback)(()=>{if(!A.current||!c)return!1;try{var e,t,l;let a=F();if(!a)return!1;return null===(e=A.current)||void 0===e||e.setOption(a,!0),null===(l=A.current)||void 0===l||null===(t=l.resize)||void 0===t||t.call(l),!0}catch(e){return console.error("Error updating chart options:",e),!1}},[F,c]);return((0,i.useEffect)(()=>{if(!t||!c||b)return;let e=requestAnimationFrame(()=>{L()&&y&&d({type:"SET_INITIAL_RENDER",payload:!1})}),l=new ResizeObserver(()=>{if(A.current)try{var e,t;null===(t=A.current)||void 0===t||null===(e=t.resize)||void 0===e||e.call(t)}catch(e){console.error("Error in ResizeObserver when resizing chart:",e)}});return w.current&&l.observe(w.current),()=>{if(cancelAnimationFrame(e),l.disconnect(),A.current){var t;null===(t=A.current)||void 0===t||t.dispose(),A.current=null}}},[t,c,b,y,L]),(0,i.useEffect)(()=>{if(!t||!c||b||y||!A.current)return;let e=requestAnimationFrame(()=>{I()});return()=>{cancelAnimationFrame(e)}},[t,c,u,m,v,p,x,g,f,h,b,y,I]),c)?(0,r.jsx)(n.yo,{open:t,onOpenChange:e=>!e&&T(),children:(0,r.jsxs)(n.ue,{side:"bottom",className:"flex gap-0 flex-col w-full pt-0 h-[calc(100vh-50px)] mt-[50px] px-[42px] pb-8 bg-background dark:bg-[#474E5C] border-border dark:border-[#5F6B7D] shadow-lg overflow-hidden rounded-t-[24px]",children:[(0,r.jsxs)(n.Tu,{className:"py-6 px-0  flex flex-row items-center justify-between",children:[(0,r.jsx)(n.bC,{className:"text-foreground dark:text-white",children:e("editSlides.edit_charts")}),(0,r.jsx)(s.z,{onClick:()=>{let{inst:e,iframe:t}=N.Z.getState().editChartsModalProps||{};if(e&&A.current&&t)try{var l,a;let r=A.current.getOption();e.setOption(r,!0);let i="\n(function() {\n  if (window.chartInstances && window.chartInstances['".concat(e._dom.id,"']) {\n    window.chartInstances['").concat(e._dom.id,"'].dispose();\n  }\n  var myChart = echarts.init(document.querySelector('div#").concat(e._dom.id,"'));\n  myChart.setOption(").concat(JSON.stringify(r),");\n  if (!window.chartInstances) window.chartInstances = {};\n  window.chartInstances['").concat(e._dom.id,"'] = myChart;\n  window.addEventListener('resize', function() {\n    if (window.chartInstances && window.chartInstances['").concat(e._dom.id,"']) {\n      window.chartInstances['").concat(e._dom.id,"'].resize();\n    }\n  });\n})();\n"),s=null===(l=t.contentWindow)||void 0===l?void 0:l.document.querySelector('script[id="'.concat(e._dom.id,'"]'));s?s.innerHTML=i:((s=document.createElement("script")).id=e._dom.id,s.innerHTML=i,null===(a=t.contentWindow)||void 0===a||a.document.body.appendChild(s)),T()}catch(e){console.error("Error applying changes to chart:",e)}},variant:"outline",size:"default",className:"gap-1 px-8 text-[#0080FF]  border-[#0080FF]  bg-transparent dark:bg-[#364359] hover:text-white hover:bg-[#0080FF]",children:e("slidesChartEditor.save")})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-6 flex-1 min-h-0 overflow-auto",children:[(0,r.jsxs)("div",{className:"h-1/2 flex flex-col lg:flex-row gap-6 overflow-auto min-h-0",children:[(0,r.jsx)("div",{className:"xl:w-2/3 px-6 py-4 bg-[#F5F7FC] dark:bg-[#31384B] rounded-xl",children:(0,r.jsx)("div",{ref:w,className:"w-full h-full"})}),(0,r.jsxs)("div",{className:"xl:w-1/3 w-full flex flex-col space-y-6 overflow-auto custom-scrollbar px-6 py-4 bg-[#F5F7FC] dark:bg-[#31384B] rounded-xl",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:"other"!==h&&(0,r.jsx)(G.mQ,{defaultValue:u,value:u,onValueChange:e=>{if(!c)return;let t=em.find(t=>t.value===e),l=(null==t?void 0:t.type)||"basic";d({type:"SET_CHART_TYPE",payload:{type:e,category:l}}),d({type:"SET_INITIAL_RENDER",payload:!0}),"pie"!==l&&["bar","line"].includes(e)||d({type:"SET_HORIZONTAL",payload:!1})},className:"w-full",children:(0,r.jsx)(G.dr,{className:"grid grid-flow-col auto-cols-fr bg-white dark:bg-[#31384B] h-auto rounded-xl",children:em.filter(e=>e.type===h).map(t=>(0,r.jsx)(G.SP,{value:t.value,className:(0,Z.cn)("flex items-center justify-center gap-1.5 px-3 py-1.5 rounded-xl","bg-transparent","data-[state=active]:bg-[#F5F7FC] dark:data-[state=active]:bg-[#0080FF]","data-[state=active]:text-theme-blue-500 dark:data-[state=active]:text-white","text-muted-foreground","data-[state=active]:rounded-[8px]"),title:e(t.label),children:t.icon},t.value))})})}),(0,r.jsxs)("div",{className:"min-h-[300px] space-y-4",children:["basic"===h&&("bar"===u||"line"===u)&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-sm font-medium dark:text-white",children:e("slidesChartEditor.chart_orientation")}),(0,r.jsxs)(k.Ph,{value:m?"horizontal":"vertical",onValueChange:e=>d({type:"SET_HORIZONTAL",payload:"horizontal"===e}),children:[(0,r.jsx)(k.i4,{className:"min-w-32 w-auto",children:(0,r.jsx)(k.ki,{placeholder:e("slidesChartEditor.select_legend_position")})}),(0,r.jsxs)(k.Bw,{children:[(0,r.jsx)(k.Ql,{className:"flex items-center",value:"vertical",children:e("slidesChartEditor.vertical_chart")}),(0,r.jsx)(k.Ql,{value:"horizontal",children:e("slidesChartEditor.horizontal_chart")})]})]})]}),"gauge"!==u&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-sm font-medium dark:text-white",children:e("slidesChartEditor.color_config")}),(0,r.jsxs)(k.Ph,{value:v,onValueChange:e=>d({type:"SET_CHART_CONFIG",payload:{colorPalette:e}}),children:[(0,r.jsx)(k.i4,{className:"min-w-32 w-auto",children:(0,r.jsx)(k.ki,{placeholder:e("slidesChartEditor.select_color_scheme")})}),(0,r.jsx)(k.Bw,{className:"max-h-[300px]",children:U.map(t=>{var l;return(0,r.jsx)(k.Ql,{value:t.value,children:(0,r.jsxs)("div",{className:"flex items-center",children:[t.value.startsWith("custom")&&(0,r.jsx)("div",{className:"flex mr-2 gap-0.5",children:null===(l=t.colors)||void 0===l?void 0:l.slice(0,5).map((e,t)=>(0,r.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e}},t))}),!t.value.startsWith("custom")&&e(t.label)]})},t.value)})})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-sm font-medium dark:text-white",children:e("slidesChartEditor.legend_position")}),(0,r.jsxs)(k.Ph,{value:p,onValueChange:e=>d({type:"SET_CHART_CONFIG",payload:{legendPosition:e}}),children:[(0,r.jsx)(k.i4,{className:"min-w-32 w-auto",children:(0,r.jsx)(k.ki,{placeholder:e("slidesChartEditor.select_legend_position")})}),(0,r.jsx)(k.Bw,{children:q.map(t=>(0,r.jsx)(k.Ql,{value:t.value,children:e(t.label)},t.value))})]})]}),"basic"===h&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between h-10",children:[(0,r.jsx)("div",{children:(0,r.jsx)(S._,{htmlFor:"x-axis-label",className:"text-sm font-medium dark:text-white",children:e("slidesChartEditor.show_x_axis_label")})}),(0,r.jsx)(_.r,{id:"x-axis-label",checked:x,onCheckedChange:e=>d({type:"SET_CHART_CONFIG",payload:{showXAxisLabel:e}})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between h-10",children:[(0,r.jsx)("div",{children:(0,r.jsx)(S._,{htmlFor:"y-axis-label",className:"text-sm font-medium dark:text-white",children:e("slidesChartEditor.show_y_axis_label")})}),(0,r.jsx)(_.r,{id:"y-axis-label",checked:g,onCheckedChange:e=>d({type:"SET_CHART_CONFIG",payload:{showYAxisLabel:e}})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between h-10",children:[(0,r.jsx)("div",{children:(0,r.jsx)(S._,{htmlFor:"grid-lines",className:"text-sm font-medium dark:text-white",children:e("slidesChartEditor.show_grid_lines")})}),(0,r.jsx)(_.r,{id:"grid-lines",checked:f,onCheckedChange:e=>d({type:"SET_CHART_CONFIG",payload:{showGrid:e}})})]})]})]})]})]}),(0,r.jsx)("div",{className:"h-1/2 overflow-auto custom-scrollbar bg-[#F5F7FC] dark:bg-[#474E5C] rounded-xl",children:(0,r.jsx)(V,{data:c,chartType:u,setData:e=>d({type:"SET_CHART_DATA",payload:e})})})]})]})}):null}},14972:function(e,t,l){"use strict";l.d(t,{r:function(){return R},Z:function(){return B}});var a=l(52676),r=l(14386),i=l(62500),s=l(25010),n=l(1167),o=l(4814),d=l(43378),c=l(26152),u=l(44342),h=l(25773),m=l(67742),v=l(91625),p=l(32957),x=l(60904),g=l(12387),f=l(29197),b=l(7717),y=l(62208),C=l(31063),w=l(60161),j=l(37588),N=l(75271),E=l(75963),k=l(89146),_=l(40548),S=l.n(_),A=l(72696),T=l(67415),Z=l(95174),F=l(39109),L=l(16137),I=e=>{(0,b.useTranslations)();let{title:t,button:l,icon:r,id:i,description:n,isClose:d=!0}=e;return(0,a.jsxs)("div",{className:(0,o.Z)("flex p-0 justify-between w-[calc(460px-32px)]",n?"items-start":"items-center"),children:[(0,a.jsxs)("div",{className:(0,o.Z)("flex gap-2",n?"items-start":"items-center"),children:[(0,a.jsx)("div",{className:(0,o.Z)("w-5 h-[24px] mr-2 flex-shrink-0 flex items-center",""),children:r}),(0,a.jsxs)("div",{className:(0,o.Z)("text-[#30394A] dark:text-slate-200 flex",n?"items-start  flex-col":"items-center"),children:[t&&(0,a.jsx)("div",{className:"whitespace-nowrap font-medium text-base",children:t}),n&&(0,a.jsx)("div",{className:"text-sm font-normal mt-1",children:n}),(0,a.jsx)("div",{className:"mt-2",children:l?(0,a.jsx)(s.z,{variant:"ghost",className:(0,o.Z)("p-0 text-[#0080FF] hover:bg-transparent hover:text-[#0080FF] font-normal","dark:text-[#83E2FF] dark:hover:text-[#83E2FF]"),onClick:null==l?void 0:l.onClick,disabled:null==l?void 0:l.disabled,children:(null==l?void 0:l.link)?(0,a.jsx)(S(),{href:null==l?void 0:l.link,target:"_blank",children:null==l?void 0:l.label}):l.label}):null})]})]}),(0,a.jsx)("div",{className:"flex items-start gap-2 ml-5",children:!1===d?null:(0,a.jsx)(x.Z,{className:"w-5 h-5 cursor-pointer text-[#5F7698] dark:text-slate-300",onClick:()=>L.Am.dismiss(i)})})]})},D=l(27976),P=l(2854),O=l(21516),z=l(64105);let R={UNDO:"slide:undo",REDO:"slide:redo"},M=()=>/Mac|iPod|iPhone|iPad/.test(window.navigator.platform);var B=function(e){let{title:t,id:l,businessId:_,isSelf:L,modelType:R,status:B}=e,H=(0,b.useTranslations)(),{isMobile:W}=(0,u.b)();(0,E.useRouter)();let J=(0,F.Z)(),{shareSlidesStatus:V,setShowSlidesModel:G}=(0,y.Z)(),U=(0,j.Z)(e=>e.htmlList),{undoStack:q,redoStack:X,executeUndo:Y,executeRedo:Q}=(0,k.Z)(),[K,$]=(0,N.useState)(!1),[ee,et]=(0,N.useState)(!1),[el,ea]=(0,N.useState)(null),er=(0,N.useRef)(null),[ei,es]=(0,N.useState)("PDF"),[en,eo]=(0,N.useState)(null),ed=q.length>0,ec=X.length>0,eu=(0,N.useCallback)(()=>{console.log("[Header] Undo button clicked, undoStack length: ".concat(q.length)),ed?Y():console.log("[Header] Cannot undo - no operations in stack")},[Y,ed,q.length]),eh=(0,N.useCallback)(()=>{console.log("[Header] Redo button clicked, redoStack length: ".concat(X.length)),ec?Q():console.log("[Header] Cannot redo - no operations in stack")},[Q,ec,X.length]);(0,N.useEffect)(()=>{console.log("[Header] Undo stack: ".concat(q.length,", Redo stack: ").concat(X.length),q,X)},[q.length,X.length]);let em=(0,N.useMemo)(()=>null!=U&&!!U.length&&!U.some(e=>(null==e?void 0:e.status)!==2),[U]),ev=async(e,t)=>{es(e=e||"PDF"),$(!0);let l=U.map(e=>null==e?void 0:e.height);console.log("\uD83D\uDE80 ~ handleExportFile ~ slideHeights:",l);let r=J.customContent(t=>(er.current=t,(0,a.jsx)(I,{id:t,title:H("generateSlides.slides_to_pdf",{name:e}),icon:(0,a.jsx)(h.Z,{className:"animate-spin text-[#0080FF] w-full"}),button:null,isClose:!1})),{duration:1/0},"loading"),i=await (0,O._m)(e,{business_id:_,business_type:"AGENT_THREAD",slide_heights:l||[],model_type:R,useWps:t||!1}),s=(0,Z.U)(i),n="",o="";try{for await(let e of s)try{let t=JSON.parse((null==e?void 0:e.data)||"{}");t&&"EXPORTING"===t.status||t&&"SUCCESS"===t.status&&(n=null==t?void 0:t.pdfPath,o=null==t?void 0:t.pptPath,ea(null==t?void 0:t.pdfPath),eo(null==t?void 0:t.pptPath))}catch(e){throw e}}catch(e){}J.dismiss(r),er.current=null,await new Promise(e=>setTimeout(e,300)),n||o?(J.customContent(t=>(er.current=t,(0,a.jsx)(I,{id:t,title:H("generateSlides.slides_to_pdf_success_title"),description:H("generateSlides.slides_to_pdf_success",{name:e}),icon:(0,a.jsx)(T.PU,{className:"text-green-600 w-full"}),button:{label:"PDF"===e?H("generateSlides.slides_to_pdf_btn",{name:e}):H("generateSlides.slides_to_ppt_btn"),disabled:K,link:n||o||"",onClick:()=>{J.dismiss(t),er.current=null}}})),{duration:1/0},"success"),window.open(n||o,"_blank")):(J.customContent(t=>(er.current=t,(0,a.jsx)(I,{id:t,title:H("generateSlides.slides_to_pdf_failure_title"),description:H("generateSlides.slides_to_pdf_failure",{name:e}),icon:(0,a.jsx)(T.yo,{className:"text-[#BB8824] w-full"}),button:{label:H("generateSlides.slides_to_pdf_btn_retry"),disabled:K,onClick:()=>{J.dismiss(t),er.current=null,setTimeout(()=>{ev(e)},300)}}})),{duration:1/0},"failure"),ea(null)),$(!1)},ep=()=>{et(!1),er.current&&(J.dismiss(er.current),er.current=null)},ex=e=>{let t=M();return"undo"===e?(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("kbd",{className:"rounded bg-muted px-2 py-0.5 text-xs font-bold border-2 border-border border-[#fff]  bg-slate-800",children:t?"⌘":"Ctrl"}),(0,a.jsx)("kbd",{className:"rounded bg-muted px-2 py-0.5 text-xs font-bold border-2 border-border border-[#fff]  bg-slate-800",children:"Z"})]}):(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("kbd",{className:"rounded bg-muted px-2 py-0.5 text-xs font-bold border-2 border-border border-[#fff]  bg-slate-800",children:t?"⌘":"Ctrl"}),(0,a.jsx)("kbd",{className:"rounded bg-muted px-2 py-0.5 text-xs font-bold border-2 border-border border-[#fff]  bg-slate-800",children:t?"Shift":"Y"}),t&&(0,a.jsx)("kbd",{className:"rounded bg-muted px-2 py-0.5 text-xs font-bold border-2 border-border border-[#fff]  bg-slate-800",children:"Z"})]})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.Z,{isSlides:!0,className:"z-50 px-6 box-border dark:bg-[#1F2631]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 w-full justify-center",children:[(0,a.jsx)("div",{className:"text-ellipsis overflow-hidden whitespace-nowrap max-w-[500px]",children:t}),L&&"succeed"===B&&(0,a.jsxs)("div",{className:"flex items-center h-[30px] dark:border-slate-600 bg-[#F6F7F9] dark:bg-[#353B46] rounded-[8px] ",children:[(0,a.jsx)(n.pn,{children:(0,a.jsxs)(n.u,{children:[(0,a.jsx)(n.aJ,{asChild:!0,children:(0,a.jsx)("div",{onClick:eu,className:(0,o.Z)("cursor-pointer h-[30px] flex-1 flex items-center justify-center border-[#fff] py-[6px] pl-[16px] rounded-l-lg pr-[10px] ",ed?" hover:text-[#377EF7] hover:bg-gray-200 dark:hover:bg-gray-700 dark:hover:text-[#0080FF]":"text-gray-400 cursor-not-allowed"),children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(n._v,{className:"bg-[#353B46] text-white rounded-lg border-none",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:H("slidesChartEditor.undo")}),ex("undo")]})})]})}),(0,a.jsx)("div",{className:"bg-[#F5F5F5] dark:bg-slate-600 w-[1px] h-[20px]"}),(0,a.jsx)(n.pn,{children:(0,a.jsxs)(n.u,{children:[(0,a.jsx)(n.aJ,{asChild:!0,children:(0,a.jsx)("div",{onClick:eh,className:(0,o.Z)("cursor-pointer h-[30px] flex-1 flex items-center justify-center py-[6px] pl-[10px] pr-[16px] rounded-r-lg ",ec?" hover:text-[#377EF7] hover:bg-gray-200 dark:hover:bg-gray-700 dark:hover:text-[#0080FF]":"text-gray-400 cursor-not-allowed"),children:(0,a.jsx)(v.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(n._v,{className:"bg-[#353B46] text-white rounded-lg border-none",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:H("slidesChartEditor.redo")}),ex("redo")]})})]})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-0 md:gap-2 flex-shrink-0",children:[L?(0,a.jsxs)(A.h_,{children:[(0,a.jsx)(A.$F,{asChild:!0,children:(0,a.jsxs)(s.z,{variant:W?"ghost":"secondary-primary",className:"rounded-lg p-3",disabled:!em||K,children:[(0,a.jsx)(p.Z,{}),!W&&H("generateSlides.download_pdf")]})}),(0,a.jsxs)(A.AW,{align:"end",className:"rounded-2xl p-2 shadow-md min-w-40",children:[(0,a.jsxs)(A.Xi,{onClick:()=>{ev("PPTX")},className:"cursor-pointer",disabled:!em||K,children:[K?(0,a.jsx)(h.Z,{className:"animate-spin"}):(0,a.jsx)(P.rq,{className:"w-4 h-4"}),H("generateSlides.export_pdf_btn",{name:"PPTX"})]}),D.r8?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(A.Xi,{onClick:()=>{ev("PPTX",!0)},className:"cursor-pointer",disabled:!em||K,children:[K?(0,a.jsx)(h.Z,{className:"animate-spin"}):(0,a.jsx)(P.rq,{className:"w-4 h-4"}),H("generateSlides.export_pdf_btn",{name:"PPTX"})," - WPS"]})}):null,(0,a.jsxs)(A.Xi,{onClick:()=>{ev("PDF")},className:"cursor-pointer",disabled:!em||K,children:[K?(0,a.jsx)(h.Z,{className:"animate-spin"}):(0,a.jsx)(T.pr,{className:"w-4 h-4"}),H("generateSlides.export_pdf_btn",{name:"PDF"})]})]})]}):null,(0,a.jsxs)(s.z,{variant:W?"ghost":"secondary-default",disabled:!em,className:"rounded-lg p-3",onClick:()=>{G(!0),(0,C.fk)(w.U.SLIDES_SHARE_CLICK,{id:l},!0)},children:["PRIVATE"===V?(0,a.jsx)(r.aL,{}):(0,a.jsx)(r.u_,{}),!W&&H("topic.share")]}),(0,a.jsx)(z.Z,{isOpen:!1})]})]}),(0,a.jsx)(d.Vq,{open:ee,children:(0,a.jsxs)(d.cZ,{"aria-describedby":void 0,hideCloseButton:!0,className:"sm:max-w-[600px]  w-auto min-w-[300px] p-4 rounded-xl",children:[(0,a.jsx)(c.T,{children:(0,a.jsx)(d.$N,{})}),(0,a.jsxs)(d.a7,{className:"relative",children:[(0,a.jsx)("div",{className:"absolute top-1 right-1 z-20",children:(0,a.jsx)(d.GG,{className:"rounded-full p-1  outline-none text-gray-500",onClick:ep,children:(0,a.jsx)(x.Z,{size:20})})}),(0,a.jsx)("div",{className:"flex flex-col gap-4 items-center justify-center mt-8 text-lg font-bold",children:K?(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"w-9 h-9 text-primary-600 animate-spin"}),H("generateSlides.slides_to_pdf",{name:ei})]}):el||en?(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"w-9 h-9 text-green-600"}),H("generateSlides.slides_to_pdf_success",{name:ei})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"w-9 h-9 text-yellow-600"}),H("generateSlides.slides_to_pdf_failure",{name:ei})]})})]}),(0,a.jsx)(d.cN,{className:"gap-4 flex justify-center sm:justify-center",children:el||en?(0,a.jsx)(s.z,{type:"submit",className:"px-6 py-1.5 text-base h-auto",asChild:!0,disabled:K||!el||!en,onClick:ep,children:(0,a.jsx)(S(),{href:el||en||"",target:"_blank",children:H("generateSlides.slides_to_pdf_btn",{name:ei})})}):(0,a.jsx)(s.z,{type:"submit",className:"px-6 py-1.5 text-base h-auto",onClick:()=>{ep(),ev()},disabled:K,children:K?H("generateSlides.slides_to_pdf_btn",{name:ei}):H("generateSlides.slides_to_pdf_btn_retry")})})]})})]})}},50656:function(e,t,l){"use strict";var a=l(52676),r=l(65550),i=l(4814);t.Z=e=>{let{className:t}=e;return(0,a.jsx)(r.X,{className:(0,i.Z)("h-20 bg-[#E6EAF2] dark:bg-[#545D6F] rounded-xl","before:via-white/50",t,"w-full")})}},50342:function(e,t,l){"use strict";let a;l.d(t,{Z:function(){return eu}});var r=l(52676),i=l(67415),s=l(25010),n=l(41590),o=l(37588),d=l(46571),c=l(60904),u=l(7717),h=l(37892);let m=e=>"succeed"===e?(0,r.jsx)(i.Wv,{className:"text-[#4BB548] shrink-0"}):"warning"===e?(0,r.jsx)(i.qM,{className:"text-[#BB8824] shrink-0"}):"loading"===e?(0,r.jsx)(h.Z,{iconClassName:"size-4",strokeWidth:2,radius:12,autoIncrement:!0}):null;var v=e=>{let{item:t}=e,{type:l,role:a,content:i}=t;if("message"===l)return(0,r.jsx)("div",{className:(0,d.cn)("text-sm whitespace-pre-wrap break-words my-3 first:mt-0 last:mb-0","flex gap-2 items-center justify-between rounded-lg px-4 py-3 text-xs text-[#717F95]","user"===a&&"ml-auto bg-blue-500 text-white px-3 py-2 max-w-[85%] w-fit rounded-xl rounded-ee-none","dark:text-slate-200"),children:i});if("status"===l){let{variant:e}=t.data;return(0,r.jsxs)("div",{className:(0,d.cn)("text-sm whitespace-pre-wrap break-words my-3 first:mt-0 last:mb-0","flex gap-2 items-center justify-between rounded-lg px-4 py-3 text-xs text-[#717F95]","dark:text-slate-200","succeed"===e&&"bg-[#F4FAF3] dark:bg-[#31374B]","warning"===e&&"bg-[#FCFBEE] dark:bg-[#31374B]","loading"===e&&"bg-[#EFF4F8] dark:bg-[#31374B]"),children:[i,"status"===t.type&&m(t.data.variant)]})}return(0,r.jsx)("div",{className:(0,d.cn)("text-sm whitespace-pre-wrap break-words my-6 first:mt-0 last:mb-0","dark:text-slate-200"),children:i})},p=l(75271),x=l(46988),g=l(71686),f=l(35072),b=l(11115),y=l(95706),C=l(73423),w=l(46024),j=l(4814),N=e=>{let{disabled:t=!0,onSubmit:l}=e,a=(0,u.useTranslations)(),i=(0,p.useRef)(null),[o,c]=(0,p.useState)(""),h=[{label:a("generateSlides.feature_draw"),icon:(0,r.jsx)(g.Z,{className:"w-4 h-4"})},{label:a("generateSlides.feature_color"),icon:(0,r.jsx)(f.Z,{className:"w-4 h-4"})},{label:a("generateSlides.feature_generate_chart"),icon:(0,r.jsx)(b.Z,{className:"w-4 h-4"})},{label:a("generateSlides.feature_translate"),icon:(0,r.jsx)(w.vN,{className:"w-4 h-4"})},{label:a("generateSlides.feature_change_layout"),icon:(0,r.jsx)(y.Z,{className:"w-4 h-4"})}],m=()=>{var e;let t=(null===(e=i.current)||void 0===e?void 0:e.value)||"";t.trim()&&(l(t.trim()),c(""))};return(0,r.jsxs)(n.ze,{className:"pointer-events-auto gap-3 p-5",children:[(0,r.jsx)("p",{className:(0,d.cn)("text-xs font-medium text-[#8896aa]",t&&"text-[#AEB9CB]"),children:a("generateSlides.chat_try_these_features")}),(0,r.jsx)("div",{className:"flex gap-2 flex-wrap text-[#5f7698] text-xs",children:h.map(e=>(0,r.jsxs)("button",{disabled:t,className:(0,j.Z)("px-2.5 py-2 bg-[#effafe] rounded-xl","border-1 border-[#007fff]/10","inline-flex justify-center items-center gap-1","cursor-pointer transition-colors","hover:border-theme-blue-500 hover:text-theme-blue-500","disabled:cursor-default disabled:bg-[#f6f7f9] disabled:border-[rgba(0, 128, 255, 0.1)] disabled:text-[#aeb9cb]","dark:bg-[#212F46] dark:text-[#86AFD8] dark:boder-[rgba(0, 128, 255, 0.1)] dark:hover:text-theme-blue-500","dark:disabled:border-blue-900 disabled:opacity-50"),onClick:()=>l(e.label),children:[e.icon,e.label]},e.label))}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(x.Z,{ref:i,value:o,onChange:e=>c(e.target.value),rows:1,maxRows:4,disabled:t,placeholder:a("generateSlides.chat_input_placeholder"),maxLength:500,className:"text-sm pr-14 block w-full text-gray-900 dark:text-gray-100 bg-[#ECEEF4] disabled:bg-[#F3F4F6] border-none rounded-xl px-5 py-4 min-h-12 outline-theme-blue-500 dark:bg-slate-800",onKeyDown:e=>{13==e.keyCode&&!1==e.shiftKey&&(e.preventDefault(),m())}}),(0,r.jsx)(s.z,{size:"sm",type:"submit",disabled:!o.trim(),className:"absolute right-2 bottom-2 rounded-3xl px-0 w-9 h-9 [&_svg]:size-5",onClick:m,title:a("generateSlides.chat_send_btn"),children:(0,r.jsx)(C.Z,{})})]})]})},E=l(94572),k=e=>{let{status:t,disabled:l=!0,messageId:a,handleRetry:i,business_type:s,modelType:n,feedbackType:c}=e,h=(0,u.useTranslations)(),m=(0,p.useRef)(null),x=(0,o.Z)(e=>e.chatList),g=async e=>{if(!e)return;let{updateChatList:t}=o.Z.getState();t({role:"user",content:e,id:Date.now().toString(),type:"message"}),await (0,E.gw)(1e3),t({type:"default",role:"system",content:h("generateSlides.chat_coming_soon")})};return(0,p.useEffect)(()=>{m.current&&m.current.scrollTo({top:m.current.scrollHeight,behavior:"smooth"})},[x]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:(0,d.cn)("p-8 max-h-[70vh] overflow-hidden overflow-y-auto custom-scrollbar","text-[#4B5F7E] pointer-events-auto","dark:text-slate-300"),ref:m,children:null==x?void 0:x.map((e,t)=>(0,r.jsx)(v,{item:e},e.id||t))}),(0,r.jsx)(N,{disabled:l,onSubmit:g})]})};let _=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{onMessage:t,targetOrigin:l}=e,a=(0,p.useRef)(null),r=()=>window.location.origin;return(0,p.useEffect)(()=>{let e=e=>{let l=r();if(e.origin!==l){console.warn("receive message from different origin: ".concat(e.origin));return}let a=e.data;a.type&&(null==t||t(a))};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[t]),{iframeRef:a,sendMessage:e=>{var t;if(null===(t=a.current)||void 0===t?void 0:t.contentWindow){let t=l||r();a.current.contentWindow.postMessage(e,t)}}}};var S=l(31022),A=l(86378),T=l(97571),Z=l(78017),F=l(84706),L=l(19370),I=l(97998);l(37040);var D=l(74909),P=l.n(D),O=l(39109),z=l(21516),R=l(27976),M=l(17224),B=l(31162),H=l(25773),W=l(26949),J=l(48117),V=l(5588),G=l(91165);let U=e=>"".concat(R.XJ,"/imgs/").concat(btoa(e)),q=e=>{let{src:t,currentSrc:l,className:a,...i}=e,s=(0,p.useRef)(null);return(0,r.jsxs)("div",{className:(0,d.cn)("relative overflow-hidden",a,!!l&&!!s.current&&l===s.current.src&&"border-theme-blue-500"),children:[(0,r.jsx)("img",{...i,ref:s,src:t,alt:"",className:"w-full",onError:()=>{!s.current||s.current.src.includes(R.XJ)||(s.current.src=U(t))}}),!!l&&!!s.current&&l===s.current.src&&(0,r.jsx)("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center",children:(0,r.jsx)("div",{className:"size-6 rounded-full bg-theme-blue-500 flex items-center justify-center",children:(0,r.jsx)(G.Z,{className:"size-5 text-white"})})})]})},X=e=>{let{onUpload:t,isUploading:l}=e,[a,r]=(0,p.useState)(!1),i=(0,p.useRef)(null);return{inputRef:i,isDragging:a,handleClick:e=>{var t;if(l){e.preventDefault();return}null===(t=i.current)||void 0===t||t.click()},handleDragEnter:e=>{l||(e.preventDefault(),r(!0))},handleDragLeave:e=>{l||(e.preventDefault(),r(!1))},handleDrop:(0,p.useCallback)(e=>{if(l)return;e.preventDefault(),r(!1);let a=e.dataTransfer.files[0];a&&a.type.startsWith("image/")&&(null==t||t(a))},[t,l]),handleFileChange:(0,p.useCallback)(e=>{var a;if(l)return;let r=null===(a=e.target.files)||void 0===a?void 0:a[0];r&&r.type.startsWith("image/")&&(null==t||t(r))},[t,l])}},Y=e=>{let{className:t,onUpload:l,isUploading:a}=e,i=(0,u.useTranslations)(),{inputRef:n,isDragging:o,handleClick:c,handleDragEnter:h,handleDragLeave:m,handleDrop:v,handleFileChange:p}=X({onUpload:l,isUploading:a});return(0,r.jsxs)("div",{className:(0,d.cn)("w-full h-64 border border-dashed rounded-xl","flex flex-col gap-3.5 items-center justify-center transition-colors","bg-[#f9f9f9] dark:bg-[#323945]",o?"bg-theme-blue-100 dark:bg-theme-blue-500/10 border-theme-blue-500":"border-gray-300 dark:border-[#3b455c] hover:border-gray-400",a?"opacity-50 cursor-not-allowed":"cursor-pointer",t),onClick:c,onDragEnter:h,onDragOver:h,onDragLeave:m,onDrop:v,children:[(0,r.jsx)("input",{ref:n,type:"file",className:"hidden",accept:"image/*",onChange:p,disabled:a}),(0,r.jsxs)(s.z,{className:"px-6 h-auto rounded-lg",disabled:a,type:"button",children:[a&&(0,r.jsx)(H.Z,{className:"w-4 h-4 animate-spin"}),i(a?"slidesImageEditor.uploading":"slidesImageEditor.select_file")]}),(0,r.jsx)("p",{className:"text-sm opacity-80",children:i("slidesImageEditor.select_file_desc")})]})};var Q=l(65819);let K=["balto.jenna@gmail.com","dreamer_paul@126.com","yunn02417@gmail.com","coldair444@gmail.com","xileiris@gmail.com","stevenv.w.w@gmail.com","chenyuqiang1020@gmail.com"];var $=e=>{let{currentSrc:t,initialMethod:l,initialContent:a,initialGenerateMode:n,isUploading:o,onImageChange:c,onSelectImage:h,onSaveWithUrl:m}=e,v=(0,u.useTranslations)(),[x,g]=(0,p.useState)(""),[f,b]=(0,p.useState)("generate"===l?a:""),[y,w]=(0,p.useState)("search"===l?a:""),[j,N]=(0,p.useState)(!1),[E,k]=(0,p.useState)([]),[_,S]=(0,p.useState)([]),[A,T]=(0,p.useState)(n||"text"),Z=(0,Q.ZP)(e=>!!R.r8||K.includes(e.userInfo.email||"")),F=async e=>{N(!0);let l=[,,,,].fill(null).map(async()=>{try{let l=await ("text"===A?(0,z.f3)(e):(0,z.Pe)(e,t));200===l.status&&k(e=>[...e,{link:l.data.image,title:"Generated Image"}])}catch(e){console.log("Generate Image failed",e)}});await Promise.all(l),N(!1)},I=async e=>{e.preventDefault(),f&&(k([]),await F(f))},D=async e=>{if(e){N(!0);try{let t=await (0,z.a5)(e);200===t.status&&S(t.data)}catch(e){console.log("Search Images failed",e)}finally{N(!1)}}},P=async e=>{e.preventDefault(),S([]),await D(y)};return(0,p.useEffect)(()=>{a&&("generate"===l?F(a):"search"===l&&D(a))},[]),(0,r.jsxs)(W.mQ,{defaultValue:l||"upload",className:"w-full",children:[(0,r.jsxs)(W.dr,{className:"flex rounded-xl p-1.5 bg-[#f9f9f9] dark:bg-[#323945] text-[#30394A] dark:text-white mb-4 h-auto",children:[(0,r.jsx)(W.SP,{value:"upload",className:(0,d.cn)("flex-1 [&_svg]:size-5 rounded-lg","data-[state=active]:text-theme-blue-500 data-[state=active]:shadow-none","data-[state=active]:dark:bg-[#202531]"),children:(0,r.jsx)(B.Z,{})}),Z&&(0,r.jsx)(W.SP,{value:"generate",className:(0,d.cn)("flex-1 [&_svg]:size-5 rounded-lg","data-[state=active]:text-theme-blue-500 data-[state=active]:shadow-none","data-[state=active]:dark:bg-[#202531]"),children:(0,r.jsx)(i.ky,{})}),(0,r.jsx)(W.SP,{value:"search",className:(0,d.cn)("flex-1 [&_svg]:size-5 rounded-lg","data-[state=active]:text-theme-blue-500 data-[state=active]:shadow-none","data-[state=active]:dark:bg-[#202531]"),children:(0,r.jsx)(i.jV,{})})]}),(0,r.jsxs)(W.nU,{value:"upload",children:[(0,r.jsx)(Y,{className:"mb-4",isUploading:o,onUpload:c}),(0,r.jsxs)("form",{className:"relative",onSubmit:e=>{e.preventDefault(),x&&(g(""),m(x))},children:[(0,r.jsx)(V.I,{className:"py-3.5 h-auto pr-12 bg-[#f9f9f9] dark:bg-[#323945] border-[#ebebeb] dark:border-[#3b455c] rounded-xl",type:"url",value:x,disabled:o,onChange:e=>g(e.target.value),placeholder:v("slidesImageEditor.paste_or_enter_url")}),(0,r.jsx)(s.z,{type:"submit",className:"absolute top-2 right-2 rounded-full disabled:opacity-30",disabled:o||!x,children:(0,r.jsx)(C.Z,{className:"scale-125"})})]})]}),(0,r.jsxs)(W.nU,{value:"generate",children:[(0,r.jsxs)("form",{className:"relative",onSubmit:I,children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(J.g,{className:"py-3.5 h-auto pb-16 bg-[#f9f9f9] dark:bg-[#323945] border-[#ebebeb] dark:border-[#3b455c] rounded-xl mb-4",rows:5,value:f,disabled:j,onChange:e=>b(e.target.value),placeholder:v("slidesImageEditor.enter_generate_image_prompt")}),(0,r.jsx)("div",{className:"absolute left-3 bottom-3",children:(0,r.jsxs)(L.Ph,{value:A,onValueChange:e=>T(e),disabled:j,children:[(0,r.jsx)(L.i4,{className:"py-2 h-8 text-xs rounded-2xl",children:(0,r.jsx)(L.ki,{})}),(0,r.jsxs)(L.Bw,{children:[(0,r.jsx)(L.Ql,{value:"text",children:v("slidesImageEditor.generate_image_by_text")}),(0,r.jsx)(L.Ql,{value:"image",disabled:!t,children:v("slidesImageEditor.generate_image_by_image")})]})]})})]}),(0,r.jsx)(s.z,{type:"submit",className:"px-8 h-10 w-full disabled:opacity-30",disabled:!f||j,children:j?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(H.Z,{className:"size-4 animate-spin"}),v("slidesImageEditor.generating_image")]}):v("slidesImageEditor.generate_image")})]}),E.length>0&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"mt-4 grid grid-cols-2 gap-4",children:E.map((e,l)=>(0,r.jsx)(q,{src:e.link,currentSrc:t,alt:e.title,className:"rounded-lg cursor-pointer hover:opacity-80 transition-opacity border border-black/5",onClick:e=>h(e.currentTarget.src)},"".concat(e.link,"-").concat(l)))})})]}),(0,r.jsxs)(W.nU,{value:"search",children:[(0,r.jsxs)("form",{className:"relative",onSubmit:P,children:[(0,r.jsx)(V.I,{className:"py-3.5 h-auto pr-12 bg-[#f9f9f9] dark:bg-[#323945] border-[#ebebeb] dark:border-[#3b455c] rounded-xl",value:y,disabled:j,onChange:e=>w(e.target.value),placeholder:v("slidesImageEditor.enter_you_want_to_search")}),(0,r.jsx)(s.z,{type:"submit",className:"absolute top-2 right-2 rounded-full disabled:opacity-30",disabled:!y||j,children:j?(0,r.jsx)(H.Z,{className:"size-4 animate-spin"}):(0,r.jsx)(C.Z,{className:"scale-125"})})]}),j&&(0,r.jsx)("p",{className:"mt-6 text-center opacity-60",children:v("slidesImageEditor.searching_image")}),_.length>0&&(0,r.jsx)("div",{className:"mt-4 columns-3 gap-2.5",children:_.map(e=>(0,r.jsx)(q,{src:e.link,currentSrc:t,alt:e.title,className:"rounded-lg cursor-pointer hover:opacity-80 transition-opacity mb-2.5 break-inside-avoid border border-black/5",onClick:e=>h(e.currentTarget.src)},e.link))})]})]})},ee=l(89146),et=l(63023);(()=>{let e=document.createElement("canvas");return e.getContext&&e.getContext("2d")&&e.toDataURL("image/webp").indexOf("data:image/webp")})();let el=e=>{let{editImagesModalProps:t,setEditImagesModalProps:l}=o.Z.getState();t&&l({...t,el:e})},ea=(e,t)=>{let l;if("IMG"===e.tagName)l=e.src,e.src=t;else{var a;let l=new Image;l.src=t,null===(a=e.parentElement)||void 0===a||a.replaceChild(l,e),el(l)}return l};function er(e,t,l){return(0,I._H)((0,I.YG)({unit:"%",width:90},l,e,t),e,t)}var ei=()=>{let e=(0,O.Z)(),t=(0,M.useRouter)(),l=(0,u.useTranslations)(),a=(0,o.Z)(e=>e.editImagesModalProps),[i,n]=(0,p.useState)((null==a?void 0:a.initialTab)||"crop"),c=(0,p.useRef)(),[h,m]=(0,p.useState)(!1);(0,p.useEffect)(()=>()=>{let{setEditImagesModalProps:e}=o.Z.getState();e(void 0)},[]);let v=(0,p.useRef)(null),[x,g]=(0,p.useState)(),[f,b]=(0,p.useState)(),[y,C]=(0,p.useState)(1),[w,j]=(0,p.useState)("1:1"),[N,E]=(0,p.useState)(()=>{if(!a)return"";let{el:e}=a;return"IMG"===e.tagName?e.src:""}),[k,_]=(0,p.useState)(!0),S=0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp"),A=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=()=>{let{editImagesModalProps:e}=o.Z.getState();if(e){var t;let{page:l,iframe:a}=e,r=(null==a?void 0:a.contentDocument)||(null==a?void 0:null===(t=a.contentWindow)||void 0===t?void 0:t.document);r&&ee.Z.getState().saveSnapshotForOperation(l,"image-edit",r)}};t?setTimeout(l,100):l()},T=e=>{let{width:t,height:l}=e.currentTarget;g(er(t,l,y||1))},Z=()=>{!N||N.includes(R.XJ)||E("".concat(R.XJ,"/imgs/").concat(btoa(N)))},F=()=>{var t;if(!v.current||!f)return;let a=null===(t=o.Z.getState().editImagesModalProps)||void 0===t?void 0:t.el;if(a)try{let t=document.createElement("canvas"),r=v.current,i=r.naturalWidth/r.width,s=r.naturalHeight/r.height;t.width=f.width*i,t.height=f.height*s;let n=t.getContext("2d");if(!n)return;n.drawImage(r,f.x*i,f.y*s,f.width*i,f.height*s,0,0,f.width*i,f.height*s),t.toBlob(t=>{if(!t){e.error(l("slidesImageEditor.export_error"));return}let r=new File([t],"cropped-image.png",{type:"image/png"});c.current=r;let i=new FileReader;i.onload=e=>{var t;let l=null===(t=e.target)||void 0===t?void 0:t.result;if(E(l),A("裁剪前"),"IMG"===a.tagName){let e=ea(a,l);A("裁剪后",!0),H({prevImageSrc:e});return}H({})},i.readAsDataURL(r),_(!1)},S?"image/webp":"image/png")}catch(t){e.error(l("slidesImageEditor.export_error")),console.error("Export error:",t)}},D=[{label:l("slidesImageEditor.any_ratio"),value:"auto"},{label:"1:1",value:"1:1",ratio:1},{label:"4:3",value:"4:3",ratio:4/3},{label:"16:9",value:"16:9",ratio:16/9},{label:"16:10",value:"16:10",ratio:1.6},{label:"3:4",value:"3:4",ratio:3/4},{label:"9:16",value:"9:16",ratio:9/16},{label:"10:16",value:"10:16",ratio:.625}],B=e=>{if(console.log("handleAspectChange"),"auto"===e){C(void 0),j(e);return}j(e);let t=D.find(t=>t.value===e);C(null==t?void 0:t.ratio),(null==t?void 0:t.ratio)&&v.current&&g(er(v.current.width,v.current.height,null==t?void 0:t.ratio))},H=async a=>{let{url:r,prevImageSrc:i}=a,s=(0,et.s)()||(Array.isArray(t.query.id)?t.query.id[0]:t.query.id),{editImagesModalProps:n}=o.Z.getState();if(!n||!s)return;let{el:d,page:u,iframe:h}=n;if(d){m(!0);try{if(!r&&!c.current){e.error(l("slidesImageEditor.no_file_selected"));return}let t=await (0,z.Ix)(r||c.current||"");200===t.status?(E(t.data),ea(d,t.data),A("图片上传后",!0)):e.error(l("slidesImageEditor.upload_error"))}catch(t){i&&ea(d,i),e.error(l("slidesImageEditor.upload_error")),console.error("Upload error:",t)}finally{m(!1)}}},W=(0,r.jsx)($,{currentSrc:N,initialMethod:null==a?void 0:a.initialReplaceMethod,initialContent:null==a?void 0:a.initialContent,initialGenerateMode:null==a?void 0:a.initialGenerateMode,isUploading:h,onImageChange:e=>{var t;let l=null===(t=o.Z.getState().editImagesModalProps)||void 0===t?void 0:t.el;c.current=e,g(void 0);let a=new FileReader;a.onload=e=>{var t;let a=null===(t=e.target)||void 0===t?void 0:t.result;if(E(a),A("图片替换前"),l&&"IMG"===l.tagName){let e=ea(l,a);A("图片替换后",!0),H({prevImageSrc:e});return}H({})},a.readAsDataURL(e)},onSelectImage:e=>{if(!e)return;let l=(0,et.s)()||(Array.isArray(t.query.id)?t.query.id[0]:t.query.id),{editImagesModalProps:a}=o.Z.getState();if(!a||!l)return;let{el:r,page:i,iframe:s}=a;A("选择图片前"),E(e),ea(r,e),A("选择图片后",!0)},onSaveWithUrl:e=>{A("URL保存前"),H({url:e})}});return(0,r.jsxs)("div",{className:"p-5 overflow-auto",children:[(0,r.jsxs)("div",{className:"flex gap-8 text-sm mb-5",children:[(0,r.jsx)("span",{className:(0,d.cn)("pb-1 border-b-2 cursor-pointer","crop"===i?"font-semibold text-theme-blue-500 border-theme-blue-500":"border-transparent"),onClick:()=>n("crop"),children:l("slidesImageEditor.crop")}),(0,r.jsx)("span",{className:(0,d.cn)("pb-1 border-b-2 cursor-pointer","replace"===i?"font-semibold text-theme-blue-500 border-theme-blue-500":"border-transparent"),onClick:()=>n("replace"),children:l("slidesImageEditor.replace")})]}),"crop"===i?(()=>{let e=k?(0,r.jsx)(I.ZP,{crop:x,onChange:g,onComplete:b,aspect:y,className:(0,d.cn)(P().container,"max-h-[344px]"),children:(0,r.jsx)("img",{ref:v,src:N,crossOrigin:"anonymous",className:"max-w-full max-h-[344px] object-contain",alt:l("imageEditor.title"),onLoad:T,onError:Z})}):(0,r.jsx)("img",{src:N,crossOrigin:"anonymous",className:"max-w-full h-full object-contain",alt:l("imageEditor.title"),onError:Z});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"relative aspect-square border border-[#F9F0F0] dark:border-[#3b455c] bg-[#F9F9F9] dark:bg-[#323945] rounded-xl overflow-hidden mb-5 flex justify-center items-center",children:N&&e}),(0,r.jsx)("div",{className:"flex gap-2 mb-5",children:k?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.z,{className:"flex-1 h-10",variant:"outline-primary",onClick:()=>_(!1),children:l("cancel")}),(0,r.jsx)(s.z,{className:"flex-1 h-10",onClick:F,children:l("apply")})]}):(0,r.jsx)(s.z,{className:"w-full h-10",disabled:h,onClick:()=>_(!k),children:l("edit")})}),k&&(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"text-sm mr-auto",children:l("slidesImageEditor.image_ratio")}),(0,r.jsxs)(L.Ph,{value:w,onValueChange:B,children:[(0,r.jsx)(L.i4,{className:"w-[120px] p-2",children:(0,r.jsx)(L.ki,{placeholder:l("slidesImageEditor.ratio")})}),(0,r.jsx)(L.Bw,{children:D.map(e=>{let{label:t,value:l}=e;return(0,r.jsx)(L.Ql,{value:l,children:t},l)})})]})]})]})})():W]})},es=l(51066);let en={chat:{title:"generateSlides.chat_title",icon:(0,r.jsx)(i.FZ,{className:"w-5 h-5"})},image:{title:"editSlides.edit_images"},thread:{title:"topic.thread",icon:(0,r.jsx)(es.Z,{className:"w-5 h-5"})}},eo=e=>{let{type:t}=e,l=(0,u.useTranslations)(),a=t?en[t]:void 0;return a?(0,r.jsxs)(n.OX,{className:"flex flex-row p-5 pointer-events-auto text-[#30394A] dark:text-slate-300",children:[(0,r.jsxs)("h2",{className:"flex gap-2 items-center text-sm font-semibold",children:[a.icon,l(a.title)]}),(0,r.jsx)(c.Z,{className:"w-5 h-5 ml-auto cursor-pointer",onClick:()=>{o.Z.getState().setSidebarType(void 0)}})]}):null},ed=e=>{let{type:t,icon:l}=e;return(0,r.jsx)(s.z,{variant:"secondary",onClick:()=>{o.Z.getState().setSidebarType(t)},className:"w-9 h-9 bg-white dark:bg-gray-800 rounded-full border-none [&_svg]:size-6 shadow-[0px_4px_10px_0px_rgba(0,0,0,.03)] dark:text-white",children:l})},ec=(a=e=>{let{url:t,onUpdateShortId:l,onCreateOutline:a,onCreatePpt:i,onHtmlGenerated:s}=e,{isDark:n}=(0,T.Z)(),o=(0,S.Z)(e=>e.setLoading),{iframeRef:d,sendMessage:c}=_({onMessage:e=>{switch(e.type){case Z.BX.THREAD_ACTION_UPDATE_SHORT_ID:console.log("receive update short id:",e.value),l({threadShortId:e.value.short_id});break;case Z.BX.PPT_ACTION_CREATE_OUTLINE:console.log("receive create outline:",e.value),a({threadShortId:e.value.short_id});break;case Z.BX.PPT_ACTION_CREATE_PPT:console.log("receive create ppt:",e.value),i({threadShortId:e.value.short_id});break;case Z.BX.PPT_ACTION_HTML_GENERATED:console.log("receive html generated:",e.value),s({threadShortId:e.value.short_id})}}});return(0,p.useEffect)(()=>{let e=d.current;if(!e)return;let t=()=>{try{var t;let l=e.contentDocument||(null===(t=e.contentWindow)||void 0===t?void 0:t.document);l&&l.body&&(n?l.body.style.background="#1F2631":l.body.style.background="")}catch(e){}};return t(),e.addEventListener("load",t),()=>{e.removeEventListener("load",t)}},[n]),(0,p.useEffect)(()=>{let e=e=>{c({type:Z.BX.PPT_ACTION_CREATE_PPT_AUTO_REPLY,value:e})};return F.$.subscribe("pptActionCreatePpt",e),()=>{F.$.unsubscribe("pptActionCreatePpt",e)}},[]),(0,r.jsxs)("div",{className:"w-full h-full relative",children:[(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col gap-4 p-4",children:[(0,r.jsx)(A.O,{className:"ml-auto h-14 w-3/4"}),(0,r.jsx)(A.O,{className:"h-20 w-3/4"})]}),(0,r.jsx)("iframe",{ref:d,src:t,onLoad:()=>o(!1),width:"100%",height:"100%",style:{border:"none",position:"relative",zIndex:1},referrerPolicy:"origin",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",sandbox:"allow-same-origin allow-scripts allow-popups allow-forms"})]})},function(e){let{type:t,className:l,...i}=e,s=(0,o.Z)(e=>e.sidebarType);return(0,r.jsx)("div",{className:(0,d.cn)(l,"h-full",t!==s&&"hidden"),children:(0,r.jsx)(a,{...i})})});var eu=e=>{let{status:t,messageId:l,disabled:a,hideChat:s=!1,onUpdateShortId:n=()=>{},onCreateOutline:c=()=>{},onCreatePpt:u=()=>{},onHtmlGenerated:h=()=>{},business_type:m,modelType:v,feedbackType:p,handleRetry:x}=e,g=(0,M.useRouter)(),{query:f}=g,b=(0,et.s)()||(Array.isArray(g.query.id)?g.query.id[0]:g.query.id),y=f.chatUrl,C=(0,o.Z)(e=>e.sidebarType),w=()=>{o.Z.getState().setSidebarType(void 0)},j=e=>t=>{"thread"===C&&w();let{threadShortId:l}=t;e(l)};return(0,r.jsxs)(r.Fragment,{children:["image"===C&&(0,r.jsx)("div",{className:"z-20 fixed inset-0",onClick:w}),(0,r.jsxs)("div",{className:(0,d.cn)("z-20 fixed right-6 md:right-6 top-[4.2rem] flex flex-col gap-2",!!C&&"hidden"),children:[(0,r.jsx)(ed,{type:"chat",icon:(0,r.jsx)(i.f7,{})}),(0,r.jsx)(ed,{type:"thread",icon:(0,r.jsx)(es.Z,{})})]}),(0,r.jsxs)("div",{className:(0,d.cn)(C?"":"translate-x-full","flex flex-col fixed right-0 bottom-0","rounded-none border-none transition-transform","w-96 bg-white text-slate-700 top-0 z-20 mt-[64px]","shadow-[-4px_0_10px_0_rgba(0,0,0,.03)]","dark:bg-[#1F2631] dark:text-slate-300"),children:[(0,r.jsx)(eo,{type:C}),"chat"===C&&(0,r.jsx)(k,{status:t,messageId:l,disabled:a,business_type:m,modelType:v,feedbackType:p,handleRetry:x}),"image"===C&&(0,r.jsx)(ei,{}),(0,r.jsx)(ec,{type:"thread",url:y||"/thread-chat/".concat(b),onUpdateShortId:e=>{let{threadShortId:t}=e;n(t)},onCreateOutline:e=>{let{threadShortId:t}=e;c(t)},onCreatePpt:j(u),onHtmlGenerated:j(h)})]})]})}},37892:function(e,t,l){"use strict";l.d(t,{Z:function(){return d}});var a=l(52676),r=l(75271);let i=e=>{let{radius:t=20,strokeWidth:l=4,value:r,children:i}=e,s=t-l/2,n=2*Math.PI*s,o=n-r/100*n;return(0,a.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,a.jsxs)("svg",{height:2*t,width:2*t,className:"transform -rotate-90",children:[(0,a.jsx)("circle",{className:"text-gray-100 dark:text-slate-300",stroke:"currentColor",fill:"transparent",strokeWidth:l,r:s,cx:t,cy:t}),(0,a.jsx)("circle",{className:"text-blue-500 transition-all duration-300 ease-linear",stroke:"currentColor",fill:"transparent",strokeWidth:l,strokeDasharray:n,strokeDashoffset:o,r:s,cx:t,cy:t,style:{strokeDasharray:n,strokeDashoffset:o},strokeLinecap:"round"})]}),i&&(0,a.jsx)("div",{className:"absolute",children:i})]})};var s=l(67415),n=l(59470),o=l(46571),d=function(e){let{iconClassName:t,radius:l,strokeWidth:d,autoIncrement:c,value:u}=e,[h,m]=(0,r.useState)(1),v=(0,n.Z)(h);(0,r.useEffect)(()=>{if(void 0!==u||!c)return;let e=v.current,t=e=>e<40?2*Math.random()+.8:e<80?1*Math.random()+.4:e<98?.5*Math.random()+.1:0,l=setInterval(()=>{let a=t(e);m(Math.min(e+=a,98)),e>=98&&clearInterval(l)},800);return()=>clearInterval(l)},[c,u]);let p=null!=u?u:h;return(0,a.jsx)(i,{radius:l,strokeWidth:d,value:p,children:(0,a.jsx)(s.FZ,{className:(0,o.cn)("size-5 dark:text-slate-300",t)})})}},41590:function(e,t,l){"use strict";l.d(t,{OX:function(){return h},dy:function(){return n},iI:function(){return v},sc:function(){return u},u6:function(){return p},uh:function(){return d},ze:function(){return m}});var a=l(52676),r=l(75271),i=l(2366),s=l(37481);let n=e=>{let{shouldScaleBackground:t=!0,...l}=e;return(0,a.jsx)(i.dy.Root,{shouldScaleBackground:t,...l})};n.displayName="Drawer",i.dy.Trigger;let o=i.dy.Portal,d=i.dy.Close,c=r.forwardRef((e,t)=>{let{className:l,...r}=e;return(0,a.jsx)(i.dy.Overlay,{ref:t,className:(0,s.cn)("fixed inset-0 z-50 bg-black/80",l),...r})});c.displayName=i.dy.Overlay.displayName;let u=r.forwardRef((e,t)=>{let{className:l,children:r,isShowHeadHandle:n=!0,...d}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(c,{}),(0,a.jsxs)(i.dy.Content,{ref:t,className:(0,s.cn)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",l),...d,children:[n&&(0,a.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),r]})]})});u.displayName="DrawerContent";let h=e=>{let{className:t,...l}=e;return(0,a.jsx)("div",{className:(0,s.cn)("flex flex-col gap-1.5 p-4 text-center sm:text-left",t),...l})};h.displayName="DrawerHeader";let m=e=>{let{className:t,...l}=e;return(0,a.jsx)("div",{className:(0,s.cn)("mt-auto flex flex-col gap-2 p-4",t),...l})};m.displayName="DrawerFooter";let v=r.forwardRef((e,t)=>{let{className:l,...r}=e;return(0,a.jsx)(i.dy.Title,{ref:t,className:(0,s.cn)("text-lg font-semibold leading-none tracking-tight",l),...r})});v.displayName=i.dy.Title.displayName;let p=r.forwardRef((e,t)=>{let{className:l,...r}=e;return(0,a.jsx)(i.dy.Description,{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",l),...r})});p.displayName=i.dy.Description.displayName},542:function(e,t,l){"use strict";l.d(t,{E:function(){return n}});var a=l(52676),r=l(75271),i=l(79852),s=l(37481);let n=r.forwardRef((e,t)=>{let{className:l,value:r,indicatorClassName:n,...o}=e;return(0,a.jsx)(i.fC,{ref:t,className:(0,s.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary","dark:bg-slate-400",l),...o,children:(0,a.jsx)(i.z$,{className:(0,s.cn)("bg-primary h-full w-full flex-1 transition-all",n),style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});n.displayName=i.fC.displayName},19370:function(e,t,l){"use strict";l.d(t,{Bw:function(){return p},Ph:function(){return c},Ql:function(){return x},U$:function(){return g},i4:function(){return h},ki:function(){return u}});var a=l(52676),r=l(75271),i=l(18669),s=l(9369),n=l(80145),o=l(91165),d=l(37481);let c=i.fC;i.ZA;let u=i.B4,h=r.forwardRef((e,t)=>{let{className:l,children:r,...n}=e;return(0,a.jsxs)(i.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-[10px] border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",l),...n,children:[r,(0,a.jsx)(i.JO,{asChild:!0,children:(0,a.jsx)(s.Z,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=i.xz.displayName;let m=r.forwardRef((e,t)=>{let{className:l,...r}=e;return(0,a.jsx)(i.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",l),...r,children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})});m.displayName=i.u_.displayName;let v=r.forwardRef((e,t)=>{let{className:l,...r}=e;return(0,a.jsx)(i.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",l),...r,children:(0,a.jsx)(s.Z,{className:"h-4 w-4"})})});v.displayName=i.$G.displayName;let p=r.forwardRef((e,t)=>{let{className:l,children:r,position:s="popper",...n}=e;return(0,a.jsx)(i.h_,{children:(0,a.jsxs)(i.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",l),position:s,...n,children:[(0,a.jsx)(m,{}),(0,a.jsx)(i.l_,{className:(0,d.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(v,{})]})})});p.displayName=i.VY.displayName,r.forwardRef((e,t)=>{let{className:l,...r}=e;return(0,a.jsx)(i.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",l),...r})}).displayName=i.__.displayName;let x=r.forwardRef((e,t)=>{let{className:l,children:r,...s}=e;return(0,a.jsxs)(i.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l),...s,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(i.wU,{children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(i.eT,{children:r})]})});x.displayName=i.ck.displayName;let g=r.forwardRef((e,t)=>{let{className:l,...r}=e;return(0,a.jsx)(i.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",l),...r})});g.displayName=i.Z0.displayName},86378:function(e,t,l){"use strict";l.d(t,{O:function(){return i}});var a=l(52676),r=l(37481);function i(e){let{className:t,...l}=e;return(0,a.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",t),...l})}},26949:function(e,t,l){"use strict";l.d(t,{SP:function(){return d},dr:function(){return o},mQ:function(){return n},nU:function(){return c}});var a=l(52676),r=l(75271),i=l(1262),s=l(37481);let n=i.fC,o=r.forwardRef((e,t)=>{let{className:l,...r}=e;return(0,a.jsx)(i.aV,{ref:t,className:(0,s.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",l),...r})});o.displayName=i.aV.displayName;let d=r.forwardRef((e,t)=>{let{className:l,...r}=e;return(0,a.jsx)(i.xz,{ref:t,className:(0,s.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",l),...r})});d.displayName=i.xz.displayName;let c=r.forwardRef((e,t)=>{let{className:l,...r}=e;return(0,a.jsx)(i.VY,{ref:t,className:(0,s.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",l),...r})});c.displayName=i.VY.displayName},83438:function(e,t,l){"use strict";l.d(t,{yp:function(){return j},ZP:function(){return Z},Nv:function(){return T},sY:function(){return A}});var a,r,i=l(21516),s=l(7524),n=l(75271),o=l(17224),d=l(66292),c=l.n(d),u=l(59470),h=l(37588),m=l(92540),v=l(7717),p=l(39109),x=l(64155),g=l(89146),f=l(14972),b=l(68782);(a=r||(r={})).TYPING="typing",a.DELETE="delete",a.PASTE="paste",a.AI_EDIT="ai-edit",a.STYLE="style",a.INIT="initial",a.UNDO="undo",a.REDO="redo";let y=e=>{let{iframeRef:t,slideIndex:l,inited:a,canEdit:r,onHistoryRestored:i}=e,s=(0,n.useRef)(!1),o=(0,n.useRef)(null),d=(0,u.Z)(i),c=(0,n.useRef)(null),{pushUndo:h,popUndo:m,pushRedo:v,popRedo:p,clearRedo:x}=(0,g.Z)(),y=(0,n.useCallback)(function(e){var a;let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=null===(a=t.current)||void 0===a?void 0:a.contentDocument;if(!i||!i.body||void 0===l||s.current)return;let n=i.body.cloneNode(!0);n.querySelectorAll(".felo--element__hover, .felo--element__focused, .felo--replace__icon").forEach(e=>{e.classList.remove("felo--element__hover","felo--element__focused","felo--replace__icon")});let d=n.innerHTML,u=Date.now();!r&&d===o.current||c.current&&c.current.type===e&&u-c.current.timestamp<500||(o.current,o.current=d,c.current={type:e,timestamp:u},h({html:d,slideIndex:l,timestamp:Date.now(),operation:e,type:"slide"}),x())},[l,t,h,x]),C=(0,n.useCallback)(e=>{let l=t.current,a=null==l?void 0:l.contentDocument;if(l&&a&&a.body&&e){s.current=!0;try{let t=a.documentElement.scrollTop||a.body.scrollTop,s=a.documentElement.scrollLeft||a.body.scrollLeft,n=new DOMParser().parseFromString(e.html,"text/html");if(n.body){var r,i;a.body.innerHTML=n.body.innerHTML,Array.from(n.body.attributes).forEach(e=>{a.body.setAttribute(e.name,e.value)}),a.body.setAttribute("contenteditable","true"),a.body.setAttribute("spellcheck","false"),a.body.setAttribute("data-bind","true");let e=a.getElementById("felo-editable-style");e||((e=a.createElement("style")).id="felo-editable-style",a.head.appendChild(e)),e.textContent=j,a.querySelectorAll(".material-icons, .fab").forEach(e=>{e.setAttribute("contenteditable","false")});let c=a.querySelectorAll("[data-chart-option]"),u=l.contentWindow.echarts;u&&c.forEach(e=>{let t=e.dataset.chartOption;if(t)try{let l=JSON.parse(t);u.dispose(e),u.init(e).setOption(l,!0)}catch(e){console.error("Failed to parse chart option or init chart",e)}}),null===(i=l.contentWindow)||void 0===i||null===(r=i.fixHeight)||void 0===r||r.call(i),a.documentElement.scrollTop=t,a.documentElement.scrollLeft=s,a.body.scrollTop=t,a.body.scrollLeft=s,o.current=(0,b.f)(a),d.current(a)}}catch(e){console.error("[History] Error restoring snapshot:",e)}finally{setTimeout(()=>{s.current=!1,o.current=null},100)}}},[t,d]),w=(0,n.useCallback)(()=>{var e;let{undoStack:a}=g.Z.getState(),r=a[a.length-1];if(!r||r.slideIndex!==l)return;let i=m();if(!i)return;let s=null===(e=t.current)||void 0===e?void 0:e.contentDocument;s&&v({html:(0,b.f)(s),slideIndex:l,timestamp:Date.now(),operation:"redo",type:"slide"}),C(i)},[l,t,m,v,C]),N=(0,n.useCallback)(()=>{var e;let{redoStack:a}=g.Z.getState(),r=a[a.length-1];if(!r||r.slideIndex!==l)return;let i=p();if(!i)return;let s=null===(e=t.current)||void 0===e?void 0:e.contentDocument;s&&h({html:(0,b.f)(s),slideIndex:l,timestamp:Date.now(),operation:"undo",type:"slide"},!0),C(i)},[l,t,p,h,C]),E=(0,n.useCallback)(e=>{if(!r)return;let l=/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),a=e.key.toLowerCase(),i=e.shiftKey,s=!1,n=!1;if("Backspace"===e.key||"Delete"===e.key){var o;let l=null===(o=t.current)||void 0===o?void 0:o.contentWindow;if(!l)return;let a=l.getSelection();if(!a||0===a.rangeCount)return;let r=a.getRangeAt(0);if(r.collapsed)return;if(null!==r.cloneContents().querySelector("div, p, h1, h2, h3, h4, h5, h6, ul, ol, li, table, blockquote, img")){e.preventDefault(),e.stopPropagation();return}}if(l){let t=e.metaKey;s=t&&!i&&"z"===a,n=t&&i&&"z"===a||t&&"y"===a}else{let t=e.ctrlKey;s=t&&!i&&"z"===a,n=t&&("y"===a||i&&"z"===a)}(s||n)&&(e.preventDefault(),e.stopPropagation(),s?g.Z.getState().executeUndo():g.Z.getState().executeRedo())},[r,t]);return(0,n.useEffect)(()=>{if(!r||!a)return;let e=t.current,l=null==e?void 0:e.contentWindow;if(l)return l.document.addEventListener(f.r.UNDO,w),l.document.addEventListener(f.r.REDO,N),l.document.addEventListener("keydown",E,!0),()=>{l.document.removeEventListener(f.r.UNDO,w),l.document.removeEventListener(f.r.REDO,N),l.document.removeEventListener("keydown",E,!0)}},[r,a,w,N,E,l]),{isHistoryOperationRef:s,saveSnapshot:y,saveOperationSnapshot:e=>{y(e,!1)}}};var C=l(33432),w=l(63023);let j=".felo--element__hover {\n          background-color: #0080FF26;\n          border-radius: 6px;\n          cursor: text;\n        }\n        .felo--element__focused {\n          background-color: inherit;\n          box-shadow: 0 0 0 2px rgba(0, 122, 255, 1) !important;\n          border-radius: 6px;\n          cursor: text;\n        }\n        canvas {\n          cursor: default;\n        }\n        .material-icons,.fab {\n          cursor: pointer;\n        }\n        .felo--replace__icon {\n          border-width: 2px !important;\n          border-style: solid !important;\n          border-color: #007AFF !important;\n          border-radius: 6px;\n          opacity: 0.8;\n        }\n        .felo--image__placeholder {\n          background-color: #f0f0f0;\n          border-radius: 6px;\n        }",N=(e,t)=>{if(!(null==t?void 0:t.echarts)){console.log("Cannot find echarts in iframe");return}if(e.getAttribute("_echarts_instance_"))return e;let l=e.parentElement;if(null==l?void 0:l.getAttribute("_echarts_instance_"))return l;let a=null==l?void 0:l.parentElement;if(null==a?void 0:a.getAttribute("_echarts_instance_"))return a;let r=null==a?void 0:a.parentElement;if(null==r?void 0:r.getAttribute("_echarts_instance_"))return r},E=e=>{var t,l,a;return!!e&&("BODY"===e.tagName||(null===(t=e.parentElement)||void 0===t?void 0:t.tagName)==="BODY"||(null===(a=e.parentElement)||void 0===a?void 0:null===(l=a.parentElement)||void 0===l?void 0:l.tagName)==="BODY")},k=e=>e.className.includes("felo--image__placeholder"),_=e=>{let{parentEl:t,element:l,scaling:a}=e;if(!l)return;let r=l.getBoundingClientRect();return{left:r.left+t.clientWidth*a/2,top:r.top}},S=e=>{let{parentEl:t,element:l,scaling:a}=e;if(!l)return;let r=l.getBoundingClientRect(),i=t.getBoundingClientRect(),s=(r.left+l.clientWidth/2)*a,n=r.top*a;return{left:s+i.left,top:n+i.top}},A=["arrow_forward","arrow_back","arrow_upward","arrow_downward","arrow_circle_up"],T=e=>{let{name:t,iframeDocument:l}=e;if(console.log("\uD83D\uDE80 ~ useEditHtml ~ iframeDocument:",l),!l)return;let a=null==l?void 0:l.querySelector(".felo--replace__icon");a&&(a.textContent=t)};var Z=e=>{let{slideIndex:t,scaling:l,canEdit:a,iframeRef:r,saveType:d="slide",business_type:g,businessId:f}=e,A=(0,v.useTranslations)(),T=(0,p.Z)(),Z=(0,o.useRouter)(),F=(0,n.useRef)(null),L=(0,n.useRef)(!1),I=(0,n.useRef)(null),D=(0,u.Z)(l),P=f||(0,w.s)()||(Array.isArray(Z.query.id)?Z.query.id[0]:Z.query.id),O=Array.isArray(Z.query.modelType)?Z.query.modelType[0]:Z.query.modelType||"",[z,R]=(0,n.useState)(!1),[M,B]=(0,n.useState)(!1),H=(0,n.useCallback)(e=>{L.current=!0,setTimeout(()=>{let t=W.current;t&&t(e),L.current=!1},0)},[]),W=(0,n.useRef)(null),J=y({iframeRef:r,slideIndex:t,inited:z,canEdit:a,onHistoryRestored:H}),V=(0,C.B)({iframeRef:r,inited:z,canEdit:a,onHistoryRestored:H}),{isHistoryOperationRef:G,saveSnapshot:U}="webpage"===d?V:J,q=(0,n.useCallback)(()=>{var e;(null===(e=r.current)||void 0===e?void 0:e.contentDocument)&&U("style",!0)},[U]),X=(0,n.useCallback)(e=>Array.from(e.childNodes).some(e=>{if(e.nodeType===Node.TEXT_NODE){var t;return(null==e?void 0:e.textContent)&&(null==e?void 0:null===(t=e.textContent)||void 0===t?void 0:t.replace(/\s+/g,"").length)>0}return!1}),[]),Y=(0,n.useCallback)(e=>{if(!e.body)return console.warn("iframe body not ready, skipping event listeners"),()=>{};let l=e=>{let t=e.target;(X(t)||(null==t?void 0:t.tagName)==="IMG")&&t.classList.add("felo--element__hover")};e.addEventListener("mouseover",l);let a=e=>{let t=e.target;null==t||t.classList.remove("felo--element__hover")};e.addEventListener("mouseout",a);let i=e=>{var l,a,i,s,n,o;e.preventDefault(),e.stopPropagation();let d=new CustomEvent("slide:clear-focus",{detail:{slideIndex:t}});window.dispatchEvent(d),h.Z.getState().setAIInputValue(""),h.Z.getState().setIsShowAIInput(!1);let c=e.target;if((null==c?void 0:c.tagName)==="BODY")return;let u=r.current,v=N(c,(null==u?void 0:u.contentWindow)||void 0);if(u){if(k(c)){let e=S({parentEl:u,element:c,scaling:(null===(l=D.current)||void 0===l?void 0:l.call(D))||1});e&&h.Z.getState().updateEditToolbar({...e,type:"image",verticalPosition:"top",values:{el:c,page:t,iframe:u,is:"placeholder"}})}else if((null==c?void 0:c.tagName)==="IMG"){let e=S({parentEl:u,element:c,scaling:(null===(a=D.current)||void 0===a?void 0:a.call(D))||1});e&&h.Z.getState().updateEditToolbar({...e,type:"image",verticalPosition:"top",values:{el:c,page:t,iframe:u,is:"image"}})}else if(X(c)){U("typing",!1);let e=S({parentEl:u,element:c,scaling:(null===(i=D.current)||void 0===i?void 0:i.call(D))||1});e&&h.Z.getState().updateEditToolbar({...e,type:"text",verticalPosition:"top",values:{el:c,page:t,iframe:u}})}else if(E(c))return;else if(v){let e=S({parentEl:u,element:v,scaling:(null===(s=D.current)||void 0===s?void 0:s.call(D))||1});if(e){let l=null===(n=u.contentWindow)||void 0===n?void 0:n.echarts.getInstanceById(v.getAttribute("_echarts_instance_"));if(!l||void 0===t)return;let a=l.getOption(),r=m._.map(e=>e.value),i=(null==a?void 0:a.series)?Array.isArray(a.series)?[...new Set(a.series.map(e=>e.type))].filter(e=>r.includes(e)):a.series.type?[a.series.type].filter(e=>r.includes(e)):[]:[],s=1===i.length||JSON.stringify(i)===JSON.stringify(["boxplot","scatter"]);h.Z.getState().updateEditToolbar({...e,type:"echarts",verticalPosition:"top",values:{el:v,inst:l,page:t,iframe:u,chartType:i[0],supportsEdit:s}})}}else{let e=(0,x.Z)(),l=S({parentEl:u,element:c,scaling:(null===(o=D.current)||void 0===o?void 0:o.call(D))||1});l&&h.Z.getState().updateEditToolbar({...l,type:"block",verticalPosition:"top",values:{el:c,page:t,iframe:u,elementId:e}}),null==c||c.setAttribute("data-element-id",e)}I.current&&I.current.classList.remove("felo--element__focused"),c.classList.add("felo--element__focused"),I.current=c,B(!0)}};return e.body.addEventListener("click",i),()=>{e.removeEventListener("mouseover",l),e.removeEventListener("mouseout",a),e.body&&e.body.removeEventListener("click",i)}},[U,G,D,t,X]);W.current=Y;let Q=(0,n.useCallback)(c()(async e=>{let l="webpage"===d?void 0!==t:t&&t>0;if(!e||!l||G.current||L.current)return;let a=(0,b.f)(e);if(a&&l&&P){F.current&&F.current.abort(),F.current=new AbortController;try{if("webpage"===d)await (0,s.oP)({businessId:P,businessType:g||"MESSAGE",content:a});else{var r;await (0,i.ZN)({business_id:P,business_type:g||"AGENT_THREAD",page:t,content:a,model_type:O,signal:null===(r=F.current)||void 0===r?void 0:r.signal})}console.log("HTML saved successfully (type: ".concat(d,")"))}catch(e){if((null==e?void 0:e.name)==="AbortError"){console.log("Request has been cancelled.");return}console.error("Failed to save HTML:",e)}}},2e3),[t,P,O,d,g,G]),K=e=>{null==e||e.querySelectorAll(".felo--element__focused").forEach(e=>{var t;null==e||null===(t=e.classList)||void 0===t||t.remove("felo--element__focused")}),h.Z.getState().setAIInputValue("")},$=e=>{if(!(null==e?void 0:e.body)){console.warn("iframe body not available for editing");return}e.body.setAttribute("contenteditable","true"),e.body.setAttribute("spellcheck","false");let t=e.getElementById("felo-editable-style");if(t)t.textContent=j;else{var l;let t=e.createElement("style");t.id="felo-editable-style",t.textContent=j,null===(l=e.head)||void 0===l||l.appendChild(t)}},ee=e=>{if(!(null==e?void 0:e.body)){console.warn("iframe body not available for disabling edit");return}e.body.contentEditable="false";let t=e.getElementById("felo-editable-style");t&&(t.textContent="\n        .material-icons,.fab, img {\n          cursor: default;\n          pointer-events: none;\n        }")},et=e=>{e.querySelectorAll(".felo--replace__icon").forEach(e=>{null==e||e.classList.remove("felo--replace__icon")})},el=(0,n.useCallback)(()=>{var e,t,l;let a=(null==r?void 0:null===(e=r.current)||void 0===e?void 0:e.contentDocument)||(null==r?void 0:null===(l=r.current)||void 0===l?void 0:null===(t=l.contentWindow)||void 0===t?void 0:t.document);a&&(K(a),et(a)),B(!1)},[]);return(0,n.useEffect)(()=>{let e=e=>{var l;(null===(l=e.detail)||void 0===l?void 0:l.slideIndex)!==t&&el()};return window.addEventListener("slide:clear-focus",e),()=>{window.removeEventListener("slide:clear-focus",e)}},[t,el]),(0,n.useEffect)(()=>{var e,t,l;if(!a)return;let i=(null==r?void 0:null===(e=r.current)||void 0===e?void 0:e.contentDocument)||(null==r?void 0:null===(l=r.current)||void 0===l?void 0:null===(t=l.contentWindow)||void 0===t?void 0:t.document);if(!i){z&&T.error(A("generateSlides.iframe_cors_error"));return}let s=e=>{$(e);let t=Y(e),l=new MutationObserver(t=>{!G.current&&!L.current&&t.some(e=>"attributes"!==e.type||"style"!==e.attributeName&&"class"!==e.attributeName||!!I.current)&&Q(e)});return e.body&&l.observe(e.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),()=>{t(),l.disconnect(),ee(e),K(e),console.log("✅ Edit mode events and observer cleaned up.")}};if(!z){ee(i),K(i);return}if("complete"===i.readyState&&i.body)return s(i);let n=()=>{var e,t,l;let a=(null===(e=r.current)||void 0===e?void 0:e.contentDocument)||(null===(l=r.current)||void 0===l?void 0:null===(t=l.contentWindow)||void 0===t?void 0:t.document);(null==a?void 0:a.body)&&s(a)};return i.addEventListener("DOMContentLoaded",n),window.addEventListener("load",n),()=>{i.removeEventListener("DOMContentLoaded",n),window.removeEventListener("load",n)}},[a,z,Y,Q]),{isEditing:M,isEditMode:z,showWrapperToolbar:()=>{var e,l,a;let i=r.current,s=(null==i?void 0:i.contentDocument)||(null==i?void 0:null===(e=i.contentWindow)||void 0===e?void 0:e.document);if(i){let e=_({parentEl:i,element:null==s?void 0:null===(l=s.defaultView)||void 0===l?void 0:l.frameElement,scaling:(null===(a=D.current)||void 0===a?void 0:a.call(D))||1});e&&h.Z.getState().updateEditToolbar({...e,type:"wrapper",verticalPosition:"bottom",values:{page:t}})}},handleSaveHtml:Q,setInited:R,saveStyleSnapshot:q,clearFocusStyle:el}}},59470:function(e,t,l){"use strict";var a=l(75271);t.Z=function(e){let t=(0,a.useRef)(e);return(0,a.useEffect)(()=>{t.current=e},[e]),t}},33432:function(e,t,l){"use strict";l.d(t,{B:function(){return o}});var a,r,i=l(75271),s=l(89146),n=l(59470);(a=r||(r={})).TYPING="typing",a.DELETE="delete",a.PASTE="paste",a.AI_EDIT="ai-edit",a.STYLE="style",a.INIT="initial",a.MUTATION="mutation";let o=e=>{let{iframeRef:t,inited:l,canEdit:a,onHistoryRestored:r}=e,o=(0,i.useRef)(!1),d=(0,i.useRef)(null),c=(0,n.Z)(r),u=(0,i.useRef)(null),{pushUndo:h,popUndo:m,pushRedo:v,popRedo:p,clearRedo:x}=(0,s.Z)(),g=(0,i.useCallback)(function(e){var l;let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=null===(l=t.current)||void 0===l?void 0:l.contentDocument;if(!r||!r.body){console.log("[WebpageHistory] Cannot save snapshot: missing document or body");return}if(o.current){console.log("[WebpageHistory] Skipping snapshot save during history operation");return}let i=r.body.cloneNode(!0);i.querySelectorAll(".felo--element__hover, .felo--element__focused, .felo--replace__icon").forEach(e=>{e.classList.remove("felo--element__hover","felo--element__focused","felo--replace__icon")});let s=i.innerHTML,n=Date.now();if(!a&&s===d.current){console.log("[WebpageHistory] Skipping duplicate snapshot");return}if(u.current&&u.current.type===e&&n-u.current.timestamp<500){console.log("[WebpageHistory] Skipping duplicate ".concat(e," operation"));return}console.log("[WebpageHistory] Saving snapshot for operation: ".concat(e)),d.current=s,u.current={type:e,timestamp:n},h({html:s,slideIndex:0,timestamp:Date.now(),operation:e,type:"webpage"}),x()},[t,h,x]),f=(0,i.useCallback)(e=>{let l=t.current,a=null==l?void 0:l.contentDocument;if(!l||!a||!a.body||!e){console.log("[WebpageHistory] Cannot restore snapshot: missing iframe, document or body");return}console.log("[WebpageHistory] Restoring snapshot for operation: ".concat(e.operation)),o.current=!0;try{let t=a.documentElement.scrollTop||a.body.scrollTop,l=a.documentElement.scrollLeft||a.body.scrollLeft;requestAnimationFrame(()=>{let r=a.createElement("div");r.innerHTML=e.html;let i=a.createDocumentFragment();for(;r.firstChild;)i.appendChild(r.firstChild);a.body.innerHTML="",a.body.appendChild(i),a.documentElement.scrollTop=t,a.documentElement.scrollLeft=l,a.body.scrollTop=t,a.body.scrollLeft=l,d.current=e.html,c.current(a)})}catch(e){console.error("[WebpageHistory] Error restoring snapshot:",e)}finally{setTimeout(()=>{o.current=!1,d.current=null},100)}},[t,c]),b=(0,i.useCallback)(()=>{var e;let{undoStack:l}=s.Z.getState(),a=l[l.length-1];if(!a||0!==a.slideIndex){console.log("[WebpageHistory] No undo operation for webpage");return}let r=m();if(!r){console.log("[WebpageHistory] No snapshot to restore");return}let i=null===(e=t.current)||void 0===e?void 0:e.contentDocument;i&&v({html:i.body.innerHTML,slideIndex:0,timestamp:Date.now(),operation:"redo",type:"webpage"}),f(r)},[t,m,v,f]),y=(0,i.useCallback)(()=>{var e;let{redoStack:l}=s.Z.getState(),a=l[l.length-1];if(!a||0!==a.slideIndex){console.log("[WebpageHistory] No redo operation for webpage");return}let r=p();if(!r){console.log("[WebpageHistory] No snapshot to restore");return}let i=null===(e=t.current)||void 0===e?void 0:e.contentDocument;i&&h({html:i.body.innerHTML,slideIndex:0,timestamp:Date.now(),operation:"undo",type:"webpage"},!0),f(r)},[t,p,h,f]);(0,i.useEffect)(()=>{let e=()=>{let{undoStack:e}=s.Z.getState(),t=e.at(-1);t&&0===t.slideIndex&&(console.log("[WebpageHistory] Processing global undo for webpage"),b())},t=()=>{let{redoStack:e}=s.Z.getState(),t=e.at(-1);t&&0===t.slideIndex&&(console.log("[WebpageHistory] Processing global redo for webpage"),y())};return window.addEventListener("global-undo",e),window.addEventListener("global-redo",t),()=>{window.removeEventListener("global-undo",e),window.removeEventListener("global-redo",t)}},[b,y]);let C=(0,i.useCallback)(e=>{if(!a)return;let t=/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),l=e.key.toLowerCase(),r=e.shiftKey,i=!1,n=!1;if(t){let t=e.metaKey;i=t&&!r&&"z"===l,n=t&&r&&"z"===l||t&&"y"===l}else{let t=e.ctrlKey;i=t&&!r&&"z"===l,n=t&&("y"===l||r&&"z"===l)}(i||n)&&(e.preventDefault(),e.stopPropagation(),i?s.Z.getState().executeUndo():s.Z.getState().executeRedo())},[a]);return(0,i.useEffect)(()=>{if(a&&l)return document.addEventListener("keydown",C,!0),()=>{document.removeEventListener("keydown",C,!0)}},[a,l,C]),{isHistoryOperationRef:o,saveSnapshot:g}}},21516:function(e,t,l){"use strict";l.d(t,{$Y:function(){return g},A7:function(){return c},F1:function(){return n},Ix:function(){return u},Pe:function(){return v},VU:function(){return s},Vs:function(){return y},ZN:function(){return x},_Q:function(){return d},_m:function(){return p},a5:function(){return h},f3:function(){return m},nD:function(){return f},rO:function(){return b},sh:function(){return o}});var a=l(27976),r=l(13263),i=l(5517);let s=async e=>{e.model_type=(null==e?void 0:e.model_type)?null==e?void 0:e.model_type:"PRO";let t=new URLSearchParams(e);return(0,i.Z)("".concat(a.Ez,"/htmlPPT/query?").concat(t.toString()),{method:"GET",headers:(0,r.Fe)()}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>e)},n=(e,t)=>(0,i.Z)("".concat(a.Ez,"/htmlPPT/generatePlan"),{method:"POST",headers:(0,r.Fe)(),body:JSON.stringify(e),signal:t.signal}),o=(e,t)=>(0,i.Z)("".concat(a.Ez,"/htmlPPT/generatePlan"),{method:"POST",headers:(0,r.Fe)(),body:JSON.stringify(e),signal:t.signal}),d=(e,t)=>(0,i.Z)("".concat(a.Ez,"/htmlPPT/generateSlide"),{method:"POST",headers:(0,r.Fe)(),body:JSON.stringify(e),signal:t.signal}),c=(e,t)=>(0,i.Z)("".concat(a.Ez,"/htmlPPT/generateSlide"),{method:"POST",headers:(0,r.Fe)(),body:JSON.stringify(e),signal:null==t?void 0:t.signal}),u=e=>{let t=new FormData;return e instanceof File&&t.append("file",e),(0,i.Z)("".concat(a.Ez,"/htmlPPT/image/upload").concat("string"==typeof e?"?download_url="+e:""),{method:"POST",headers:(0,r.Fe)(),body:t}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>e)},h=e=>(0,i.Z)("".concat(a.Ez,"/image-search/search?keywords=").concat(e),{method:"GET",headers:(0,r.Fe)()}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>e),m=e=>(0,i.Z)("".concat(a.Ez,"/htmlppt/aiImage/generate"),{method:"POST",headers:(0,r.Fe)(),body:JSON.stringify({prompt:e})}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>e),v=(e,t)=>(0,i.Z)("".concat(a.Ez,"/htmlppt/aiImage/imgToImg"),{method:"POST",headers:(0,r.Fe)(),body:JSON.stringify({prompt:e,image_url:t})}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>e),p=async(e,t)=>{var l,s;t.model_type=(null==t?void 0:t.model_type)?null==t?void 0:t.model_type:"PRO";let n=new URLSearchParams({merge:String(null!==(l=null==t?void 0:t.merge)&&void 0!==l&&l),useWps:String(null!==(s=null==t?void 0:t.useWps)&&void 0!==s&&s)});return(0,i.Z)("".concat(a.Ez,"/htmlPPT/").concat("PPTX"===e?"exportPpt":"exportPdf","?").concat(n.toString()),{method:"POST",headers:(0,r.Fe)(),body:JSON.stringify(t)})},x=async e=>(e.content=(null==e?void 0:e.content)?null==e?void 0:e.content:"",e.body=(null==e?void 0:e.body)?null==e?void 0:e.body:"",e.model_type=(null==e?void 0:e.model_type)?null==e?void 0:e.model_type:"PRO",(0,i.Z)("".concat(a.Ez,"/htmlPPT/updateSlide"),{method:"POST",headers:(0,r.Fe)(),body:JSON.stringify(e),signal:e.signal}).then(async e=>{if(200!==e.status)return Promise.reject(e);let t=await e.json();return null==t?void 0:t.data}).catch(e=>{if("AbortError"===e.name)throw e;return e})),g=async e=>(e.business_type=(null==e?void 0:e.business_type)?null==e?void 0:e.business_type:"AGENT_THREAD",e.model_type=(null==e?void 0:e.model_type)?null==e?void 0:e.model_type:"PRO",(0,i.Z)("".concat(a.Ez,"/htmlPPT/feedback/create"),{method:"POST",headers:(0,r.Fe)(),body:JSON.stringify(e),signal:e.signal}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>{if("AbortError"===e.name)throw e;return e})),f=async e=>(0,i.Z)("".concat(a.EG,"/html/feedback/create"),{method:"POST",headers:(0,r.Fe)(),body:JSON.stringify(e),signal:e.signal}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>{if("AbortError"===e.name)throw e;return e}),b=(e,t)=>(0,i.Z)("".concat(a.Ez,"/htmlPPT/editHtml"),{method:"POST",headers:(0,r.Fe)(),body:JSON.stringify(e),signal:t.signal}),y=async e=>(0,i.Z)("".concat(a.Ez,"/htmlPPT/update.plan"),{method:"POST",headers:(0,r.Fe)(),body:JSON.stringify({title:e.title,description:e.description,overall_requirements:e.slide_title,model_type:e.model_type}),signal:e.signal}).then(async e=>200!==e.status?Promise.reject(e):await e.json())},37588:function(e,t,l){"use strict";let a=(0,l(75910).Ue)((e,t)=>({title:void 0,setTitle:t=>e({title:t}),htmlList:[],setHtmlList:t=>e({htmlList:t}),addHtmlListEmptyItem:()=>e(e=>({htmlList:[...e.htmlList,void 0]})),updateHtmlItem:(t,l)=>{let{html:a,status:r,url:i,height:s,width:n,evaluate:o,reason:d,code:c}=l;return e(e=>{var l,u;let h=[...e.htmlList],m=h[t-1],v={page:t,html:a||(null==m?void 0:m.html)||"",status:null!==(l=null!=r?r:null==m?void 0:m.status)&&void 0!==l?l:1,time:"",height:s||(null==m?void 0:m.height)||720,width:n||(null==m?void 0:m.width)||1280,url:i||(null==m?void 0:m.url)||"",evaluate:null!==(u=null!=o?o:null==m?void 0:m.evaluate)&&void 0!==u?u:-1,reason:d||(null==m?void 0:m.reason)||"",code:null!=c?c:(null==m?void 0:m.code)||0};return h[t-1]=v,{...e,htmlList:h}})},wrapperBackground:void 0,setWrapperBackground:t=>e({wrapperBackground:t}),chatList:[],setChatList:t=>e({chatList:t}),updateChatList:t=>e(e=>{let l="id"in t?e.chatList.findIndex(e=>(null==e?void 0:e.id)===t.id):-1;if(-1===l)return{chatList:[...e.chatList,{...t,content:t.content||"",role:t.role||"user"}]};{let a=[...e.chatList];return a[l]={...a[l],...t},{chatList:a}}}),editToolbar:void 0,resetEditToolbar:()=>{e({editToolbar:void 0,isShowAIInput:!1})},updateEditToolbar:t=>{e({editToolbar:t})},isOpenEditChartsModal:!1,setIsOpenEditChartsModal:t=>{e({isOpenEditChartsModal:t})},editChartsModalProps:void 0,setEditChartsModalProps:t=>{e({editChartsModalProps:t})},editImagesModalProps:void 0,setEditImagesModalProps:t=>{e({editImagesModalProps:t})},isOpenFeedbackForm:{},setIsOpenFeedbackForm:(t,l)=>{e(e=>({isOpenFeedbackForm:{...e.isOpenFeedbackForm,[t]:l}}))},isShowFeedback:{},setIsShowFeedback:(t,l)=>{e(e=>({isShowFeedback:{...e.isShowFeedback,[t]:l}}))},slidesPlan:[],streamingTitle:"",streamingTheme:"",setSlidesPlan:t=>{e({slidesPlan:t})},updateSlidesPlanItemPartial:(t,l)=>{e(e=>{let a=[...e.slidesPlan],r=a.findIndex(e=>e.page===t);return -1!==r&&(a[r]={...a[r],...l}),{slidesPlan:a}})},updateSlidesPlanItem:(t,l)=>{e(a=>{let r=[...a.slidesPlan],i=r.findIndex(e=>e.page===t);if(l.title){let t=a.streamingTitle,r=l.title,i=r.slice(0,Math.min(t.length+1e3,r.length));e({streamingTitle:i}),l.title=i}if(l.theme){let t=a.streamingTheme,r=l.theme,i=r.slice(0,Math.min(t.length+1e3,r.length));e({streamingTheme:i}),l.theme=i}return -1!==i?r[i]={...r[i],...l}:r.push(l),{slidesPlan:r}})},updateStreamingTitle:t=>{e({streamingTitle:t})},updateStreamingTheme:t=>{e({streamingTheme:t})},sidebarType:void 0,setSidebarType:t=>{e({sidebarType:t})},isGenerating:!1,setIsGenerating:t=>{e({isGenerating:t})},isShowAIInput:!1,setIsShowAIInput(t){e({isShowAIInput:t})},aiInputValue:"",setAIInputValue(t){e({aiInputValue:t})},initialSlidesPlan:[],setInitialSlidesPlan:t=>{e({initialSlidesPlan:t})},initialSSRDetail:void 0,setInitialSSRDetail:t=>{e({initialSSRDetail:t})}}));t.Z=a},89146:function(e,t,l){"use strict";var a=l(75910),r=l(68782);let i=(0,a.ZP)((e,t)=>({undoStack:[],redoStack:[],pushUndo:function(t){let l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e(e=>{let a=[...e.undoStack,t];return a.length>100&&a.shift(),{undoStack:a,redoStack:l?e.redoStack:[]}})},popUndo:()=>{let{undoStack:l}=t();if(0===l.length)return;let a=l[l.length-1];return e({undoStack:l.slice(0,l.length-1)}),a},pushRedo:t=>{e(e=>({redoStack:[...e.redoStack,t]}))},popRedo:()=>{let{redoStack:l}=t();if(0===l.length)return;let a=l[l.length-1];return e({redoStack:l.slice(0,l.length-1)}),a},clearRedo:()=>{e({redoStack:[]})},canUndo:()=>t().undoStack.length>0,canRedo:()=>t().redoStack.length>0,executeUndo:()=>{let{undoStack:e,canUndo:l}=t();if(!l())return;let{slideIndex:a,type:r}=e[e.length-1];if("slide"===r){let e=document.getElementById("slide-item-".concat(a));e&&e.scrollIntoView({behavior:"smooth",block:"center"})}window.dispatchEvent(new CustomEvent("global-undo"))},executeRedo:()=>{let{redoStack:e,canRedo:l}=t();if(!l())return;let{slideIndex:a,type:r}=e[e.length-1];if("slide"===r){let e=document.getElementById("slide-item-".concat(a));e&&e.scrollIntoView({behavior:"smooth",block:"center"})}window.dispatchEvent(new CustomEvent("global-redo"))},saveSnapshotForOperation:(e,l,a,i)=>{if(!a||void 0===e)return;let s=(0,r.f)(a),{undoStack:n}=t(),o=n[n.length-1];if((null==o?void 0:o.html)===s)return;let d={html:s,slideIndex:e,timestamp:Date.now(),operation:l,type:i||(0===e?"webpage":"slide")},{pushUndo:c,clearRedo:u}=t();c(d),u()}}));t.Z=i},68782:function(e,t,l){"use strict";l.d(t,{f:function(){return a}});let a=e=>{if(!e)return"";try{var t,l;let a=e.cloneNode(!0);if(!a)return"";let r=a.querySelectorAll(".felo--element__hover, .felo--element__focused, .felo--replace__icon");null==r||r.forEach(e=>{e.classList.remove("felo--element__hover","felo--element__focused","felo--replace__icon")});let i=null===(t=e.defaultView)||void 0===t?void 0:t.echarts;i&&a.querySelectorAll("[_echarts_instance_]").forEach(e=>{let t=e.getAttribute("_echarts_instance_");if(t){let l=i.getInstanceById(t);if(l){let t=l.getOption();e.dataset.chartOption=JSON.stringify(t)}}});let s=null===(l=a.documentElement)||void 0===l?void 0:l.outerHTML;if(!s)return"";let n=s.replace(/\\x3C/g,"<");return n=n.replace(/<body[^>]*data-bind="true"[^>]*>/g,e=>e.replace('data-bind="true"','data-bind="false"')).replace(/<body[^>]*contenteditable="true"[^>]*>/g,e=>e.replace('contenteditable="true"','contenteditable="false"')).replace(/<html[^>]*class="[^"]*h-full[^"]*"[^>]*>/g,e=>e.replace(/\s*class="([^"]*)\s*h-full\s*([^"]*)"/g,(e,t,l)=>{let a="".concat(t).concat(l).trim().replace(/\s+/g," ");return a?' class="'.concat(a,'"'):""})).replace(/<style[^>]*data-rc-order="prependQueue"[^>]*>[\s\S]*?<\/style>/gi,"").replace(/<style>[\s\S]*?<\/style>/g,e=>e.includes("tailwindcss.com")?"":e).replace(/<style[^>]*id="felo-editable-style"[^>]*>[\s\S]*?<\/style>/gi,"").replace(/<script[^>]*src="[^"]*static\.cloudflareinsights\.com\/beacon\.min\.js[^"]*"[^>]*>[\s\S]*?<\/script>/gi,"").replace(/<link[^>]*href="chrome-extension:\/\/[^"]*"[^>]*>/gi,"").replace(/<script[^>]*src="chrome-extension:\/\/[^"]*"[^>]*>/gi,"").replace(/<main[^>]*class="[^"]*slide--main[^"]*"[^>]*style="[^"]*"[^>]*>/g,e=>e.replace(/\s*style="[^"]*"/g,"")).replace(/<main[^>]*class="[^"]*slide--main[^"]*"[^>]*>([\s\S]*?)<\/main>/gi,(e,t)=>{let l=t.replace(/<([^>]+)\s+style="([^"]*)"([^>]*)>/gi,(e,t,l,a)=>{let r=l.replace(/\s*line-height\s*:\s*[^;]+;?/gi,"").replace(/\s*font-size\s*:\s*[^;]+;?/gi,"").replace(/;\s*;/g,";").replace(/^\s*;\s*/,"").replace(/\s*;\s*$/,"").trim();return r?"<".concat(t,' style="').concat(r,'"').concat(a,">"):"<".concat(t).concat(a,">")});return e.replace(t,l)}),"<!DOCTYPE html>".concat(n)}catch(e){return console.error("Error in getLatestHtml:",e),""}}},74909:function(e){e.exports={container:"replace-react-crop_container__F_IEi"}}}]);