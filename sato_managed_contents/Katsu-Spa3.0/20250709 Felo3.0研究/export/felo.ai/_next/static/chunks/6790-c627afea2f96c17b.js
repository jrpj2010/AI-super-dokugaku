"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6790],{26449:function(e,t,s){s.d(t,{Z:function(){return k}});var a=s(52676),r=s(43378),n=s(7717),c=s(36551),o=s(29764),i=s(94247),l=s(28946),d=s(29197),u=s(67241),h=s(9455),m=s(95611),p=s(1937),f=s(25010),g=s(1167),x=s(75271),y=s(9369),j=s(17436),_=s(72696),v=e=>{let{selectItem:t,selectTopicClick:s,setIsSelf:r}=e,c=(0,n.useTranslations)(),{list:o}=(0,j.Z)(),i=(0,x.useMemo)(()=>{var e;if((null===(e=t.source_info)||void 0===e?void 0:e.is_self)===!1)return r(!1),t.source_info.name;r(!0);let s=o.find(e=>e.short_id===t.source_id);return(null==s?void 0:s.name)||""},[t]);return(0,a.jsxs)(_.h_,{children:[(0,a.jsx)(_.$F,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between w-full px-2 py-1  bg-white border border-gray-300 rounded-md shadow-sm cursor-pointer  hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2  focus:ring-indigo-500 dark:bg-[#202531] dark:border-[#545D6F]  dark:hover:bg-gray-700",children:[(0,a.jsx)("span",{className:"ml-2 mr-4 whitespace-nowrap",children:i||c("agent.please_select")}),(0,a.jsx)(y.Z,{size:20})]})}),(0,a.jsx)(_.AW,{"aria-label":"topic Changed",className:"p-2 overflow-auto rounded-lg dark:bg-[#454E5D] dark:border-[#2E3643]",style:{position:"relative",pointerEvents:"auto"},children:o.map(e=>(0,a.jsx)(_.Xi,{className:"text-[#1D3C6D] cursor-pointer hover:!bg-blue-100 hover:!text-[#1D3C6D] dark:text-[#EDF3FC] hover:dark:!bg-[#2E3643] hover:dark:!text-[#EDF3FC]",onClick:()=>{s(e)},children:e.name},e.short_id))})]})},w=s(84781),b=s(17112),k=e=>{let{item:t,onChange:s,index:y,children:_}=e,k=(0,n.useTranslations)(),[E,N]=(0,x.useState)(t),{isOpen:C,onOpen:T,onClose:z}=(0,h.q)(),[F,Z]=(0,x.useState)(!1),{getList:J,inited:S,list:D}=(0,j.Z)();(0,x.useEffect)(()=>{!S&&C&&J()},[S,C]);let P=[{value:c.gl,title:k("extension.all"),desc:k("extension.all_desc"),icon:(0,a.jsx)(o.Z,{size:16}),selected:!1},{value:c.Kp,title:k("extension.academic"),desc:k("extension.academic_desc"),icon:(0,a.jsx)(u.Od,{className:"w-4 h-4"}),selected:!1},{value:c.pN,title:k("extension.social"),desc:k("extension.social_desc"),icon:(0,a.jsx)(i.Z,{size:16}),selected:!1},{value:c.aI,title:k("extension.chat"),desc:k("agent.llm_use_last_answer"),icon:(0,a.jsx)(l.Z,{size:16}),selected:!1},{value:c.RQ,title:k("topics"),desc:k("agent.topics_desc"),icon:(0,a.jsx)(w.HV,{className:"w-4 h-4"}),selected:!1}];(0,x.useEffect)(()=>{N(t)},[t]);let A=e=>{N({...E,source_type:c.RQ,source_id:e.short_id,source_info:{name:e.name,is_self:!0}})},X=()=>{N({title:E.title,source_type:c.gl,source_id:""}),Z(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.pn,{delayDuration:100,children:(0,a.jsxs)(g.u,{children:[(0,a.jsx)(g.aJ,{asChild:!0,children:_?x.cloneElement(_,{onClick:e=>{var t,s;null===(s=_.props)||void 0===s||null===(t=s.onClick)||void 0===t||t.call(s,e),T()}}):(0,a.jsx)(f.z,{size:"sm",variant:"ghost",onClick:T,className:"text-gray-500 dark:bg-[#202531] p-2 bg-[#FFFFFF] dark:text-white hover:bg-gray-50",children:(()=>{let e=P.find(e=>e.value===t.source_type);return e?e.icon:(0,a.jsx)(o.Z,{size:16})})()})}),(0,a.jsx)(g._v,{children:k("agent.select_search_type")})]})}),(0,a.jsx)(r.Vq,{open:C,onOpenChange:z,children:(0,a.jsxs)(r.cZ,{className:"max-w-2xl w-full max-h-full dark:bg-[#454E5D]",children:[(0,a.jsx)(r.fK,{children:(0,a.jsx)(r.$N,{children:k("agent.select_search_type_title")})}),(0,a.jsx)(r.a7,{className:"pt-0",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(m.X,{label:k("agent.select_search_type_desc"),value:E.source_type||c.gl,classNames:{label:"dark:text-[#F3F5F7] text-sm"},onValueChange:e=>{N({...E,source_type:e})},children:(0,a.jsx)("div",{className:"border border-[#EBEEF3] dark:border-[#202531] rounded-md mt-1",children:P.map((e,t)=>(0,a.jsx)("div",{className:"flex items-center p-3 gap-2 w-full",children:(0,a.jsx)(p.J,{value:e.value,size:"sm",className:"w-full",isDisabled:e.value===c.RQ&&0===D.length&&!E.source_id,classNames:{labelWrapper:"w-full max-w-full",base:"w-full max-w-full ",label:"m-0",wrapper:"dark:bg-[#353B46] dark:border-[#353B46]"},children:(0,a.jsxs)("div",{className:"flex items-center gap-2 ml-1",children:[(0,a.jsx)("div",{className:"text-sm whitespace-nowrap mr-1",children:e.title}),(0,a.jsx)("div",{className:"text-xs text-gray-500 dark:text-[#D0D4DC] whitespace-nowrap",children:e.desc}),"topic"===e.value&&(0,a.jsxs)("div",{className:"ml-auto flex items-center",children:[(0,a.jsx)(v,{selectItem:E,selectTopicClick:A,setIsSelf:Z}),!F&&(0,a.jsx)(f.z,{className:"p-1 h-auto ml-2",onClick:X,size:"sm",children:k("agent.reset")})]})]})})},t))})}),!F&&(0,a.jsxs)("div",{className:"text-xs text-[#f59a23] flex items-center gap-2",children:[(0,a.jsx)(d.Z,{size:16}),k("agent.reset_tip")]})]})}),(0,a.jsxs)(r.cN,{children:[(0,a.jsx)(f.z,{variant:"outline",className:"border-[#0080FF] dark:border-[#0694FF] text-[#0080FF] dark:text-[#0694FF] hover:text-[#0080FF] bg-transparent hover:bg-transparent",onClick:()=>{z(),N(t)},children:k("cancel")}),(0,a.jsx)(f.z,{onClick:()=>{if(E.source_type===c.RQ&&!E.source_id){b.Z.error(k("agent.select_topic"));return}s(y,E),z()},color:"primary",children:k("confirm")})]})]})})]})}},25994:function(e,t,s){s.d(t,{$8:function(){return r},Kp:function(){return c},PN:function(){return n},o2:function(){return a}});let a=10,r="sys_translate_language",n="sys_target_language",c="sys_fixed_model"},87106:function(e,t,s){s.d(t,{Ef:function(){return x},GK:function(){return d},P:function(){return l},RV:function(){return p},VN:function(){return i},Vk:function(){return j},WN:function(){return _},YX:function(){return u},ZR:function(){return y},_Z:function(){return m},hX:function(){return h},hi:function(){return f},qP:function(){return g}});var a=s(27976),r=s(52166),n=s(65819),c=s(13263),o=s(5517);let i=async e=>{try{let t=(0,r.a1)(),s=await (0,o.Z)("".concat(a.XJ,"/threads/templates/").concat(e),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"".concat(t)}});if(!s.ok){let e=await s.json().catch(()=>({}));return{success:!1,error:e.message||"failed to get template",code:s.status,detail:e.detail}}let n=await s.json();return{success:!0,data:n}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to get template",code:500}}},l=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var t,s,n;let c=(0,r.a1)(),i=new URLSearchParams({system:(null===(t=e.system)||void 0===t||t).toString(),language:null!==(s=e.language)&&void 0!==s?s:"en",from_org:(null!==(n=null==e?void 0:e.from_org)&&void 0!==n&&n).toString()}),l=await (0,o.Z)("".concat(a.XJ,"/threads/templates?").concat(i),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"".concat(c)}});if(!l.ok){let e=await l.json().catch(()=>({}));return{success:!1,error:e.message||"failed to get templates",code:l.status}}let d=await l.json();return{success:!0,data:d}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to get templates",code:500}}},d=async(e,t)=>{try{let s=(0,r.a1)(),n=await (0,o.Z)("".concat(a.XJ,"/threads/templates/").concat(e,"/plan"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(s)},body:JSON.stringify(t)});if(!n.ok){let e=await n.json().catch(()=>({}));if(422===n.status)return{success:!1,error:e.message||"failed to validate params",code:n.status};return{success:!1,error:e.message||"failed to get template plan",code:n.status}}let c=await n.json();return{success:!0,data:c}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to get template plan",code:500}}},u=async e=>{try{let t=(0,r.a1)(),s=await (0,o.Z)("".concat(a.XJ,"/threads/templates"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(t)},body:JSON.stringify(e)});if(!s.ok){let e=await s.json().catch(()=>({}));if(422===s.status)return{success:!1,error:e.message||"failed to validate params",code:s.status};return{success:!1,error:e.message||"failed to create template",code:s.status}}let n=await s.json();return{success:!0,data:n}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to create template",code:500}}},h=async e=>{try{let t=(0,r.a1)(),s=await (0,o.Z)("".concat(a.XJ,"/threads/templates"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"".concat(t)},body:JSON.stringify({short_ids:e})});if(!s.ok){let e=await s.json().catch(()=>({}));if(422===s.status)return{success:!1,error:e.message||"failed to validate params",code:s.status};return{success:!1,error:e.message||"failed to delete templates",code:s.status}}return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to delete templates",code:500}}},m=async e=>{try{let t=(0,r.a1)(),{short_id:s,...n}=e,c=await (0,o.Z)("".concat(a.XJ,"/threads/templates/").concat(s),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"".concat(t)},body:JSON.stringify(n)});if(!c.ok){let e=await c.json().catch(()=>({}));if(422===c.status)return{success:!1,error:e.message||"failed to validate params",code:c.status};return{success:!1,error:e.message||"failed to update template",code:c.status}}let i=await c.json();return{success:!0,data:i}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to update template",code:500}}},p=async e=>{try{let t=(0,r.a1)(),s=await (0,o.Z)("".concat(a.XJ,"/threads/templates/generate"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(t)},body:JSON.stringify(e)});if(!s.ok){let e=await s.json().catch(()=>({}));if(422===s.status)return{success:!1,error:e.message||"failed to validate params",code:s.status};return{success:!1,error:e.message||"failed to generate template",code:s.status}}let n=await s.json();return{success:!0,data:n}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to generate template",code:500}}},f=async e=>{try{let t=(0,r.a1)(),s=await (0,o.Z)("".concat(a.XJ,"/threads/templates/").concat(e,"/resources?"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"".concat(t)}});if(!s.ok){let e=await s.json().catch(()=>({}));return{success:!1,error:e.message||"failed to get template topic",code:s.status}}let n=await s.json();return{success:!0,data:n}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to get templates",code:500}}},g=async e=>{var t,s,r;let i=(0,c.LP)();return(0,o.Z)("".concat(a.Ez,"/sharePermission/update"),{headers:{"Content-Type":"application/json",Authorization:"".concat(i)},body:JSON.stringify({business_id:e.agent_id,read_permission:e.read_permission,business_type:"AGENT",org_id:"PARTIAL_PUBLIC"===e.read_permission?null===(r=n.ZP.getState().userInfo)||void 0===r?void 0:null===(s=r.user_org_member)||void 0===s?void 0:null===(t=s.org)||void 0===t?void 0:t.org_id:null,access_emails:null==e?void 0:e.access_emails}),method:"POST"}).then(async e=>await e.json()).catch(e=>{console.log("\uD83D\uDE80 ~ error:",e)})},x=async e=>{let{topic_short_id:t}=e,s=(0,c.LP)();return(0,o.Z)("".concat(a.XJ,"/threads/templates/").concat(t,"/org_shares"),{headers:{"Content-Type":"application/json",Authorization:"".concat(s)},method:"POST"}).then(async e=>!![200,204].includes(e.status)).catch(()=>!1)},y=async e=>{let{topic_short_id:t}=e,s=(0,c.LP)();return(0,o.Z)("".concat(a.XJ,"/threads/templates/").concat(t,"/org_shares"),{headers:{"Content-Type":"application/json",Authorization:"".concat(s)},method:"DELETE"}).then(async e=>!![200,204].includes(e.status)).catch(()=>!1)},j=async(e,t)=>{try{let s=(0,r.a1)(),n=await (0,o.Z)("".concat(a.XJ,"/threads/templates/render_info?lang=").concat(e,"&code=").concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"".concat(s)}});if(!n.ok)return{success:!1,code:500};let c=await n.json();return{success:!0,data:c}}catch(e){return{success:!1,code:500}}},_=async(e,t)=>{try{let s=(0,r.a1)(),n=await (0,o.Z)("".concat(a.XJ,"/threads/templates/").concat(e,"/save_user_tool_selections"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(s)},body:JSON.stringify({tools:t})});if(!n.ok){let e=await n.json().catch(()=>({}));return{success:!1,error:e.message||"failed to save tool selections",code:n.status,detail:e.detail}}return{success:!0,data:void 0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to save tool selections",code:500}}}}}]);