(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[463],{27185:function(e,t,r){var s=r(14224);function n(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==s&&"env"in s&&(e=s.env.DEBUG),e}(t=e.exports=r(97991)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),r){var s="color: "+this.color;e.splice(1,0,s,"color: inherit");var n=0,a=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(a=n))}),e.splice(a,0,s)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=n,t.useColors=function(){return"undefined"!=typeof window&&!!window.process&&"renderer"===window.process.type||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(n())},97991:function(e,t,r){var s;function n(e){function r(){if(r.enabled){var e=+new Date,n=e-(s||e);r.diff=n,r.prev=s,r.curr=e,s=e;for(var a=Array(arguments.length),i=0;i<a.length;i++)a[i]=arguments[i];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var l=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(e,s){if("%%"===e)return e;l++;var n=t.formatters[s];if("function"==typeof n){var i=a[l];e=n.call(r,i),a.splice(l,1),l--}return e}),t.formatArgs.call(r,a),(r.log||t.log||console.log.bind(console)).apply(r,a)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var r,s=0;for(r in e)s=(s<<5)-s+e.charCodeAt(r)|0;return t.colors[Math.abs(s)%t.colors.length]}(e),"function"==typeof t.init&&t.init(r),r}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),s=r.length,n=0;n<s;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(RegExp("^"+e.substr(1)+"$")):t.names.push(RegExp("^"+e+"$")))},t.enabled=function(e){var r,s;for(r=0,s=t.skips.length;r<s;r++)if(t.skips[r].test(e))return!1;for(r=0,s=t.names.length;r<s;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(9065),t.names=[],t.skips=[],t.formatters={}},3341:function(e){"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;if(Array.isArray(t)){if((s=t.length)!=r.length)return!1;for(n=s;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((s=(a=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(n=s;0!=n--;)if(!Object.prototype.hasOwnProperty.call(r,a[n]))return!1;for(n=s;0!=n--;){var s,n,a,i=a[n];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r}},52596:function(e,t,r){"use strict";function s(e){return[].concat(e)}function n(e){return e.startsWith(":")}function a(e){return o(e)&&("*"===e||e.length>1&&":>~.+*".includes(e.slice(0,1))||d(e))}function i(e,t){return(o(t)||"number"==typeof t)&&"--"!==e&&!n(e)&&!l(e)}function l(e){return e.startsWith("@media")}function o(e){return e+""===e}function d(e){return o(e)&&(e.startsWith("&")||n(e))}function c(e,t=""){return e.filter(Boolean).join(t)}function u(e,t){let r=0;if(0===t.length)return r.toString();for(let e=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e),r&=r;return`${e??"cl"}_${r.toString(36)}`}r.d(t,{S:function(){return x},cx:function(){return function e(...t){return c(t.reduce((t,r)=>(r instanceof Set?t.push(...r):"string"==typeof r?t.push(r):Array.isArray(r)?t.push(e(...r)):"object"==typeof r&&Object.entries(r).forEach(([e,r])=>{r&&t.push(e)}),t),[])," ").trim()}}});var p=class e{constructor(e,t,r,s){this.sheet=e,this.property=t,this.value=r,this.selector=s,this.property=t,this.value=r,this.joined=`${t}:${r}`;let n=this.selector.preconditions.concat(this.selector.postconditions);this.hash=this.selector.hasConditions?this.selector.scopeClassName:u(this.sheet.name,this.joined),this.key=c([this.joined,n,this.hash])}toString(){let t=h(this.selector.preconditions,{right:this.hash});return t=h(this.selector.postconditions,{left:t}),`${t} {${e.genRule(this.property,this.value)}}`}static genRule(e,t){var r,s;return r=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),s="content"===e?`"${t}"`:t,`${r}:${s};`}};function h(e,{left:t="",right:r=""}={}){let s=e.reduce((e,t)=>n(t)?e+t:d(t)?e+t.slice(1):c([e,t]," "),t);return c([s,r?`.${r}`:""]," ")}var m=class e{constructor(e,t=null,{preconditions:r,postconditions:n}={}){this.sheet=e,this.preconditions=[],this.scopeClassName=null,this.scopeName=null,this.postconditions=[],this.preconditions=r?s(r):[],this.postconditions=n?s(n):[],this.setScope(t)}setScope(e){return e&&(this.scopeClassName||(this.scopeName=e,this.scopeClassName=u(this.sheet.name,e+this.sheet.count))),this}get hasConditions(){return this.preconditions.length>0||this.postconditions.length>0}addScope(t){return new e(this.sheet,t,{preconditions:this.preconditions,postconditions:this.postconditions})}addPrecondition(t){return new e(this.sheet,this.scopeClassName,{postconditions:this.postconditions,preconditions:this.preconditions.concat(t)})}addPostcondition(t){return new e(this.sheet,this.scopeClassName,{preconditions:this.preconditions,postconditions:this.postconditions.concat(t)})}createRule(e,t){return new p(this.sheet,e,t,this)}},f=class{constructor(e,t){this.name=e,this.rootNode=t,this.storedStyles={},this.storedClasses={},this.style="",this.count=0,this.id=`flairup-${e}`,this.styleTag=this.createStyleTag()}getStyle(){return this.style}append(e){var t;this.style=(t=this.style)?`${t}
${e}`:e}apply(){this.count++,this.styleTag&&(this.styleTag.innerHTML=this.style)}isApplied(){return!!this.styleTag}createStyleTag(){if("undefined"==typeof document||this.isApplied()||null===this.rootNode)return this.styleTag;let e=document.createElement("style");return e.type="text/css",e.id=this.id,(this.rootNode??document.head).appendChild(e),e}addRule(e){let t=this.storedClasses[e.key];return o(t)?t:(this.storedClasses[e.key]=e.hash,this.storedStyles[e.hash]=[e.property,e.value],this.append(e.toString()),e.hash)}};function v(e,t){for(let r in e)t(r.trim(),e[r])}function x(e,t){let r=new f(e,t);return{create:function(e){let t={};return(function e(t,r,s){let n=[];return v(r,(i,l)=>{if(a(i))return e(t,l,s.addPrecondition(i)).forEach(e=>n.push(e));n.push([i,r[i],s.addScope(i)])}),n})(r,e,new m(r)).forEach(([e,n,o])=>{(function e(t,r,n){let o=new Set;return v(r,(r,d)=>{let c=[];if(a(r))c=e(t,d,n.addPostcondition(r));else if("."===r)c=s(d);else if(l(r))c=function(t,r,s,n){t.append(s+" {");let a=e(t,r,n);return t.append("}"),a}(t,d,r,n);else if("--"===r)c=function(t,r,s){let n=new Set,a=[];if(v(r,(r,l)=>{if(i(r,l)){a.push(p.genRule(r,l));return}g(e(t,l??{},s),n)}),!s.scopeClassName)return n;if(a.length){let e=a.join(" ");t.append(`${h(s.preconditions,{right:s.scopeClassName})} {${e}}`)}return n.add(s.scopeClassName),n}(t,d,n);else if(i(r,d)){let e=n.createRule(r,d);t.addRule(e),o.add(e.hash)}return g(c,o)}),o})(r,n,o).forEach(r=>{t[e]=t[e]??new Set,t[e].add(r)})}),r.apply(),t},getStyle:r.getStyle.bind(r),isApplied:r.isApplied.bind(r)}}function g(e,t){return e.forEach(e=>t.add(e)),t}},27499:function(e){function t(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(Error("Failed to load "+this.src),e)}}e.exports=function(e,r,s){var n=document.head||document.getElementsByTagName("head")[0],a=document.createElement("script");"function"==typeof r&&(s=r,r={}),r=r||{},s=s||function(){},a.type=r.type||"text/javascript",a.charset=r.charset||"utf8",a.async=!("async"in r)||!!r.async,a.src=e,r.attrs&&function(e,t){for(var r in t)e.setAttribute(r,t[r])}(a,r.attrs),r.text&&(a.text=""+r.text),("onload"in a?t:function(e,t){e.onreadystatechange=function(){("complete"==this.readyState||"loaded"==this.readyState)&&(this.onreadystatechange=null,t(null,e))}})(a,s),a.onload||t(a,s),n.appendChild(a)}},9065:function(e){function t(e,t,r){return e<t?void 0:e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,r){r=r||{};var s=typeof e;if("string"===s&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"days":case"day":case"d":return 864e5*r;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*r;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*r;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(e);if("number"===s&&!1===isNaN(e))return r.long?t(e,864e5,"day")||t(e,36e5,"hour")||t(e,6e4,"minute")||t(e,1e3,"second")||e+" ms":e>=864e5?Math.round(e/864e5)+"d":e>=36e5?Math.round(e/36e5)+"h":e>=6e4?Math.round(e/6e4)+"m":e>=1e3?Math.round(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},17948:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search/[rid]",function(){return r(67751)}])},73423:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(41650).Z)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},8904:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(41650).Z)("bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]])},12387:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(41650).Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},68644:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(41650).Z)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},36336:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(41650).Z)("file-pen-line",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]])},8289:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(41650).Z)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]])},68681:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(41650).Z)("message-circle-plus",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},58014:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(41650).Z)("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]])},46046:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(41650).Z)("sparkle",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}]])},97382:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(41650).Z)("thumbs-down",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]])},62167:function(e,t,r){"use strict";var s=r(52676),n=r(72696),a=r(7717),i=r(67241),l=r(97247),o=r(25010),d=r(44342);t.Z=e=>{let{className:t,hideIcon:r}=e,c=(0,a.useTranslations)(),{isMobile:u,userAgent:p}=(0,d.b)(),h=r?null:(0,l.s)(p)?(0,s.jsx)(i.nz,{className:"h-6 w-6"}):(0,s.jsx)(i.Ir,{className:"h-6 w-6"}),m=e=>{"ios"===e?window.open("https://apps.apple.com/us/app/felo-search-the-world/id6598782546"):window.open("https://play.google.com/store/apps/details?id=ai.felo.search")};return u&&!(0,l.Eg)()?(0,s.jsxs)(o.z,{className:t,onClick:()=>{(0,l.s)()?window.open("https://apps.apple.com/us/app/felo-search-the-world/id6598782546"):window.open("https://play.google.com/store/apps/details?id=ai.felo.search")},children:[h,c("get_app")]}):(0,l.Eg)()?null:(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)(n.h_,{children:[(0,s.jsx)(n.$F,{asChild:!0,children:(0,s.jsxs)(o.z,{variant:u?"ghost":"secondary-primary",className:"rounded-lg",children:[(0,s.jsx)(i.bA,{}),c("get_app")]})}),(0,s.jsxs)(n.AW,{children:[(0,s.jsxs)(n.Xi,{onClick:()=>m("ios"),className:"text-[#1D3C6D] hover:!bg-blue-100 hover:!text-[#1D3C6D] dark:text-[#EDF3FC] hover:dark:!bg-[#2E3643] hover:dark:!text-[#EDF3FC]",children:[(0,s.jsx)(i.nz,{className:"mr-2 h-6 w-6"}),c("download.ios_app")]}),(0,s.jsxs)(n.Xi,{onClick:()=>m("android"),className:"text-[#1D3C6D] hover:!bg-blue-100 hover:!text-[#1D3C6D] dark:text-[#EDF3FC] hover:dark:!bg-[#2E3643] hover:dark:!text-[#EDF3FC]",children:[(0,s.jsx)(i.Ir,{className:"mr-2 h-6 w-6"}),c("download.android_app")]})]})]})})}},55039:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return a}});var s=r(52676);r(75271);var n=r(23083);function a(e){var t,r,a,i,l,o;let{messageId:d,content:c,query:u,index:p,showDispose:h=!0}=e,{mindmapList:m}=(0,n.Z)(),f=m.find(e=>e.message_id===d),v=(null==f?void 0:null===(a=f.images)||void 0===a?void 0:null===(r=a.covers)||void 0===r?void 0:null===(t=r.find(e=>"svg"===e.type))||void 0===t?void 0:t.path)||(null==f?void 0:null===(o=f.images)||void 0===o?void 0:null===(l=o.covers)||void 0===l?void 0:null===(i=l.find(e=>"png"===e.type))||void 0===i?void 0:i.path)||"";return v?(0,s.jsx)("img",{src:v,className:"w-full h-auto",alt:""}):(0,s.jsx)(s.Fragment,{})}},72153:function(e,t,r){"use strict";var s=r(52676),n=r(75271),a=r(48958),i=r(26595),l=r(38793),o=r(57207),d=r(43378),c=r(12266),u=r(53986),p=r(15699),h=r(7717),m=r(17436),f=r(31063),v=r(89335),x=r(60161),g=r(59167),b=r(97571),y=r(65819),w=r(4814);t.Z=e=>{var t,r,j;let{mode:C="create",topic:_,isOpen:k,parentPage:N,onClose:E,onCreateSuccess:S,onEditSuccess:T}=e,F=(0,h.useTranslations)(),{isDark:L}=(0,b.Z)(),{getList:M}=(0,m.Z)(),A=(0,y.gQ)(),P=(0,y.c0)(),Z=(0,y.ZP)(e=>e.userInfo),[I,D]=(0,n.useState)(""),[R,z]=(0,n.useState)(""),[O,B]=(0,n.useState)(""),[q,H]=(0,n.useState)(""),[V,U]=(0,n.useState)(!1),[W,G]=(0,n.useState)(null),[$,Y]=(0,n.useState)(!1),[X,J]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if("edit"===C&&_){var e;D(_.name),B(_.description||""),H(_.instruction||""),z(_.icon||""),Y(!!(null==_?void 0:null===(e=_.org_sharing)||void 0===e?void 0:e.org_id))}},[C,_]);let K=(0,n.useMemo)(()=>{var e,t,r;return P&&(null==Z?void 0:null===(r=Z.user_org_member)||void 0===r?void 0:null===(t=r.org_settings)||void 0===t?void 0:null===(e=t.share_permission_config)||void 0===e?void 0:e.space_content_add_role.includes(P))},[P,null==Z?void 0:null===(j=Z.user_org_member)||void 0===j?void 0:null===(r=j.org_settings)||void 0===r?void 0:null===(t=r.share_permission_config)||void 0===t?void 0:t.space_content_add_role]),Q=async()=>{if(!I.trim()){G(F("topic.title_empty"));return}U(!0),G(null);let e={topicId:"",name:I.trim(),description:O.trim(),instruction:q.trim(),icon:R,isSharedEnterprise:$};try{let s;if("create"===C)s=await (0,v.HV)(e),$&&(null==s?void 0:s.short_id)&&await (0,v.hS)({topic_short_id:null==s?void 0:s.short_id});else{var t,r;e.topicId=_.short_id||"",(s=await (0,v.Cn)(e)).isMove=!1,(null==e?void 0:e.isSharedEnterprise)?(null==_?void 0:null===(t=_.org_sharing)||void 0===t?void 0:t.org_id)||(await (0,v.hS)({topic_short_id:null==e?void 0:e.topicId}),s&&(s.org_sharing={org_id:"x"},s.isMove=!0)):(null==_?void 0:null===(r=_.org_sharing)||void 0===r?void 0:r.org_id)&&(await (0,v.au)({topic_short_id:null==e?void 0:e.topicId}),delete s.org_sharing,s.isMove=!0)}s?("create"===C?(null==S||S(s),D(""),B(""),H("")):null==T||T(s),E()):G(F("create"===C?"topic.failed_create":"topic.failed_update"))}catch(e){G(F("topic.error_theme"))}finally{U(!1),(0,f.fk)("create"===C?x.U.COLLECTION_CREATE:x.U.COLLECTION_UPDATE,e,!0)}};return(0,s.jsx)(d.Vq,{open:k,onOpenChange:E,children:(0,s.jsxs)(d.cZ,{className:"dark:bg-[#454E5D]","aria-describedby":void 0,children:[(0,s.jsx)(d.fK,{children:(0,s.jsx)(d.$N,{children:"create"===C?F("topic.create_theme"):F("topic.edit_theme")})}),(0,s.jsxs)(d.a7,{children:[(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(a.Y,{label:F("topic.title"),labelPlacement:"outside",placeholder:F("topic.title_placeholder"),value:I,onChange:e=>D(e.target.value),maxLength:50,isInvalid:!!W,errorMessage:W,endContent:(0,s.jsxs)("p",{className:"text-sm text-default-400",children:[null==I?void 0:I.length,"/50"]})}),(0,s.jsxs)("div",{className:"flex-none flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"text-xs",htmlFor:"emoji",children:F("topic.emoji")}),(0,s.jsxs)(o.J2,{modal:!0,open:X,onOpenChange:J,children:[(0,s.jsx)(o.xo,{asChild:!0,children:(0,s.jsx)(i.A,{className:"border-dotted border-2 border-default-200",variant:"light",radius:"full",isIconOnly:!0,children:R?(0,s.jsx)("span",{className:"text-2xl",children:R}):(0,s.jsx)(g.Z,{size:16})})}),(0,s.jsx)(o.yk,{onOpenAutoFocus:e=>e.preventDefault(),align:"end",className:"p-0 w-[350px] box-content dark:bg-[#454E5D]",children:(0,s.jsx)(c.ZP,{className:"!border-none",theme:L?c.Q2.DARK:c.Q2.LIGHT,emojiStyle:c.Ye.NATIVE,onEmojiClick:(e,t)=>{z(e.emoji),J(!1)},searchPlaceholder:F("emoji.searchPlaceholder"),categories:[{name:F("emoji.categories.suggested"),category:c.Rj.SUGGESTED},{name:F("emoji.categories.custom"),category:c.Rj.CUSTOM},{name:F("emoji.categories.smileys"),category:c.Rj.SMILEYS_PEOPLE},{name:F("emoji.categories.animals"),category:c.Rj.ANIMALS_NATURE},{name:F("emoji.categories.foods"),category:c.Rj.FOOD_DRINK},{name:F("emoji.categories.travel"),category:c.Rj.TRAVEL_PLACES},{name:F("emoji.categories.activities"),category:c.Rj.ACTIVITIES},{name:F("emoji.categories.objects"),category:c.Rj.OBJECTS},{name:F("emoji.categories.symbols"),category:c.Rj.SYMBOLS},{name:F("emoji.categories.flags"),category:c.Rj.FLAGS}]})})]})]})]}),(0,s.jsx)(l.Y,{label:F("topic.description"),labelPlacement:"outside",value:O,placeholder:F("topic.description_placeholder"),onChange:e=>B(e.target.value),className:"mt-4",maxLength:100}),(0,s.jsx)(l.Y,{label:(0,s.jsxs)("div",{className:"flex flex-col gap-1 mb-1",children:[(0,s.jsx)("p",{children:F("topic.custom_prompt")}),(0,s.jsx)("p",{className:"text-sm text-default-400 dark:text-[#B9BFCA]",children:F("topic.custom_prompt_desc")})]}),labelPlacement:"outside",value:q,placeholder:F("topic.custom_prompt_placeholder"),onChange:e=>H(e.target.value),className:"mt-4",maxLength:4e3})]}),(0,s.jsxs)(d.cN,{className:"flex-col md:flex-row justify-between md:justify-between sm:justify-between items-center pt-2",children:[A?(0,s.jsx)(p.E,{value:$?"saveToEnterprise":"",className:(0,w.Z)("mb-2 md:mb-0 ",K?"":"pointer-events-none opacity-45"),children:(0,s.jsxs)("div",{className:"flex items-center space-x-1 cursor-pointer",onClick:e=>{e.preventDefault(),e.stopPropagation(),Y(!$)},children:[(0,s.jsx)(p.m,{value:"saveToEnterprise",id:"saveToEnterprise",className:"border-gray-300",disabled:!K}),(0,s.jsx)(u._,{htmlFor:"saveToEnterprise",className:"cursor-pointer font-normal",children:F("topic.save_to_enterprise_share")})]})}):null,(0,s.jsx)(i.A,{color:"primary",onPress:Q,className:"ml-auto",isLoading:V,isDisabled:V||!(null==I?void 0:I.trim()),children:V?F("create"===C?"topic.creating":"topic.updating"):F("create"===C?"topic.create":"confirm")})]})]})})}},69047:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},Zb:function(){return i},aY:function(){return d},ll:function(){return o}});var s=r(52676),n=r(75271),a=r(37481);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});i.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});l.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});o.displayName="CardTitle",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})}).displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});d.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},53785:function(e,t,r){"use strict";r.d(t,{zF:function(){return k},Fw:function(){return E},wy:function(){return N}});var s=r(75271),n=r(95061),a=r(42478),i=r(30710),l=r(929),o=r(62271),d=r(91714),c=r(81100),u=r(8921),p=r(52676),h="Collapsible",[m,f]=(0,a.b)(h),[v,x]=m(h),g=s.forwardRef((e,t)=>{let{__scopeCollapsible:r,open:n,defaultOpen:a,disabled:l,onOpenChange:o,...c}=e,[h=!1,m]=(0,i.T)({prop:n,defaultProp:a,onChange:o});return(0,p.jsx)(v,{scope:r,disabled:l,contentId:(0,u.M)(),open:h,onOpenToggle:s.useCallback(()=>m(e=>!e),[m]),children:(0,p.jsx)(d.WV.div,{"data-state":_(h),"data-disabled":l?"":void 0,...c,ref:t})})});g.displayName=h;var b="CollapsibleTrigger",y=s.forwardRef((e,t)=>{let{__scopeCollapsible:r,...s}=e,a=x(b,r);return(0,p.jsx)(d.WV.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":_(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...s,ref:t,onClick:(0,n.M)(e.onClick,a.onOpenToggle)})});y.displayName=b;var w="CollapsibleContent",j=s.forwardRef((e,t)=>{let{forceMount:r,...s}=e,n=x(w,e.__scopeCollapsible);return(0,p.jsx)(c.z,{present:r||n.open,children:({present:e})=>(0,p.jsx)(C,{...s,ref:t,present:e})})});j.displayName=w;var C=s.forwardRef((e,t)=>{let{__scopeCollapsible:r,present:n,children:a,...i}=e,c=x(w,r),[u,h]=s.useState(n),m=s.useRef(null),f=(0,o.e)(t,m),v=s.useRef(0),g=v.current,b=s.useRef(0),y=b.current,j=c.open||u,C=s.useRef(j),k=s.useRef();return s.useEffect(()=>{let e=requestAnimationFrame(()=>C.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,l.b)(()=>{let e=m.current;if(e){k.current=k.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let t=e.getBoundingClientRect();v.current=t.height,b.current=t.width,C.current||(e.style.transitionDuration=k.current.transitionDuration,e.style.animationName=k.current.animationName),h(n)}},[c.open,n]),(0,p.jsx)(d.WV.div,{"data-state":_(c.open),"data-disabled":c.disabled?"":void 0,id:c.contentId,hidden:!j,...i,ref:f,style:{"--radix-collapsible-content-height":g?`${g}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...e.style},children:j&&a})});function _(e){return e?"open":"closed"}let k=g,N=y,E=j},53986:function(e,t,r){"use strict";r.d(t,{_:function(){return d}});var s=r(52676),n=r(75271),a=r(20280),i=r(2808),l=r(37481);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.f,{ref:t,className:(0,l.cn)(o(),r),...n})});d.displayName=a.f.displayName},542:function(e,t,r){"use strict";r.d(t,{E:function(){return l}});var s=r(52676),n=r(75271),a=r(79852),i=r(37481);let l=n.forwardRef((e,t)=>{let{className:r,value:n,indicatorClassName:l,...o}=e;return(0,s.jsx)(a.fC,{ref:t,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary","dark:bg-slate-400",r),...o,children:(0,s.jsx)(a.z$,{className:(0,i.cn)("bg-primary h-full w-full flex-1 transition-all",l),style:{transform:"translateX(-".concat(100-(n||0),"%)")}})})});l.displayName=a.fC.displayName},15699:function(e,t,r){"use strict";r.d(t,{E:function(){return o},m:function(){return d}});var s=r(52676),n=r(75271),a=r(82788),i=r(68752),l=r(37481);let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.fC,{className:(0,l.cn)("grid gap-2",r),...n,ref:t})});o.displayName=a.fC.displayName;let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.ck,{ref:t,className:(0,l.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...n,children:(0,s.jsx)(a.z$,{className:"flex items-center justify-center",children:(0,s.jsx)(i.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})})});d.displayName=a.ck.displayName},25994:function(e,t,r){"use strict";r.d(t,{$8:function(){return n},Kp:function(){return i},PN:function(){return a},o2:function(){return s}});let s=10,n="sys_translate_language",a="sys_target_language",i="sys_fixed_model"},93635:function(e,t,r){"use strict";r.d(t,{G:function(){return n}});var s=r(75271);function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=(0,s.useRef)();(0,s.useEffect)(()=>{let s=e.current;if(!s)return;let n=()=>{s.classList.add("iframe-scrollbar--active"),clearTimeout(r.current),r.current=setTimeout(()=>{s.classList.remove("iframe-scrollbar--active")},t)};return s.addEventListener("scroll",n),()=>{s.removeEventListener("scroll",n),clearTimeout(r.current)}},[e,t])}},66302:function(e,t,r){"use strict";var s=r(75271);t.Z=()=>{let[e,t]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{t(!0)},[]),e}},59470:function(e,t,r){"use strict";var s=r(75271);t.Z=function(e){let t=(0,s.useRef)(e);return(0,s.useEffect)(()=>{t.current=e},[e]),t}},67751:function(e,t,r){"use strict";let s,n;r.r(t),r.d(t,{__N_SSP:function(){return uF},default:function(){return uL}});var a,i,l,o,d,c,u,p,h,m,f=r(52676),v=r(75271),x=r.t(v,2);r(85625);var g=r(7717),b=r(17224),y=r(27519),w=r(88708),j=r(88955),C=r(78017);class _{static initializeThreads(e,t){let{ssrShortId:r,thread_type:s,agentTemplate:n,agentParamsLanguage:a,isNewThread:i,documents:l}=t;return e.map(e=>{var t,o,d;return e._local_id||(e._local_id=(0,j.x0)()),r&&(e.short_id=r),s?e.thread_type=s:n&&(e.thread_type=y.yG),e.template&&(0,w.el)(e.template)&&(e.template.params=null===(t=e.template.params)||void 0===t?void 0:t.map(e=>(e.value||(e.value=a),e))),l&&i?e.documents=l:!i&&e.recall_contexts&&(e.documents=null!==(d=null===(o=e.recall_contexts)||void 0===o?void 0:o.map(e=>{var t;return null==e?void 0:null===(t=e.other_info)||void 0===t?void 0:t.file_id}).filter(Boolean))&&void 0!==d?d:[]),e})}static processThreadAuthor(e,t,r){return e&&e.length&&(t||r)||""}static isMyThread(e,t,r,s){return s?e===t:e===r}static shouldHideReply(e){return e.some(e=>e.hide_reply)}static isAlreadyRenderPptOutline(e){return e.some(e=>{var t;return null===(t=e.tools)||void 0===t?void 0:t.some(e=>e.name===C.fc)})}static isAlreadyRenderHtmlPage(e){return e.some(e=>{var t;return null===(t=e.tools)||void 0===t?void 0:t.some(e=>e.name===C.VR)})}static getQueryCategory(e,t,r,s,n){var a,i,l;return t.length>0?(null===(l=e[e.length-1])||void 0===l?void 0:l.category)||"google":("recommend"===r?(null===(a=e[0])||void 0===a?void 0:a.category)||"":s||(null===(i=e[0])||void 0===i?void 0:i.category)||n)||"google"}static createAutoReplyThread(e,t){return{_local_id:(0,j.x0)(),query:e,short_id:t||"",query_from:"followup"}}}var k=r(27585);class N{static generateOgUrl(e){let t=(0,k.lx)(e);return"".concat(t.origin).concat(t.pathname)}static generateMetaTitle(e,t){return e||t("page_title")}static generateMetaDescription(e,t){return(e||t("page_desc")).slice(0,160)}static shouldAutoScroll(e,t){if(1===e.length)return!1;let r=e[e.length-1];return(null==r||!r.id)&&(null==r?void 0:r.query_from)!=="agent"&&!(null==r?void 0:r.id)&&e.length>1}static scrollToNewThread(){setTimeout(()=>{let e=document.querySelectorAll(".thread-item");e.length>1&&window.requestAnimationFrame(()=>{e[e.length-1].scrollIntoView({behavior:"smooth"})})},100)}static generateRid(e){return e||this.nanoid()}static nanoid(){return Math.random().toString(36).substring(2,15)}static handleErrorRedirect(e,t,r,s){let n="";e instanceof Error&&(n=encodeURIComponent(e.message));let a=new URLSearchParams({error:n,url:"/".concat(t,"/search/").concat(r)});return"notAllowed"===e.message&&(a=new URLSearchParams({error:n,url:"/".concat(t,"/search/").concat(r),can_read:(null==s?void 0:s.can_read)||"",is_self:(null==s?void 0:s.is_self)||!1,org_name:(null==s?void 0:s.org_name)||"",read_permission:(null==s?void 0:s.read_permission)||"PRIVATE"})),{redirect:{destination:"notAllowed"===e.message?"/?".concat(a.toString()):"/".concat(t,"/404?").concat(a.toString()),permanent:!1}}}static processShareImage(e,t,r,s){var n,a,i,l,o,d,c;let u="";if("fulfilled"===e.status&&(u=e.value),s.showMindmap&&"string"==typeof s.showMindmap){let e=null==t?void 0:t.find(e=>e.message_id===s.showMindmap);(null==e?void 0:null===(l=e.images)||void 0===l?void 0:l.covers.length)&&(u=(null===(o=e.images.covers.find(e=>"png"===e.type))||void 0===o?void 0:o.path)||"")}else(null==r?void 0:null===(n=r.ppt)||void 0===n?void 0:n.cover_url)?u=null==r?void 0:null===(d=r.ppt)||void 0===d?void 0:d.cover_url:(null==t?void 0:null===(i=t[0])||void 0===i?void 0:null===(a=i.images)||void 0===a?void 0:a.covers.length)&&(u=(null==t?void 0:null===(c=t[0].images.covers.find(e=>"png"===e.type))||void 0===c?void 0:c.path)||"");return u}}let{createElement:E,createContext:S,createRef:T,forwardRef:F,useCallback:L,useContext:M,useEffect:A,useImperativeHandle:P,useLayoutEffect:Z,useMemo:I,useRef:D,useState:R}=x,z=x[`useId${Math.random()}`.slice(0,5)],O=S(null);O.displayName="PanelGroupContext";let B="function"==typeof z?z:()=>null,q=0;function H(e=null){let t=B(),r=D(e||t||null);return null===r.current&&(r.current=""+q++),null!=e?e:r.current}function V({children:e,className:t="",collapsedSize:r,collapsible:s,defaultSize:n,forwardedRef:a,id:i,maxSize:l,minSize:o,onCollapse:d,onExpand:c,onResize:u,order:p,style:h,tagName:m="div",...f}){let v=M(O);if(null===v)throw Error("Panel components must be rendered within a PanelGroup container");let{collapsePanel:x,expandPanel:g,getPanelSize:b,getPanelStyle:y,groupId:w,isPanelCollapsed:j,reevaluatePanelConstraints:C,registerPanel:_,resizePanel:k,unregisterPanel:N}=v,S=H(i),T=D({callbacks:{onCollapse:d,onExpand:c,onResize:u},constraints:{collapsedSize:r,collapsible:s,defaultSize:n,maxSize:l,minSize:o},id:S,idIsFromProps:void 0!==i,order:p});D({didLogMissingDefaultSizeWarning:!1}),Z(()=>{let{callbacks:e,constraints:t}=T.current,a={...t};T.current.id=S,T.current.idIsFromProps=void 0!==i,T.current.order=p,e.onCollapse=d,e.onExpand=c,e.onResize=u,t.collapsedSize=r,t.collapsible=s,t.defaultSize=n,t.maxSize=l,t.minSize=o,(a.collapsedSize!==t.collapsedSize||a.collapsible!==t.collapsible||a.maxSize!==t.maxSize||a.minSize!==t.minSize)&&C(T.current,a)}),Z(()=>{let e=T.current;return _(e),()=>{N(e)}},[p,S,_,N]),P(a,()=>({collapse:()=>{x(T.current)},expand:e=>{g(T.current,e)},getId:()=>S,getSize:()=>b(T.current),isCollapsed:()=>j(T.current),isExpanded:()=>!j(T.current),resize:e=>{k(T.current,e)}}),[x,g,b,j,S,k]);let F=y(T.current,n);return E(m,{...f,children:e,className:t,id:i,style:{...F,...h},"data-panel":"","data-panel-collapsible":s||void 0,"data-panel-group-id":w,"data-panel-id":S,"data-panel-size":parseFloat(""+F.flexGrow).toFixed(1)})}let U=F((e,t)=>E(V,{...e,forwardedRef:t}));V.displayName="Panel",U.displayName="forwardRef(Panel)";let W=null,G=null;function $(e,t){let r=function(e,t){if(t){let e=(t&en)!=0,r=(t&ea)!=0,s=(t&ei)!=0,n=(t&el)!=0;if(e)return s?"se-resize":n?"ne-resize":"e-resize";if(r)return s?"sw-resize":n?"nw-resize":"w-resize";if(s)return"s-resize";if(n)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}(e,t);W!==r&&(W=r,null===G&&(G=document.createElement("style"),s&&G.setAttribute("nonce",s),document.head.appendChild(G)),G.innerHTML=`*{cursor: ${r}!important;}`)}function Y(e){return"keydown"===e.type}function X(e){return e.type.startsWith("pointer")}function J(e){return e.type.startsWith("mouse")}function K(e){if(X(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(J(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}let Q=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function ee(e){let t=e.length;for(;t--;){let r=e[t];if(ew(r,"Missing node"),function(e){let t=getComputedStyle(e);return!!("fixed"===t.position||"auto"!==t.zIndex&&("static"!==t.position||function(e){var t;let r=getComputedStyle(null!==(t=es(e))&&void 0!==t?t:e).display;return"flex"===r||"inline-flex"===r}(e))||1>+t.opacity||"transform"in t&&"none"!==t.transform||"webkitTransform"in t&&"none"!==t.webkitTransform||"mixBlendMode"in t&&"normal"!==t.mixBlendMode||"filter"in t&&"none"!==t.filter||"webkitFilter"in t&&"none"!==t.webkitFilter||"isolation"in t&&"isolate"===t.isolation||Q.test(t.willChange))||"touch"===t.webkitOverflowScrolling}(r))return r}return null}function et(e){return e&&Number(getComputedStyle(e).zIndex)||0}function er(e){let t=[];for(;e;)t.push(e),e=es(e);return t}function es(e){let{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}let en=1,ea=2,ei=4,el=8,eo="coarse"===function(){if("function"==typeof matchMedia)return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}(),ed=[],ec=!1,eu=new Map,ep=new Map,eh=new Set;function em(e){let{target:t}=e,{x:r,y:s}=K(e);ec=!0,ex({target:t,x:r,y:s}),eb(),ed.length>0&&(ey("down",e),e.preventDefault(),e.stopPropagation())}function ef(e){let{x:t,y:r}=K(e);if(ec&&0===e.buttons&&(ec=!1,ey("up",e)),!ec){let{target:s}=e;ex({target:s,x:t,y:r})}ey("move",e),eg(),ed.length>0&&e.preventDefault()}function ev(e){let{target:t}=e,{x:r,y:s}=K(e);ep.clear(),ec=!1,ed.length>0&&e.preventDefault(),ey("up",e),ex({target:t,x:r,y:s}),eg(),eb()}function ex({target:e,x:t,y:r}){ed.splice(0);let s=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(s=e),eh.forEach(e=>{let{element:n,hitAreaMargins:a}=e,i=n.getBoundingClientRect(),{bottom:l,left:o,right:d,top:c}=i,u=eo?a.coarse:a.fine;if(t>=o-u&&t<=d+u&&r>=c-u&&r<=l+u){if(null!==s&&document.contains(s)&&n!==s&&!n.contains(s)&&!s.contains(n)&&function(e,t){let r;if(e===t)throw Error("Cannot compare node with itself");let s={a:er(e),b:er(t)};for(;s.a.at(-1)===s.b.at(-1);)e=s.a.pop(),t=s.b.pop(),r=e;ew(r,"Stacking order can only be calculated for elements with a common ancestor");let n={a:et(ee(s.a)),b:et(ee(s.b))};if(n.a===n.b){let e=r.childNodes,t={a:s.a.at(-1),b:s.b.at(-1)},n=e.length;for(;n--;){let r=e[n];if(r===t.a)return 1;if(r===t.b)return -1}}return Math.sign(n.a-n.b)}(s,n)>0){let e=s,t=!1;for(;e;){var p;if(e.contains(n))break;if((p=e.getBoundingClientRect()).x<i.x+i.width&&p.x+p.width>i.x&&p.y<i.y+i.height&&p.y+p.height>i.y){t=!0;break}e=e.parentElement}if(t)return}ed.push(e)}})}function eg(){let e=!1,t=!1;ed.forEach(r=>{let{direction:s}=r;"horizontal"===s?e=!0:t=!0});let r=0;ep.forEach(e=>{r|=e}),e&&t?$("intersection",r):e?$("horizontal",r):t?$("vertical",r):null!==G&&(document.head.removeChild(G),W=null,G=null)}function eb(){eu.forEach((e,t)=>{let{body:r}=t;r.removeEventListener("contextmenu",ev),r.removeEventListener("pointerdown",em),r.removeEventListener("pointerleave",ef),r.removeEventListener("pointermove",ef)}),window.removeEventListener("pointerup",ev),window.removeEventListener("pointercancel",ev),eh.size>0&&(ec?(ed.length>0&&eu.forEach((e,t)=>{let{body:r}=t;e>0&&(r.addEventListener("contextmenu",ev),r.addEventListener("pointerleave",ef),r.addEventListener("pointermove",ef))}),window.addEventListener("pointerup",ev),window.addEventListener("pointercancel",ev)):eu.forEach((e,t)=>{let{body:r}=t;e>0&&(r.addEventListener("pointerdown",em,{capture:!0}),r.addEventListener("pointermove",ef))}))}function ey(e,t){eh.forEach(r=>{let{setResizeHandlerState:s}=r;s(e,ed.includes(r),t)})}function ew(e,t){if(!e)throw console.error(t),Error(t)}function ej(e,t,r=10){return e.toFixed(r)===t.toFixed(r)?0:e>t?1:-1}function eC(e,t,r=10){return 0===ej(e,t,r)}function e_(e,t,r){return 0===ej(e,t,r)}function ek({panelConstraints:e,panelIndex:t,size:r}){let s=e[t];ew(null!=s,`Panel constraints not found for index ${t}`);let{collapsedSize:n=0,collapsible:a,maxSize:i=100,minSize:l=0}=s;return 0>ej(r,l)&&(r=a&&0>ej(r,(n+l)/2)?n:l),r=parseFloat((r=Math.min(i,r)).toFixed(10))}function eN({delta:e,initialLayout:t,panelConstraints:r,pivotIndices:s,prevLayout:n,trigger:a}){if(e_(e,0))return t;let i=[...t],[l,o]=s;ew(null!=l,"Invalid first pivot index"),ew(null!=o,"Invalid second pivot index");let d=0;if("keyboard"===a){{let s=e<0?o:l,n=r[s];ew(n,`Panel constraints not found for index ${s}`);let{collapsedSize:a=0,collapsible:i,minSize:d=0}=n;if(i){let r=t[s];if(ew(null!=r,`Previous layout not found for panel index ${s}`),e_(r,a)){let t=d-r;ej(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}{let s=e<0?l:o,n=r[s];ew(n,`No panel constraints found for index ${s}`);let{collapsedSize:a=0,collapsible:i,minSize:d=0}=n;if(i){let r=t[s];if(ew(null!=r,`Previous layout not found for panel index ${s}`),e_(r,d)){let t=r-a;ej(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}}{let s=e<0?1:-1,n=e<0?o:l,a=0;for(;;){let e=t[n];if(ew(null!=e,`Previous layout not found for panel index ${n}`),a+=ek({panelConstraints:r,panelIndex:n,size:100})-e,(n+=s)<0||n>=r.length)break}let i=Math.min(Math.abs(e),Math.abs(a));e=e<0?0-i:i}{let s=e<0?l:o;for(;s>=0&&s<r.length;){let n=Math.abs(e)-Math.abs(d),a=t[s];ew(null!=a,`Previous layout not found for panel index ${s}`);let l=ek({panelConstraints:r,panelIndex:s,size:a-n});if(!e_(a,l)&&(d+=a-l,i[s]=l,d.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?s--:s++}}if(function(e,t,r){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!e_(e[r],t[r],void 0))return!1;return!0}(n,i))return n;{let s=e<0?o:l,n=t[s];ew(null!=n,`Previous layout not found for panel index ${s}`);let a=n+d,c=ek({panelConstraints:r,panelIndex:s,size:a});if(i[s]=c,!e_(c,a)){let t=a-c,s=e<0?o:l;for(;s>=0&&s<r.length;){let n=i[s];ew(null!=n,`Previous layout not found for panel index ${s}`);let a=ek({panelConstraints:r,panelIndex:s,size:n+t});if(e_(n,a)||(t-=a-n,i[s]=a),e_(t,0))break;e>0?s--:s++}}}return e_(i.reduce((e,t)=>t+e,0),100)?i:n}function eE(e,t=document){return Array.from(t.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${e}"]`))}function eS(e,t,r=document){let s=eE(e,r).findIndex(e=>e.getAttribute("data-panel-resize-handle-id")===t);return null!=s?s:null}function eT(e,t,r){let s=eS(e,t,r);return null!=s?[s,s+1]:[-1,-1]}function eF(e,t=document){var r;return t instanceof HTMLElement&&(null==t?void 0:null===(r=t.dataset)||void 0===r?void 0:r.panelGroupId)==e?t:t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`)||null}function eL(e,t=document){return t.querySelector(`[data-panel-resize-handle-id="${e}"]`)||null}function eM(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function eA(e,t){let{x:r,y:s}=K(t);return"horizontal"===e?r:s}function eP(e,t,r){t.forEach((t,s)=>{let n=e[s];ew(n,`Panel data not found for index ${s}`);let{callbacks:a,constraints:i,id:l}=n,{collapsedSize:o=0,collapsible:d}=i,c=r[l];if(null==c||t!==c){r[l]=t;let{onCollapse:e,onExpand:s,onResize:n}=a;n&&n(t,c),d&&(e||s)&&(s&&(null==c||eC(c,o))&&!eC(t,o)&&s(),e&&(null==c||!eC(c,o))&&eC(t,o)&&e())}})}function eZ(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0}function eI(e){try{if("undefined"!=typeof localStorage)e.getItem=e=>localStorage.getItem(e),e.setItem=(e,t)=>{localStorage.setItem(e,t)};else throw Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function eD(e){return`react-resizable-panels:${e}`}function eR(e){return e.map(e=>{let{constraints:t,id:r,idIsFromProps:s,order:n}=e;return s?r:n?`${n}:${JSON.stringify(t)}`:JSON.stringify(t)}).sort((e,t)=>e.localeCompare(t)).join(",")}function ez(e,t){try{let r=eD(e),s=t.getItem(r);if(s){let e=JSON.parse(s);if("object"==typeof e&&null!=e)return e}}catch(e){}return null}function eO(e,t,r,s,n){var a;let i=eD(e),l=eR(t),o=null!==(a=ez(e,n))&&void 0!==a?a:{};o[l]={expandToSizes:Object.fromEntries(r.entries()),layout:s};try{n.setItem(i,JSON.stringify(o))}catch(e){console.error(e)}}function eB({layout:e,panelConstraints:t}){let r=[...e],s=r.reduce((e,t)=>e+t,0);if(r.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${r.map(e=>`${e}%`).join(", ")}`);if(!e_(s,100)&&r.length>0)for(let e=0;e<t.length;e++){let t=r[e];ew(null!=t,`No layout data found for index ${e}`);let n=100/s*t;r[e]=n}let n=0;for(let e=0;e<t.length;e++){let s=r[e];ew(null!=s,`No layout data found for index ${e}`);let a=ek({panelConstraints:t,panelIndex:e,size:s});s!=a&&(n+=s-a,r[e]=a)}if(!e_(n,0))for(let e=0;e<t.length;e++){let s=r[e];ew(null!=s,`No layout data found for index ${e}`);let a=ek({panelConstraints:t,panelIndex:e,size:s+n});if(s!==a&&(n-=a-s,r[e]=a,e_(n,0)))break}return r}let eq={getItem:e=>(eI(eq),eq.getItem(e)),setItem:(e,t)=>{eI(eq),eq.setItem(e,t)}},eH={};function eV({autoSaveId:e=null,children:t,className:r="",direction:s,forwardedRef:n,id:a=null,onLayout:i=null,keyboardResizeBy:l=null,storage:o=eq,style:d,tagName:c="div",...u}){let p=H(a),h=D(null),[m,f]=R(null),[v,x]=R([]),g=function(){let[e,t]=R(0);return L(()=>t(e=>e+1),[])}(),b=D({}),y=D(new Map),w=D(0),j=D({autoSaveId:e,direction:s,dragState:m,id:p,keyboardResizeBy:l,onLayout:i,storage:o}),C=D({layout:v,panelDataArray:[],panelDataArrayChanged:!1});D({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),P(n,()=>({getId:()=>j.current.id,getLayout:()=>{let{layout:e}=C.current;return e},setLayout:e=>{let{onLayout:t}=j.current,{layout:r,panelDataArray:s}=C.current,n=eB({layout:e,panelConstraints:s.map(e=>e.constraints)});eM(r,n)||(x(n),C.current.layout=n,t&&t(n),eP(s,n,b.current))}}),[]),Z(()=>{j.current.autoSaveId=e,j.current.direction=s,j.current.dragState=m,j.current.id=p,j.current.onLayout=i,j.current.storage=o}),function({committedValuesRef:e,eagerValuesRef:t,groupId:r,layout:s,panelDataArray:n,panelGroupElement:a,setLayout:i}){D({didWarnAboutMissingResizeHandle:!1}),Z(()=>{if(!a)return;let e=eE(r,a);for(let t=0;t<n.length-1;t++){let{valueMax:r,valueMin:a,valueNow:i}=function({layout:e,panelsArray:t,pivotIndices:r}){let s=0,n=100,a=0,i=0,l=r[0];return ew(null!=l,"No pivot index found"),t.forEach((e,t)=>{let{constraints:r}=e,{maxSize:o=100,minSize:d=0}=r;t===l?(s=d,n=o):(a+=d,i+=o)}),{valueMax:Math.min(n,100-a),valueMin:Math.max(s,100-i),valueNow:e[l]}}({layout:s,panelsArray:n,pivotIndices:[t,t+1]}),l=e[t];if(null==l);else{let e=n[t];ew(e,`No panel data found for index "${t}"`),l.setAttribute("aria-controls",e.id),l.setAttribute("aria-valuemax",""+Math.round(r)),l.setAttribute("aria-valuemin",""+Math.round(a)),l.setAttribute("aria-valuenow",null!=i?""+Math.round(i):"")}}return()=>{e.forEach((e,t)=>{e.removeAttribute("aria-controls"),e.removeAttribute("aria-valuemax"),e.removeAttribute("aria-valuemin"),e.removeAttribute("aria-valuenow")})}},[r,s,n,a]),A(()=>{if(!a)return;let e=t.current;ew(e,"Eager values not found");let{panelDataArray:n}=e;ew(null!=eF(r,a),`No group found for id "${r}"`);let l=eE(r,a);ew(l,`No resize handles found for group id "${r}"`);let o=l.map(e=>{let t=e.getAttribute("data-panel-resize-handle-id");ew(t,"Resize handle element has no handle id attribute");let[l,o]=function(e,t,r,s=document){var n,a,i,l;let o=eL(t,s),d=eE(e,s),c=o?d.indexOf(o):-1;return[null!==(n=null===(a=r[c])||void 0===a?void 0:a.id)&&void 0!==n?n:null,null!==(i=null===(l=r[c+1])||void 0===l?void 0:l.id)&&void 0!==i?i:null]}(r,t,n,a);if(null==l||null==o)return()=>{};let d=e=>{if(!e.defaultPrevented&&"Enter"===e.key){e.preventDefault();let o=n.findIndex(e=>e.id===l);if(o>=0){let e=n[o];ew(e,`No panel data found for index ${o}`);let l=s[o],{collapsedSize:d=0,collapsible:c,minSize:u=0}=e.constraints;if(null!=l&&c){let e=eN({delta:e_(l,d)?u-d:d-l,initialLayout:s,panelConstraints:n.map(e=>e.constraints),pivotIndices:eT(r,t,a),prevLayout:s,trigger:"keyboard"});s!==e&&i(e)}}}};return e.addEventListener("keydown",d),()=>{e.removeEventListener("keydown",d)}});return()=>{o.forEach(e=>e())}},[a,e,t,r,s,n,i])}({committedValuesRef:j,eagerValuesRef:C,groupId:p,layout:v,panelDataArray:C.current.panelDataArray,setLayout:x,panelGroupElement:h.current}),A(()=>{let{panelDataArray:t}=C.current;if(e){if(0===v.length||v.length!==t.length)return;let r=eH[e];null==r&&(r=function(e,t=10){let r=null;return(...s)=>{null!==r&&clearTimeout(r),r=setTimeout(()=>{e(...s)},t)}}(eO,100),eH[e]=r),r(e,[...t],new Map(y.current),v,o)}},[e,v,o]),A(()=>{});let _=L(e=>{let{onLayout:t}=j.current,{layout:r,panelDataArray:s}=C.current;if(e.constraints.collapsible){let n=s.map(e=>e.constraints),{collapsedSize:a=0,panelSize:i,pivotIndices:l}=eG(s,e,r);if(ew(null!=i,`Panel size not found for panel "${e.id}"`),!eC(i,a)){y.current.set(e.id,i);let o=eN({delta:eW(s,e)===s.length-1?i-a:a-i,initialLayout:r,panelConstraints:n,pivotIndices:l,prevLayout:r,trigger:"imperative-api"});eZ(r,o)||(x(o),C.current.layout=o,t&&t(o),eP(s,o,b.current))}}},[]),k=L((e,t)=>{let{onLayout:r}=j.current,{layout:s,panelDataArray:n}=C.current;if(e.constraints.collapsible){let a=n.map(e=>e.constraints),{collapsedSize:i=0,panelSize:l=0,minSize:o=0,pivotIndices:d}=eG(n,e,s),c=null!=t?t:o;if(eC(l,i)){let t=y.current.get(e.id),i=null!=t&&t>=c?t:c,o=eN({delta:eW(n,e)===n.length-1?l-i:i-l,initialLayout:s,panelConstraints:a,pivotIndices:d,prevLayout:s,trigger:"imperative-api"});eZ(s,o)||(x(o),C.current.layout=o,r&&r(o),eP(n,o,b.current))}}},[]),N=L(e=>{let{layout:t,panelDataArray:r}=C.current,{panelSize:s}=eG(r,e,t);return ew(null!=s,`Panel size not found for panel "${e.id}"`),s},[]),S=L((e,t)=>{let{panelDataArray:r}=C.current,s=eW(r,e);return function({defaultSize:e,dragState:t,layout:r,panelData:s,panelIndex:n,precision:a=3}){let i=r[n];return{flexBasis:0,flexGrow:null==i?void 0!=e?e.toPrecision(a):"1":1===s.length?"1":i.toPrecision(a),flexShrink:1,overflow:"hidden",pointerEvents:null!==t?"none":void 0}}({defaultSize:t,dragState:m,layout:v,panelData:r,panelIndex:s})},[m,v]),T=L(e=>{let{layout:t,panelDataArray:r}=C.current,{collapsedSize:s=0,collapsible:n,panelSize:a}=eG(r,e,t);return ew(null!=a,`Panel size not found for panel "${e.id}"`),!0===n&&eC(a,s)},[]),F=L(e=>{let{layout:t,panelDataArray:r}=C.current,{collapsedSize:s=0,collapsible:n,panelSize:a}=eG(r,e,t);return ew(null!=a,`Panel size not found for panel "${e.id}"`),!n||ej(a,s)>0},[]),M=L(e=>{let{panelDataArray:t}=C.current;t.push(e),t.sort((e,t)=>{let r=e.order,s=t.order;return null==r&&null==s?0:null==r?-1:null==s?1:r-s}),C.current.panelDataArrayChanged=!0,g()},[g]);Z(()=>{if(C.current.panelDataArrayChanged){C.current.panelDataArrayChanged=!1;let{autoSaveId:r,onLayout:s,storage:n}=j.current,{layout:a,panelDataArray:i}=C.current,l=null;if(r){var e,t;let s=null!==(t=(null!==(e=ez(r,n))&&void 0!==e?e:{})[eR(i)])&&void 0!==t?t:null;s&&(y.current=new Map(Object.entries(s.expandToSizes)),l=s.layout)}null==l&&(l=function({panelDataArray:e}){let t=Array(e.length),r=e.map(e=>e.constraints),s=0,n=100;for(let a=0;a<e.length;a++){let e=r[a];ew(e,`Panel constraints not found for index ${a}`);let{defaultSize:i}=e;null!=i&&(s++,t[a]=i,n-=i)}for(let a=0;a<e.length;a++){let i=r[a];ew(i,`Panel constraints not found for index ${a}`);let{defaultSize:l}=i;if(null!=l)continue;let o=n/(e.length-s);s++,t[a]=o,n-=o}return t}({panelDataArray:i}));let o=eB({layout:l,panelConstraints:i.map(e=>e.constraints)});eM(a,o)||(x(o),C.current.layout=o,s&&s(o),eP(i,o,b.current))}}),Z(()=>{let e=C.current;return()=>{e.layout=[]}},[]);let z=L(e=>{let t=!1,r=h.current;return r&&"rtl"===window.getComputedStyle(r,null).getPropertyValue("direction")&&(t=!0),function(r){r.preventDefault();let s=h.current;if(!s)return()=>null;let{direction:n,dragState:a,id:i,keyboardResizeBy:l,onLayout:o}=j.current,{layout:d,panelDataArray:c}=C.current,{initialLayout:u}=null!=a?a:{},p=eT(i,e,s),m=function(e,t,r,s,n,a){if(Y(e)){let t="horizontal"===r,s=0;s=e.shiftKey?100:null!=n?n:10;let a=0;switch(e.key){case"ArrowDown":a=t?0:s;break;case"ArrowLeft":a=t?-s:0;break;case"ArrowRight":a=t?s:0;break;case"ArrowUp":a=t?0:-s;break;case"End":a=100;break;case"Home":a=-100}return a}return null==s?0:function(e,t,r,s,n){let a="horizontal"===r,i=eL(t,n);ew(i,`No resize handle element found for id "${t}"`);let l=i.getAttribute("data-panel-group-id");ew(l,"Resize handle element has no group id attribute");let{initialCursorPosition:o}=s,d=eA(r,e),c=eF(l,n);ew(c,`No group element found for id "${l}"`);let u=c.getBoundingClientRect();return(d-o)/(a?u.width:u.height)*100}(e,t,r,s,a)}(r,e,n,a,l,s),f="horizontal"===n;f&&t&&(m=-m);let v=eN({delta:m,initialLayout:null!=u?u:d,panelConstraints:c.map(e=>e.constraints),pivotIndices:p,prevLayout:d,trigger:Y(r)?"keyboard":"mouse-or-touch"}),g=!eZ(d,v);if((X(r)||J(r))&&w.current!=m){var y,_;(w.current=m,g||0===m)?ep.set(e,0):f?(y=m<0?en:ea,ep.set(e,y)):(_=m<0?ei:el,ep.set(e,_))}g&&(x(v),C.current.layout=v,o&&o(v),eP(c,v,b.current))}},[]),B=L((e,t)=>{let{onLayout:r}=j.current,{layout:s,panelDataArray:n}=C.current,a=n.map(e=>e.constraints),{panelSize:i,pivotIndices:l}=eG(n,e,s);ew(null!=i,`Panel size not found for panel "${e.id}"`);let o=eN({delta:eW(n,e)===n.length-1?i-t:t-i,initialLayout:s,panelConstraints:a,pivotIndices:l,prevLayout:s,trigger:"imperative-api"});eZ(s,o)||(x(o),C.current.layout=o,r&&r(o),eP(n,o,b.current))},[]),q=L((e,t)=>{let{layout:r,panelDataArray:s}=C.current,{collapsedSize:n=0,collapsible:a}=t,{collapsedSize:i=0,collapsible:l,maxSize:o=100,minSize:d=0}=e.constraints,{panelSize:c}=eG(s,e,r);null!=c&&(a&&l&&eC(c,n)?eC(n,i)||B(e,i):c<d?B(e,d):c>o&&B(e,o))},[B]),V=L((e,t)=>{let{direction:r}=j.current,{layout:s}=C.current;if(!h.current)return;let n=eL(e,h.current);ew(n,`Drag handle element not found for id "${e}"`);let a=eA(r,t);f({dragHandleId:e,dragHandleRect:n.getBoundingClientRect(),initialCursorPosition:a,initialLayout:s})},[]),U=L(()=>{f(null)},[]),W=L(e=>{let{panelDataArray:t}=C.current,r=eW(t,e);r>=0&&(t.splice(r,1),delete b.current[e.id],C.current.panelDataArrayChanged=!0,g())},[g]),G=I(()=>({collapsePanel:_,direction:s,dragState:m,expandPanel:k,getPanelSize:N,getPanelStyle:S,groupId:p,isPanelCollapsed:T,isPanelExpanded:F,reevaluatePanelConstraints:q,registerPanel:M,registerResizeHandle:z,resizePanel:B,startDragging:V,stopDragging:U,unregisterPanel:W,panelGroupElement:h.current}),[_,m,s,k,N,S,p,T,F,q,M,z,B,V,U,W]);return E(O.Provider,{value:G},E(c,{...u,children:t,className:r,id:a,ref:h,style:{display:"flex",flexDirection:"horizontal"===s?"row":"column",height:"100%",overflow:"hidden",width:"100%",...d},"data-panel-group":"","data-panel-group-direction":s,"data-panel-group-id":p}))}let eU=F((e,t)=>E(eV,{...e,forwardedRef:t}));function eW(e,t){return e.findIndex(e=>e===t||e.id===t.id)}function eG(e,t,r){let s=eW(e,t),n=s===e.length-1,a=r[s];return{...t.constraints,panelSize:a,pivotIndices:n?[s-1,s]:[s,s+1]}}function e$({children:e=null,className:t="",disabled:r=!1,hitAreaMargins:s,id:n,onBlur:a,onDragging:i,onFocus:l,style:o={},tabIndex:d=0,tagName:c="div",...u}){var p,h;let m=D(null),f=D({onDragging:i});A(()=>{f.current.onDragging=i});let v=M(O);if(null===v)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");let{direction:x,groupId:g,registerResizeHandle:b,startDragging:y,stopDragging:w,panelGroupElement:j}=v,C=H(n),[_,k]=R("inactive"),[N,S]=R(!1),[T,F]=R(null),L=D({state:_});Z(()=>{L.current.state=_}),A(()=>{if(r)F(null);else{let e=b(C);F(()=>e)}},[r,C,b]);let P=null!==(p=null==s?void 0:s.coarse)&&void 0!==p?p:15,I=null!==(h=null==s?void 0:s.fine)&&void 0!==h?h:5;return A(()=>{if(r||null==T)return;let e=m.current;return ew(e,"Element ref not attached"),function(e,t,r,s,n){var a;let{ownerDocument:i}=t,l={direction:r,element:t,hitAreaMargins:s,setResizeHandlerState:n},o=null!==(a=eu.get(i))&&void 0!==a?a:0;return eu.set(i,o+1),eh.add(l),eb(),function(){var t;ep.delete(e),eh.delete(l);let r=null!==(t=eu.get(i))&&void 0!==t?t:1;if(eu.set(i,r-1),eb(),1===r&&eu.delete(i),ed.includes(l)){let e=ed.indexOf(l);e>=0&&ed.splice(e,1),eg(),n("up",!0,null)}}}(C,e,x,{coarse:P,fine:I},(e,t,r)=>{if(t)switch(e){case"down":{k("drag"),ew(r,'Expected event to be defined for "down" action'),y(C,r);let{onDragging:e}=f.current;e&&e(!0);break}case"move":{let{state:e}=L.current;"drag"!==e&&k("hover"),ew(r,'Expected event to be defined for "move" action'),T(r);break}case"up":{k("hover"),w();let{onDragging:e}=f.current;e&&e(!1)}}else k("inactive")})},[P,x,r,I,b,C,T,y,w]),!function({disabled:e,handleId:t,resizeHandler:r,panelGroupElement:s}){A(()=>{if(e||null==r||null==s)return;let n=eL(t,s);if(null==n)return;let a=e=>{if(!e.defaultPrevented)switch(e.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":e.preventDefault(),r(e);break;case"F6":{e.preventDefault();let r=n.getAttribute("data-panel-group-id");ew(r,`No group element found for id "${r}"`);let a=eE(r,s),i=eS(r,t,s);ew(null!==i,`No resize element found for id "${t}"`);let l=e.shiftKey?i>0?i-1:a.length-1:i+1<a.length?i+1:0;a[l].focus()}}};return n.addEventListener("keydown",a),()=>{n.removeEventListener("keydown",a)}},[s,e,t,r])}({disabled:r,handleId:C,resizeHandler:T,panelGroupElement:j}),E(c,{...u,children:e,className:t,id:n,onBlur:()=>{S(!1),null==a||a()},onFocus:()=>{S(!0),null==l||l()},ref:m,role:"separator",style:{touchAction:"none",userSelect:"none",...o},tabIndex:d,"data-panel-group-direction":x,"data-panel-group-id":g,"data-resize-handle":"","data-resize-handle-active":"drag"===_?"pointer":N?"keyboard":void 0,"data-resize-handle-state":_,"data-panel-resize-handle-enabled":!r,"data-panel-resize-handle-id":C})}eV.displayName="PanelGroup",eU.displayName="forwardRef(PanelGroup)",e$.displayName="PanelResizeHandle";var eY=r(37481);let eX=e=>{let{className:t,...r}=e;return(0,f.jsx)(eU,{className:(0,eY.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...r})},eJ=e=>{let{withHandle:t,className:r,...s}=e;return(0,f.jsx)(e$,{className:(0,eY.cn)("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",r),...s,children:t&&(0,f.jsx)("div",{className:"z-10 flex px-1 py-[14px] items-center justify-center rounded-sm border bg-gray-200 dark:bg-gray-300"})})},eK=e=>{let{mainContent:t,sidebar:r,showSidebar:s=!1}=e;return(0,f.jsxs)(eX,{className:"flex max-w-full",style:{overflow:"visible"},direction:"horizontal",children:[(0,f.jsx)(U,{style:{overflow:"visible"},className:"min-w-[30vw]",children:(0,f.jsx)("div",{className:"flex-1 flex flex-col h-[100vh] min-w-[30vw]",children:t})}),s&&(0,f.jsx)(eJ,{withHandle:!0,className:"ml-2"}),s&&r]})};var eQ=r(93992),e0=r.n(eQ),e1=r(87582),e2=r(16023);let e3=e=>{let{title:t,description:r,shareImg:s,ogUrl:n}=e,a=(0,g.useLocale)();return(0,f.jsxs)(e0(),{children:[(0,f.jsx)("title",{children:t}),(0,f.jsx)("meta",{name:"description",content:r}),(0,f.jsx)("meta",{property:"og:type",content:"website"}),(0,f.jsx)("meta",{property:"og:site_name",content:e2.rZ}),(0,f.jsx)("meta",{property:"og:title",content:t}),(0,f.jsx)("meta",{property:"og:description",content:r}),(0,f.jsx)("meta",{property:"og:image",content:s||e1.VI}),(0,f.jsx)("meta",{property:"og:url",content:n}),(0,f.jsx)("meta",{property:"og:locale",content:a}),(0,f.jsx)("meta",{name:"twitter:card",content:s?"summary_large_image":"summary"}),(0,f.jsx)("meta",{name:"twitter:title",content:t}),(0,f.jsx)("meta",{name:"twitter:description",content:r}),(0,f.jsx)("meta",{name:"twitter:site",content:"@felo_ai"}),(0,f.jsx)("meta",{name:"twitter:creator",content:"@felo_ai"}),(0,f.jsx)("meta",{name:"twitter:image",content:s||e1.VI}),(0,f.jsx)("script",{src:"https://aippt-international-api-static.aippt.cn/aippt-iframe-sdk.js",async:!0,defer:!0})]})};var e5=r(9455),e6=r(96164),e4=r(38793),e7=r(28623),e8=r(25773),e9=r(59167),te=r(64862),tt=r(41650);let tr=(0,tt.Z)("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);var ts=r(91165),tn=r(80626),ta=r(68644),ti=r(15133);let tl=(0,tt.Z)("folder-minus",[["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var to=r(70017),td=r(72153),tc=r(75963),tu=r(1962),tp=r(67241),th=r(65819),tm=r(62500),tf=r(40548),tv=r.n(tf),tx=r(57231),tg=r(17112),tb=r(31063),ty=r(60161),tw=r(26595),tj=r(17436),tC=r(60904),t_=r(46571),tk=r(19370),tN=r(4590);function tE(){let e=(0,g.useLocale)();return{locale:e,isRtl:(0,tN.dZ)(e)}}var tS=e=>{let{positionX:t,loading:r,selectedTopic:s,isOpen:n,onClose:a,onCreateNew:i,onSelect:l,onCancel:o}=e,d=(0,g.useTranslations)(),{locale:c,isRtl:u}=tE(),{list:p}=(0,tj.Z)(),h=(0,v.useMemo)(()=>(null==s?void 0:s.short_id)||"",[s]);if(n)return(0,f.jsxs)("div",{className:(0,t_.cn)("fixed z-20 top-20 bg-white dark:bg-theme-bg-dark-100 shadow-xl p-4 rounded-xl w-[23em] max-w-[90vw]",!t&&(u?"left-4":"right-4")),style:t?u?{right:"".concat(t,"px")}:{left:"".concat(t,"px")}:void 0,children:[(0,f.jsxs)("header",{className:"flex items-center",children:[(0,f.jsx)("h3",{className:"text-lg",children:d("topic.added_to_topic")}),(0,f.jsx)(tC.Z,{className:"ml-auto cursor-pointer w-5 h-5",onClick:a})]}),(0,f.jsxs)("main",{children:[(0,f.jsxs)("div",{className:"flex items-center my-4",children:[(0,f.jsx)("span",{className:"flex-1 text-sm mr-4 whitespace-nowrap",children:d("topics")}),(0,f.jsxs)(tk.Ph,{value:h,onValueChange:e=>{if("create"===e){i();return}let t=p.find(t=>t.short_id===e);t&&l(t)},children:[(0,f.jsx)(tk.i4,{disabled:r,children:(0,f.jsx)(tk.ki,{placeholder:d("topics")})}),(0,f.jsxs)(tk.Bw,{children:[p.map(e=>(0,f.jsx)(tk.Ql,{value:e.short_id,children:e.name},e.short_id)),(0,f.jsx)(tk.U$,{}),(0,f.jsx)(tk.Ql,{value:"create",children:d("topic.create_new_theme")})]})]})]}),(0,f.jsxs)("footer",{className:"flex justify-end gap-2",children:[(0,f.jsx)(tw.A,{variant:"light",className:"border border-theme-border-200 dark:border-theme-border-dark-200",disabled:r,onClick:o,children:d("remove")}),(0,f.jsx)(tw.A,{color:"primary",disabled:r,onClick:a,children:d("complete")})]})]})]})},tT=r(89335),tF=function(e){let{defaultTopic:t,threadId:r}=e,s=(0,g.useTranslations)(),[n,a]=(0,v.useState)(t),[i,l]=(0,v.useState)(t),[o,d]=(0,v.useState)(!1),[c,u]=(0,v.useState)(!1),p=async e=>{if(r){u(!0);try{(n?await (0,tT._j)({topicId:n.short_id,threadShortId:r,nextTopicId:e.short_id}):await (0,tT.EG)({topicId:e.short_id,threadShortId:r}))?a(e):tg.Z.error("Failed to bind topic")}catch(e){tg.Z.error("Failed to fetch topics")}finally{u(!1)}}},h=async()=>{if(r&&n){d(!0);try{await (0,tT.vU)({topicId:n.short_id,threadShortId:r})?a(void 0):tg.Z.error("Failed to unbind thread from topic")}catch(e){tg.Z.error("An error occurred while unbinding the thread")}finally{d(!1)}}},m=async()=>{let e={name:s("topic.default_topic"),description:s("topic.default_topic_desc"),instruction:"",icon:""};await (0,tT.HV)(e)&&await tj.Z.getState().getList().then(e=>{p(e[0]),l(e[0])})},f=async()=>{d(!0);let e=await tj.Z.getState().getList();try{0===e.length?await m():(await p(e[0]),l(e[0]))}catch(e){tg.Z.error("Create default collection failed")}d(!1)};return{topic:n,setTopic:a,selectedTopic:i,setSelectedTopic:l,topicLoading:o,bindLoading:c,checkCreateDefaultCollection:f,onBindTopic:p,onUnbindTopic:h}},tL=r(62167),tM=r(48482),tA=r(52502),tP=r(31022),tZ=r(18881),tI=r(45360),tD=r(94572),tR=r(57546),tz=r(35030),tO=r(92823),tB=r(26077),tq=r(97308),tH=r(25034),tV=r(4814),tU=r(29871),tW=e=>{let{text:t,color:r,classNames:s,onPress:n}=e;return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(tw.A,{size:"sm",className:(0,tV.Z)(s||"","brorounded-sm","px-1 py-[1px] font-normal text-[11px]","min-w-0 h-auto","bg-black bg-opacity-70 text-white"),onPress:n,children:t})})},tG=r(95611),t$=r(1937),tY=e=>{let{menuChange:t}=e,r=(0,g.useTranslations)(),{generateType:s,setGenerateType:n,pptBtnKey:a,generateKey:i}=(0,tZ.Z)();return(0,f.jsxs)("div",{className:"px-3 py-4",children:[(0,f.jsx)("h3",{className:"text-small font-bold",children:r("ppt.select_generate_title")}),(0,f.jsx)("div",{className:"flex flex-col gap-2 my-4",children:(0,f.jsxs)(tG.X,{size:"sm",value:s,onValueChange:e=>n(e),children:[(0,f.jsx)(t$.J,{value:"answer",children:(0,f.jsx)("span",{className:"text-xs",children:r("ppt.select_generate_answer")})}),(0,f.jsx)(t$.J,{value:"file",children:(0,f.jsx)("span",{className:"text-xs",children:r("ppt.select_generate_file")})})]})}),(0,f.jsx)("div",{className:"flex",children:(0,f.jsx)(tw.A,{className:"w-full",color:"primary",size:"sm",onPress:()=>{t({key:i||a})},children:r("ppt.generate_ppt_one_click")})})]})},tX=r(23083),tJ=r(36551),tK=r(25010),tQ=r(24213),t0=r(50802);let t1=e=>{var t;let{menuChange:r,setIsOpen:s}=e,n=(0,g.useTranslations)(),{isOpenCanvaEditorLoading:a,isMyThread:i}=(0,tZ.Z)(),l=(0,tX.Z)(e=>e.threads),{threadPPTCacheData:o,pptThreadBtnEntrance:d}=(0,t0.Z)();return(0,f.jsxs)("div",{className:"w-[300px] p-1",children:[(0,f.jsx)("h4",{className:"text-sm mb-3 mt-1",children:n("ppt.view_doc_title")}),(0,f.jsxs)("div",{className:(0,tV.Z)("border rounded-md border-slate-100 relative min-h-[160px] dark:border-slate-800","group"),children:[(null==o?void 0:o.cover_url)?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(tO.J,{className:(0,tV.Z)("w-full max-w-full relative z-10 min-h-[160px] rounded-md opacity-100","group-hover:opacity-50 transition-opacity duration-300"),alt:"PPT",src:null==o?void 0:o.cover_url})}):(0,f.jsx)("div",{className:"w-full flex items-center justify-center bg-gray-100 h-[160px] dark:bg-gray-900",children:(0,f.jsx)("div",{className:"text-sm text-gray-500",children:n("ppt.generating_tip")})}),d.find(e=>"edit"===e.key)?(0,f.jsx)(tW,{text:n("ppt.edit_ppt_btn"),color:"primary",classNames:"absolute top-2 right-2 z-20",onPress:()=>{r({key:"edit"}),s&&s(!1)}}):null,(0,f.jsxs)("div",{className:"absolute z-20 bottom-2 right-2",children:[d.find(e=>"preview"===e.key)?(0,f.jsx)(tW,{text:n("ppt.preivew_ppt_btn_new"),classNames:"mr-2",color:"primary",onPress:()=>{r({key:"preview"}),s&&s(!1)}}):null,d.find(e=>"download"===e.key)?(0,f.jsx)(tW,{text:n("ppt.download_ppt_btn"),color:"primary",onPress:()=>{r({key:"download"}),s&&s(!1)}}):null]})]}),d.find(e=>"regenerate"===e.key)?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("h4",{className:"text-sm my-3",children:n("ppt.control_title")}),(0,f.jsx)("div",{className:"my-3",children:(0,f.jsxs)(tB.j,{placement:"bottom",showArrow:!0,backdrop:"opaque",children:[(null==l?void 0:null===(t=l[0])||void 0===t?void 0:t.category)===tJ.J5?(0,f.jsx)(tq.b,{children:(0,f.jsx)(tK.z,{color:"primary",size:"sm",className:"w-full",children:n("ppt.regenerate_btn")})}):(0,f.jsx)(tK.z,{color:"primary",size:"sm",className:"w-full",onClick:()=>{r({key:"regenerate"}),s&&s(!1)},children:n("ppt.regenerate_btn")}),(0,f.jsx)(tH.g,{children:(0,f.jsx)(tY,{menuChange:r})})]})})]}):null,d.find(e=>"generate"===e.key)?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("h4",{className:"text-sm my-3",children:n("ppt.control_title")}),(0,f.jsx)("div",{className:"my-3",children:(0,f.jsx)(tK.z,{size:"sm",className:"w-full",onClick:()=>{r({key:"generate"}),s&&s(!1)},children:n("ppt.generate_ppt_btn")})})]}):null,i?(0,f.jsx)("div",{className:"my-3",children:(0,f.jsxs)(tK.z,{size:"sm",className:(0,tV.Z)("w-full bg-[#8B3DFF] hover:bg-[#8B3DFF]",!d.find(e=>"connectCanva"===e.key)&&"opacity-60"),disabled:a||!d.find(e=>"connectCanva"===e.key),onClick:()=>{r({key:"connectCanva"})},children:[a&&(0,f.jsx)(e8.Z,{className:"animate-spin"}),n("ppt.edit_in_canva")]})}):null]})};var t2=e=>{let{menuChange:t}=e,r=(0,g.useTranslations)(),{isMobile:s}=(0,tU.Z)(),[n,a]=(0,v.useState)(!1);return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)(e6.e,{showArrow:!0,placement:"top-end",content:(0,f.jsx)(t1,{menuChange:t,setIsOpen:a}),children:(0,f.jsxs)(tK.z,{id:"pptGenerate",className:"relative z-10 rounded-lg",variant:"outline-primary",onClick:()=>{a(!0)},children:[(0,f.jsx)(tQ.$U,{className:"w-[24px]"}),(0,f.jsx)("span",{className:"lg:inline hidden",children:r("ppt.preview_ppt_btn")})]})}),(0,f.jsxs)(tB.j,{placement:"top-end",showArrow:!0,isOpen:n,onOpenChange:e=>a(e),children:[(0,f.jsx)(tq.b,{children:(0,f.jsxs)(tK.z,{className:"absolute left-0 top-0 z-0 rounded-lg",variant:"outline-primary",children:[(0,f.jsx)(tQ.$U,{className:"w-[24px]"}),(0,f.jsx)("span",{className:"lg:inline hidden",children:r("ppt.preview_ppt_btn")})]})}),(0,f.jsx)(tH.g,{children:(0,f.jsx)(t1,{menuChange:t,setIsOpen:a})})]})]})})},t3=r(77844),t5=r(51131),t6=r(73423),t4=e=>{var t;let{btnPpt:r,login:s,menuChange:n}=e,a=(0,g.useTranslations)(),{threads:i}=(0,tX.Z)(),{isMyThread:l,isShowSelectType:o,setIsShowSelectType:d}=(0,tZ.Z)(),c=(0,th.ZP)(e=>e.isLogin);(0,tR.Z)(e=>e.openThreadModal);let u=(0,b.useRouter)();return(0,f.jsx)(f.Fragment,{children:!l&&c?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(e6.e,{showArrow:!0,placement:"bottom-end",content:(0,f.jsxs)("div",{className:"flex items-center text-xs flex-wrap",children:[(0,f.jsx)("div",{className:"w-full mt-2",children:a("ppt.go_my_threads_generate_tip")}),(0,f.jsx)(t5.j,{className:"w-full my-3"}),(0,f.jsx)("div",{className:"w-full flex items-center text-xs",children:(0,f.jsx)("span",{className:"ml-1",children:(0,f.jsx)(tw.A,{size:"sm",onPress:()=>{u.push("/search")},className:"mx-1 px-2 py-1 h-6 min-w-0",color:"primary"})})})]}),classNames:{base:"max-w-[360px] before:bg-white dark:before:bg-gray-800",content:["text-gray-800 bg-white  dark:text-white dark:bg-gray-800 p-3"]},children:r({})})}):(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(tB.j,{placement:"bottom",showArrow:!0,onOpenChange:e=>{d(e)},onClose:()=>{d(!1)},children:[(0,f.jsx)(e6.e,{showArrow:!0,placement:"bottom-end",delay:0,isDisabled:o,content:(0,f.jsxs)("div",{className:"flex items-center text-xs flex-wrap",children:[(0,f.jsx)("div",{className:"w-full mt-2",children:a("ppt.generate_ppt_btn_tip")}),c?null:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(t5.j,{className:"w-full my-3"})," ",(0,f.jsxs)("div",{className:"w-full flex items-center text-xs",children:[(0,f.jsx)(t6.Z,{size:16}),(0,f.jsx)("span",{className:"ml-1",children:(0,f.jsx)(tw.A,{size:"sm",onPress:s,className:"mx-1 px-2 py-1 h-6 min-w-0",color:"primary",children:a("ppt.login_expired")})})]})]})]}),classNames:{base:"max-w-[360px] before:bg-white dark:before:bg-gray-800",content:["text-gray-800 bg-white  dark:text-white dark:bg-gray-800 p-3"]},children:(null==i?void 0:null===(t=i[0])||void 0===t?void 0:t.category)===tJ.J5?(0,f.jsx)("div",{className:"max-w-fit",children:(0,f.jsx)(tq.b,{children:r({disableClick:!0})})}):r({})}),(0,f.jsx)(tH.g,{children:(0,f.jsx)(tY,{menuChange:n})})]})})})},t7=r(51054),t8=r(77998),t9=r(41223),re=r(44342),rt=r(39109),rr=e=>{var t,r,s,n;let{shortId:a}=e,i=(0,g.useTranslations)(),l=(0,b.useRouter)(),{isMobile:o}=(0,re.b)(),d=(0,th.ZP)(e=>e.isLogin),{isMyThread:c,setIsShowPptModal:u,setCoverUrl:p,setBesinessId:h,setBusinessType:m,setPreviewPPTData:x}=(0,tZ.Z)(),{pptDetail:y,setPptDetail:w,setPptStatus:j,pptModalType:C,setPptModalType:_,clearUpdateGeneratePptProgress:k,setGeneratePptProgress:N,generatePptProgress:E,isLoadingButton:S,setIsLoadingButton:T,pptGenerateStatusList:F}=(0,t8.Z)(),L=(0,rt.Z)(),M=async e=>{let{key:t}=e;if(console.log("handleBtnPress key",t),(0,t9.Dt)()&&!(0,t9.uv)(109)&&(L.default(i("ppt.generate_ppt_tip")),await (0,tD.gw)(3e3)),"generate"===t){if((0,tb.fk)(ty.U.GENERATE_PPT,{value:"generate"},!0),y&&(null==y?void 0:y.status)!==tD.nV.SUCCESS&&(null==y?void 0:y.status)!==tD.nV.TIMEOUT){L.default(i("ppt.generating_ppt_tip"));return}N(0),u(!0),h(a),_("generate"),j("init");return}if("preview"===t){if((0,tb.fk)(ty.U.PREVIEW_PPT,{value:"preview"},!0),(null==y?void 0:y.status)===tD.nV.TIMEOUT){L.default(i("ppt.generate_failure_tip"));return}if((null==y?void 0:y.status)!==tD.nV.SUCCESS){L.default(i("ppt.generating_ppt_tip"));return}N(100),j("preview"),h(a),m(tD.LB.THREAD),x(y),u(!0),k();return}},A=async()=>{var e;if(console.log("generate-ppt-mobile-button init",a),(0,tD.F_)(),w(null),N(0),u(!1),p(""),!a)return;let t=await (0,tD.OW)({threadId:a}),r=await (0,tI.AG)({threadId:a}),s=null==r?void 0:null===(e=r.data)||void 0===e?void 0:e.new_api_ppt;if(s){w({cover_url:(null==s?void 0:s.cover_url)||(null==t?void 0:t.coverUrl),ppt_url:(null==s?void 0:s.ppt_url)||(null==t?void 0:t.pptUrl),pdf_url:(null==s?void 0:s.pdf_url)||(null==t?void 0:t.pdfUrl),status:null==s?void 0:s.status}),(0,tD.bs)({threadId:a,isProgress:!0}),T(!1);return}let n=await (0,tI.TK)({threadId:a});if((0,tD.Qr)(n)){T(!1),w(null);return}if(!(null==n?void 0:n.pdf_url)){w({cover_url:(null==n?void 0:n.cover_url)||(null==t?void 0:t.coverUrl),ppt_url:(null==n?void 0:n.ppt_url)||(null==t?void 0:t.pptUrl),pdf_url:(null==n?void 0:n.pdf_url)||(null==t?void 0:t.pdfUrl),status:tD.nV.PROGRESS}),T(!1);return}(0,tD.bs)({threadId:a,expiryTime:Date.now()+348e4,pptUrl:null==n?void 0:n.ppt_url,pdfUrl:null==n?void 0:n.pdf_url,coverUrl:null==n?void 0:n.cover_url,progress:100}),w({cover_url:null==n?void 0:n.cover_url,ppt_url:null==n?void 0:n.ppt_url,pdf_url:null==n?void 0:n.pdf_url,status:tD.nV.SUCCESS}),T(!1)};return((0,v.useEffect)(()=>{c?(null==y?void 0:y.pdf_url)?_("preview"):_("generate"):(null==y?void 0:y.pdf_url)&&_("preview")},[c,y]),(0,v.useEffect)(()=>{A()},[a]),(0,v.useEffect)(()=>{let e=e=>{0!==E&&!(E>75)&&(e.preventDefault(),e.returnValue="",E<=75&&(0,tD.om)({threadId:a}))};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[E]),(0,v.useEffect)(()=>{let e=e=>{if(0!==E&&!(E>75)){if(!window.confirm(i("ppt.beforeunload_title")))throw l.events.emit("routeChangeError"),"cancal route change";E<=75&&(0,tD.om)({threadId:a})}};return l.events.on("routeChangeStart",e),()=>{l.events.off("routeChangeStart",e)}},[l.events,E]),S)?null:c&&d||(null==y?void 0:y.pdf_url)?(0,f.jsx)(f.Fragment,{children:(E>0&&E<100||(null==F?void 0:null===(t=F[a])||void 0===t?void 0:t.progress)&&(null==F?void 0:null===(r=F[a])||void 0===r?void 0:r.progress)>0&&(null==F?void 0:null===(s=F[a])||void 0===s?void 0:s.progress)<100)&&(null==y?void 0:y.status)&&(null==y?void 0:y.status)!==tD.nV.SUCCESS&&(null==y?void 0:y.status)!==tD.nV.TIMEOUT?(0,f.jsx)(t7.Z,{"aria-label":"Loading...",className:"mx-1",valueLabel:(0,f.jsx)(tQ.$U,{className:"w-3.5 h-3.5"}),showValueLabel:!0,size:"sm",value:E||(null==F?void 0:null===(n=F[a])||void 0===n?void 0:n.progress)||0,onClick:()=>{M({key:C})}}):(0,f.jsx)(tK.z,{id:"pptGenerate",variant:"secondary-default",onClick:()=>{M({key:C})},children:(0,f.jsx)(tQ.$U,{className:"w-4 h-4"})})}):null},rs=r(65105),rn=r(84706),ra=r(44634),ri=r(33451),rl=r(98795),ro=e=>{let{shortId:t,isMyThread:r}=e,{isMobile:s}=(0,re.b)(),n=(0,tP.Z)(e=>e.loading),{isShowPptModal:a,setIsShowPptModal:i,setIsShowPptBtnAnimate:l,isShowPptBtnAnimate:o,setIsRegenerate:d,setIsMyThread:c,setUiModalType:u,setSelectedOption:p,setIsPptGenerated:h,pptBtnKey:m,showPpt:x,setShowPpt:b,setIsShowSelectType:y,setGenerateKey:w,isGenerateLoading:j,setIsGenerateLoading:C,isGeneratedSuccess:_,setIsGeneratedSuccess:k,setCoverUrl:N,generateType:E,businessType:S,businessId:T,setBesinessId:F,setBusinessType:L,setPreviewPPTData:M}=(0,tZ.Z)(),{setPptModalType:A,setPptDetail:P,setGeneratePptProgress:Z,setPptStatus:I}=(0,t8.Z)(),D=(0,rt.Z)(),R=(0,th.ZP)(e=>e.isLogin),z=(0,to.V)(),O=(0,v.useRef)(null),B=(0,g.useLocale)(),q=(0,g.useTranslations)(),H=(0,ra.Z)(),{threads:V}=(0,tX.Z)();(0,rs.ZP)(e=>e.subscriptionInfo);let[U,W]=(0,v.useState)(!0),G=()=>{tR.Z.getState().setLoginModalVisible(!0)};(0,rs.GS)("pptUsage"),(0,rs.Oi)("pptUsage");let{threadPPTCacheData:$,setThreadPPTCacheData:Y,pptThreadBtnEntrance:X,setThreadPptBtnEntrance:J}=(0,t0.Z)(),K=async()=>{var e,t,r;let{subscriptionInfo:s}=rs.ZP.getState();if(!s)return!1;let n=null!==(r=null===(t=ri.Z.getState().pointsConfig)||void 0===t?void 0:null===(e=t.find(e=>"PPT_BASIC"===e.deduction_item))||void 0===e?void 0:e.points)&&void 0!==r?r:0,{balance:a,total_limit:i}=s.pointsUsage,{balance:l=0,total_limit:o=rl.a.LIMITED}=(null==s?void 0:s.pointsEnterpriseUsage)||{};return i===rl.a.UNLIMITED||!(a<n)||o===rl.a.UNLIMITED||!(l<n)||(rn.$.publish("showSubscriptionPlan",void 0),!1)},Q=async e=>{var n,a;let{key:i}=e;switch(p(new Set([i])),F(t),L(tD.LB.THREAD),i){case"generate":{if((0,tb.fk)(ty.U.GENERATE_PPT,{value:"generate"},!0),s){D.default(q("ppt.go_pc_generate_tip"));return}if(!R){G();return}if(!r&&R){D.default(q("ppt.go_my_threads_generate_tip"));return}C(!0);let e=await K();if(C(!1),!e)return;u("generate"),et();break}case"regenerate":if((0,tb.fk)(ty.U.REGENERATE_PPT,{value:"generate"},!0),s){D.default(q("ppt.go_pc_generate_tip"));return}if(!await K())return;u("regenerate"),et();break;case"preview":if((0,tb.fk)(ty.U.PREVIEW_PPT,{value:"preview"},!0),!(null==$?void 0:$.ppt_url)&&!(null==$?void 0:$.pdf_url)){D.default(q("ppt.generating_ppt_tip"));return}u("preview"),M($),et();break;case"edit":(0,tb.fk)(ty.U.EDIT_PPT,{value:"edit"},!0),u("edit"),et();break;case"download":(0,tb.fk)(r?ty.U.AUTHOR_DOWNLOAD_PPT:ty.U.DOWNLOAD_PPT,{value:"download"},!0),(null==$?void 0:$.ppt_url)?window.open(null==$?void 0:$.ppt_url):D.default(q("ppt.generating_ppt_tip"));break;case"share":{(0,tb.fk)(r?ty.U.AUTHOR_SHARE_PPT:ty.U.SHARE_PPT,{value:t},!0);let e=t3.Z.getState().current,s=new URL("".concat(location.origin,"/search/").concat(t));s.searchParams.append("showppt","1"),e&&s.searchParams.append("invite",e),z.copy(s.toString()),D.default(q("ppt.copied_url_success"));break}case"connectCanva":null===(n=O.current)||void 0===n||n.openCanvaEditor();break;case"revokeCanva":null===(a=O.current)||void 0===a||a.revokeCanva()}},ee=(0,v.useMemo)(()=>[1,2,3,4,5].includes((null==$?void 0:$.status)||-1)?q("ppt.edit_ppt_btn"):q("ppt.generate_ppt_btn"),[$]),et=()=>{d(!1),i(!0),F(t)},er=(0,v.useCallback)(async()=>{let e=(0,tD.qR)();if(P(null),N(""),W(!0),(0,t9.s2)()){W(!1);return}if(!B||t!==e)return;let r=await (0,tI.OQ)({thread_id:t,businessType:tD.LB.THREAD});if(r&&(null==r?void 0:r.status)){Y(r),h(!0);let e=tZ.Z.getState().allPptGenerateData;tZ.Z.getState().setAllPptGenerateData({...e,[t]:r})}W(!1)},[B,r,t]);return(0,v.useEffect)(()=>{if(!o)return;let e=setTimeout(()=>{l(!1)},100);return()=>{clearTimeout(e)}},[o,l]),(0,v.useEffect)(()=>{c(null!=r&&r)},[r,c]),(0,v.useEffect)(()=>{if((0,tM.E)("thread_query_uuid",location.href))return;er();let e=(0,tM.E)("showppt",location.href);b(e||""),"1"===e&&(null==$?void 0:$.status)&&(null==$?void 0:$.status)>0&&(i(!0),F(t),L(tD.LB.THREAD),u("preview"),Z(100),A("preview"),M($),I("preview"),(0,tb.fk)(r?ty.U.AUTHOR_SHARE_PPT:ty.U.SHARE_PPT,{value:t},!0))},[t,r,R,null==$?void 0:$.status,n]),(0,v.useEffect)(()=>{k(!1)},[]),(0,v.useEffect)(()=>{var e;let t=(0,tD.qR)()||(null==V?void 0:null===(e=V[0])||void 0===e?void 0:e.id);t&&_&&t===tZ.Z.getState().businessId&&(H.pollLastPpt({threadId:t,businessType:tD.LB.THREAD,onPollingResult:e=>{e&&Y(e)}}).then(e=>{Y(e)}),k(!1))},[_]),(0,v.useEffect)(()=>{let e=[{key:"preview",value:"ppt.preview_ppt_btn"},{key:"edit",value:"ppt.edit_ppt_btn"},{key:"generate",value:"ppt.generate_ppt_btn"},{key:"regenerate",value:"ppt.regenerate_btn"},{key:"download",value:"ppt.download_ppt_btn"}];if(!(null==$?void 0:$.status)){J([]);return}((null==$?void 0:$.status)===1||(null==$?void 0:$.status)===3||(null==$?void 0:$.status)===4||(null==$?void 0:$.status)===5)&&(e=(null==$?void 0:$.status)===4?[{key:"edit",value:"ppt.edit_ppt_btn"},{key:"regenerate",value:"ppt.regenerate_btn"},{key:"download",value:"ppt.download_ppt_btn"},{key:"connectCanva",value:"ppt.connect_to_canva"}]:[{key:"edit",value:"ppt.edit_ppt_btn"},{key:"regenerate",value:"ppt.regenerate_btn"}]),(null==$?void 0:$.status)===2&&(e=[{key:"preview",value:"ppt.preview_ppt_btn"},{key:"edit",value:"ppt.edit_ppt_btn"},{key:"regenerate",value:"ppt.regenerate_btn"},{key:"download",value:"ppt.download_ppt_btn"},{key:"connectCanva",value:"ppt.connect_to_canva"}]),r||(e=(e=R?[{key:"preview",value:"ppt.preview_ppt_btn"},{key:"download",value:"ppt.download_ppt_btn"}]:[{key:"preview",value:"ppt.preview_ppt_btn"},{key:"generate",value:"ppt.generate_ppt_btn"},{key:"download",value:"ppt.download_ppt_btn"}]).filter(e=>"regenerate"!==e.key)),(null==$?void 0:$.type)===1&&(e=e.filter(e=>"edit"!==e.key)),J([...e])},[null==$?void 0:$.status]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(tz.Z,{threadId:t,ref:O}),"1"===x||["en","ja","ko","zh-hant"].includes(null==B?void 0:B.toLocaleLowerCase())?(0,f.jsx)(f.Fragment,{children:n||U?null:(0,f.jsx)(tA.E.div,{initial:{scale:1},animate:o?{scale:1.1}:{scale:1},children:s?(0,f.jsx)(rr,{shortId:t}):(null==X?void 0:X.length)<=0?(0,f.jsx)(t4,{btnPpt:e=>{let{disableClick:t=!1,isShowSelectType:r}=e;return(0,f.jsxs)(tK.z,{id:"pptGenerate",className:"rounded-lg hover:bg-[#EDFAFF] dark:hover:bg-[#25364DCC] hover:text-bg-transparent",disabled:U,variant:s?"ghost":"outline-primary",size:s?"icon-sm":void 0,isLoading:j,onClick:t?void 0:()=>{if(r){w("generate"),y(!0);return}Q({key:(null==$?void 0:$.status)?"edit":"generate"})},children:[(0,f.jsx)(tQ.$U,{className:"w-[24px]"}),ee]})},login:G,menuChange:Q}):(0,f.jsx)(t2,{menuChange:Q})})}):null]})},rd=r(60635),rc=r(19527),ru=r(14386),rp=r(43378),rh=r(72696),rm=r(48518),rf=r(27378),rv=r(81555),rx=r(7363),rg=r(22313),rb=r(2854),ry=r(79057),rw=r(69996),rj=r(13263),rC=r(39344),r_=r(84660),rk=r(89039),rN=r(64412),rE=r(87921),rS=r(64105),rT=e=>{var t,r,s;let{threadId:n,queryCategory:a,title:i,isMyThread:l,topicSource:o,threadUid:d,template:c}=e,u=(0,g.useTranslations)(),p=(0,g.useLocale)(),{isApp:h,isMobile:m}=(0,re.b)(),x=(0,tu.Z)(e=>e.deleteItem),b=(0,tc.useRouter)(),y=(0,to.V)(),{isRtl:w}=tE(),j=(0,th.ZP)(e=>e.isLogin),[C,_]=(0,v.useState)(i),[k,N]=(0,v.useState)(!1),E=(0,tu.Z)(e=>e.UpdateList);(0,v.useRef)(null);let S=(0,v.useRef)(null),T=(0,v.useRef)(null),F=(0,v.useRef)(null),{threads:L,mindmapList:M}=(0,tX.Z)(),{getList:A,list:P}=(0,tj.Z)(),[Z,I]=(0,v.useState)(""),[D,R]=(0,v.useState)(!1),{isOpen:z,onOpen:O,onClose:B}=(0,e5.q)(),q=t3.Z.getState().current,{setIsTopicReply:H}=(0,tP.Z)(),[V,U]=(0,v.useState)(!1),W=()=>U(!0),G=()=>U(!1),{isOpen:$,onOpen:Y,onClose:X}=(0,e5.q)(),J=async e=>{try{await e()}catch(e){console.error("Action failed:",e)}},{handleSaveNotion:K}=(0,rk.H)({onSuccess:e=>{tg.Z.show({content:(0,f.jsx)(rw.E,{children:(0,f.jsxs)("div",{className:"flex items-center gap-20",children:[(0,f.jsxs)("span",{children:[" ",u("notion.save_success")]}),(0,f.jsx)("div",{className:"flex items-center border-1  text-[#0080FF] bg-[#fff] border-[#0694FF] cursor-pointer dark:bg-[#202531] py-[4px] px-[12px] rounded-[8px] ",onClick:()=>{window.open(e.data.url)},children:u("open")})," "]})}),duration:6e3,type:"custom"})},onFailed:e=>{tg.Z.error("".concat(u("notion.save_failed"),":").concat(e),6e3)}}),{exportToDriveAndDocs:Q}=(0,rE.IE)({onSuccess:e=>{tg.Z.close(),tg.Z.show({content:(0,f.jsx)(rw.E,{children:(0,f.jsxs)("div",{className:"flex items-center gap-20",children:[(0,f.jsxs)("span",{children:[" ",u("save_success")]}),(0,f.jsx)("div",{className:"flex items-center border-1  text-[#0080FF] bg-[#fff] border-[#0694FF] cursor-pointer dark:bg-[#202531] py-[4px] px-[12px] rounded-[8px] ",onClick:()=>{window.open(e)},children:u("open")})]})}),duration:6e3,type:"custom"})},onError:e=>{tg.Z.close(),tg.Z.error("".concat(u("notion.save_failed"),"  ").concat(e),6e3)}}),{isOpen:ee,onOpen:et,onClose:er}=(0,e5.q)(),{shareStatus:es,setShowThreadModel:en,setShareThreadId:ea,setShareData:ei}=(0,rc.Z)(),el=(0,th.ZP)(e=>e.userInfo),eo=(0,tP.Z)(e=>e.loading),ed=(0,tX.Z)(e=>e.isUpdateTitle),ec=(0,tX.Z)(e=>e.setIsUpdateTitle),eu=(0,tu.Z)(e=>e.list),{pptDetail:ep,setPptStatus:eh,setPptModalType:em,setGeneratePptProgress:ef}=(0,t8.Z)(),{setIsRegenerate:ev,setIsShowPptModal:ex,setBesinessId:eg,businessId:eb,businessType:ey,showPpt:ew,isShowPptModal:ej,generateType:eC}=(0,tZ.Z)(),e_=(0,rt.Z)(),ek=(0,v.useRef)(n),{topic:eN,setTopic:eE,selectedTopic:eS,setSelectedTopic:eT,topicLoading:eF,bindLoading:eL,checkCreateDefaultCollection:eM,onBindTopic:eA,onUnbindTopic:eP}=tF({threadId:n,defaultTopic:void 0}),eZ=(0,th.gQ)();(0,v.useEffect)(()=>{if(ee){var e;null===(e=F.current)||void 0===e||e.focus()}},[ee]),(0,v.useEffect)(()=>{if(void 0===j||!h||!n)return;let e=t3.Z.getState().current,t=new URL("".concat(location.origin,"/search/").concat(n));e&&t.searchParams.append("invite",e);let r=[{action:"share",params:{url:t.toString()}}];j&&(r.unshift({action:"bookmark",params:{type:"thread",topicId:(null==eN?void 0:eN.short_id)||"",threadId:n}}),r.push({action:"remove",params:{type:"thread",id:n},folded:!0}),["en","ja","ko","zh-hant"].includes(null==p?void 0:p.toLocaleLowerCase())&&r.push({action:"generatePPT",params:{threadId:n,status:(0,tD.nw)((null==ep?void 0:ep.status)||"")}})),(0,rd.rg)({title:C,options:r})},[eN,j,h,n,C,null==ep?void 0:ep.status,p]),(0,v.useEffect)(()=>(0,rd.j1)(e=>{if("bookmark"===e.action)eD();else if("share"===e.action){en(!0);let e=new URL("".concat(location.origin,"/search/").concat(n));q&&e.searchParams.append("invite",q),ei({type:"share",link:e.toString()})}else if("generatePPT"===e.action){let{status:t}=e.params;switch(t){case"progress":e_.default(u("ppt.generating_ppt_tip"));break;case"preview":eh("preview"),ev(!1),eg(n),ex(!0);break;default:ef(0),eg(n),ex(!0),em("generate"),eh("init")}}}),[eN,n]),(0,v.useEffect)(()=>{if(k){var e;null===(e=S.current)||void 0===e||e.focus()}},[k]),(0,v.useEffect)(()=>{if(ed){let e=eu.find(e=>e.short_id===n);e&&e.title&&_(e.title),ec(!1)}},[ed]),(0,v.useMemo)(()=>{var e,t,r;return!eZ||(null==el?void 0:null===(r=el.user_org_member)||void 0===r?void 0:null===(t=r.org_settings)||void 0===t?void 0:null===(e=t.share_permission_config)||void 0===e?void 0:e.personal_thread_share)},[null==el?void 0:null===(s=el.user_org_member)||void 0===s?void 0:null===(r=s.org_settings)||void 0===r?void 0:null===(t=r.share_permission_config)||void 0===t?void 0:t.personal_thread_share,eZ]);let eI=async()=>{if(!n)return;let e=await (0,tx.V0)(n);if(!e)return;let{topic:t}=e;ek.current===n&&t&&eE(t)},eD=()=>{eN?eP().then(X):((0,tb.fk)(ty.U.THREAD_FAVORITE,{id:n},!0),eM().then(()=>{Y()}))},eR=e=>{eT(e),P.some(t=>t.short_id===e.short_id)||A(),eA(e).then(()=>{eE(e)})},ez=async()=>{n&&(await x(n),er(),h?(0,rd.WU)():b.push("/search"))},eO=()=>{rm.Z.getState().setCurrentData({query:L[0].query,threadId:L[0].short_id,hasProSearchThread:!!L.find(e=>"concise"!==e.mode)})},eB=(0,v.useMemo)(()=>j&&l,[j,l]),eq=async()=>{if(!Z){e_.error(u("topic.title_empty"));return}if(Z===C){N(!1);return}R(!0);try{n&&Z&&(await (0,tx.qk)(n,Z)?(_(Z),R(!1),N(!1),E(),G()):(tg.Z.error(u("titleFailed")),R(!1)))}catch(e){}finally{R(!1)}};(0,v.useEffect)(()=>{i&&_(i)},[i]),(0,v.useEffect)(()=>rn.$.subscribe("updateCurrentThreadTopic",e=>{eE(e.topic)}),[]),(0,v.useEffect)(()=>{if(ek.current=n,!n){eE(void 0);return}eI()},[n]),(0,v.useEffect)(()=>{if(el){if(!eN&&"topic"===o&&!n){H(!0);return}eN&&d===(null==el?void 0:el.uid)&&"topic"===o?H(!0):H(!1)}},[eN,el,o,n,d]);let[eH,eV]=(0,v.useState)(void 0);(0,v.useEffect)(()=>{n&&ea(n)},[n]);let[eU,eW]=(0,v.useState)(!0),eG=(0,v.useRef)(null),e$=(0,v.useRef)(null),eX=(0,v.useRef)(null),eJ=(0,v.useCallback)(()=>{if(!e$.current||!eX.current)return;let e=eX.current.getBoundingClientRect(),t=e$.current.getBoundingClientRect(),r=e.width,s=t.left-(e.left+r/2),n=s<95;if(eG.current){let e=eG.current.querySelector(".left-topic-container");e&&(e.style.maxWidth="".concat(n?150:Math.max(150,Math.min(Math.max(0,(s-20)*2),600)),"px"),e.style.width="100%")}eW(!n)},[eN,C,eB]);(0,v.useEffect)(()=>{let e=setTimeout(()=>{eJ()},100),t=()=>{eJ()};window.addEventListener("resize",t);let r=new ResizeObserver(()=>{setTimeout(eJ,50)});return eG.current&&r.observe(eG.current),e$.current&&r.observe(e$.current),eX.current&&r.observe(eX.current),()=>{clearTimeout(e),window.removeEventListener("resize",t),r.disconnect()}},[eJ,C,eB,eN]),(0,v.useEffect)(()=>{V&&setTimeout(()=>{var e;let t=null===(e=T.current)||void 0===e?void 0:e.value.length;T.current&&(T.current.focus(),T.current.setSelectionRange(t||0,t||0))},100)},[V]);let eK=(0,v.useCallback)(()=>{let e=new Map,t=1;L.forEach(r=>{(r.answer.match(/\[(\d+)\]/g)||[]).forEach(s=>{let n=parseInt(s.replace(/[\[\]]/g,"")),a=r.recall_contexts[n-1];a&&!e.has(a.link)&&e.set(a.link,{number:t++,text:a.title||a.link,originalNumber:n})})});let r=L.map(t=>{var r,s,n,a,i,l,o;let d=t.answer;d=(d="".replace("",d)).replace(/((\[\d+\][ \t]*)+)/g,e=>{let t=e.match(/\[\d+\]/g);return t&&t.length>3?t.slice(0,3).join(" "):e});let c=M?null===(a=M.find(e=>e.message_id===t.id))||void 0===a?void 0:null===(n=a.images)||void 0===n?void 0:null===(s=n.covers)||void 0===s?void 0:null===(r=s.find(e=>"png"===e.type))||void 0===r?void 0:r.path:"";d=d.replace(/!\[([^\]]*)\]|(\[\d+\])/g,(r,s,n)=>{if(void 0!==s)return r;let a=parseInt(n.replace(/[\[\]]/g,"")),i=t.recall_contexts[Number(a)-1];if(i){let t=e.get(i.link);if(t)return"[[".concat(t.number,"](").concat(i.link,")]")}return r});let u=null===(i=ry.Z.getState().allGraphicData)||void 0===i?void 0:i[t.id],p="",h=(null==u?void 0:null===(o=u.images)||void 0===o?void 0:null===(l=o.find(e=>"png"===e.type))||void 0===l?void 0:l.path)||"";if(h){let e=new URL(h);e.searchParams.set("smart_art_id",u.smart_art_id),p=e.toString()}return"\n# ".concat(t.query,"\n\n").concat(c?"![mindmap](".concat(c,")"):"","\n\n").concat(d,"\n\n").concat(h?"![graphic](".concat(p,")"):"","\n")}).join("\n\n");return e.size>0&&(r+="\n\n## 参考资料\n\n",Array.from(e.entries()).sort((e,t)=>e[1].number-t[1].number).forEach(e=>{let[t,s]=e;r+="".concat(s.number,". [").concat(s.text,"](").concat(t,") \n")})),r},[M,L]),eQ=(0,v.useCallback)(()=>{let e=eK();Q((null==C?void 0:C.slice(0,100))||"",e)},[eK,C]),e0=async()=>{K({content:eK(),sources:[],title:(null==C?void 0:C.slice(0,100))||"",threadId:n})},e1=(0,v.useCallback)(async e=>{let t=eK(),r=(null==C?void 0:C.slice(0,100))||"",s={SAVE_DOC:u("message.saving_to_felo_docs"),GOOGLE_DRIVE:u("saving_to_google_docs"),SAVE_NOTION:u("message.saving_to_notion")}[e]||u("topic.creating");tg.Z.close(),tg.Z.show({content:(0,f.jsx)(rw.E,{children:s}),duration:99999,type:"custom"});let n=el.language&&"auto"!==el.language?el.language:p;try{switch(e){case"DOCX":(0,rj.zC)({file_type:"DOCX",markdown:t,language:n},()=>{tg.Z.close()},r);break;case"MD":(0,tN.qE)(t,r,()=>{tg.Z.close()});break;case"PDF":(0,rj.zC)({file_type:"PDF",markdown:t,language:n},()=>{tg.Z.close()},r);break;case"TXT":(0,tN.rb)(t,r,()=>{tg.Z.close()});break;case"SAVE_DOC":eO();break;case"GOOGLE_DRIVE":eQ();break;case"SAVE_NOTION":e0()}}catch(e){console.error("Error exporting document:",e),tg.Z.error("".concat(e),6e3)}},[L]),e2=m?null:(0,f.jsxs)("div",{className:"left-topic-container flex items-center space-x-1 min-w-[150px]",children:[eN?(0,f.jsxs)(tv(),{href:"/topic/".concat(eN.short_id),className:"text-sm text-primary flex items-center truncate m-1 min-w-0",children:[(0,f.jsx)(e7.Z,{className:"mr-2 flex-shrink-0",size:16}),(0,f.jsx)("span",{className:"truncate",children:eN.name})]}):eB?(0,f.jsx)(tK.z,{disabled:!n,variant:"secondary-default",className:"rounded-2xl flex-shrink-0",onClick:e=>{if(!n)return;eD();let t=e.target;w?eV(window.innerWidth-t.getBoundingClientRect().right):eV(t.getBoundingClientRect().left||void 0)},children:eF?(0,f.jsx)(e8.Z,{className:"animate-spin"}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(e9.Z,{size:16}),(0,f.jsx)("span",{className:"hidden sm:inline",children:u("topic.add_topic")})]})}):null,eB&&(0,f.jsx)("div",{className:"pl-2 text-[#D3D9E4] dark:text-[#454E5D] flex-shrink-0",children:(0,f.jsx)(rb.q0,{})}),(0,f.jsx)("span",{className:"text-sm group flex-1 min-w-0",children:(0,f.jsxs)("div",{className:"ml-2 px-2 py-1 rounded-lg inline-flex items-center hover:bg-[#F6F7F9] dark:hover:bg-[#353B46] w-full",children:[(0,f.jsx)("div",{className:"text-[#30394A] dark:text-white whitespace-nowrap overflow-hidden text-ellipsis flex-1",children:C}),l&&(0,f.jsx)(te.Z,{size:16,className:"flex-shrink-0 opacity-0 group-hover:opacity-100 ml-2 text-[#8896AA] dark:text-[#B9BFCA] cursor-pointer",onClick:()=>{I(C||""),W()}})]})})]});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(tm.Z,{children:(0,f.jsxs)("div",{ref:eX,className:"flex items-center w-full relative h-full",children:[(0,f.jsx)("div",{ref:eG,className:(0,eY.cn)("absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 pointer-events-none transition-opacity duration-200",eU?"opacity-100":"opacity-0"),style:{position:"absolute"},children:(0,f.jsx)("div",{className:"pointer-events-auto",children:e2})}),(0,f.jsx)("div",{className:"flex items-center",children:m&&!h&&(0,f.jsx)(tL.Z,{className:"mr-2",hideIcon:!0})}),(0,f.jsx)("div",{className:"flex-1"}),(0,f.jsxs)("div",{ref:e$,className:"flex items-center gap-1 md:gap-2",children:[eB&&m&&(0,f.jsx)(tK.z,{className:"rounded-lg h-8",variant:"secondary-default",onClick:()=>{n&&(eD(),eV(void 0))},children:eF?(0,f.jsx)(e8.Z,{className:"animate-spin w-4 h-4"}):eN?(0,f.jsx)(tr,{fill:"currentColor",size:16}):(0,f.jsx)(tr,{size:16})}),(null==c?void 0:c.template_type)!==rv.W.CUSTOM&&(0,f.jsx)(ro,{shortId:n||"",isMyThread:l,type:"primary"}),!eo&&(0,f.jsxs)(f.Fragment,{children:[!m&&"PUBLIC"===es&&(0,f.jsx)(e6.e,{isOpen:y.copied,placement:"left",content:(0,f.jsx)("div",{className:"p-2 bg-black bg-opacity-70 text-white rounded-lg dark:bg-white dark:text-black",children:u("shareThread.copySuccess")}),classNames:{content:["p-0"]},children:(0,f.jsx)(tK.z,{className:"h-8",variant:"secondary-default",onClick:()=>{let e=t3.Z.getState().current,t=new URL("".concat(location.origin,"/search/").concat(n));e&&t.searchParams.append("invite",e),y.copy(t.toString()),(0,tb.fk)(ty.U.THREAD_COPYLINK,{id:n},!0)},children:y.copied?(0,f.jsx)(ts.Z,{size:16}):(0,f.jsx)(tn.Z,{size:16})})}),(0,f.jsxs)(tK.z,{variant:"secondary-default",className:"h-8",onClick:()=>{if(h&&rf.Z.getState().features.includes("shareThread"))(0,rd.vg)({shortId:n});else{en(!0);let e=new URL("".concat(location.origin,"/search/").concat(n));q&&e.searchParams.append("invite",q),ei({type:"share",link:e.toString()})}(0,tb.fk)(ty.U.THREAD_SHARE_CLICK,{id:n},!0)},children:["PRIVATE"!==es||m?(0,f.jsx)(ru.u_,{className:"w-4 h-4"}):(0,f.jsx)(ru.aL,{className:"w-4 h-4"}),!m&&u("topic.share")]})]}),"1"===ew||ej&&"agent"!==eC?m?(0,f.jsx)(rx.Z,{shortId:eb}):(0,f.jsx)(rg.Z,{shortId:eb,businessType:ey}):null,!eo&&(0,f.jsxs)(rh.h_,{children:[(0,f.jsx)(rh.$F,{asChild:!0,children:(0,f.jsx)(tK.z,{variant:"secondary-default",className:"h-8",children:(0,f.jsx)(ta.Z,{size:16})})}),(0,f.jsxs)(rh.AW,{align:"end",className:"rounded-2xl p-2",children:[!m&&(0,f.jsxs)(rh.Xi,{onClick:()=>J(eO),className:"cursor-pointer",children:[(0,f.jsx)(rb.EO,{className:"w-5 h-5"}),u("rewrite_to_docs.title")]}),!m&&(0,f.jsxs)(rh.Xi,{onClick:()=>J(()=>e1("GOOGLE_DRIVE")),className:"cursor-pointer",children:[(0,f.jsx)(r_.X,{className:"w-5 h-5"}),u("save_google_docs")]}),(0,f.jsxs)(rh.Xi,{onClick:()=>J(()=>e1("SAVE_NOTION")),className:"cursor-pointer",children:[(0,f.jsx)(rC.oDT,{}),u("notion.save_to_notion")]}),!m&&(0,f.jsxs)(rh.Ph,{children:[(0,f.jsxs)(rh.kt,{className:"cursor-pointer",children:[(0,f.jsx)(ti.Z,{className:"w-5 h-5"}),u("download.label")]}),(0,f.jsxs)(rh.TG,{className:"mr-2 rounded-2xl p-2",children:[(0,f.jsxs)(rh.Xi,{onClick:()=>J(()=>e1("PDF")),className:"cursor-pointer",children:[(0,f.jsx)("span",{children:(0,f.jsx)(rN.Q,{fileName:"pdf",w:5,h:5})}),u("download_pdf")]}),(0,f.jsxs)(rh.Xi,{onClick:()=>J(()=>e1("TXT")),className:"cursor-pointer",children:[(0,f.jsx)("span",{children:(0,f.jsx)(rN.Q,{fileName:"txt",w:5,h:5})}),u("download_txt")]}),(0,f.jsxs)(rh.Xi,{onClick:()=>J(()=>e1("MD")),className:"cursor-pointer",children:[(0,f.jsx)("span",{children:(0,f.jsx)(rN.Q,{fileName:"md",w:5,h:5})}),u("download_md")]}),(0,f.jsxs)(rh.Xi,{onClick:()=>J(()=>e1("DOCX")),className:"cursor-pointer",children:[(0,f.jsx)("span",{children:(0,f.jsx)(rN.Q,{fileName:"docx",w:5,h:5})}),u("download_word")]})]})]}),l&&eN&&eB&&(0,f.jsxs)(rh.Xi,{onClick:()=>J(eP),className:"cursor-pointer",children:[(0,f.jsx)(tl,{className:"w-5 h-5"}),u("topic.move_out")]}),l&&(0,f.jsxs)(rh.Xi,{className:"!text-[#D14625] !dark:text-[#E68054] cursor-pointer",onClick:()=>J(et),children:[(0,f.jsx)(tp.vW,{className:"w-5 h-5"}),u("topic.delete_post")]})]})]}),(0,f.jsx)(rS.Z,{isOpen:!1})]})]})}),(0,f.jsx)(rp.Vq,{open:ee,onOpenChange:er,children:(0,f.jsxs)(rp.cZ,{onOpenAutoFocus:e=>e.preventDefault(),children:[(0,f.jsx)(rp.fK,{children:(0,f.jsx)(rp.$N,{children:u("topic.sure_delete_posts")})}),(0,f.jsx)(rp.a7,{children:(null==eN?void 0:eN.name)?u("topic.delete_topic_prompt"):u("topic.delete_posts_tip")}),(0,f.jsxs)(rp.cN,{children:[(0,f.jsx)(tK.z,{variant:"secondary",onClick:er,children:u("cancel")}),(0,f.jsx)(tK.z,{variant:"destructive",ref:F,onClick:ez,children:u("confirm")})]})]})}),(0,f.jsx)(tS,{positionX:eH||0,loading:eL,selectedTopic:eS,isOpen:$,onClose:X,onCreateNew:O,onSelect:eR,onCancel:()=>{eP().then(X)}}),(0,f.jsx)(td.Z,{isOpen:z,onClose:B,onCreateSuccess:eR}),(0,f.jsx)(rp.Vq,{open:V,onOpenChange:U,children:(0,f.jsxs)(rp.cZ,{hideCloseButton:!0,className:"max-w-xl rounded-2xl",children:[(0,f.jsx)(rp.fK,{children:(0,f.jsx)(rp.$N,{children:u("edit_title")})}),(0,f.jsx)("div",{className:"py-4 px-4",children:(0,f.jsx)(e4.Y,{ref:T,value:Z,onChange:e=>{I(e.target.value)},size:"lg",classNames:{inputWrapper:"!bg-background border border-[#0694FF] dark:border-[#0080FF] hover:bg-background focus:bg-background"},minRows:1,maxRows:8,spellCheck:!1,maxLength:tJ.N2})}),(0,f.jsxs)(rp.cN,{children:[(0,f.jsx)(tK.z,{variant:"simple",className:"py-5 px-6 rounded-lg border-[#E6E9EF] text-[#30394A] dark:bg-[#202531] dark:border-[#353B46] dark:text-[#FFFFFF] dark:hover:border-[#353B46] dark:hover:text-white",onClick:G,children:u("cancel")}),(0,f.jsx)(tK.z,{ref:F,variant:"default",onClick:eq,className:"py-5 px-6 ",disabled:D,children:D?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(e8.Z,{className:"mr-2 h-4 w-4 animate-spin"}),u("save")]}):u("save")})]})]})})]})};let rF=e=>{let{queryCategory:t,threadId:r,title:s,isMyThread:n,topicSource:a,threadUid:i,template:l,ssrShortId:o,isMounted:d=!0,isFeloIframe:c=!1}=e;return!d||c&&d?null:(0,f.jsx)(rT,{queryCategory:t,threadId:r,title:s,isMyThread:n,topicSource:a,threadUid:i,template:l},o)};var rL=r(50379),rM=r(37639);let rA=(0,tt.Z)("git-merge",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]]);var rP=e=>{let{threadId:t}=e,r=(0,g.useTranslations)(),s=(0,b.useRouter)(),[n,a]=(0,v.useState)();(0,v.useEffect)(()=>(i(),()=>{a(void 0)}),[t]);let i=async()=>{if(!t)return;let e=await (0,tx.KZ)(t);e&&a(e.messages[0])};return(0,f.jsxs)("section",{className:"transition-all bg-[#F9FAFB] hover:bg-[#f1f1f1] dark:bg-[#20232A] dark:hover:bg-[#31333a] border border-[#dbe2e9] dark:border-[#343b4d] rounded-xl p-4 my-6 cursor-pointer",onClick:()=>{n&&s.push((0,rM.Y8)(t),void 0,{scroll:!0})},children:[(0,f.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,f.jsx)(rA,{size:16}),(0,f.jsx)("span",{children:r("follow_up_to")})]}),(0,f.jsx)("div",{className:"mt-2 line-clamp-1 break-all light font-display text-lg font-medium text-textOff dark:text-textOffDark selection:bg-super/50 selection:text-textMain dark:selection:bg-superDuper/10 dark:selection:text-superDark",children:null==n?void 0:n.query})]})},rZ=r(40176),rI=r(14701),rD=r.n(rI);r(16832);var rR=r(29463);let rz=e=>{let{skeleton:t,markdown:r,sources:s,rid:n,loading:a,isVisible:i,messageId:l,isDocument:o,reflectionAnswer:d="",reflectionAnswerStart:c,template:u,isShowSkeleton:p=!0,thread:h,threadId:m}=e;(0,g.useTranslations)();let[x,b]=(0,v.useState)(!1),[y,w]=(0,v.useState)(!0);(0,v.useEffect)(()=>{if(y&&r){let e=j(r.slice(0,30));b(e),(e||r.length>30)&&w(!1)}},[r,y]);let j=e=>/[\u0591-\u07FF\u200F\u202B\u202E\uFB1D-\uFDFD\uFE70-\uFEFC]/.test(e);return r?(0,f.jsx)("div",{className:(0,t_.cn)("prose prose-md dark:prose-invert max-w-full",rD().prose),dir:x?"rtl":"auto",children:(0,f.jsx)(rR.Z,{sources:s,rid:n,loading:a,isVisible:i,isDocument:o,thread:h,threadId:m,children:c?"".concat(r,"<div id='answer_reflection_start'></div>").concat(d):d?"".concat(r,"<div id='answer_reflection'></div>").concat(d):r})}):p?"single"===t?(null==u?void 0:u.template_type)===rv.W.CUSTOM?null:(0,f.jsx)(rZ.O,{className:"max-w-sm h-8 bg-zinc-200 dark:bg-stone-900/30"}):(0,f.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,f.jsx)(rZ.O,{className:"max-w-sm h-8 bg-zinc-200 dark:bg-stone-900/30"}),(0,f.jsx)(rZ.O,{className:"max-w-lg h-8 bg-zinc-200 dark:bg-stone-900/30"}),(0,f.jsx)(rZ.O,{className:"max-w-2xl h-8 bg-zinc-200 dark:bg-stone-900/30"}),(0,f.jsx)(rZ.O,{className:"max-w-lg h-8 bg-zinc-200 dark:bg-stone-900/30"}),(0,f.jsx)(rZ.O,{className:"max-w-xl h-8 bg-zinc-200 dark:bg-stone-900/30"})]}):(0,f.jsx)(f.Fragment,{})};var rO=r(66302);let rB=(0,tt.Z)("dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);var rq=v.memo(e=>{let{disabled:t,shortId:r,isFollowUpNew:s,query:n,queryCategory:a}=e,i=(0,b.useRouter)(),l=(0,rO.Z)(),{addThread:o}=(0,tX.Z)();return l?(0,f.jsx)("p",{className:(0,t_.cn)("font-normal text-[#4B5F7E] dark:text-[#F3F5F7] transition-colors text-base","group flex items-center justify-between gap-2 py-2 cursor-pointer",t?"cursor-not-allowed opacity-50":"hover:text-[#0080FF] dark:hover:text-[#0694FF]"),onClick:e=>{e.preventDefault(),t||(r?s?i.push((0,rM.MD)({query:n,queryFrom:"related",fromShortId:r}),void 0,{scroll:!0}):o({_local_id:(0,j.x0)(),query:n,short_id:r,query_from:"related"}):i.push((0,rM.MD)({query:n,queryFrom:"related"})))},children:(0,f.jsxs)("span",{className:"flex items-center gap-2",children:[(0,f.jsx)(rB,{size:24,className:"text-[#ACB9CD] dark:text-[#737F96]"})," ",n]})}):null});let rH=e=>{let{title:t,extra:r,content:s}=e;return(0,f.jsxs)("div",{className:"flex flex-col gap-6 w-full",children:[(0,f.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-primary",children:[(0,f.jsx)("span",{className:"text-lg flex items-center gap-2",children:t}),r]}),s]})},rV=e=>{let{disabled:t,shortId:r,relates:s,isFollowUpNew:n,queryCategory:a}=e,i=(0,g.useTranslations)();return(0,f.jsx)(rH,{title:(0,f.jsx)(f.Fragment,{}),content:(0,f.jsx)("div",{className:"flex flex-col",children:null!==s?s.length>0?s.map((e,s)=>{let{question:i}=e;return(0,f.jsx)(v.Fragment,{children:(0,f.jsx)(rq,{disabled:t,query:i,shortId:r,isFollowUpNew:n,queryCategory:a})},s)}):(0,f.jsx)("div",{className:"text-sm",children:i("no_related_list")}):(0,f.jsxs)("section",{className:"flex flex-col gap-2",children:[(0,f.jsx)(rZ.O,{className:"w-full h-8 bg-zinc-200 dark:bg-stone-900/30"}),(0,f.jsx)(rZ.O,{className:"w-full h-8 bg-zinc-200 dark:bg-stone-900/30"}),(0,f.jsx)(rZ.O,{className:"w-full h-8 bg-zinc-200 dark:bg-stone-900/30"})]})})})};var rU=r(438);let rW=(0,tt.Z)("notepad-text",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"16",height:"18",x:"4",y:"4",rx:"2",key:"1u9h20"}],["path",{d:"M8 10h6",key:"3oa6kw"}],["path",{d:"M8 14h8",key:"1fgep2"}],["path",{d:"M8 18h5",key:"17enja"}]]);var rG=r(82277),r$=r(31442),rY=r(97571),rX=r(93734);let rJ=()=>(0,f.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"230",height:"117",viewBox:"0 0 230 117",fill:"none",children:[(0,f.jsx)("path",{d:"M17.5 116L217.5 116",stroke:"#101828",strokeWidth:"1.5",strokeLinecap:"round"}),(0,f.jsx)("path",{d:"M222.5 116L228.5 116",stroke:"#101828",strokeWidth:"1.5",strokeLinecap:"round"}),(0,f.jsx)("path",{d:"M1.5 116L13.5 116",stroke:"#101828",strokeWidth:"1.5",strokeLinecap:"round"}),(0,f.jsx)("path",{d:"M181.248 15.5134H51.7273C50.5918 15.5134 49.6714 16.4339 49.6714 17.5693V80.2739C49.6714 81.4094 50.5918 82.3298 51.7273 82.3298H181.248C182.384 82.3298 183.304 81.4094 183.304 80.2739V17.5693C183.304 16.4339 182.384 15.5134 181.248 15.5134Z",fill:"#0080FF",stroke:"#101828",strokeWidth:"1.02795"}),(0,f.jsx)("path",{d:"M169.632 26.9738L61.961 19.4447C60.8284 19.3655 59.8459 20.2195 59.7667 21.3522L55.4644 82.8786C55.3852 84.0113 56.2392 84.9937 57.3719 85.0729L165.043 92.602C166.176 92.6812 167.158 91.8272 167.238 90.6946L171.54 29.1681C171.619 28.0354 170.765 27.053 169.632 26.9738Z",fill:"#EDF0F3",stroke:"#101828",strokeWidth:"1.02795"}),(0,f.jsx)("path",{d:"M171.958 14.0698L64.6154 25.352C63.4862 25.4707 62.667 26.4823 62.7857 27.6115L69.2327 88.9504C69.3514 90.0796 70.363 90.8988 71.4922 90.7801L178.835 79.4979C179.964 79.3792 180.784 78.3676 180.665 77.2384L174.218 15.8995C174.099 14.7703 173.088 13.9511 171.958 14.0698Z",fill:"white",stroke:"#101828",strokeWidth:"1.02795"}),(0,f.jsx)("path",{d:"M180.319 25.698H49.7699C46.6475 25.698 44.1162 28.2292 44.1162 31.3517V110.503C44.1162 113.626 46.6475 116.157 49.7699 116.157H180.319C183.441 116.157 185.973 113.626 185.973 110.503V31.3517C185.973 28.2292 183.441 25.698 180.319 25.698Z",fill:"white",stroke:"#101828",strokeWidth:"1.02795"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M180.833 25.698C182.252 25.698 183.537 26.2733 184.467 27.2034C185.397 28.1335 185.973 29.4184 185.973 30.8377V34.6873H44.1162V30.8377C44.1162 29.4184 44.6915 28.1335 45.6216 27.2034C46.5517 26.2733 47.8366 25.698 49.2559 25.698H180.833Z",fill:"#EDF0F3",stroke:"#101828",strokeWidth:"1.02795"}),(0,f.jsx)("path",{d:"M52.8518 32.3801C53.9872 32.3801 54.9077 31.4596 54.9077 30.3242C54.9077 29.1888 53.9872 28.2683 52.8518 28.2683C51.7164 28.2683 50.7959 29.1888 50.7959 30.3242C50.7959 31.4596 51.7164 32.3801 52.8518 32.3801Z",fill:"#0080FF",stroke:"#101828",strokeWidth:"1.02795"}),(0,f.jsx)("path",{d:"M63.1306 32.3801C64.266 32.3801 65.1865 31.4596 65.1865 30.3242C65.1865 29.1888 64.266 28.2683 63.1306 28.2683C61.9952 28.2683 61.0747 29.1888 61.0747 30.3242C61.0747 31.4596 61.9952 32.3801 63.1306 32.3801Z",fill:"#0080FF",stroke:"#101828",strokeWidth:"1.02795"}),(0,f.jsx)("path",{d:"M73.4109 32.3801C74.5463 32.3801 75.4668 31.4596 75.4668 30.3242C75.4668 29.1888 74.5463 28.2683 73.4109 28.2683C72.2754 28.2683 71.355 29.1888 71.355 30.3242C71.355 31.4596 72.2754 32.3801 73.4109 32.3801Z",fill:"#0080FF",stroke:"#101828",strokeWidth:"1.02795"}),(0,f.jsx)("path",{d:"M204.888 103.274C204.91 103.165 205.066 103.165 205.089 103.274L205.559 105.517C205.567 105.553 205.593 105.583 205.628 105.594L207.773 106.295C207.867 106.325 207.867 106.459 207.773 106.49L205.628 107.19C205.593 107.202 205.567 107.231 205.559 107.267L205.089 109.51C205.066 109.619 204.91 109.619 204.888 109.51L204.417 107.267C204.409 107.231 204.383 107.202 204.348 107.19L202.203 106.49C202.109 106.459 202.109 106.325 202.204 106.295L204.348 105.594C204.383 105.583 204.409 105.553 204.417 105.517L204.888 103.274Z",fill:"#FF69B1",stroke:"#101828",strokeWidth:"0.513973"}),(0,f.jsx)("path",{d:"M148.866 44.6903C148.888 44.5809 149.045 44.5809 149.067 44.6903L149.732 47.918C149.74 47.954 149.766 47.9832 149.801 47.9948L152.785 48.9869C152.879 49.018 152.879 49.1508 152.785 49.1819L149.801 50.174C149.766 50.1856 149.74 50.2148 149.732 50.2508L149.067 53.4785C149.045 53.5879 148.888 53.5879 148.866 53.4785L148.201 50.2508C148.193 50.2148 148.167 50.1856 148.132 50.174L145.148 49.1819C145.054 49.1508 145.054 49.018 145.148 48.9869L148.132 47.9948C148.167 47.9832 148.193 47.954 148.201 47.918L148.866 44.6903Z",fill:"#FF7ABA",stroke:"#101828",strokeWidth:"0.513973"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M127.262 2.93709L125.972 2.61288C125.876 2.58859 125.817 2.49059 125.841 2.39399C125.858 2.32957 125.908 2.27926 125.972 2.26306L127.262 1.93885C127.326 1.92265 127.377 1.87235 127.393 1.80792L127.717 0.518496C127.741 0.421897 127.839 0.363278 127.936 0.387567C128 0.403766 128.051 0.454071 128.067 0.518496L128.391 1.80792C128.407 1.87235 128.457 1.92265 128.522 1.93885L129.811 2.26306C129.908 2.28735 129.967 2.38535 129.942 2.48195C129.926 2.54637 129.876 2.59668 129.811 2.61288L128.522 2.93709C128.457 2.95329 128.407 3.00359 128.391 3.06802L128.067 4.35744C128.042 4.45404 127.944 4.51266 127.848 4.48837C127.783 4.47217 127.733 4.42187 127.717 4.35744L127.393 3.06802C127.377 3.00359 127.326 2.95329 127.262 2.93709Z",fill:"#EDFF1B",stroke:"#101828",strokeWidth:"0.513973"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M76.065 100.778L74.1309 100.252C73.986 100.212 73.8981 100.053 73.9345 99.8958C73.9588 99.7911 74.0343 99.7094 74.1309 99.6831L76.065 99.1562C76.1617 99.1299 76.2371 99.0481 76.2614 98.9435L76.7477 96.8481C76.7842 96.6912 76.9312 96.5959 77.0761 96.6354C77.1727 96.6617 77.2482 96.7434 77.2725 96.8481L77.7588 98.9435C77.7831 99.0481 77.8585 99.1299 77.9552 99.1562L79.8893 99.6831C80.0342 99.7225 80.1221 99.8818 80.0857 100.039C80.0614 100.143 79.9859 100.225 79.8893 100.252L77.9552 100.778C77.8585 100.805 77.7831 100.886 77.7588 100.991L77.2725 103.086C77.236 103.243 77.089 103.339 76.9441 103.299C76.8475 103.273 76.772 103.191 76.7477 103.086L76.2614 100.991C76.2371 100.886 76.1617 100.805 76.065 100.778Z",fill:"#EDFF1B",stroke:"#101828",strokeWidth:"0.513973"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M165.516 104.369L163.099 103.761C162.917 103.716 162.808 103.532 162.853 103.351C162.883 103.23 162.978 103.136 163.099 103.105L165.516 102.497C165.637 102.467 165.731 102.373 165.762 102.252L166.37 99.8341C166.415 99.653 166.599 99.5431 166.78 99.5887C166.901 99.619 166.995 99.7133 167.026 99.8341L167.633 102.252C167.664 102.373 167.758 102.467 167.879 102.497L170.297 103.105C170.478 103.151 170.588 103.334 170.542 103.516C170.512 103.636 170.417 103.731 170.297 103.761L167.879 104.369C167.758 104.399 167.664 104.494 167.633 104.615L167.026 107.032C166.98 107.213 166.796 107.323 166.615 107.278C166.494 107.247 166.4 107.153 166.37 107.032L165.762 104.615C165.731 104.494 165.637 104.399 165.516 104.369Z",fill:"white"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.5689 89.321L21.796 88.8752C21.6631 88.8418 21.5825 88.7071 21.6159 88.5742C21.6382 88.4857 21.7074 88.4165 21.796 88.3942L23.5689 87.9484C23.6575 87.9261 23.7267 87.857 23.749 87.7684L24.1947 85.9954C24.2281 85.8626 24.3629 85.782 24.4957 85.8154C24.5843 85.8377 24.6535 85.9068 24.6757 85.9954L25.1215 87.7684C25.1438 87.857 25.213 87.9261 25.3016 87.9484L27.0745 88.3942C27.2073 88.4276 27.2879 88.5624 27.2545 88.6952C27.2323 88.7838 27.1631 88.8529 27.0745 88.8752L25.3016 89.321C25.213 89.3433 25.1438 89.4124 25.1215 89.501L24.6757 91.274C24.6423 91.4068 24.5076 91.4874 24.3748 91.454C24.2862 91.4317 24.217 91.3626 24.1947 91.274L23.749 89.501C23.7267 89.4124 23.6575 89.3433 23.5689 89.321Z",fill:"#FF8D3B",stroke:"#101828",strokeWidth:"0.513973"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M59.923 71.9008L57.3441 71.2524C57.1509 71.2038 57.0337 71.0078 57.0823 70.8146C57.1147 70.6857 57.2153 70.5851 57.3441 70.5527L59.923 69.9043C60.0518 69.8719 60.1524 69.7713 60.1848 69.6425L60.8333 67.0636C60.8818 66.8704 61.0778 66.7532 61.271 66.8017C61.3999 66.8341 61.5005 66.9348 61.5329 67.0636L62.1813 69.6425C62.2137 69.7713 62.3143 69.8719 62.4432 69.9043L65.022 70.5527C65.2152 70.6013 65.3324 70.7973 65.2839 70.9905C65.2515 71.1194 65.1509 71.22 65.022 71.2524L62.4432 71.9008C62.3143 71.9332 62.2137 72.0338 62.1813 72.1626L61.5329 74.7415C61.4843 74.9347 61.2883 75.0519 61.0951 75.0034C60.9663 74.971 60.8657 74.8703 60.8333 74.7415L60.1848 72.1626C60.1524 72.0338 60.0518 71.9332 59.923 71.9008Z",fill:"white"}),(0,f.jsx)("path",{d:"M45.3714 37.6252C48.8173 37.4446 51.8389 39.6346 52.8527 42.7692L52.9719 42.761C55.5232 42.6273 57.6997 44.5871 57.8335 47.1384C57.9672 49.6896 56.0074 51.8662 53.4561 51.9999C52.2681 52.0621 51.1613 51.6704 50.3042 50.9764C49.1479 51.867 47.719 52.4278 46.1515 52.51C43.7758 52.6345 41.6018 51.6323 40.1484 49.9706C39.1955 51.7014 37.396 52.915 35.2773 53.0261C32.9817 53.1464 30.9234 51.9401 29.847 50.0775C29.4316 50.2981 28.9622 50.4335 28.4612 50.4597C26.6186 50.5563 25.0467 49.1409 24.9501 47.2983C24.8535 45.4558 26.269 43.8838 28.1115 43.7872C28.7373 43.7544 29.3318 43.896 29.848 44.1695C30.8151 42.4958 32.5838 41.3296 34.6587 41.2209C36.2009 41.1401 37.636 41.658 38.7383 42.5714C39.7163 39.8199 42.2732 37.7876 45.3714 37.6252Z",fill:"#EDF0F3",stroke:"#101828",strokeWidth:"1.02795",strokeLinejoin:"round"}),(0,f.jsx)("path",{d:"M193.547 48.3237C196.839 48.1512 199.743 50.1422 200.88 53.0535C201.133 52.996 201.394 52.9596 201.661 52.9456C204.212 52.8119 206.389 54.7716 206.523 57.3229C206.656 59.8741 204.697 62.0507 202.145 62.1844C200.979 62.2455 199.89 61.8687 199.04 61.1977C197.801 62.3629 196.158 63.1125 194.327 63.2085C191.972 63.3319 189.816 62.3484 188.362 60.713C187.306 62.1447 185.64 63.1098 183.723 63.2102C181.518 63.3258 179.522 62.2682 178.343 60.5831C177.854 60.9169 177.271 61.125 176.636 61.1582C174.794 61.2548 173.222 59.8394 173.125 57.9968C173.029 56.1542 174.444 54.5823 176.287 54.4857C176.782 54.4598 177.258 54.543 177.69 54.7144C178.567 52.5762 180.616 51.0208 183.077 50.8918C184.688 50.8074 186.186 51.3486 187.337 52.3028C188.519 50.0532 190.824 48.4664 193.547 48.3237Z",fill:"#EDF0F3",stroke:"#101828",strokeWidth:"1.02795",strokeLinejoin:"round"}),(0,f.jsx)("path",{d:"M115.754 47.0842H111.761V53.1133H115.754V47.0842Z",fill:"#101828"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M111.019 49.094H116.496C117.141 49.094 117.695 49.555 117.811 50.1897L118.793 55.5558C118.926 56.2818 118.445 56.978 117.719 57.1109C117.64 57.1254 117.559 57.1328 117.478 57.1328H110.036C109.298 57.1328 108.7 56.5345 108.7 55.7964C108.7 55.7157 108.707 55.6352 108.722 55.5558L109.704 50.1897C109.82 49.555 110.373 49.094 111.019 49.094Z",fill:"#101828"}),(0,f.jsx)("path",{d:"M118.414 45.7444H109.102C108.732 45.7444 108.433 46.0435 108.433 46.4125V46.416C108.433 46.785 108.732 47.0842 109.102 47.0842H118.414C118.783 47.0842 119.082 46.785 119.082 46.416V46.4125C119.082 46.0435 118.783 45.7444 118.414 45.7444Z",fill:"#101828"}),(0,f.jsx)("path",{d:"M130.685 57.2583L127.336 55.0835L124.053 60.1399L127.402 62.3147L130.685 57.2583Z",fill:"#101828"}),(0,f.jsx)("path",{d:"M131.971 56.4959L127.511 53.599C127.201 53.398 126.787 53.486 126.586 53.7955L126.584 53.7984C126.383 54.1079 126.471 54.5217 126.781 54.7227L131.242 57.6196C131.551 57.8206 131.965 57.7326 132.166 57.4231L132.168 57.4202C132.369 57.1107 132.281 56.6969 131.971 56.4959Z",fill:"#101828"}),(0,f.jsx)("path",{d:"M113.759 105.031C127.909 105.031 139.38 93.4834 139.38 79.2389C139.38 64.9944 127.909 53.447 113.759 53.447C99.6081 53.447 88.137 64.9944 88.137 79.2389C88.137 93.4834 99.6081 105.031 113.759 105.031Z",fill:"white",stroke:"#101828",strokeWidth:"1.02795"}),(0,f.jsx)("mask",{id:"mask0_738_12069",maskUnits:"userSpaceOnUse",x:"91",y:"56",width:"46",height:"47",children:(0,f.jsx)("path",{d:"M113.759 102.016C126.256 102.016 136.387 91.8187 136.387 79.2396C136.387 66.6605 126.256 56.4631 113.759 56.4631C101.262 56.4631 91.1311 66.6605 91.1311 79.2396C91.1311 91.8187 101.262 102.016 113.759 102.016Z",fill:"#CBE5FF"})}),(0,f.jsxs)("g",{mask:"url(#mask0_738_12069)",children:[(0,f.jsx)("path",{d:"M113.759 102.016C126.256 102.016 136.387 91.8187 136.387 79.2396C136.387 66.6605 126.256 56.4631 113.759 56.4631C101.262 56.4631 91.1311 66.6605 91.1311 79.2396C91.1311 91.8187 101.262 102.016 113.759 102.016Z",fill:"#0080FF"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M114.229 56.4625C114.229 56.278 114.079 56.1284 113.895 56.1284C113.71 56.1284 113.561 56.278 113.561 56.4625V61.101C113.561 61.2855 113.71 61.4351 113.895 61.4351C114.079 61.4351 114.229 61.2855 114.229 61.101V56.4625ZM130.132 63.3692C130.262 63.2383 130.261 63.0268 130.13 62.8968C129.999 62.7667 129.788 62.7674 129.658 62.8983L126.399 66.1783C126.269 66.3091 126.27 66.5207 126.401 66.6507C126.532 66.7808 126.743 66.7801 126.873 66.6492L130.132 63.3692ZM136.856 79.2391C136.856 79.4236 136.706 79.5732 136.522 79.5732H131.913C131.729 79.5732 131.579 79.4236 131.579 79.2391C131.579 79.0546 131.729 78.905 131.913 78.905H136.522C136.706 78.905 136.856 79.0546 136.856 79.2391ZM129.657 95.5805C129.787 95.7114 129.999 95.7121 130.13 95.582C130.261 95.452 130.261 95.2405 130.131 95.1096L126.873 91.8296C126.743 91.6987 126.531 91.6981 126.4 91.8281C126.269 91.9581 126.269 92.1697 126.399 92.3006L129.657 95.5805ZM113.895 102.35C113.71 102.35 113.561 102.2 113.561 102.016V97.3772C113.561 97.1927 113.71 97.0431 113.895 97.0431C114.079 97.0431 114.229 97.1927 114.229 97.3772V102.016C114.229 102.2 114.079 102.35 113.895 102.35ZM97.6563 95.1091C97.5262 95.24 97.5269 95.4515 97.6578 95.5816C97.7887 95.7116 98.0002 95.7109 98.1303 95.58L101.389 92.3001C101.519 92.1692 101.518 91.9577 101.387 91.8277C101.256 91.6976 101.045 91.6983 100.915 91.8292L97.6563 95.1091ZM90.9307 79.2398C90.9307 79.0553 91.0802 78.9057 91.2647 78.9057H95.873C96.0575 78.9057 96.2071 79.0553 96.2071 79.2398C96.2071 79.4243 96.0575 79.5739 95.873 79.5739H91.2647C91.0802 79.5739 90.9307 79.4243 90.9307 79.2398ZM98.1307 62.8979C98.0006 62.767 97.7891 62.7663 97.6582 62.8963C97.5273 63.0264 97.5266 63.2379 97.6567 63.3688L100.915 66.6487C101.045 66.7796 101.257 66.7803 101.388 66.6503C101.519 66.5202 101.519 66.3087 101.389 66.1778L98.1307 62.8979Z",fill:"white"})]}),(0,f.jsx)("path",{d:"M113.758 84.598C116.698 84.598 119.082 82.1986 119.082 79.2388C119.082 76.279 116.698 73.8796 113.758 73.8796C110.817 73.8796 108.433 76.279 108.433 79.2388C108.433 82.1986 110.817 84.598 113.758 84.598Z",fill:"#101828"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M127.366 71.9046C127.463 72.0796 127.408 72.2992 127.242 72.4091L117.487 78.8359C116.917 79.2114 116.151 79.0538 115.775 78.4838C115.757 78.4566 115.74 78.4286 115.725 78.4001C115.392 77.7956 115.612 77.0356 116.217 76.7028C116.241 76.6891 116.267 76.6762 116.292 76.6642L126.875 71.7439C127.056 71.6599 127.27 71.7302 127.366 71.9046Z",fill:"#101828"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M116.419 79.2389C116.419 80.7188 115.227 81.9185 113.757 81.9185C113.475 81.9185 113.203 81.8743 112.948 81.7924L103.836 95.4024C103.734 95.5545 103.511 95.5836 103.338 95.4674L103.336 95.4662C103.162 95.3481 103.104 95.129 103.207 94.9757L112.259 81.4546C111.557 80.9722 111.095 80.1598 111.095 79.2389C111.095 77.759 112.287 76.5593 113.757 76.5593C115.227 76.5593 116.419 77.759 116.419 79.2389Z",fill:"white"}),(0,f.jsx)("path",{d:"M143.844 76.0686H130.958C130.4 76.0686 129.948 76.5206 129.948 77.0782C129.948 77.6358 130.4 78.0878 130.958 78.0878H143.844C144.401 78.0878 144.853 77.6358 144.853 77.0782C144.853 76.5206 144.401 76.0686 143.844 76.0686Z",fill:"#101828"}),(0,f.jsx)("path",{d:"M143.843 102.318H130.957C130.4 102.318 129.948 102.77 129.948 103.327C129.948 103.885 130.4 104.337 130.957 104.337H143.843C144.401 104.337 144.853 103.885 144.853 103.327C144.853 102.77 144.401 102.318 143.843 102.318Z",fill:"#101828"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M143.164 77.7488V82.9772C143.164 84.4701 142.499 85.8853 141.349 86.8373L139.099 88.6996V91.7284L140.92 92.9343C142.321 93.8625 143.164 95.4314 143.164 97.1124V102.657H131.637V97.1124C131.637 95.4314 132.48 93.8625 133.881 92.9343L135.702 91.7284V88.6996L133.453 86.8373C132.303 85.8853 131.637 84.4701 131.637 82.9772V77.7488H143.164Z",fill:"white",stroke:"#101828",strokeWidth:"0.668164"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M142.143 82.7991C142.143 84.078 141.573 85.2903 140.587 86.1059L138.078 88.1835V95.5872L139.749 96.6941C141.244 97.6841 142.143 99.3576 142.143 101.151V101.645H132.658V101.151C132.658 99.3576 133.557 97.6841 135.052 96.6941L136.723 95.5872V88.1835L134.213 86.1059C133.228 85.2903 132.658 84.078 132.658 82.7991H142.143Z",fill:"#0080FF"})]}),rK=()=>(0,f.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"230",height:"117",viewBox:"0 0 230 117",fill:"none",children:[(0,f.jsx)("path",{d:"M17.5 116L217.5 116",stroke:"#F5F5F6",strokeWidth:"1.5",strokeLinecap:"round"}),(0,f.jsx)("path",{d:"M222.5 116L228.5 116",stroke:"#F5F5F6",strokeWidth:"1.5",strokeLinecap:"round"}),(0,f.jsx)("path",{d:"M1.5 116L13.5 116",stroke:"#F5F5F6",strokeWidth:"1.5",strokeLinecap:"round"}),(0,f.jsx)("path",{d:"M181.248 15.5137H51.7273C50.5918 15.5137 49.6714 16.4341 49.6714 17.5696V80.2742C49.6714 81.4096 50.5918 82.3301 51.7273 82.3301H181.248C182.384 82.3301 183.304 81.4096 183.304 80.2742V17.5696C183.304 16.4341 182.384 15.5137 181.248 15.5137Z",fill:"#0080FF",stroke:"#F5F5F6",strokeWidth:"1.02795"}),(0,f.jsx)("path",{d:"M169.632 26.9733L61.961 19.4442C60.8284 19.365 59.8459 20.219 59.7667 21.3517L55.4644 82.8781C55.3852 84.0108 56.2392 84.9932 57.3719 85.0724L165.043 92.6015C166.176 92.6807 167.158 91.8267 167.238 90.6941L171.54 29.1676C171.619 28.0349 170.765 27.0525 169.632 26.9733Z",fill:"#2F333C",stroke:"#F5F5F6",strokeWidth:"1.02795"}),(0,f.jsx)("path",{d:"M171.958 14.0693L64.6154 25.3515C63.4862 25.4702 62.667 26.4818 62.7857 27.611L69.2327 88.9499C69.3514 90.0791 70.363 90.8983 71.4922 90.7796L178.835 79.4974C179.964 79.3787 180.784 78.3671 180.665 77.2379L174.218 15.899C174.099 14.7698 173.088 13.9506 171.958 14.0693Z",fill:"#202329",stroke:"#F5F5F6",strokeWidth:"1.02795"}),(0,f.jsx)("path",{d:"M180.319 25.6973H49.7699C46.6475 25.6973 44.1162 28.2285 44.1162 31.351V110.503C44.1162 113.625 46.6475 116.156 49.7699 116.156H180.319C183.441 116.156 185.973 113.625 185.973 110.503V31.351C185.973 28.2285 183.441 25.6973 180.319 25.6973Z",fill:"#131316",stroke:"#F5F5F6",strokeWidth:"1.02795"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M180.833 25.6973C182.252 25.6973 183.537 26.2725 184.467 27.2027C185.397 28.1328 185.973 29.4177 185.973 30.837V34.6865H44.1162V30.837C44.1162 29.4177 44.6915 28.1328 45.6216 27.2027C46.5517 26.2725 47.8366 25.6973 49.2559 25.6973H180.833Z",fill:"#2F333C",stroke:"#F5F5F6",strokeWidth:"1.02795"}),(0,f.jsx)("path",{d:"M52.8518 32.3794C53.9872 32.3794 54.9077 31.4589 54.9077 30.3235C54.9077 29.188 53.9872 28.2676 52.8518 28.2676C51.7164 28.2676 50.7959 29.188 50.7959 30.3235C50.7959 31.4589 51.7164 32.3794 52.8518 32.3794Z",fill:"#0080FF",stroke:"#F5F5F6",strokeWidth:"1.02795"}),(0,f.jsx)("path",{d:"M63.1306 32.3794C64.266 32.3794 65.1865 31.4589 65.1865 30.3235C65.1865 29.188 64.266 28.2676 63.1306 28.2676C61.9952 28.2676 61.0747 29.188 61.0747 30.3235C61.0747 31.4589 61.9952 32.3794 63.1306 32.3794Z",fill:"#0080FF",stroke:"#F5F5F6",strokeWidth:"1.02795"}),(0,f.jsx)("path",{d:"M73.4109 32.3794C74.5463 32.3794 75.4668 31.4589 75.4668 30.3235C75.4668 29.188 74.5463 28.2676 73.4109 28.2676C72.2754 28.2676 71.355 29.188 71.355 30.3235C71.355 31.4589 72.2754 32.3794 73.4109 32.3794Z",fill:"#0080FF",stroke:"#F5F5F6",strokeWidth:"1.02795"}),(0,f.jsx)("path",{d:"M204.888 103.274C204.91 103.165 205.066 103.165 205.089 103.274L205.559 105.517C205.567 105.553 205.593 105.582 205.628 105.594L207.773 106.294C207.867 106.325 207.867 106.459 207.773 106.489L205.628 107.19C205.593 107.201 205.567 107.231 205.559 107.267L205.089 109.51C205.066 109.619 204.91 109.619 204.888 109.51L204.417 107.267C204.409 107.231 204.383 107.201 204.348 107.19L202.203 106.489C202.109 106.459 202.109 106.325 202.204 106.294L204.348 105.594C204.383 105.582 204.409 105.553 204.417 105.517L204.888 103.274Z",fill:"#FF69B1",stroke:"#F5F5F6",strokeWidth:"0.513973"}),(0,f.jsx)("path",{d:"M148.866 44.6898C148.888 44.5804 149.045 44.5804 149.067 44.6898L149.732 47.9175C149.74 47.9535 149.766 47.9828 149.801 47.9943L152.785 48.9864C152.879 49.0176 152.879 49.1503 152.785 49.1815L149.801 50.1735C149.766 50.1851 149.74 50.2143 149.732 50.2503L149.067 53.478C149.045 53.5874 148.888 53.5874 148.866 53.478L148.201 50.2503C148.193 50.2143 148.167 50.1851 148.132 50.1735L145.148 49.1815C145.054 49.1503 145.054 49.0176 145.148 48.9864L148.132 47.9943C148.167 47.9828 148.193 47.9535 148.201 47.9175L148.866 44.6898Z",fill:"#FF7ABA",stroke:"#F5F5F6",strokeWidth:"0.513973"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M127.262 2.93684L125.972 2.61263C125.876 2.58835 125.817 2.49035 125.841 2.39375C125.858 2.32932 125.908 2.27902 125.972 2.26282L127.262 1.93861C127.326 1.92241 127.377 1.8721 127.393 1.80768L127.717 0.518252C127.741 0.421653 127.839 0.363034 127.936 0.387323C128 0.403522 128.051 0.453827 128.067 0.518252L128.391 1.80768C128.407 1.8721 128.457 1.92241 128.522 1.93861L129.811 2.26282C129.908 2.28711 129.967 2.38511 129.942 2.4817C129.926 2.54613 129.876 2.59643 129.811 2.61263L128.522 2.93684C128.457 2.95304 128.407 3.00335 128.391 3.06777L128.067 4.3572C128.042 4.4538 127.944 4.51242 127.848 4.48813C127.783 4.47193 127.733 4.42163 127.717 4.3572L127.393 3.06777C127.377 3.00335 127.326 2.95304 127.262 2.93684Z",fill:"#EDFF1B",stroke:"#F5F5F6",strokeWidth:"0.513973"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M76.065 100.778L74.1309 100.251C73.986 100.212 73.8981 100.052 73.9345 99.8953C73.9588 99.7906 74.0343 99.7089 74.1309 99.6826L76.065 99.1557C76.1617 99.1294 76.2371 99.0477 76.2614 98.943L76.7477 96.8476C76.7842 96.6907 76.9312 96.5954 77.0761 96.6349C77.1727 96.6612 77.2482 96.743 77.2725 96.8476L77.7588 98.943C77.7831 99.0477 77.8585 99.1294 77.9552 99.1557L79.8893 99.6826C80.0342 99.722 80.1221 99.8813 80.0857 100.038C80.0614 100.143 79.9859 100.225 79.8893 100.251L77.9552 100.778C77.8585 100.804 77.7831 100.886 77.7588 100.991L77.2725 103.086C77.236 103.243 77.089 103.338 76.9441 103.299C76.8475 103.272 76.772 103.191 76.7477 103.086L76.2614 100.991C76.2371 100.886 76.1617 100.804 76.065 100.778Z",fill:"#EDFF1B",stroke:"#F5F5F6",strokeWidth:"0.513973"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M165.516 104.369L163.099 103.761C162.917 103.715 162.808 103.532 162.853 103.35C162.883 103.23 162.978 103.135 163.099 103.105L165.516 102.497C165.637 102.467 165.731 102.372 165.762 102.252L166.37 99.8339C166.415 99.6528 166.599 99.5429 166.78 99.5884C166.901 99.6188 166.995 99.7131 167.026 99.8339L167.633 102.252C167.664 102.372 167.758 102.467 167.879 102.497L170.297 103.105C170.478 103.151 170.588 103.334 170.542 103.515C170.512 103.636 170.417 103.73 170.297 103.761L167.879 104.369C167.758 104.399 167.664 104.493 167.633 104.614L167.026 107.032C166.98 107.213 166.796 107.323 166.615 107.277C166.494 107.247 166.4 107.153 166.37 107.032L165.762 104.614C165.731 104.493 165.637 104.399 165.516 104.369Z",fill:"#131316"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.5689 89.3207L21.796 88.875C21.6631 88.8416 21.5825 88.7068 21.6159 88.574C21.6382 88.4854 21.7074 88.4162 21.796 88.394L23.5689 87.9482C23.6575 87.9259 23.7267 87.8567 23.749 87.7681L24.1947 85.9952C24.2281 85.8624 24.3629 85.7818 24.4957 85.8152C24.5843 85.8374 24.6535 85.9066 24.6757 85.9952L25.1215 87.7681C25.1438 87.8567 25.213 87.9259 25.3016 87.9482L27.0745 88.394C27.2073 88.4274 27.2879 88.5621 27.2545 88.6949C27.2323 88.7835 27.1631 88.8527 27.0745 88.875L25.3016 89.3207C25.213 89.343 25.1438 89.4122 25.1215 89.5008L24.6757 91.2737C24.6423 91.4066 24.5076 91.4872 24.3748 91.4538C24.2862 91.4315 24.217 91.3623 24.1947 91.2737L23.749 89.5008C23.7267 89.4122 23.6575 89.343 23.5689 89.3207Z",fill:"#FF8D3B",stroke:"#F5F5F6",strokeWidth:"0.513973"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M59.923 71.901L57.3441 71.2526C57.1509 71.204 57.0337 71.008 57.0823 70.8148C57.1147 70.686 57.2153 70.5854 57.3441 70.553L59.923 69.9046C60.0518 69.8722 60.1524 69.7715 60.1848 69.6427L60.8333 67.0638C60.8818 66.8706 61.0778 66.7534 61.271 66.802C61.3999 66.8344 61.5005 66.935 61.5329 67.0638L62.1813 69.6427C62.2137 69.7715 62.3143 69.8722 62.4432 69.9046L65.022 70.553C65.2152 70.6016 65.3324 70.7976 65.2839 70.9908C65.2515 71.1196 65.1509 71.2202 65.022 71.2526L62.4432 71.901C62.3143 71.9334 62.2137 72.034 62.1813 72.1629L61.5329 74.7417C61.4843 74.9349 61.2883 75.0522 61.0951 75.0036C60.9663 74.9712 60.8657 74.8706 60.8333 74.7417L60.1848 72.1629C60.1524 72.034 60.0518 71.9334 59.923 71.901Z",fill:"#131316"}),(0,f.jsx)("path",{d:"M45.3714 37.625C48.8173 37.4444 51.8389 39.6343 52.8527 42.7689L52.9719 42.7608C55.5232 42.6271 57.6997 44.5869 57.8335 47.1381C57.9672 49.6893 56.0074 51.8659 53.4561 51.9996C52.2681 52.0619 51.1613 51.6702 50.3042 50.9762C49.1479 51.8667 47.719 52.4276 46.1515 52.5097C43.7758 52.6342 41.6018 51.632 40.1484 49.9703C39.1955 51.7012 37.396 52.9148 35.2773 53.0258C32.9817 53.1461 30.9234 51.9399 29.847 50.0773C29.4316 50.2979 28.9622 50.4332 28.4612 50.4595C26.6186 50.556 25.0467 49.1406 24.9501 47.2981C24.8535 45.4555 26.269 43.8835 28.1115 43.787C28.7373 43.7542 29.3318 43.8958 29.848 44.1693C30.8151 42.4956 32.5838 41.3294 34.6587 41.2206C36.2009 41.1398 37.636 41.6577 38.7383 42.5711C39.7163 39.8197 42.2732 37.7873 45.3714 37.625Z",fill:"#202329",stroke:"#F5F5F6",strokeWidth:"1.02795",strokeLinejoin:"round"}),(0,f.jsx)("path",{d:"M193.547 48.3232C196.839 48.1507 199.743 50.1417 200.88 53.053C201.133 52.9956 201.394 52.9591 201.661 52.9451C204.212 52.8114 206.389 54.7712 206.523 57.3224C206.656 59.8736 204.697 62.0502 202.145 62.1839C200.979 62.245 199.89 61.8683 199.04 61.1972C197.801 62.3624 196.158 63.112 194.327 63.208C191.972 63.3314 189.816 62.3479 188.362 60.7125C187.306 62.1443 185.64 63.1093 183.723 63.2097C181.518 63.3253 179.522 62.2677 178.343 60.5826C177.854 60.9164 177.271 61.1245 176.636 61.1577C174.794 61.2543 173.222 59.8389 173.125 57.9963C173.029 56.1538 174.444 54.5818 176.287 54.4852C176.782 54.4593 177.258 54.5425 177.69 54.7139C178.567 52.5758 180.616 51.0203 183.077 50.8913C184.688 50.8069 186.186 51.3481 187.337 52.3023C188.519 50.0527 190.824 48.4659 193.547 48.3232Z",fill:"#202329",stroke:"#F5F5F6",strokeWidth:"1.02795",strokeLinejoin:"round"}),(0,f.jsx)("path",{d:"M115.754 47.084H111.761V53.1131H115.754V47.084Z",fill:"#F5F5F6"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M111.019 49.0938H116.496C117.141 49.0938 117.695 49.5548 117.811 50.1895L118.793 55.5556C118.926 56.2815 118.445 56.9778 117.719 57.1107C117.64 57.1252 117.559 57.1325 117.478 57.1325H110.036C109.298 57.1325 108.7 56.5342 108.7 55.7962C108.7 55.7155 108.707 55.6349 108.722 55.5556L109.704 50.1895C109.82 49.5548 110.373 49.0938 111.019 49.0938Z",fill:"#F5F5F6"}),(0,f.jsx)("path",{d:"M118.414 45.7441H109.102C108.732 45.7441 108.433 46.0433 108.433 46.4123V46.4158C108.433 46.7848 108.732 47.0839 109.102 47.0839H118.414C118.783 47.0839 119.082 46.7848 119.082 46.4158V46.4123C119.082 46.0433 118.783 45.7441 118.414 45.7441Z",fill:"#F5F5F6"}),(0,f.jsx)("path",{d:"M130.685 57.2578L127.336 55.083L124.053 60.1394L127.402 62.3143L130.685 57.2578Z",fill:"#F5F5F6"}),(0,f.jsx)("path",{d:"M131.971 56.4952L127.511 53.5983C127.201 53.3973 126.787 53.4853 126.586 53.7947L126.584 53.7977C126.383 54.1071 126.471 54.5209 126.781 54.7219L131.242 57.6188C131.551 57.8198 131.965 57.7319 132.166 57.4224L132.168 57.4195C132.369 57.11 132.281 56.6962 131.971 56.4952Z",fill:"#F5F5F6"}),(0,f.jsx)("path",{d:"M113.759 105.031C127.909 105.031 139.38 93.4836 139.38 79.2392C139.38 64.9947 127.909 53.4473 113.759 53.4473C99.6081 53.4473 88.137 64.9947 88.137 79.2392C88.137 93.4836 99.6081 105.031 113.759 105.031Z",fill:"#202329",stroke:"#F5F5F6",strokeWidth:"1.02795"}),(0,f.jsx)("mask",{id:"mask0_738_12398",maskUnits:"userSpaceOnUse",x:"91",y:"56",width:"46",height:"47",children:(0,f.jsx)("path",{d:"M113.759 102.016C126.256 102.016 136.387 91.8185 136.387 79.2394C136.387 66.6603 126.256 56.4629 113.759 56.4629C101.262 56.4629 91.1311 66.6603 91.1311 79.2394C91.1311 91.8185 101.262 102.016 113.759 102.016Z",fill:"#CBE5FF"})}),(0,f.jsxs)("g",{mask:"url(#mask0_738_12398)",children:[(0,f.jsx)("path",{d:"M113.759 102.016C126.256 102.016 136.387 91.8185 136.387 79.2394C136.387 66.6603 126.256 56.4629 113.759 56.4629C101.262 56.4629 91.1311 66.6603 91.1311 79.2394C91.1311 91.8185 101.262 102.016 113.759 102.016Z",fill:"#0080FF"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M114.229 56.462C114.229 56.2775 114.079 56.1279 113.895 56.1279C113.71 56.1279 113.561 56.2775 113.561 56.462V61.1005C113.561 61.285 113.71 61.4346 113.895 61.4346C114.079 61.4346 114.229 61.285 114.229 61.1005V56.462ZM130.132 63.3688C130.262 63.2379 130.261 63.0263 130.13 62.8963C129.999 62.7663 129.788 62.7669 129.658 62.8978L126.399 66.1778C126.269 66.3087 126.27 66.5202 126.401 66.6502C126.532 66.7803 126.743 66.7796 126.873 66.6487L130.132 63.3688ZM136.856 79.2386C136.856 79.4231 136.706 79.5727 136.522 79.5727H131.913C131.729 79.5727 131.579 79.4231 131.579 79.2386C131.579 79.0541 131.729 78.9045 131.913 78.9045H136.522C136.706 78.9045 136.856 79.0541 136.856 79.2386ZM129.657 95.58C129.787 95.7109 129.999 95.7116 130.13 95.5815C130.261 95.4515 130.261 95.24 130.131 95.1091L126.873 91.8292C126.743 91.6983 126.531 91.6976 126.4 91.8276C126.269 91.9576 126.269 92.1692 126.399 92.3001L129.657 95.58ZM113.895 102.349C113.71 102.349 113.561 102.2 113.561 102.015V97.3767C113.561 97.1922 113.71 97.0426 113.895 97.0426C114.079 97.0426 114.229 97.1922 114.229 97.3767V102.015C114.229 102.2 114.079 102.349 113.895 102.349ZM97.6563 95.1086C97.5262 95.2395 97.5269 95.4511 97.6578 95.5811C97.7887 95.7111 98.0002 95.7104 98.1303 95.5796L101.389 92.2996C101.519 92.1687 101.518 91.9572 101.387 91.8272C101.256 91.6971 101.045 91.6978 100.915 91.8287L97.6563 95.1086ZM90.9307 79.2393C90.9307 79.0548 91.0802 78.9052 91.2647 78.9052H95.873C96.0575 78.9052 96.2071 79.0548 96.2071 79.2393C96.2071 79.4238 96.0575 79.5734 95.873 79.5734H91.2647C91.0802 79.5734 90.9307 79.4238 90.9307 79.2393ZM98.1307 62.8974C98.0006 62.7665 97.7891 62.7658 97.6582 62.8959C97.5273 63.0259 97.5266 63.2374 97.6567 63.3683L100.915 66.6482C101.045 66.7791 101.257 66.7798 101.388 66.6498C101.519 66.5197 101.519 66.3082 101.389 66.1773L98.1307 62.8974Z",fill:"#131316"})]}),(0,f.jsx)("path",{d:"M113.758 84.5982C116.698 84.5982 119.082 82.1988 119.082 79.2391C119.082 76.2793 116.698 73.8799 113.758 73.8799C110.817 73.8799 108.433 76.2793 108.433 79.2391C108.433 82.1988 110.817 84.5982 113.758 84.5982Z",fill:"#F5F5F6"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M127.366 71.9041C127.463 72.0791 127.408 72.2987 127.242 72.4086L117.487 78.8354C116.917 79.2109 116.151 79.0533 115.775 78.4833C115.757 78.4561 115.74 78.4282 115.725 78.3996C115.392 77.7951 115.612 77.0352 116.217 76.7023C116.241 76.6886 116.267 76.6757 116.292 76.6638L126.875 71.7434C127.056 71.6594 127.27 71.7297 127.366 71.9041Z",fill:"#F5F5F6"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M116.419 79.2382C116.419 80.7181 115.227 81.9178 113.757 81.9178C113.475 81.9178 113.203 81.8736 112.948 81.7917L103.836 95.4017C103.734 95.5538 103.511 95.5829 103.338 95.4667L103.336 95.4654C103.162 95.3474 103.104 95.1283 103.207 94.975L112.259 81.4538C111.557 80.9715 111.095 80.1591 111.095 79.2382C111.095 77.7583 112.287 76.5586 113.757 76.5586C115.227 76.5586 116.419 77.7583 116.419 79.2382Z",fill:"#131316"}),(0,f.jsx)("path",{d:"M143.844 76.0684H130.958C130.4 76.0684 129.948 76.5204 129.948 77.0779C129.948 77.6355 130.4 78.0875 130.958 78.0875H143.844C144.401 78.0875 144.853 77.6355 144.853 77.0779C144.853 76.5204 144.401 76.0684 143.844 76.0684Z",fill:"#F5F5F6"}),(0,f.jsx)("path",{d:"M143.843 102.317H130.957C130.4 102.317 129.948 102.769 129.948 103.327C129.948 103.885 130.4 104.337 130.957 104.337H143.843C144.401 104.337 144.853 103.885 144.853 103.327C144.853 102.769 144.401 102.317 143.843 102.317Z",fill:"#F5F5F6"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M143.164 77.749V82.9775C143.164 84.4704 142.499 85.8856 141.349 86.8376L139.099 88.6998V91.7286L140.92 92.9346C142.321 93.8627 143.164 95.4317 143.164 97.1126V102.657H131.637V97.1126C131.637 95.4317 132.48 93.8627 133.881 92.9346L135.702 91.7286V88.6998L133.453 86.8376C132.303 85.8856 131.637 84.4704 131.637 82.9775V77.749H143.164Z",fill:"#202329",stroke:"#F5F5F6",strokeWidth:"0.668164"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M142.143 82.7988C142.143 84.0777 141.573 85.2901 140.587 86.1056L138.078 88.1833V95.587L139.749 96.6938C141.244 97.6838 142.143 99.3574 142.143 101.15V101.644H132.658V101.15C132.658 99.3574 133.557 97.6838 135.052 96.6938L136.723 95.587V88.1833L134.213 86.1056C133.228 85.2901 132.658 84.0777 132.658 82.7988H142.143Z",fill:"#0080FF"})]});var rQ=r(65161),r0=r(52597),r1=function(e){let{onClose:t,showClose:r=!0}=e,s=(0,g.useTranslations)(),n=(0,rs.ZP)(e=>e.isPro),a=(0,tX.Z)(e=>e.threads);return a&&a.length>0&&a[0]&&a[0].mode,(0,f.jsxs)("div",{className:"relative p-5 bg-theme-bg-100 dark:bg-theme-bg-dark-100 rounded-xl my-3",children:[r&&(0,f.jsx)(tK.z,{variant:"ghost",className:"absolute top-3 right-3",onClick:t,children:(0,f.jsx)(tC.Z,{})}),(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)(r0.fH,{}),(0,f.jsxs)("div",{className:"flex flex-col ml-4",children:[(0,f.jsx)("h4",{className:"text-[#215A94] font-semibold text-lg mb-3 mr-6",children:s(n?"pro_search_used_up_today_desc_2":"subscription.pro_search_emainder_three")}),(0,f.jsx)("p",{className:"text-sm text-[#215A94] mb-5",children:s(n?"pro_search_used_up_today_desc_3":"subscription.pro_search_emainder_four")})]})]}),!n&&(0,f.jsx)("p",{className:"text-right",children:(0,f.jsx)(tK.z,{onClick:()=>{rn.$.publish("showSubscriptionPlan",void 0)},children:s("upgrade")})})]})},r2=r(97247);let r3=e=>{let{content:t,markdown:r,retryGenerate:s,isFirstRetry:n,isTemplate:a}=e,i=(0,g.useTranslations)(),l=(0,tP.Z)(e=>e.extensionSelected),[o,d]=(0,v.useState)(void 0),c=(0,v.useRef)(o),{isDark:u}=(0,rY.Z)(),{isChat:p}=(0,tP.Z)(),h=(0,v.useRef)(!0),m=(0,v.useRef)(p),x=(0,v.useMemo)(()=>{let e=!1;return(Object.keys(r$.e).forEach(r=>{r$.e[r]==t&&(e=!0)}),e)?i(t,{source:i((0,rX.Y)(l))}):t},[t]),b=e=>"Network Error"===e||"NetworkError"===e||"Failed to fetch"===e||"network error"===e||"Load failed"===e,y=e=>"Internal Server Error"===e,w=e=>"You exceeded your current quota"===e,j=e=>"Service not responding"===e,C=e=>"Load failed"===e,_=e=>"ContentError"===e||"Failed"===e,k=e=>b(e)?"network":w(e)?"quota":j(e)?"responding":_(e)?"failed":y(e)?"server":"default",N=i("extension.community_feedback",{community:'<a href="https://discord.com/invite/PsReJWbThX" target="_blank" class="inline cursor-pointer no-underline text-[#0080FF] font-medium dark:text-blue-500 hover:underline">'.concat(i("extension.community_link"),"</a>")}),E=[tJ.zA,tJ.xn,tJ.X7].includes(l);(0,v.useEffect)(()=>{if(!x)return;let e=k(x);"network"===e&&n&&!r&&((0,r2.N0)()&&!h.current&&C(x)?d(!0):s()),"quota"===e&&rs.ZP.getState().refreshSubscriptionInfo(),x&&n&&((0,rQ.zr)("search answer error:"+x),(0,tb.fk)(ty.U.THREAD_ERROR,{error:x},!0))},[x,n]);let S=()=>(0,f.jsx)(f.Fragment,{children:r?(0,f.jsx)(tw.A,{size:"sm",radius:"full",color:"primary",className:"w-fit",startContent:(0,f.jsx)(rU.Z,{size:14}),onClick:()=>{location.reload()},children:i("error.refresh")}):(0,f.jsx)(tw.A,{size:"sm",radius:"full",color:"primary",className:"w-fit",startContent:(0,f.jsx)(rU.Z,{size:14}),onClick:s,children:i("ppt.retry_generate")})}),T=e=>(0,f.jsxs)(f.Fragment,{children:[e?(0,f.jsx)("div",{className:"text-red-600",children:(0,f.jsx)(rG.Z,{text:"".concat(e,"(").concat(x,")")})}):(0,f.jsx)("div",{className:"text-red-600",children:(0,f.jsx)(rG.Z,{text:x})}),S()]});return(0,v.useEffect)(()=>{let e=()=>{"hidden"===document.visibilityState?h.current=!1:(h.current=!0,!0===c.current&&d(!1))};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[]),(0,v.useEffect)(()=>{c.current=o,void 0===o||o||s()},[o]),(0,f.jsx)(rH,{title:!r&&!a&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(rW,{})," ",i("answer")]}),content:E&&!m.current?(0,f.jsx)(()=>{let e=(0,rX.Y)(l);return(0,f.jsxs)("div",{className:"flex flex-col items-center mt-12",children:[u?(0,f.jsx)(rK,{}):(0,f.jsx)(rJ,{}),(0,f.jsx)("div",{className:"text-lg font-medium mb-4 text-[#0080FF] mt-8",children:i("extension.prompt_timeout",{source:i(e)})}),(0,f.jsx)("p",{className:"text-[#667085] dark:text-[#BABDC5]",dangerouslySetInnerHTML:{__html:N}})]})},{}):(()=>{switch(k(x)){case"network":return T(i("error.network_error"));case"quota":return(0,f.jsx)(r1,{showClose:!1});case"responding":return T(i("error.service_is_not_responding"));case"failed":return T(i("error.failed_error"));case"server":return T(i("error.server_error"));default:return T()}})()})};var r5=r(69824),r6=r(46344),r4=r(76011),r7=r(27976),r8=r(52166),r9=r(25794),se=r(75284),st=r(95174);let sr=async e=>{let{message:t,callbackMethod:r}=e,{onThreadHeaderInfo:s,onTools:n,onHideReply:a,onThreadType:i,onQuery:l,onFirstSources:o,onSenondSources:d,onExpandType:c,onRelevancyModelInfo:u,onQueryPlans:p,onQueryRewritersInfo:h,onMarkdown:m,onReasoningText:f,onReflectionInfo:v,onReflectionAnswer:x,onReflectionAgentAnswer:g,onTopicTools:b,onQrInfoUrlExpands:y,onRelates:w,onDone:j,onError:C,resetTimeout:_,onMessageSource:k,onPreTools:N,onToolCallResult:E,onUpdateTitle:S,onDeductionInfo:T}=r;try{var F,L,M,A,P,Z,I;let e=JSON.parse(t),r=null==e?void 0:e.type;switch((null==e?void 0:e.type)!=="title"&&_(),r){case"thread_header_info":{let t=(null==e?void 0:e.data)||{};s(t);break}case"tools":{let t=(null==e?void 0:e.data)||{};n(t.tools),N(t.pre_tools);break}case"topic_tools":{let t=(null==e?void 0:e.data)||{};b(t.tools);break}case"tool_call_result":{let t=(null==e?void 0:e.data)||{};E(t.tools||t);break}case"hide_reply":a();break;case"thread_type":{let t=(null==e?void 0:e.data)||{};i(t.category);break}case"contexts":{let t=(null==e?void 0:null===(F=e.data)||void 0===F?void 0:F.sources)||[];o(t);break}case"message_source":{let t=(null==e?void 0:e.data)||{};k(t);break}case"rc_info":{let t=(null==e?void 0:e.data)||{};u(t);break}case"query_plans":{let t=(null==e?void 0:e.data)||[];p(t.items);break}case"qr_info":{let t=(null==e?void 0:e.data)||{};h(t);break}case"qr_info_url_expands":{let t=(null==e?void 0:null===(L=e.data)||void 0===L?void 0:L.sources)||[];y(t);break}case"final_contexts":{let t=(null==e?void 0:null===(M=e.data)||void 0===M?void 0:M.sources)||[];d(t);break}case"expand_type":{let t=(null==e?void 0:e.data)||{};c(t);break}case"answer":{let t=(null==e?void 0:null===(A=e.data)||void 0===A?void 0:A.text)||"";m(t.replace(/\[\[(\d+)\]\]/g,"[$1]($1)"));break}case"reasoning":{let t=(null==e?void 0:e.data.text)||"";f(t);break}case"reflection_info":{let t=(null==e?void 0:null===(P=e.data)||void 0===P?void 0:P.items)||[];v(t);break}case"reflection_agent_answer":{let t=(null==e?void 0:null===(Z=e.data)||void 0===Z?void 0:Z.text)||"";g(t);break}case"answer_reflection_begin":x(!0);break;case"answer_reflection_end":x(!1);break;case"message":{let t=(null==e?void 0:e.data)||{};l(t);break}case"title":{let t=(null==e?void 0:e.data)||{};S(t.text||"");break}case"related_questions":{let t=(null==e?void 0:null===(I=e.data)||void 0===I?void 0:I.questions)||[];w(t);break}case"deduction_info":{let t=(null==e?void 0:e.data)||{};T(t),j();break}case"failed":{let t=(null==e?void 0:e.data)||{};console.log("failed error",(null==t?void 0:t.message)||"Failed "),null==C||C((null==t?void 0:t.message)||"Failed")}}}catch(e){console.log("message error",e),null==C||C((null==e?void 0:e.message)||"ContentError")}};var ss=r(37766),sn=r(5517);let sa=async e=>{let{mqttConnected:t,controller:r,query:s,category:n,thread_type:a,existing_uuid:i,search_uuid:l,originRid:o,contexts:d,query_from:c,topic_short_id:u,web_search:p,short_id:h,model:m,mode:f,documents:v,document_action:x,auto_routing:g,device_id:b,cf_token:w,onRequestBefore:j,onRequestStart:C,preset_contexts:_,agent_info:k,temp_tools:N,sub_agent:E,processValueRef:S,...T}=e,{onError:F,resetTimeout:L}=T,M=(0,r9.a_)(),A={"Content-Type":"application/json",Accept:"*./*"};M&&(A.Authorization=(0,r8.a1)());let P={query:s,search_uuid:l,existing_uuid:i,lang:"",agent_lang:(0,se.v0)(),search_options:{langcode:(0,se.Gy)()[0]},search_video:!0,query_from:c||"default",category:n,model:m||"",auto_routing:g,mode:f,device_id:b,documents:v,thread_type:a,document_action:x,agent_info:k,sub_agent:E,temp_tools:N};d&&(P.contexts=d),i||delete P.existing_uuid,_&&_.length>0&&(P.preset_contexts=_);let Z=localStorage.getItem(r4.F);if(Z){let e=JSON.parse(Z);P.metadata=e}if(u&&(P.topic_short_id=u),null!=p&&(P.web_search=p),h&&(P.short_id=h),n===tJ.J5||n===tJ.Ys){let e="discovery"===f||(null==P?void 0:P.mode)==="discovery"?"verbose":f;P.mode=e}if(n===tJ.aI&&"discovery"===f&&(P.mode="verbose"),"discovery"===P.mode&&(P.thread_type=y.yA),n===tJ.Ys){var I;(null===(I=ss.Z.getState())||void 0===I?void 0:I.isImageChat)||(P.category="")}n===tJ.V9&&(P.category=tJ.gl),n===tJ.RQ&&(P.category=tJ.gl,P.web_search=!1,P.thread_type=y.yG),P.web_search&&(P.category=tJ.ti),L();let D="".concat(r7.XJ,"/threads");if(o&&(D="".concat(r7.XJ,"/threads/").concat(o,"/question")),!(t&&await (null==j?void 0:j(P)))){console.log("body",JSON.stringify(P));try{let e=await (0,sn.Z)(D,{method:"POST",headers:A,credentials:"include",signal:r.signal,body:JSON.stringify(P)});if(!e)return;if(503===e.status){null==F||F("Internal Server Error");return}if(200!==e.status){try{let t=await e.json();if(t.detail){if(Array.isArray(t.detail)&&t.detail.length>0){let e=t.detail[0],r=(null==e?void 0:e.msg)||(null==e?void 0:e.message)||JSON.stringify(e);null==F||F(r)}else"string"==typeof t.detail?null==F||F(t.detail):null==F||F(JSON.stringify(t.detail))}else t.message?null==F||F(t.message):null==F||F(JSON.stringify(t))}catch(t){null==F||F(e.status.toString())}return}if(e.ok||null==F||F("NetworkError"),null==C||C(),e.ok)for await(let t of(0,st.U)(e,r.signal)){let e=(null==t?void 0:t.data)||"";if(!tP.Z.getState().loading&&100===S.current)return;sr({message:e,callbackMethod:T})}}catch(t){let e;if(console.log("errorMessage",t),t instanceof Error)e=t.message;else try{e=JSON.stringify(t)}catch(r){e=String(t)}null==F||F(e)}}},si=e=>e.map(e=>({...e,link:e.url,snippet:e.desc})),sl=e=>200===e,so=async e=>{let{mqttConnected:t,controller:r,query:s,category:n,thread_type:a,contexts:i,existing_uuid:l,search_uuid:o,originRid:d,query_from:c,topic_short_id:u,web_search:p,short_id:h,model:m,mode:f,documents:v,document_action:x,auto_routing:g,cf_token:b,preset_contexts:y,agent_info:w,sub_agent:j,onThreadHeaderInfo:C,onTools:_,onHideReply:k,onThreadType:N,onQuery:E,onRequestBefore:S,onRequestStart:T,onFirstSources:F,onSenondSources:L,onExpandType:M,onRelevancyModelInfo:A,onQueryRewritersInfo:P,onMarkdown:Z,onReasoningText:I,onReflectionInfo:D,onReflectionAnswer:R,onReflectionAgentAnswer:z,onTopicTools:O,onQrInfoUrlExpands:B,onRelates:q,onDone:H,onError:V,onSearchModeError:U,onMessageSource:W,resetTimeout:G,onPreTools:$,onToolCallResult:Y,processValueRef:X,onUpdateTitle:J,onDeductionInfo:K}=e,Q=n===tJ.gl,ee=n===tJ.zA,et=n===tJ.X7,er=n===tJ.xn;if(!(ee||et||er)){sa(e);return}let es=(await (0,r6.hM)()).some(e=>"relevancy_model"===e.name&&e.status),en=[],ea=[];if(es){let t={data:{ok:!1,status:500,results:[]}};if(await (0,r5.C)({type:"FELO_SEARCH_GET_SEARCH",data:{by:n,queries:[s]},timeout:1e4}).then(e=>{t=e}).catch(e=>{t.data.status=500}),!sl(t.data.status)){let t=r$.e.Timeout;Q&&(0,r6.PC)({query:s}),ee&&(0,r6.PS)({query:s}),U&&t&&U(n,t),Q?sa(e):t&&(null==V||V(t));return}let{data:r}=(ea=t.data.results||[])[0];F(si(r)),en=r.map(e=>({link:e.url||"",title:e.title||"",snippet:e.desc||""}))}let ei={shortId:d,query:s,sources:en,category:n,mode:f};l&&(ei.existing_uuid=l);let el=await (0,r6.zC)(ei);if(!el){sa(e);return}let{complex_query:eo,metadata:ed,rewrite_queries:ec,category:eu}=el;if(["web_summary","document"].includes(eu)){sa(e);return}let{relevancy_model_use:ep}=ed,eh=[];if(A({relevancy_model_request:eo?"No":"Yes",relevancy_model_name:"",relevancy_model_use:ep}),P({query_rewriter_use:!!ec.length,rewriters:ec}),eh=ea.map(e=>({query:s,contexts:e.data.map(e=>{let{url:t,title:r,desc:s,...n}=e;return{link:t||"",title:r||"",snippet:s||"",other_info:n}})})),eo){let t={data:{ok:!1,status:500,results:[]}},r=1e4,a=0;switch(n){case tJ.zA:r=13e3+4e3*ec.length,a=(0,tN.xT)(100,500);break;case tJ.xn:r=15e3;break;case tJ.X7:r=1e4+3e3*ec.length}if(await (0,r5.C)({type:"FELO_SEARCH_GET_SEARCH",data:{by:n,queries:[...ec],delayTime:a},timeout:r}).then(e=>{t=e}).catch(e=>{t.data.status=500}),!sl(t.data.status)){let t=r$.e.Timeout;Q&&(0,r6.PC)({query:s}),ee&&(0,r6.PS)({query:s}),U&&t&&U(n,t),Q?sa(e):t&&(null==V||V(t));return}let i=t.data.results||[],l=[];i.forEach(e=>{let{data:t}=e;l=l.concat(t)}),L(si(l)),eh=i.map(e=>({query:e.query,contexts:e.data.map(e=>{let{url:t,title:r,desc:s,...n}=e;return{link:t||"",title:r||"",snippet:s||"",other_info:n}})}))}sa({mqttConnected:t,controller:r,query:s,category:n,thread_type:a,existing_uuid:l,search_uuid:o,contexts:i||eh,originRid:d,query_from:c,topic_short_id:u,web_search:p,short_id:h,model:m,mode:f,documents:v,document_action:x,auto_routing:g,cf_token:b,preset_contexts:y,agent_info:w,sub_agent:j,onThreadHeaderInfo:C,onTools:_,onHideReply:k,onThreadType:N,onQuery:E,onRequestBefore:S,onRequestStart:T,onFirstSources:F,onSenondSources:L,onExpandType:M,onRelevancyModelInfo:()=>{},onQueryPlans:()=>{},onQueryRewritersInfo:()=>{},onMarkdown:Z,onRelates:q,onDone:H,onError:V,resetTimeout:G,onMessageSource:W,onReasoningText:I,onReflectionInfo:D,onReflectionAnswer:R,onReflectionAgentAnswer:z,onTopicTools:O,onQrInfoUrlExpands:B,onPreTools:$,onToolCallResult:Y,processValueRef:X,onUpdateTitle:J,onDeductionInfo:K})};var sd=r(41847);function sc(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function su(e,t){void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(t).forEach(function(r){void 0===e[r]?e[r]=t[r]:sc(t[r])&&sc(e[r])&&Object.keys(t[r]).length>0&&su(e[r],t[r])})}var sp={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function sh(){var e="undefined"!=typeof document?document:{};return su(e,sp),e}var sm={document:sp,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(e){return"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function sf(){var e="undefined"!=typeof window?window:{};return su(e,sm),e}function sv(e){return(sv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sx(e,t){return(sx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sg(e,t,r){return(sg=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?function(e,t,r){var s=[null];s.push.apply(s,t);var n=new(Function.bind.apply(e,s));return r&&sx(n,r.prototype),n}:Reflect.construct).apply(null,arguments)}function sb(e){var t="function"==typeof Map?new Map:void 0;return(sb=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return sg(e,arguments,sv(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),sx(r,e)})(e)}var sy=function(e){function t(t){var r,s,n;return n=(s=function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r=e.call.apply(e,[this].concat(t))||this)).__proto__,Object.defineProperty(s,"__proto__",{get:function(){return n},set:function(e){n.__proto__=e}}),r}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e,t}(sb(Array));function sw(e){void 0===e&&(e=[]);var t=[];return e.forEach(function(e){Array.isArray(e)?t.push.apply(t,sw(e)):t.push(e)}),t}function sj(e,t){return Array.prototype.filter.call(e,t)}function sC(e,t){var r=sf(),s=sh(),n=[];if(!t&&e instanceof sy)return e;if(!e)return new sy(n);if("string"==typeof e){var a=e.trim();if(a.indexOf("<")>=0&&a.indexOf(">")>=0){var i="div";0===a.indexOf("<li")&&(i="ul"),0===a.indexOf("<tr")&&(i="tbody"),(0===a.indexOf("<td")||0===a.indexOf("<th"))&&(i="tr"),0===a.indexOf("<tbody")&&(i="table"),0===a.indexOf("<option")&&(i="select");var l=s.createElement(i);l.innerHTML=a;for(var o=0;o<l.childNodes.length;o+=1)n.push(l.childNodes[o])}else n=function(e,t){if("string"!=typeof e)return[e];for(var r=[],s=t.querySelectorAll(e),n=0;n<s.length;n+=1)r.push(s[n]);return r}(e.trim(),t||s)}else if(e.nodeType||e===r||e===s)n.push(e);else if(Array.isArray(e)){if(e instanceof sy)return e;n=e}return new sy(function(e){for(var t=[],r=0;r<e.length;r+=1)-1===t.indexOf(e[r])&&t.push(e[r]);return t}(n))}sC.fn=sy.prototype;var s_="resize scroll".split(" ");function sk(e){return function(){for(var t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];if(void 0===r[0]){for(var n=0;n<this.length;n+=1)0>s_.indexOf(e)&&(e in this[n]?this[n][e]():sC(this[n]).trigger(e));return this}return this.on.apply(this,[e].concat(r))}}sk("click"),sk("blur"),sk("focus"),sk("focusin"),sk("focusout"),sk("keyup"),sk("keydown"),sk("keypress"),sk("submit"),sk("change"),sk("mousedown"),sk("mousemove"),sk("mouseup"),sk("mouseenter"),sk("mouseleave"),sk("mouseout"),sk("mouseover"),sk("touchstart"),sk("touchend"),sk("touchmove"),sk("resize"),sk("scroll");var sN={addClass:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var s=sw(t.map(function(e){return e.split(" ")}));return this.forEach(function(e){var t;(t=e.classList).add.apply(t,s)}),this},removeClass:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var s=sw(t.map(function(e){return e.split(" ")}));return this.forEach(function(e){var t;(t=e.classList).remove.apply(t,s)}),this},hasClass:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var s=sw(t.map(function(e){return e.split(" ")}));return sj(this,function(e){return s.filter(function(t){return e.classList.contains(t)}).length>0}).length>0},toggleClass:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var s=sw(t.map(function(e){return e.split(" ")}));this.forEach(function(e){s.forEach(function(t){e.classList.toggle(t)})})},attr:function(e,t){if(1==arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var r=0;r<this.length;r+=1)if(2==arguments.length)this[r].setAttribute(e,t);else for(var s in e)this[r][s]=e[s],this[r].setAttribute(s,e[s]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},transform:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transform=e;return this},transition:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transitionDuration="string"!=typeof e?e+"ms":e;return this},on:function(){for(var e,t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];var n=r[0],a=r[1],i=r[2],l=r[3];function o(e){var t=e.target;if(t){var r=e.target.dom7EventData||[];if(0>r.indexOf(e)&&r.unshift(e),sC(t).is(a))i.apply(t,r);else for(var s=sC(t).parents(),n=0;n<s.length;n+=1)sC(s[n]).is(a)&&i.apply(s[n],r)}}function d(e){var t=e&&e.target&&e.target.dom7EventData||[];0>t.indexOf(e)&&t.unshift(e),i.apply(this,t)}"function"==typeof r[1]&&(n=r[0],i=r[1],l=r[2],a=void 0),l||(l=!1);for(var c=n.split(" "),u=0;u<this.length;u+=1){var p=this[u];if(a)for(e=0;e<c.length;e+=1){var h=c[e];p.dom7LiveListeners||(p.dom7LiveListeners={}),p.dom7LiveListeners[h]||(p.dom7LiveListeners[h]=[]),p.dom7LiveListeners[h].push({listener:i,proxyListener:o}),p.addEventListener(h,o,l)}else for(e=0;e<c.length;e+=1){var m=c[e];p.dom7Listeners||(p.dom7Listeners={}),p.dom7Listeners[m]||(p.dom7Listeners[m]=[]),p.dom7Listeners[m].push({listener:i,proxyListener:d}),p.addEventListener(m,d,l)}}return this},off:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var s=t[0],n=t[1],a=t[2],i=t[3];"function"==typeof t[1]&&(s=t[0],a=t[1],i=t[2],n=void 0),i||(i=!1);for(var l=s.split(" "),o=0;o<l.length;o+=1)for(var d=l[o],c=0;c<this.length;c+=1){var u=this[c],p=void 0;if(!n&&u.dom7Listeners?p=u.dom7Listeners[d]:n&&u.dom7LiveListeners&&(p=u.dom7LiveListeners[d]),p&&p.length)for(var h=p.length-1;h>=0;h-=1){var m=p[h];a&&m.listener===a?(u.removeEventListener(d,m.proxyListener,i),p.splice(h,1)):a&&m.listener&&m.listener.dom7proxy&&m.listener.dom7proxy===a?(u.removeEventListener(d,m.proxyListener,i),p.splice(h,1)):a||(u.removeEventListener(d,m.proxyListener,i),p.splice(h,1))}}return this},trigger:function(){for(var e=sf(),t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];for(var n=r[0].split(" "),a=r[1],i=0;i<n.length;i+=1)for(var l=n[i],o=0;o<this.length;o+=1){var d=this[o];if(e.CustomEvent){var c=new e.CustomEvent(l,{detail:a,bubbles:!0,cancelable:!0});d.dom7EventData=r.filter(function(e,t){return t>0}),d.dispatchEvent(c),d.dom7EventData=[],delete d.dom7EventData}}return this},transitionEnd:function(e){var t=this;return e&&t.on("transitionend",function r(s){s.target===this&&(e.call(this,s),t.off("transitionend",r))}),this},outerWidth:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){var e=sf();return this[0]?e.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){var e=sf(),t=sh(),r=this[0],s=r.getBoundingClientRect(),n=t.body,a=r.clientTop||n.clientTop||0,i=r.clientLeft||n.clientLeft||0,l=r===e?e.scrollY:r.scrollTop,o=r===e?e.scrollX:r.scrollLeft;return{top:s.top+l-a,left:s.left+o-i}}return null},css:function(e,t){var r,s=sf();if(1==arguments.length){if("string"==typeof e){if(this[0])return s.getComputedStyle(this[0],null).getPropertyValue(e)}else{for(r=0;r<this.length;r+=1)for(var n in e)this[r].style[n]=e[n];return this}}if(2==arguments.length&&"string"==typeof e)for(r=0;r<this.length;r+=1)this[r].style[e]=t;return this},each:function(e){return e&&this.forEach(function(t,r){e.apply(t,[t,r])}),this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:null;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){var t,r,s=sf(),n=sh(),a=this[0];if(!a||void 0===e)return!1;if("string"==typeof e){if(a.matches)return a.matches(e);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(e);if(a.msMatchesSelector)return a.msMatchesSelector(e);for(r=0,t=sC(e);r<t.length;r+=1)if(t[r]===a)return!0;return!1}if(e===n)return a===n;if(e===s)return a===s;if(e.nodeType||e instanceof sy){for(r=0,t=e.nodeType?[e]:e;r<t.length;r+=1)if(t[r]===a)return!0}return!1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;var t=this.length;if(e>t-1)return sC([]);if(e<0){var r=t+e;return r<0?sC([]):sC([this[r]])}return sC([this[e]])},append:function(){for(var e,t=sh(),r=0;r<arguments.length;r+=1){e=r<0||arguments.length<=r?void 0:arguments[r];for(var s=0;s<this.length;s+=1)if("string"==typeof e){var n=t.createElement("div");for(n.innerHTML=e;n.firstChild;)this[s].appendChild(n.firstChild)}else if(e instanceof sy)for(var a=0;a<e.length;a+=1)this[s].appendChild(e[a]);else this[s].appendChild(e)}return this},prepend:function(e){var t,r,s=sh();for(t=0;t<this.length;t+=1)if("string"==typeof e){var n=s.createElement("div");for(n.innerHTML=e,r=n.childNodes.length-1;r>=0;r-=1)this[t].insertBefore(n.childNodes[r],this[t].childNodes[0])}else if(e instanceof sy)for(r=0;r<e.length;r+=1)this[t].insertBefore(e[r],this[t].childNodes[0]);else this[t].insertBefore(e,this[t].childNodes[0]);return this},next:function(e){if(this.length>0){if(e)return this[0].nextElementSibling&&sC(this[0].nextElementSibling).is(e)?sC([this[0].nextElementSibling]):sC([]);if(this[0].nextElementSibling)return sC([this[0].nextElementSibling])}return sC([])},nextAll:function(e){var t=[],r=this[0];if(!r)return sC([]);for(;r.nextElementSibling;){var s=r.nextElementSibling;e?sC(s).is(e)&&t.push(s):t.push(s),r=s}return sC(t)},prev:function(e){if(this.length>0){var t=this[0];if(e)return t.previousElementSibling&&sC(t.previousElementSibling).is(e)?sC([t.previousElementSibling]):sC([]);if(t.previousElementSibling)return sC([t.previousElementSibling])}return sC([])},prevAll:function(e){var t=[],r=this[0];if(!r)return sC([]);for(;r.previousElementSibling;){var s=r.previousElementSibling;e?sC(s).is(e)&&t.push(s):t.push(s),r=s}return sC(t)},parent:function(e){for(var t=[],r=0;r<this.length;r+=1)null!==this[r].parentNode&&(e?sC(this[r].parentNode).is(e)&&t.push(this[r].parentNode):t.push(this[r].parentNode));return sC(t)},parents:function(e){for(var t=[],r=0;r<this.length;r+=1)for(var s=this[r].parentNode;s;)e?sC(s).is(e)&&t.push(s):t.push(s),s=s.parentNode;return sC(t)},closest:function(e){var t=this;return void 0===e?sC([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){for(var t=[],r=0;r<this.length;r+=1)for(var s=this[r].querySelectorAll(e),n=0;n<s.length;n+=1)t.push(s[n]);return sC(t)},children:function(e){for(var t=[],r=0;r<this.length;r+=1)for(var s=this[r].children,n=0;n<s.length;n+=1)(!e||sC(s[n]).is(e))&&t.push(s[n]);return sC(t)},filter:function(e){return sC(sj(this,e))},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}};function sE(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function sS(){return Date.now()}function sT(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function sF(){for(var e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"],r=1;r<arguments.length;r+=1){var s=r<0||arguments.length<=r?void 0:arguments[r];if(null!=s&&("undefined"!=typeof window&&void 0!==window.HTMLElement?!(s instanceof HTMLElement):!s||1!==s.nodeType&&11!==s.nodeType))for(var n=Object.keys(Object(s)).filter(function(e){return 0>t.indexOf(e)}),a=0,i=n.length;a<i;a+=1){var l=n[a],o=Object.getOwnPropertyDescriptor(s,l);void 0!==o&&o.enumerable&&(sT(e[l])&&sT(s[l])?s[l].__swiper__?e[l]=s[l]:sF(e[l],s[l]):!sT(e[l])&&sT(s[l])?(e[l]={},s[l].__swiper__?e[l]=s[l]:sF(e[l],s[l])):e[l]=s[l])}}return e}function sL(e,t){Object.keys(t).forEach(function(r){sT(t[r])&&Object.keys(t[r]).forEach(function(s){"function"==typeof t[r][s]&&(t[r][s]=t[r][s].bind(e))}),e[r]=t[r]})}function sM(e){return void 0===e&&(e=""),"."+e.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}function sA(e,t,r,s){var n=sh();return r&&Object.keys(s).forEach(function(r){if(!t[r]&&!0===t.auto){var a=n.createElement("div");a.className=s[r],e.append(a),t[r]=a}}),t}function sP(){if(!u){var e,t;e=sf(),t=sh(),u={touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),pointerEvents:!!e.PointerEvent&&"maxTouchPoints"in e.navigator&&e.navigator.maxTouchPoints>=0,observer:"MutationObserver"in e||"WebkitMutationObserver"in e,passiveListener:function(){var t=!1;try{var r=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("testPassiveListener",null,r)}catch(e){}return t}(),gestures:"ongesturestart"in e}}return u}function sZ(){return(sZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}Object.keys(sN).forEach(function(e){Object.defineProperty(sC.fn,e,{value:sN[e],writable:!0})});var sI={attach:function(e,t){void 0===t&&(t={});var r=sf(),s=this,n=new(r.MutationObserver||r.WebkitMutationObserver)(function(e){if(1===e.length){s.emit("observerUpdate",e[0]);return}var t=function(){s.emit("observerUpdate",e[0])};r.requestAnimationFrame?r.requestAnimationFrame(t):r.setTimeout(t,0)});n.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),s.observer.observers.push(n)},init:function(){if(this.support.observer&&this.params.observer){if(this.params.observeParents)for(var e=this.$el.parents(),t=0;t<e.length;t+=1)this.observer.attach(e[t]);this.observer.attach(this.$el[0],{childList:this.params.observeSlideChildren}),this.observer.attach(this.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach(function(e){e.disconnect()}),this.observer.observers=[]}};function sD(e){var t=sh(),r=sf(),s=this.touchEventsData,n=this.params,a=this.touches;if(this.enabled&&(!this.animating||!n.preventInteractionOnTransition)){var i=e;i.originalEvent&&(i=i.originalEvent);var l=sC(i.target);if(("wrapper"!==n.touchEventsTarget||l.closest(this.wrapperEl).length)&&(s.isTouchEvent="touchstart"===i.type,(s.isTouchEvent||!("which"in i)||3!==i.which)&&(s.isTouchEvent||!("button"in i)||!(i.button>0))&&(!s.isTouched||!s.isMoved))){n.noSwipingClass&&""!==n.noSwipingClass&&i.target&&i.target.shadowRoot&&e.path&&e.path[0]&&(l=sC(e.path[0]));var o=n.noSwipingSelector?n.noSwipingSelector:"."+n.noSwipingClass,d=!!(i.target&&i.target.shadowRoot);if(n.noSwiping&&(d?function(e,t){return void 0===t&&(t=this),function t(r){return r&&r!==sh()&&r!==sf()?(r.assignedSlot&&(r=r.assignedSlot),r.closest(e)||t(r.getRootNode().host)):null}(t)}(o,i.target):l.closest(o)[0])){this.allowClick=!0;return}if(n.swipeHandler&&!l.closest(n.swipeHandler)[0])return;a.currentX="touchstart"===i.type?i.targetTouches[0].pageX:i.pageX,a.currentY="touchstart"===i.type?i.targetTouches[0].pageY:i.pageY;var c=a.currentX,u=a.currentY,p=n.edgeSwipeDetection||n.iOSEdgeSwipeDetection,h=n.edgeSwipeThreshold||n.iOSEdgeSwipeThreshold;if(p&&(c<=h||c>=r.innerWidth-h)){if("prevent"!==p)return;e.preventDefault()}if(sF(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=c,a.startY=u,s.touchStartTime=sS(),this.allowClick=!0,this.updateSize(),this.swipeDirection=void 0,n.threshold>0&&(s.allowThresholdMove=!1),"touchstart"!==i.type){var m=!0;l.is(s.focusableElements)&&(m=!1),t.activeElement&&sC(t.activeElement).is(s.focusableElements)&&t.activeElement!==l[0]&&t.activeElement.blur();var f=m&&this.allowTouchMove&&n.touchStartPreventDefault;(n.touchStartForcePreventDefault||f)&&!l[0].isContentEditable&&i.preventDefault()}this.emit("touchStart",i)}}}function sR(e){var t,r=sh(),s=this.touchEventsData,n=this.params,a=this.touches,i=this.rtlTranslate;if(!!this.enabled){var l=e;if(l.originalEvent&&(l=l.originalEvent),!s.isTouched){s.startMoving&&s.isScrolling&&this.emit("touchMoveOpposite",l);return}if(!s.isTouchEvent||"touchmove"===l.type){var o="touchmove"===l.type&&l.targetTouches&&(l.targetTouches[0]||l.changedTouches[0]),d="touchmove"===l.type?o.pageX:l.pageX,c="touchmove"===l.type?o.pageY:l.pageY;if(l.preventedByNestedSwiper){a.startX=d,a.startY=c;return}if(!this.allowTouchMove){this.allowClick=!1,s.isTouched&&(sF(a,{startX:d,startY:c,currentX:d,currentY:c}),s.touchStartTime=sS());return}if(s.isTouchEvent&&n.touchReleaseOnEdges&&!n.loop){if(this.isVertical()){if(c<a.startY&&this.translate<=this.maxTranslate()||c>a.startY&&this.translate>=this.minTranslate()){s.isTouched=!1,s.isMoved=!1;return}}else if(d<a.startX&&this.translate<=this.maxTranslate()||d>a.startX&&this.translate>=this.minTranslate())return}if(s.isTouchEvent&&r.activeElement&&l.target===r.activeElement&&sC(l.target).is(s.focusableElements)){s.isMoved=!0,this.allowClick=!1;return}if(s.allowTouchCallbacks&&this.emit("touchMove",l),!l.targetTouches||!(l.targetTouches.length>1)){a.currentX=d,a.currentY=c;var u=a.currentX-a.startX,p=a.currentY-a.startY;if(!(this.params.threshold&&Math.sqrt(Math.pow(u,2)+Math.pow(p,2))<this.params.threshold)){if(void 0===s.isScrolling&&(this.isHorizontal()&&a.currentY===a.startY||this.isVertical()&&a.currentX===a.startX?s.isScrolling=!1:u*u+p*p>=25&&(t=180*Math.atan2(Math.abs(p),Math.abs(u))/Math.PI,s.isScrolling=this.isHorizontal()?t>n.touchAngle:90-t>n.touchAngle)),s.isScrolling&&this.emit("touchMoveOpposite",l),void 0===s.startMoving&&(a.currentX!==a.startX||a.currentY!==a.startY)&&(s.startMoving=!0),s.isScrolling){s.isTouched=!1;return}if(s.startMoving){this.allowClick=!1,!n.cssMode&&l.cancelable&&l.preventDefault(),n.touchMoveStopPropagation&&!n.nested&&l.stopPropagation(),s.isMoved||(n.loop&&this.loopFix(),s.startTranslate=this.getTranslate(),this.setTransition(0),this.animating&&this.$wrapperEl.trigger("webkitTransitionEnd transitionend"),s.allowMomentumBounce=!1,n.grabCursor&&(!0===this.allowSlideNext||!0===this.allowSlidePrev)&&this.setGrabCursor(!0),this.emit("sliderFirstMove",l)),this.emit("sliderMove",l),s.isMoved=!0;var h=this.isHorizontal()?u:p;a.diff=h,h*=n.touchRatio,i&&(h=-h),this.swipeDirection=h>0?"prev":"next",s.currentTranslate=h+s.startTranslate;var m=!0,f=n.resistanceRatio;if(n.touchReleaseOnEdges&&(f=0),h>0&&s.currentTranslate>this.minTranslate()?(m=!1,n.resistance&&(s.currentTranslate=this.minTranslate()-1+Math.pow(-this.minTranslate()+s.startTranslate+h,f))):h<0&&s.currentTranslate<this.maxTranslate()&&(m=!1,n.resistance&&(s.currentTranslate=this.maxTranslate()+1-Math.pow(this.maxTranslate()-s.startTranslate-h,f))),m&&(l.preventedByNestedSwiper=!0),!this.allowSlideNext&&"next"===this.swipeDirection&&s.currentTranslate<s.startTranslate&&(s.currentTranslate=s.startTranslate),!this.allowSlidePrev&&"prev"===this.swipeDirection&&s.currentTranslate>s.startTranslate&&(s.currentTranslate=s.startTranslate),this.allowSlidePrev||this.allowSlideNext||(s.currentTranslate=s.startTranslate),n.threshold>0){if(Math.abs(h)>n.threshold||s.allowThresholdMove){if(!s.allowThresholdMove){s.allowThresholdMove=!0,a.startX=a.currentX,a.startY=a.currentY,s.currentTranslate=s.startTranslate,a.diff=this.isHorizontal()?a.currentX-a.startX:a.currentY-a.startY;return}}else{s.currentTranslate=s.startTranslate;return}}n.followFinger&&!n.cssMode&&((n.freeMode||n.watchSlidesProgress||n.watchSlidesVisibility)&&(this.updateActiveIndex(),this.updateSlidesClasses()),n.freeMode&&(0===s.velocities.length&&s.velocities.push({position:a[this.isHorizontal()?"startX":"startY"],time:s.touchStartTime}),s.velocities.push({position:a[this.isHorizontal()?"currentX":"currentY"],time:sS()})),this.updateProgress(s.currentTranslate),this.setTranslate(s.currentTranslate))}}}}}}function sz(e){var t=this,r=t.touchEventsData,s=t.params,n=t.touches,a=t.rtlTranslate,i=t.$wrapperEl,l=t.slidesGrid,o=t.snapGrid;if(t.enabled){var d=e;if(d.originalEvent&&(d=d.originalEvent),r.allowTouchCallbacks&&t.emit("touchEnd",d),r.allowTouchCallbacks=!1,!r.isTouched){r.isMoved&&s.grabCursor&&t.setGrabCursor(!1),r.isMoved=!1,r.startMoving=!1;return}s.grabCursor&&r.isMoved&&r.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var c=sS(),u=c-r.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(d),t.emit("tap click",d),u<300&&c-r.lastClickTime<300&&t.emit("doubleTap doubleClick",d)),r.lastClickTime=sS(),sE(function(){t.destroyed||(t.allowClick=!0)}),!r.isTouched||!r.isMoved||!t.swipeDirection||0===n.diff||r.currentTranslate===r.startTranslate){r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;return}if(r.isTouched=!1,r.isMoved=!1,r.startMoving=!1,p=s.followFinger?a?t.translate:-t.translate:-r.currentTranslate,s.cssMode)return;if(s.freeMode){if(p<-t.minTranslate()){t.slideTo(t.activeIndex);return}if(p>-t.maxTranslate()){t.slides.length<o.length?t.slideTo(o.length-1):t.slideTo(t.slides.length-1);return}if(s.freeModeMomentum){if(r.velocities.length>1){var p,h,m,f,v=r.velocities.pop(),x=r.velocities.pop(),g=v.position-x.position,b=v.time-x.time;t.velocity=g/b,t.velocity/=2,Math.abs(t.velocity)<s.freeModeMinimumVelocity&&(t.velocity=0),(b>150||sS()-v.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=s.freeModeMomentumVelocityRatio,r.velocities.length=0;var y=1e3*s.freeModeMomentumRatio,w=t.velocity*y,j=t.translate+w;a&&(j=-j);var C=!1,_=20*Math.abs(t.velocity)*s.freeModeMomentumBounceRatio;if(j<t.maxTranslate())s.freeModeMomentumBounce?(j+t.maxTranslate()<-_&&(j=t.maxTranslate()-_),h=t.maxTranslate(),C=!0,r.allowMomentumBounce=!0):j=t.maxTranslate(),s.loop&&s.centeredSlides&&(m=!0);else if(j>t.minTranslate())s.freeModeMomentumBounce?(j-t.minTranslate()>_&&(j=t.minTranslate()+_),h=t.minTranslate(),C=!0,r.allowMomentumBounce=!0):j=t.minTranslate(),s.loop&&s.centeredSlides&&(m=!0);else if(s.freeModeSticky){for(var k=0;k<o.length;k+=1)if(o[k]>-j){f=k;break}j=-(j=Math.abs(o[f]-j)<Math.abs(o[f-1]-j)||"next"===t.swipeDirection?o[f]:o[f-1])}if(m&&t.once("transitionEnd",function(){t.loopFix()}),0!==t.velocity){if(y=a?Math.abs((-j-t.translate)/t.velocity):Math.abs((j-t.translate)/t.velocity),s.freeModeSticky){var N=Math.abs((a?-j:j)-t.translate),E=t.slidesSizesGrid[t.activeIndex];y=N<E?s.speed:N<2*E?1.5*s.speed:2.5*s.speed}}else if(s.freeModeSticky){t.slideToClosest();return}s.freeModeMomentumBounce&&C?(t.updateProgress(h),t.setTransition(y),t.setTranslate(j),t.transitionStart(!0,t.swipeDirection),t.animating=!0,i.transitionEnd(function(){t&&!t.destroyed&&r.allowMomentumBounce&&(t.emit("momentumBounce"),t.setTransition(s.speed),setTimeout(function(){t.setTranslate(h),i.transitionEnd(function(){t&&!t.destroyed&&t.transitionEnd()})},0))})):t.velocity?(t.updateProgress(j),t.setTransition(y),t.setTranslate(j),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,i.transitionEnd(function(){t&&!t.destroyed&&t.transitionEnd()}))):(t.emit("_freeModeNoMomentumRelease"),t.updateProgress(j)),t.updateActiveIndex(),t.updateSlidesClasses()}else if(s.freeModeSticky){t.slideToClosest();return}else s.freeMode&&t.emit("_freeModeNoMomentumRelease");(!s.freeModeMomentum||u>=s.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses());return}for(var S=0,T=t.slidesSizesGrid[0],F=0;F<l.length;F+=F<s.slidesPerGroupSkip?1:s.slidesPerGroup){var L=F<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;void 0!==l[F+L]?p>=l[F]&&p<l[F+L]&&(S=F,T=l[F+L]-l[F]):p>=l[F]&&(S=F,T=l[l.length-1]-l[l.length-2])}var M=(p-l[S])/T,A=S<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;if(u>s.longSwipesMs){if(!s.longSwipes){t.slideTo(t.activeIndex);return}"next"===t.swipeDirection&&(M>=s.longSwipesRatio?t.slideTo(S+A):t.slideTo(S)),"prev"===t.swipeDirection&&(M>1-s.longSwipesRatio?t.slideTo(S+A):t.slideTo(S))}else{if(!s.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(d.target===t.navigation.nextEl||d.target===t.navigation.prevEl)?d.target===t.navigation.nextEl?t.slideTo(S+A):t.slideTo(S):("next"===t.swipeDirection&&t.slideTo(S+A),"prev"===t.swipeDirection&&t.slideTo(S))}}}function sO(){var e=this.params,t=this.el;if(!t||0!==t.offsetWidth){e.breakpoints&&this.setBreakpoint();var r=this.allowSlideNext,s=this.allowSlidePrev,n=this.snapGrid;this.allowSlideNext=!0,this.allowSlidePrev=!0,this.updateSize(),this.updateSlides(),this.updateSlidesClasses(),("auto"===e.slidesPerView||e.slidesPerView>1)&&this.isEnd&&!this.isBeginning&&!this.params.centeredSlides?this.slideTo(this.slides.length-1,0,!1,!0):this.slideTo(this.activeIndex,0,!1,!0),this.autoplay&&this.autoplay.running&&this.autoplay.paused&&this.autoplay.run(),this.allowSlidePrev=s,this.allowSlideNext=r,this.params.watchOverflow&&n!==this.snapGrid&&this.checkOverflow()}}function sB(e){this.enabled&&!this.allowClick&&(this.params.preventClicks&&e.preventDefault(),this.params.preventClicksPropagation&&this.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))}function sq(){var e=this.wrapperEl,t=this.rtlTranslate;if(this.enabled){this.previousTranslate=this.translate,this.isHorizontal()?t?this.translate=e.scrollWidth-e.offsetWidth-e.scrollLeft:this.translate=-e.scrollLeft:this.translate=-e.scrollTop,-0===this.translate&&(this.translate=0),this.updateActiveIndex(),this.updateSlidesClasses();var r=this.maxTranslate()-this.minTranslate();(0===r?0:(this.translate-this.minTranslate())/r)!==this.progress&&this.updateProgress(t?-this.translate:this.translate),this.emit("setTranslate",this.translate,!1)}}var sH=!1;function sV(){}var sU={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!1,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,slidesPerGroupSkip:0,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1},sW={modular:{useParams:function(e){var t=this;t.modules&&Object.keys(t.modules).forEach(function(r){var s=t.modules[r];s.params&&sF(e,s.params)})},useModules:function(e){void 0===e&&(e={});var t=this;t.modules&&Object.keys(t.modules).forEach(function(r){var s=t.modules[r],n=e[r]||{};s.on&&t.on&&Object.keys(s.on).forEach(function(e){t.on(e,s.on[e])}),s.create&&s.create.bind(t)(n)})}},eventsEmitter:{on:function(e,t,r){var s=this;if("function"!=typeof t)return s;var n=r?"unshift":"push";return e.split(" ").forEach(function(e){s.eventsListeners[e]||(s.eventsListeners[e]=[]),s.eventsListeners[e][n](t)}),s},once:function(e,t,r){var s=this;if("function"!=typeof t)return s;function n(){s.off(e,n),n.__emitterProxy&&delete n.__emitterProxy;for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];t.apply(s,a)}return n.__emitterProxy=t,s.on(e,n,r)},onAny:function(e,t){return"function"!=typeof e||0>this.eventsAnyListeners.indexOf(e)&&this.eventsAnyListeners[t?"unshift":"push"](e),this},offAny:function(e){if(!this.eventsAnyListeners)return this;var t=this.eventsAnyListeners.indexOf(e);return t>=0&&this.eventsAnyListeners.splice(t,1),this},off:function(e,t){var r=this;return r.eventsListeners&&e.split(" ").forEach(function(e){void 0===t?r.eventsListeners[e]=[]:r.eventsListeners[e]&&r.eventsListeners[e].forEach(function(s,n){(s===t||s.__emitterProxy&&s.__emitterProxy===t)&&r.eventsListeners[e].splice(n,1)})}),r},emit:function(){var e,t,r,s=this;if(!s.eventsListeners)return s;for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];return"string"==typeof a[0]||Array.isArray(a[0])?(e=a[0],t=a.slice(1,a.length),r=s):(e=a[0].events,t=a[0].data,r=a[0].context||s),t.unshift(r),(Array.isArray(e)?e:e.split(" ")).forEach(function(e){s.eventsAnyListeners&&s.eventsAnyListeners.length&&s.eventsAnyListeners.forEach(function(s){s.apply(r,[e].concat(t))}),s.eventsListeners&&s.eventsListeners[e]&&s.eventsListeners[e].forEach(function(e){e.apply(r,t)})}),s}},update:{updateSize:function(){var e,t,r=this.$el;e=void 0!==this.params.width&&null!==this.params.width?this.params.width:r[0].clientWidth,t=void 0!==this.params.height&&null!==this.params.height?this.params.height:r[0].clientHeight,0===e&&this.isHorizontal()||0===t&&this.isVertical()||(e=e-parseInt(r.css("padding-left")||0,10)-parseInt(r.css("padding-right")||0,10),t=t-parseInt(r.css("padding-top")||0,10)-parseInt(r.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),sF(this,{width:e,height:t,size:this.isHorizontal()?e:t}))},updateSlides:function(){var e=this;function t(t){return e.isHorizontal()?t:({width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"})[t]}function r(e,r){return parseFloat(e.getPropertyValue(t(r))||0)}var s=e.params,n=e.$wrapperEl,a=e.size,i=e.rtlTranslate,l=e.wrongRTL,o=e.virtual&&s.virtual.enabled,d=o?e.virtual.slides.length:e.slides.length,c=n.children("."+e.params.slideClass),u=o?e.virtual.slides.length:c.length,p=[],h=[],m=[],f=s.slidesOffsetBefore;"function"==typeof f&&(f=s.slidesOffsetBefore.call(e));var v=s.slidesOffsetAfter;"function"==typeof v&&(v=s.slidesOffsetAfter.call(e));var x=e.snapGrid.length,g=e.slidesGrid.length,b=s.spaceBetween,y=-f,w=0,j=0;if(void 0!==a){"string"==typeof b&&b.indexOf("%")>=0&&(b=parseFloat(b.replace("%",""))/100*a),e.virtualSize=-b,i?c.css({marginLeft:"",marginBottom:"",marginTop:""}):c.css({marginRight:"",marginBottom:"",marginTop:""}),s.slidesPerColumn>1&&(Y=Math.floor(u/s.slidesPerColumn)===u/e.params.slidesPerColumn?u:Math.ceil(u/s.slidesPerColumn)*s.slidesPerColumn,"auto"!==s.slidesPerView&&"row"===s.slidesPerColumnFill&&(Y=Math.max(Y,s.slidesPerView*s.slidesPerColumn)));for(var C=s.slidesPerColumn,_=Y/C,k=Math.floor(u/s.slidesPerColumn),N=0;N<u;N+=1){X=0;var E=c.eq(N);if(s.slidesPerColumn>1){var S=void 0,T=void 0,F=void 0;if("row"===s.slidesPerColumnFill&&s.slidesPerGroup>1){var L=Math.floor(N/(s.slidesPerGroup*s.slidesPerColumn)),M=N-s.slidesPerColumn*s.slidesPerGroup*L,A=0===L?s.slidesPerGroup:Math.min(Math.ceil((u-L*C*s.slidesPerGroup)/C),s.slidesPerGroup);F=Math.floor(M/A),S=(T=M-F*A+L*s.slidesPerGroup)+F*Y/C,E.css({"-webkit-box-ordinal-group":S,"-moz-box-ordinal-group":S,"-ms-flex-order":S,"-webkit-order":S,order:S})}else"column"===s.slidesPerColumnFill?(T=Math.floor(N/C),F=N-T*C,(T>k||T===k&&F===C-1)&&(F+=1)>=C&&(F=0,T+=1)):(F=Math.floor(N/_),T=N-F*_);E.css(t("margin-top"),0!==F?s.spaceBetween&&s.spaceBetween+"px":"")}if("none"!==E.css("display")){if("auto"===s.slidesPerView){var P=getComputedStyle(E[0]),Z=E[0].style.transform,I=E[0].style.webkitTransform;if(Z&&(E[0].style.transform="none"),I&&(E[0].style.webkitTransform="none"),s.roundLengths)X=e.isHorizontal()?E.outerWidth(!0):E.outerHeight(!0);else{var D=r(P,"width"),R=r(P,"padding-left"),z=r(P,"padding-right"),O=r(P,"margin-left"),B=r(P,"margin-right"),q=P.getPropertyValue("box-sizing");if(q&&"border-box"===q)X=D+O+B;else{var H=E[0],V=H.clientWidth;X=D+R+z+O+B+(H.offsetWidth-V)}}Z&&(E[0].style.transform=Z),I&&(E[0].style.webkitTransform=I),s.roundLengths&&(X=Math.floor(X))}else X=(a-(s.slidesPerView-1)*b)/s.slidesPerView,s.roundLengths&&(X=Math.floor(X)),c[N]&&(c[N].style[t("width")]=X+"px");c[N]&&(c[N].swiperSlideSize=X),m.push(X),s.centeredSlides?(y=y+X/2+w/2+b,0===w&&0!==N&&(y=y-a/2-b),0===N&&(y=y-a/2-b),.001>Math.abs(y)&&(y=0),s.roundLengths&&(y=Math.floor(y)),j%s.slidesPerGroup==0&&p.push(y),h.push(y)):(s.roundLengths&&(y=Math.floor(y)),(j-Math.min(e.params.slidesPerGroupSkip,j))%e.params.slidesPerGroup==0&&p.push(y),h.push(y),y=y+X+b),e.virtualSize+=X+b,w=X,j+=1}}if(e.virtualSize=Math.max(e.virtualSize,a)+v,i&&l&&("slide"===s.effect||"coverflow"===s.effect)&&n.css({width:e.virtualSize+s.spaceBetween+"px"}),s.setWrapperSize&&n.css(((K={})[t("width")]=e.virtualSize+s.spaceBetween+"px",K)),s.slidesPerColumn>1&&(e.virtualSize=(X+s.spaceBetween)*Y,e.virtualSize=Math.ceil(e.virtualSize/s.slidesPerColumn)-s.spaceBetween,n.css(((Q={})[t("width")]=e.virtualSize+s.spaceBetween+"px",Q)),s.centeredSlides)){J=[];for(var U=0;U<p.length;U+=1){var W=p[U];s.roundLengths&&(W=Math.floor(W)),p[U]<e.virtualSize+p[0]&&J.push(W)}p=J}if(!s.centeredSlides){J=[];for(var G=0;G<p.length;G+=1){var $=p[G];s.roundLengths&&($=Math.floor($)),p[G]<=e.virtualSize-a&&J.push($)}p=J,Math.floor(e.virtualSize-a)-Math.floor(p[p.length-1])>1&&p.push(e.virtualSize-a)}if(0===p.length&&(p=[0]),0!==s.spaceBetween){var Y,X,J,K,Q,ee,et=e.isHorizontal()&&i?"marginLeft":t("marginRight");c.filter(function(e,t){return!s.cssMode||t!==c.length-1}).css(((ee={})[et]=b+"px",ee))}if(s.centeredSlides&&s.centeredSlidesBounds){var er=0;m.forEach(function(e){er+=e+(s.spaceBetween?s.spaceBetween:0)});var es=(er-=s.spaceBetween)-a;p=p.map(function(e){return e<0?-f:e>es?es+v:e})}if(s.centerInsufficientSlides){var en=0;if(m.forEach(function(e){en+=e+(s.spaceBetween?s.spaceBetween:0)}),(en-=s.spaceBetween)<a){var ea=(a-en)/2;p.forEach(function(e,t){p[t]=e-ea}),h.forEach(function(e,t){h[t]=e+ea})}}sF(e,{slides:c,snapGrid:p,slidesGrid:h,slidesSizesGrid:m}),u!==d&&e.emit("slidesLengthChange"),p.length!==x&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),h.length!==g&&e.emit("slidesGridLengthChange"),(s.watchSlidesProgress||s.watchSlidesVisibility)&&e.updateSlidesOffset()}},updateAutoHeight:function(e){var t,r=this,s=[],n=r.virtual&&r.params.virtual.enabled,a=0;"number"==typeof e?r.setTransition(e):!0===e&&r.setTransition(r.params.speed);var i=function(e){return n?r.slides.filter(function(t){return parseInt(t.getAttribute("data-swiper-slide-index"),10)===e})[0]:r.slides.eq(e)[0]};if("auto"!==r.params.slidesPerView&&r.params.slidesPerView>1){if(r.params.centeredSlides)r.visibleSlides.each(function(e){s.push(e)});else for(t=0;t<Math.ceil(r.params.slidesPerView);t+=1){var l=r.activeIndex+t;if(l>r.slides.length&&!n)break;s.push(i(l))}}else s.push(i(r.activeIndex));for(t=0;t<s.length;t+=1)if(void 0!==s[t]){var o=s[t].offsetHeight;a=o>a?o:a}a&&r.$wrapperEl.css("height",a+"px")},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this.params,r=this.slides,s=this.rtlTranslate;if(0!==r.length){void 0===r[0].swiperSlideOffset&&this.updateSlidesOffset();var n=-e;s&&(n=e),r.removeClass(t.slideVisibleClass),this.visibleSlidesIndexes=[],this.visibleSlides=[];for(var a=0;a<r.length;a+=1){var i=r[a],l=(n+(t.centeredSlides?this.minTranslate():0)-i.swiperSlideOffset)/(i.swiperSlideSize+t.spaceBetween);if(t.watchSlidesVisibility||t.centeredSlides&&t.autoHeight){var o=-(n-i.swiperSlideOffset),d=o+this.slidesSizesGrid[a];(o>=0&&o<this.size-1||d>1&&d<=this.size||o<=0&&d>=this.size)&&(this.visibleSlides.push(i),this.visibleSlidesIndexes.push(a),r.eq(a).addClass(t.slideVisibleClass))}i.progress=s?-l:l}this.visibleSlides=sC(this.visibleSlides)}},updateProgress:function(e){if(void 0===e){var t=this.rtlTranslate?-1:1;e=this&&this.translate&&this.translate*t||0}var r=this.params,s=this.maxTranslate()-this.minTranslate(),n=this.progress,a=this.isBeginning,i=this.isEnd,l=a,o=i;0===s?(n=0,a=!0,i=!0):(a=(n=(e-this.minTranslate())/s)<=0,i=n>=1),sF(this,{progress:n,isBeginning:a,isEnd:i}),(r.watchSlidesProgress||r.watchSlidesVisibility||r.centeredSlides&&r.autoHeight)&&this.updateSlidesProgress(e),a&&!l&&this.emit("reachBeginning toEdge"),i&&!o&&this.emit("reachEnd toEdge"),(l&&!a||o&&!i)&&this.emit("fromEdge"),this.emit("progress",n)},updateSlidesClasses:function(){var e,t=this.slides,r=this.params,s=this.$wrapperEl,n=this.activeIndex,a=this.realIndex,i=this.virtual&&r.virtual.enabled;t.removeClass(r.slideActiveClass+" "+r.slideNextClass+" "+r.slidePrevClass+" "+r.slideDuplicateActiveClass+" "+r.slideDuplicateNextClass+" "+r.slideDuplicatePrevClass),(e=i?this.$wrapperEl.find("."+r.slideClass+'[data-swiper-slide-index="'+n+'"]'):t.eq(n)).addClass(r.slideActiveClass),r.loop&&(e.hasClass(r.slideDuplicateClass)?s.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+a+'"]').addClass(r.slideDuplicateActiveClass):s.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+a+'"]').addClass(r.slideDuplicateActiveClass));var l=e.nextAll("."+r.slideClass).eq(0).addClass(r.slideNextClass);r.loop&&0===l.length&&(l=t.eq(0)).addClass(r.slideNextClass);var o=e.prevAll("."+r.slideClass).eq(0).addClass(r.slidePrevClass);r.loop&&0===o.length&&(o=t.eq(-1)).addClass(r.slidePrevClass),r.loop&&(l.hasClass(r.slideDuplicateClass)?s.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicateNextClass):s.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicateNextClass),o.hasClass(r.slideDuplicateClass)?s.children("."+r.slideClass+":not(."+r.slideDuplicateClass+')[data-swiper-slide-index="'+o.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicatePrevClass):s.children("."+r.slideClass+"."+r.slideDuplicateClass+'[data-swiper-slide-index="'+o.attr("data-swiper-slide-index")+'"]').addClass(r.slideDuplicatePrevClass)),this.emitSlidesClasses()},updateActiveIndex:function(e){var t,r=this.rtlTranslate?this.translate:-this.translate,s=this.slidesGrid,n=this.snapGrid,a=this.params,i=this.activeIndex,l=this.realIndex,o=this.snapIndex,d=e;if(void 0===d){for(var c=0;c<s.length;c+=1)void 0!==s[c+1]?r>=s[c]&&r<s[c+1]-(s[c+1]-s[c])/2?d=c:r>=s[c]&&r<s[c+1]&&(d=c+1):r>=s[c]&&(d=c);a.normalizeSlideIndex&&(d<0||void 0===d)&&(d=0)}if(n.indexOf(r)>=0)t=n.indexOf(r);else{var u=Math.min(a.slidesPerGroupSkip,d);t=u+Math.floor((d-u)/a.slidesPerGroup)}if(t>=n.length&&(t=n.length-1),d===i){t!==o&&(this.snapIndex=t,this.emit("snapIndexChange"));return}var p=parseInt(this.slides.eq(d).attr("data-swiper-slide-index")||d,10);sF(this,{snapIndex:t,realIndex:p,previousIndex:i,activeIndex:d}),this.emit("activeIndexChange"),this.emit("snapIndexChange"),l!==p&&this.emit("realIndexChange"),(this.initialized||this.params.runCallbacksOnInit)&&this.emit("slideChange")},updateClickedSlide:function(e){var t,r=this.params,s=sC(e.target).closest("."+r.slideClass)[0],n=!1;if(s){for(var a=0;a<this.slides.length;a+=1)if(this.slides[a]===s){n=!0,t=a;break}}if(s&&n)this.clickedSlide=s,this.virtual&&this.params.virtual.enabled?this.clickedIndex=parseInt(sC(s).attr("data-swiper-slide-index"),10):this.clickedIndex=t;else{this.clickedSlide=void 0,this.clickedIndex=void 0;return}r.slideToClickedSlide&&void 0!==this.clickedIndex&&this.clickedIndex!==this.activeIndex&&this.slideToClickedSlide()}},translate:{getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t,r,s,n,a,i,l,o,d,c=this.params,u=this.rtlTranslate,p=this.translate,h=this.$wrapperEl;if(c.virtualTranslate)return u?-p:p;if(c.cssMode)return p;var m=(t=h[0],void 0===(r=e)&&(r="x"),i=sf(),(o=sf()).getComputedStyle&&(l=o.getComputedStyle(t,null)),!l&&t.currentStyle&&(l=t.currentStyle),l||(l=t.style),d=l,i.WebKitCSSMatrix?((n=d.transform||d.webkitTransform).split(",").length>6&&(n=n.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),a=new i.WebKitCSSMatrix("none"===n?"":n)):s=(a=d.MozTransform||d.OTransform||d.MsTransform||d.msTransform||d.transform||d.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===r&&(n=i.WebKitCSSMatrix?a.m41:16===s.length?parseFloat(s[12]):parseFloat(s[4])),"y"===r&&(n=i.WebKitCSSMatrix?a.m42:16===s.length?parseFloat(s[13]):parseFloat(s[5])),n||0);return u&&(m=-m),m||0},setTranslate:function(e,t){var r=this.rtlTranslate,s=this.params,n=this.$wrapperEl,a=this.wrapperEl,i=this.progress,l=0,o=0;this.isHorizontal()?l=r?-e:e:o=e,s.roundLengths&&(l=Math.floor(l),o=Math.floor(o)),s.cssMode?a[this.isHorizontal()?"scrollLeft":"scrollTop"]=this.isHorizontal()?-l:-o:s.virtualTranslate||n.transform("translate3d("+l+"px, "+o+"px, 0px)"),this.previousTranslate=this.translate,this.translate=this.isHorizontal()?l:o;var d=this.maxTranslate()-this.minTranslate();(0===d?0:(e-this.minTranslate())/d)!==i&&this.updateProgress(e),this.emit("setTranslate",this.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,r,s,n){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===r&&(r=!0),void 0===s&&(s=!0);var a=this,i=a.params,l=a.wrapperEl;if(a.animating&&i.preventInteractionOnTransition)return!1;var o=a.minTranslate(),d=a.maxTranslate();if(c=s&&e>o?o:s&&e<d?d:e,a.updateProgress(c),i.cssMode){var c,u,p=a.isHorizontal();return 0===t?l[p?"scrollLeft":"scrollTop"]=-c:l.scrollTo?l.scrollTo(((u={})[p?"left":"top"]=-c,u.behavior="smooth",u)):l[p?"scrollLeft":"scrollTop"]=-c,!0}return 0===t?(a.setTransition(0),a.setTranslate(c),r&&(a.emit("beforeTransitionStart",t,n),a.emit("transitionEnd"))):(a.setTransition(t),a.setTranslate(c),r&&(a.emit("beforeTransitionStart",t,n),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(e){a&&!a.destroyed&&e.target===this&&(a.$wrapperEl[0].removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].removeEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,r&&a.emit("transitionEnd"))}),a.$wrapperEl[0].addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].addEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function(e,t){this.params.cssMode||this.$wrapperEl.transition(e),this.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var r=this.activeIndex,s=this.params,n=this.previousIndex;if(!s.cssMode){s.autoHeight&&this.updateAutoHeight();var a=t;if(a||(a=r>n?"next":r<n?"prev":"reset"),this.emit("transitionStart"),e&&r!==n){if("reset"===a){this.emit("slideResetTransitionStart");return}this.emit("slideChangeTransitionStart"),"next"===a?this.emit("slideNextTransitionStart"):this.emit("slidePrevTransitionStart")}}},transitionEnd:function(e,t){void 0===e&&(e=!0);var r=this.activeIndex,s=this.previousIndex,n=this.params;if(this.animating=!1,!n.cssMode){this.setTransition(0);var a=t;if(a||(a=r>s?"next":r<s?"prev":"reset"),this.emit("transitionEnd"),e&&r!==s){if("reset"===a){this.emit("slideResetTransitionEnd");return}this.emit("slideChangeTransitionEnd"),"next"===a?this.emit("slideNextTransitionEnd"):this.emit("slidePrevTransitionEnd")}}}},slide:{slideTo:function(e,t,r,s,n){if(void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===r&&(r=!0),"number"!=typeof e&&"string"!=typeof e)throw Error("The 'index' argument cannot have type other than 'number' or 'string'. ["+typeof e+"] given.");if("string"==typeof e){var a=parseInt(e,10);if(!isFinite(a))throw Error("The passed-in 'index' (string) couldn't be converted to 'number'. ["+e+"] given.");e=a}var i=this,l=e;l<0&&(l=0);var o=i.params,d=i.snapGrid,c=i.slidesGrid,u=i.previousIndex,p=i.activeIndex,h=i.rtlTranslate,m=i.wrapperEl,f=i.enabled;if(i.animating&&o.preventInteractionOnTransition||!f&&!s&&!n)return!1;var v=Math.min(i.params.slidesPerGroupSkip,l),x=v+Math.floor((l-v)/i.params.slidesPerGroup);x>=d.length&&(x=d.length-1),(p||o.initialSlide||0)===(u||0)&&r&&i.emit("beforeSlideChangeStart");var g=-d[x];if(i.updateProgress(g),o.normalizeSlideIndex)for(var b=0;b<c.length;b+=1){var y=-Math.floor(100*g),w=Math.floor(100*c[b]),j=Math.floor(100*c[b+1]);void 0!==c[b+1]?y>=w&&y<j-(j-w)/2?l=b:y>=w&&y<j&&(l=b+1):y>=w&&(l=b)}if(i.initialized&&l!==p&&(!i.allowSlideNext&&g<i.translate&&g<i.minTranslate()||!i.allowSlidePrev&&g>i.translate&&g>i.maxTranslate()&&(p||0)!==l))return!1;if(C=l>p?"next":l<p?"prev":"reset",h&&-g===i.translate||!h&&g===i.translate)return i.updateActiveIndex(l),o.autoHeight&&i.updateAutoHeight(),i.updateSlidesClasses(),"slide"!==o.effect&&i.setTranslate(g),"reset"!==C&&(i.transitionStart(r,C),i.transitionEnd(r,C)),!1;if(o.cssMode){var C,_,k=i.isHorizontal(),N=-g;return h&&(N=m.scrollWidth-m.offsetWidth-N),0===t?m[k?"scrollLeft":"scrollTop"]=N:m.scrollTo?m.scrollTo(((_={})[k?"left":"top"]=N,_.behavior="smooth",_)):m[k?"scrollLeft":"scrollTop"]=N,!0}return 0===t?(i.setTransition(0),i.setTranslate(g),i.updateActiveIndex(l),i.updateSlidesClasses(),i.emit("beforeTransitionStart",t,s),i.transitionStart(r,C),i.transitionEnd(r,C)):(i.setTransition(t),i.setTranslate(g),i.updateActiveIndex(l),i.updateSlidesClasses(),i.emit("beforeTransitionStart",t,s),i.transitionStart(r,C),i.animating||(i.animating=!0,i.onSlideToWrapperTransitionEnd||(i.onSlideToWrapperTransitionEnd=function(e){i&&!i.destroyed&&e.target===this&&(i.$wrapperEl[0].removeEventListener("transitionend",i.onSlideToWrapperTransitionEnd),i.$wrapperEl[0].removeEventListener("webkitTransitionEnd",i.onSlideToWrapperTransitionEnd),i.onSlideToWrapperTransitionEnd=null,delete i.onSlideToWrapperTransitionEnd,i.transitionEnd(r,C))}),i.$wrapperEl[0].addEventListener("transitionend",i.onSlideToWrapperTransitionEnd),i.$wrapperEl[0].addEventListener("webkitTransitionEnd",i.onSlideToWrapperTransitionEnd))),!0},slideToLoop:function(e,t,r,s){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===r&&(r=!0);var n=e;return this.params.loop&&(n+=this.loopedSlides),this.slideTo(n,t,r,s)},slideNext:function(e,t,r){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var s=this.params,n=this.animating;if(!this.enabled)return this;var a=this.activeIndex<s.slidesPerGroupSkip?1:s.slidesPerGroup;if(s.loop){if(n&&s.loopPreventsSlide)return!1;this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft}return this.slideTo(this.activeIndex+a,e,t,r)},slidePrev:function(e,t,r){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var s,n=this.params,a=this.animating,i=this.snapGrid,l=this.slidesGrid,o=this.rtlTranslate;if(!this.enabled)return this;if(n.loop){if(a&&n.loopPreventsSlide)return!1;this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft}function d(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var c=d(o?this.translate:-this.translate),u=i.map(function(e){return d(e)}),p=i[u.indexOf(c)-1];return void 0===p&&n.cssMode&&i.forEach(function(e){!p&&c>=e&&(p=e)}),void 0!==p&&(s=l.indexOf(p))<0&&(s=this.activeIndex-1),this.slideTo(s,e,t,r)},slideReset:function(e,t,r){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,r)},slideToClosest:function(e,t,r,s){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),void 0===s&&(s=.5);var n=this.activeIndex,a=Math.min(this.params.slidesPerGroupSkip,n),i=a+Math.floor((n-a)/this.params.slidesPerGroup),l=this.rtlTranslate?this.translate:-this.translate;if(l>=this.snapGrid[i]){var o=this.snapGrid[i];l-o>(this.snapGrid[i+1]-o)*s&&(n+=this.params.slidesPerGroup)}else{var d=this.snapGrid[i-1];l-d<=(this.snapGrid[i]-d)*s&&(n-=this.params.slidesPerGroup)}return n=Math.min(n=Math.max(n,0),this.slidesGrid.length-1),this.slideTo(n,e,t,r)},slideToClickedSlide:function(){var e,t=this,r=t.params,s=t.$wrapperEl,n="auto"===r.slidesPerView?t.slidesPerViewDynamic():r.slidesPerView,a=t.clickedIndex;if(r.loop){if(t.animating)return;e=parseInt(sC(t.clickedSlide).attr("data-swiper-slide-index"),10),r.centeredSlides?a<t.loopedSlides-n/2||a>t.slides.length-t.loopedSlides+n/2?(t.loopFix(),a=s.children("."+r.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+r.slideDuplicateClass+")").eq(0).index(),sE(function(){t.slideTo(a)})):t.slideTo(a):a>t.slides.length-n?(t.loopFix(),a=s.children("."+r.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+r.slideDuplicateClass+")").eq(0).index(),sE(function(){t.slideTo(a)})):t.slideTo(a)}else t.slideTo(a)}},loop:{loopCreate:function(){var e=this,t=sh(),r=e.params,s=e.$wrapperEl;s.children("."+r.slideClass+"."+r.slideDuplicateClass).remove();var n=s.children("."+r.slideClass);if(r.loopFillGroupWithBlank){var a=r.slidesPerGroup-n.length%r.slidesPerGroup;if(a!==r.slidesPerGroup){for(var i=0;i<a;i+=1){var l=sC(t.createElement("div")).addClass(r.slideClass+" "+r.slideBlankClass);s.append(l)}n=s.children("."+r.slideClass)}}"auto"!==r.slidesPerView||r.loopedSlides||(r.loopedSlides=n.length),e.loopedSlides=Math.ceil(parseFloat(r.loopedSlides||r.slidesPerView,10)),e.loopedSlides+=r.loopAdditionalSlides,e.loopedSlides>n.length&&(e.loopedSlides=n.length);var o=[],d=[];n.each(function(t,r){var s=sC(t);r<e.loopedSlides&&d.push(t),r<n.length&&r>=n.length-e.loopedSlides&&o.push(t),s.attr("data-swiper-slide-index",r)});for(var c=0;c<d.length;c+=1)s.append(sC(d[c].cloneNode(!0)).addClass(r.slideDuplicateClass));for(var u=o.length-1;u>=0;u-=1)s.prepend(sC(o[u].cloneNode(!0)).addClass(r.slideDuplicateClass))},loopFix:function(){this.emit("beforeLoopFix");var e,t=this.activeIndex,r=this.slides,s=this.loopedSlides,n=this.allowSlidePrev,a=this.allowSlideNext,i=this.snapGrid,l=this.rtlTranslate;this.allowSlidePrev=!0,this.allowSlideNext=!0;var o=-i[t]-this.getTranslate();t<s?(e=r.length-3*s+t+s,this.slideTo(e,0,!1,!0)&&0!==o&&this.setTranslate((l?-this.translate:this.translate)-o)):t>=r.length-s&&(e=-r.length+t+s+s,this.slideTo(e,0,!1,!0)&&0!==o&&this.setTranslate((l?-this.translate:this.translate)-o)),this.allowSlidePrev=n,this.allowSlideNext=a,this.emit("loopFix")},loopDestroy:function(){var e=this.$wrapperEl,t=this.params,r=this.slides;e.children("."+t.slideClass+"."+t.slideDuplicateClass+",."+t.slideClass+"."+t.slideBlankClass).remove(),r.removeAttr("data-swiper-slide-index")}},grabCursor:{setGrabCursor:function(e){if(!this.support.touch&&this.params.simulateTouch&&(!this.params.watchOverflow||!this.isLocked)&&!this.params.cssMode){var t=this.el;t.style.cursor="move",t.style.cursor=e?"-webkit-grabbing":"-webkit-grab",t.style.cursor=e?"-moz-grabbin":"-moz-grab",t.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){this.support.touch||this.params.watchOverflow&&this.isLocked||this.params.cssMode||(this.el.style.cursor="")}},manipulation:{appendSlide:function(e){var t=this.$wrapperEl,r=this.params;if(r.loop&&this.loopDestroy(),"object"==typeof e&&"length"in e)for(var s=0;s<e.length;s+=1)e[s]&&t.append(e[s]);else t.append(e);r.loop&&this.loopCreate(),r.observer&&this.support.observer||this.update()},prependSlide:function(e){var t=this.params,r=this.$wrapperEl,s=this.activeIndex;t.loop&&this.loopDestroy();var n=s+1;if("object"==typeof e&&"length"in e){for(var a=0;a<e.length;a+=1)e[a]&&r.prepend(e[a]);n=s+e.length}else r.prepend(e);t.loop&&this.loopCreate(),t.observer&&this.support.observer||this.update(),this.slideTo(n,0,!1)},addSlide:function(e,t){var r=this.$wrapperEl,s=this.params,n=this.activeIndex;s.loop&&(n-=this.loopedSlides,this.loopDestroy(),this.slides=r.children("."+s.slideClass));var a=this.slides.length;if(e<=0){this.prependSlide(t);return}if(e>=a){this.appendSlide(t);return}for(var i=n>e?n+1:n,l=[],o=a-1;o>=e;o-=1){var d=this.slides.eq(o);d.remove(),l.unshift(d)}if("object"==typeof t&&"length"in t){for(var c=0;c<t.length;c+=1)t[c]&&r.append(t[c]);i=n>e?n+t.length:n}else r.append(t);for(var u=0;u<l.length;u+=1)r.append(l[u]);s.loop&&this.loopCreate(),s.observer&&this.support.observer||this.update(),s.loop?this.slideTo(i+this.loopedSlides,0,!1):this.slideTo(i,0,!1)},removeSlide:function(e){var t,r=this.params,s=this.$wrapperEl,n=this.activeIndex;r.loop&&(n-=this.loopedSlides,this.loopDestroy(),this.slides=s.children("."+r.slideClass));var a=n;if("object"==typeof e&&"length"in e){for(var i=0;i<e.length;i+=1)t=e[i],this.slides[t]&&this.slides.eq(t).remove(),t<a&&(a-=1);a=Math.max(a,0)}else t=e,this.slides[t]&&this.slides.eq(t).remove(),t<a&&(a-=1),a=Math.max(a,0);r.loop&&this.loopCreate(),r.observer&&this.support.observer||this.update(),r.loop?this.slideTo(a+this.loopedSlides,0,!1):this.slideTo(a,0,!1)},removeAllSlides:function(){for(var e=[],t=0;t<this.slides.length;t+=1)e.push(t);this.removeSlide(e)}},events:{attachEvents:function(){var e=sh(),t=this.params,r=this.touchEvents,s=this.el,n=this.wrapperEl,a=this.device,i=this.support;this.onTouchStart=sD.bind(this),this.onTouchMove=sR.bind(this),this.onTouchEnd=sz.bind(this),t.cssMode&&(this.onScroll=sq.bind(this)),this.onClick=sB.bind(this);var l=!!t.nested;if(!i.touch&&i.pointerEvents)s.addEventListener(r.start,this.onTouchStart,!1),e.addEventListener(r.move,this.onTouchMove,l),e.addEventListener(r.end,this.onTouchEnd,!1);else{if(i.touch){var o="touchstart"===r.start&&!!i.passiveListener&&!!t.passiveListeners&&{passive:!0,capture:!1};s.addEventListener(r.start,this.onTouchStart,o),s.addEventListener(r.move,this.onTouchMove,i.passiveListener?{passive:!1,capture:l}:l),s.addEventListener(r.end,this.onTouchEnd,o),r.cancel&&s.addEventListener(r.cancel,this.onTouchEnd,o),sH||(e.addEventListener("touchstart",sV),sH=!0)}(t.simulateTouch&&!a.ios&&!a.android||t.simulateTouch&&!i.touch&&a.ios)&&(s.addEventListener("mousedown",this.onTouchStart,!1),e.addEventListener("mousemove",this.onTouchMove,l),e.addEventListener("mouseup",this.onTouchEnd,!1))}(t.preventClicks||t.preventClicksPropagation)&&s.addEventListener("click",this.onClick,!0),t.cssMode&&n.addEventListener("scroll",this.onScroll),t.updateOnWindowResize?this.on(a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",sO,!0):this.on("observerUpdate",sO,!0)},detachEvents:function(){var e=sh(),t=this.params,r=this.touchEvents,s=this.el,n=this.wrapperEl,a=this.device,i=this.support,l=!!t.nested;if(!i.touch&&i.pointerEvents)s.removeEventListener(r.start,this.onTouchStart,!1),e.removeEventListener(r.move,this.onTouchMove,l),e.removeEventListener(r.end,this.onTouchEnd,!1);else{if(i.touch){var o="onTouchStart"===r.start&&!!i.passiveListener&&!!t.passiveListeners&&{passive:!0,capture:!1};s.removeEventListener(r.start,this.onTouchStart,o),s.removeEventListener(r.move,this.onTouchMove,l),s.removeEventListener(r.end,this.onTouchEnd,o),r.cancel&&s.removeEventListener(r.cancel,this.onTouchEnd,o)}(t.simulateTouch&&!a.ios&&!a.android||t.simulateTouch&&!i.touch&&a.ios)&&(s.removeEventListener("mousedown",this.onTouchStart,!1),e.removeEventListener("mousemove",this.onTouchMove,l),e.removeEventListener("mouseup",this.onTouchEnd,!1))}(t.preventClicks||t.preventClicksPropagation)&&s.removeEventListener("click",this.onClick,!0),t.cssMode&&n.removeEventListener("scroll",this.onScroll),this.off(a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",sO)}},breakpoints:{setBreakpoint:function(){var e=this.activeIndex,t=this.initialized,r=this.loopedSlides,s=this.params,n=this.$el,a=s.breakpoints;if(a&&(!a||0!==Object.keys(a).length)){var i=this.getBreakpoint(a,this.params.breakpointsBase,this.el);if(i&&this.currentBreakpoint!==i){var l=i in a?a[i]:void 0;l&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerGroupSkip","slidesPerColumn"].forEach(function(e){var t=l[e];void 0!==t&&("slidesPerView"===e&&("AUTO"===t||"auto"===t)?l[e]="auto":"slidesPerView"===e?l[e]=parseFloat(t):l[e]=parseInt(t,10))});var o=l||this.originalParams,d=s.slidesPerColumn>1,c=o.slidesPerColumn>1,u=s.enabled;d&&!c?(n.removeClass(s.containerModifierClass+"multirow "+s.containerModifierClass+"multirow-column"),this.emitContainerClasses()):!d&&c&&(n.addClass(s.containerModifierClass+"multirow"),(o.slidesPerColumnFill&&"column"===o.slidesPerColumnFill||!o.slidesPerColumnFill&&"column"===s.slidesPerColumnFill)&&n.addClass(s.containerModifierClass+"multirow-column"),this.emitContainerClasses());var p=o.direction&&o.direction!==s.direction,h=s.loop&&(o.slidesPerView!==s.slidesPerView||p);p&&t&&this.changeDirection(),sF(this.params,o);var m=this.params.enabled;sF(this,{allowTouchMove:this.params.allowTouchMove,allowSlideNext:this.params.allowSlideNext,allowSlidePrev:this.params.allowSlidePrev}),u&&!m?this.disable():!u&&m&&this.enable(),this.currentBreakpoint=i,this.emit("_beforeBreakpoint",o),h&&t&&(this.loopDestroy(),this.loopCreate(),this.updateSlides(),this.slideTo(e-(void 0===r?0:r)+this.loopedSlides,0,!1)),this.emit("breakpoint",o)}}},getBreakpoint:function(e,t,r){if(void 0===t&&(t="window"),e&&("container"!==t||r)){var s=!1,n=sf(),a="window"===t?n.innerHeight:r.clientHeight,i=Object.keys(e).map(function(e){return"string"==typeof e&&0===e.indexOf("@")?{value:a*parseFloat(e.substr(1)),point:e}:{value:e,point:e}});i.sort(function(e,t){return parseInt(e.value,10)-parseInt(t.value,10)});for(var l=0;l<i.length;l+=1){var o=i[l],d=o.point,c=o.value;"window"===t?n.matchMedia("(min-width: "+c+"px)").matches&&(s=d):c<=r.clientWidth&&(s=d)}return s||"max"}}},checkOverflow:{checkOverflow:function(){var e=this.params,t=this.isLocked,r=this.slides.length>0&&e.slidesOffsetBefore+e.spaceBetween*(this.slides.length-1)+this.slides[0].offsetWidth*this.slides.length;e.slidesOffsetBefore&&e.slidesOffsetAfter&&r?this.isLocked=r<=this.size:this.isLocked=1===this.snapGrid.length,this.allowSlideNext=!this.isLocked,this.allowSlidePrev=!this.isLocked,t!==this.isLocked&&this.emit(this.isLocked?"lock":"unlock"),t&&t!==this.isLocked&&(this.isEnd=!1,this.navigation&&this.navigation.update())}},classes:{addClasses:function(){var e,t,r,s=this.classNames,n=this.params,a=this.rtl,i=this.$el,l=this.device,o=this.support,d=(e=["initialized",n.direction,{"pointer-events":o.pointerEvents&&!o.touch},{"free-mode":n.freeMode},{autoheight:n.autoHeight},{rtl:a},{multirow:n.slidesPerColumn>1},{"multirow-column":n.slidesPerColumn>1&&"column"===n.slidesPerColumnFill},{android:l.android},{ios:l.ios},{"css-mode":n.cssMode}],t=n.containerModifierClass,r=[],e.forEach(function(e){"object"==typeof e?Object.keys(e).forEach(function(s){e[s]&&r.push(t+s)}):"string"==typeof e&&r.push(t+e)}),r);s.push.apply(s,d),i.addClass([].concat(s).join(" ")),this.emitContainerClasses()},removeClasses:function(){var e=this.$el,t=this.classNames;e.removeClass(t.join(" ")),this.emitContainerClasses()}},images:{loadImage:function(e,t,r,s,n,a){var i,l=sf();function o(){a&&a()}sC(e).parent("picture")[0]||e.complete&&n?o():t?((i=new l.Image).onload=o,i.onerror=o,s&&(i.sizes=s),r&&(i.srcset=r),t&&(i.src=t)):o()},preloadImages:function(){var e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var r=0;r<e.imagesToLoad.length;r+=1){var s=e.imagesToLoad[r];e.loadImage(s,s.currentSrc||s.getAttribute("src"),s.srcset||s.getAttribute("srcset"),s.sizes||s.getAttribute("sizes"),!0,t)}}}},sG={},s$=function(){function e(){for(var t,r,s,n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];if(1===a.length&&a[0].constructor&&"Object"===Object.prototype.toString.call(a[0]).slice(8,-1)?s=a[0]:(r=a[0],s=a[1]),s||(s={}),s=sF({},s),r&&!s.el&&(s.el=r),s.el&&sC(s.el).length>1){var l=[];return sC(s.el).each(function(t){var r=sF({},s,{el:t});l.push(new e(r))}),l}var o=this;o.__swiper__=!0,o.support=sP(),o.device=function(e){if(void 0===e&&(e={}),!p){var t,r,s,n,a,i,l,o,d,c,u,h,m,f;r=(void 0===(t=e)?{}:t).userAgent,s=sP(),a=(n=sf()).navigator.platform,i=r||n.navigator.userAgent,l={ios:!1,android:!1},o=n.screen.width,d=n.screen.height,c=i.match(/(Android);?[\s\/]+([\d.]+)?/),u=i.match(/(iPad).*OS\s([\d_]+)/),h=i.match(/(iPod)(.*OS\s([\d_]+))?/),m=!u&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f="MacIntel"===a,!u&&f&&s.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(o+"x"+d)>=0&&((u=i.match(/(Version)\/([\d.]+)/))||(u=[0,1,"13_0_0"]),f=!1),c&&"Win32"!==a&&(l.os="android",l.android=!0),(u||m||h)&&(l.os="ios",l.ios=!0),p=l}return p}({userAgent:s.userAgent}),o.browser=function(){if(!h){var e,t;h={isEdge:!!(e=sf()).navigator.userAgent.match(/Edge/g),isSafari:(t=e.navigator.userAgent.toLowerCase()).indexOf("safari")>=0&&0>t.indexOf("chrome")&&0>t.indexOf("android"),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}return h}(),o.eventsListeners={},o.eventsAnyListeners=[],void 0===o.modules&&(o.modules={}),Object.keys(o.modules).forEach(function(e){var t=o.modules[e];if(t.params){var r=Object.keys(t.params)[0],n=t.params[r];if("object"!=typeof n||null===n||(["navigation","pagination","scrollbar"].indexOf(r)>=0&&!0===s[r]&&(s[r]={auto:!0}),!(r in s&&"enabled"in n)))return;!0===s[r]&&(s[r]={enabled:!0}),"object"!=typeof s[r]||"enabled"in s[r]||(s[r].enabled=!0),s[r]||(s[r]={enabled:!1})}});var d=sF({},sU);return o.useParams(d),o.params=sF({},d,sG,s),o.originalParams=sF({},o.params),o.passedParams=sF({},s),o.params&&o.params.on&&Object.keys(o.params.on).forEach(function(e){o.on(e,o.params.on[e])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),o.$=sC,sF(o,{enabled:o.params.enabled,el:r,classNames:[],slides:sC(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===o.params.direction},isVertical:function(){return"vertical"===o.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEvents:(t=["mousedown","mousemove","mouseup"],o.support.pointerEvents&&(t=["pointerdown","pointermove","pointerup"]),o.touchEventsTouch={start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},o.touchEventsDesktop={start:t[0],move:t[1],end:t[2]},o.support.touch||!o.params.simulateTouch?o.touchEventsTouch:o.touchEventsDesktop),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:sS(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.useModules(),o.emit("_swiper"),o.params.init&&o.init(),o}var t=e.prototype;return t.enable=function(){this.enabled||(this.enabled=!0,this.params.grabCursor&&this.setGrabCursor(),this.emit("enable"))},t.disable=function(){this.enabled&&(this.enabled=!1,this.params.grabCursor&&this.unsetGrabCursor(),this.emit("disable"))},t.setProgress=function(e,t){e=Math.min(Math.max(e,0),1);var r=this.minTranslate(),s=(this.maxTranslate()-r)*e+r;this.translateTo(s,void 0===t?0:t),this.updateActiveIndex(),this.updateSlidesClasses()},t.emitContainerClasses=function(){var e=this;if(e.params._emitClasses&&e.el){var t=e.el.className.split(" ").filter(function(t){return 0===t.indexOf("swiper-container")||0===t.indexOf(e.params.containerModifierClass)});e.emit("_containerClasses",t.join(" "))}},t.getSlideClasses=function(e){var t=this;return e.className.split(" ").filter(function(e){return 0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)}).join(" ")},t.emitSlidesClasses=function(){var e=this;if(e.params._emitClasses&&e.el){var t=[];e.slides.each(function(r){var s=e.getSlideClasses(r);t.push({slideEl:r,classNames:s}),e.emit("_slideClass",r,s)}),e.emit("_slideClasses",t)}},t.slidesPerViewDynamic=function(){var e=this.params,t=this.slides,r=this.slidesGrid,s=this.size,n=this.activeIndex,a=1;if(e.centeredSlides){for(var i,l=t[n].swiperSlideSize,o=n+1;o<t.length;o+=1)t[o]&&!i&&(l+=t[o].swiperSlideSize,a+=1,l>s&&(i=!0));for(var d=n-1;d>=0;d-=1)t[d]&&!i&&(l+=t[d].swiperSlideSize,a+=1,l>s&&(i=!0))}else for(var c=n+1;c<t.length;c+=1)r[c]-r[n]<s&&(a+=1);return a},t.update=function(){var e=this;if(e&&!e.destroyed){var t=e.snapGrid,r=e.params;r.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode?(s(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||s(),r.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}function s(){var t=Math.min(Math.max(e.rtlTranslate?-1*e.translate:e.translate,e.maxTranslate()),e.minTranslate());e.setTranslate(t),e.updateActiveIndex(),e.updateSlidesClasses()}},t.changeDirection=function(e,t){void 0===t&&(t=!0);var r=this.params.direction;return e||(e="horizontal"===r?"vertical":"horizontal"),e===r||"horizontal"!==e&&"vertical"!==e||(this.$el.removeClass(""+this.params.containerModifierClass+r).addClass(""+this.params.containerModifierClass+e),this.emitContainerClasses(),this.params.direction=e,this.slides.each(function(t){"vertical"===e?t.style.width="":t.style.height=""}),this.emit("changeDirection"),t&&this.update()),this},t.mount=function(e){var t=this;if(t.mounted)return!0;var r=sC(e||t.params.el);if(!(e=r[0]))return!1;e.swiper=t;var s=function(){return"."+(t.params.wrapperClass||"").trim().split(" ").join(".")},n=function(){if(e&&e.shadowRoot&&e.shadowRoot.querySelector){var t=sC(e.shadowRoot.querySelector(s()));return t.children=function(e){return r.children(e)},t}return r.children(s())}();if(0===n.length&&t.params.createElements){var a=sh().createElement("div");n=sC(a),a.className=t.params.wrapperClass,r.append(a),r.children("."+t.params.slideClass).each(function(e){n.append(e)})}return sF(t,{$el:r,el:e,$wrapperEl:n,wrapperEl:n[0],mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===r.css("direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===r.css("direction")),wrongRTL:"-webkit-box"===n.css("display")}),!0},t.init=function(e){return this.initialized||!1===this.mount(e)||(this.emit("beforeInit"),this.params.breakpoints&&this.setBreakpoint(),this.addClasses(),this.params.loop&&this.loopCreate(),this.updateSize(),this.updateSlides(),this.params.watchOverflow&&this.checkOverflow(),this.params.grabCursor&&this.enabled&&this.setGrabCursor(),this.params.preloadImages&&this.preloadImages(),this.params.loop?this.slideTo(this.params.initialSlide+this.loopedSlides,0,this.params.runCallbacksOnInit,!1,!0):this.slideTo(this.params.initialSlide,0,this.params.runCallbacksOnInit,!1,!0),this.attachEvents(),this.initialized=!0,this.emit("init"),this.emit("afterInit")),this},t.destroy=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var r=this,s=r.params,n=r.$el,a=r.$wrapperEl,i=r.slides;return void 0===r.params||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),s.loop&&r.loopDestroy(),t&&(r.removeClasses(),n.removeAttr("style"),a.removeAttr("style"),i&&i.length&&i.removeClass([s.slideVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(function(e){r.off(e)}),!1!==e&&(r.$el[0].swiper=null,function(e){Object.keys(e).forEach(function(t){try{e[t]=null}catch(e){}try{delete e[t]}catch(e){}})}(r)),r.destroyed=!0),null},e.extendDefaults=function(e){sF(sG,e)},e.installModule=function(t){e.prototype.modules||(e.prototype.modules={});var r=t.name||Object.keys(e.prototype.modules).length+"_"+sS();e.prototype.modules[r]=t},e.use=function(t){return Array.isArray(t)?t.forEach(function(t){return e.installModule(t)}):e.installModule(t),e},function(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(e,[{key:"extendedDefaults",get:function(){return sG}},{key:"defaults",get:function(){return sU}}]),e}();function sY(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function sX(e,t){var r=["__proto__","constructor","prototype"];Object.keys(t).filter(function(e){return 0>r.indexOf(e)}).forEach(function(r){void 0===e[r]?e[r]=t[r]:sY(t[r])&&sY(e[r])&&Object.keys(t[r]).length>0?t[r].__swiper__?e[r]=t[r]:sX(e[r],t[r]):e[r]=t[r]})}function sJ(e){return void 0===e&&(e={}),e.navigation&&void 0===e.navigation.nextEl&&void 0===e.navigation.prevEl}function sK(e){return void 0===e&&(e={}),e.pagination&&void 0===e.pagination.el}function sQ(e){return void 0===e&&(e={}),e.scrollbar&&void 0===e.scrollbar.el}function s0(e){void 0===e&&(e="");var t=e.split(" ").map(function(e){return e.trim()}).filter(function(e){return!!e}),r=[];return t.forEach(function(e){0>r.indexOf(e)&&r.push(e)}),r.join(" ")}Object.keys(sW).forEach(function(e){Object.keys(sW[e]).forEach(function(t){s$.prototype[t]=sW[e][t]})}),s$.use([{name:"resize",create:function(){var e=this;sF(e,{resize:{observer:null,createObserver:function(){e&&!e.destroyed&&e.initialized&&(e.resize.observer=new ResizeObserver(function(t){var r=e.width,s=e.height,n=r,a=s;t.forEach(function(t){var r=t.contentBoxSize,s=t.contentRect,i=t.target;i&&i!==e.el||(n=s?s.width:(r[0]||r).inlineSize,a=s?s.height:(r[0]||r).blockSize)}),(n!==r||a!==s)&&e.resize.resizeHandler()}),e.resize.observer.observe(e.el))},removeObserver:function(){e.resize.observer&&e.resize.observer.unobserve&&e.el&&(e.resize.observer.unobserve(e.el),e.resize.observer=null)},resizeHandler:function(){e&&!e.destroyed&&e.initialized&&(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler:function(){e&&!e.destroyed&&e.initialized&&e.emit("orientationchange")}}})},on:{init:function(e){var t=sf();if(e.params.resizeObserver&&void 0!==sf().ResizeObserver){e.resize.createObserver();return}t.addEventListener("resize",e.resize.resizeHandler),t.addEventListener("orientationchange",e.resize.orientationChangeHandler)},destroy:function(e){var t=sf();e.resize.removeObserver(),t.removeEventListener("resize",e.resize.resizeHandler),t.removeEventListener("orientationchange",e.resize.orientationChangeHandler)}}},{name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){sL(this,{observer:sZ({},sI,{observers:[]})})},on:{init:function(e){e.observer.init()},destroy:function(e){e.observer.destroy()}}}]);var s1=["init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_freeModeMomentum","_freeModeMomentumRatio","_freeModeMomentumBounce","_freeModeMomentumBounceRatio","_freeModeMomentumVelocityRatio","_freeModeSticky","_freeModeMinimumVelocity","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","_slidesPerColumn","_slidesPerColumnFill","_slidesPerGroup","_slidesPerGroupSkip","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_watchSlidesVisibility","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopFillGroupWithBlank","loopPreventsSlide","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function s2(e,t){var r=t.slidesPerView;if(t.breakpoints){var s=s$.prototype.getBreakpoint(t.breakpoints),n=s in t.breakpoints?t.breakpoints[s]:void 0;n&&n.slidesPerView&&(r=n.slidesPerView)}var a=Math.ceil(parseFloat(t.loopedSlides||r,10));return(a+=t.loopAdditionalSlides)>e.length&&(a=e.length),a}function s3(e,t){return"undefined"==typeof window?(0,v.useEffect)(e,t):(0,v.useLayoutEffect)(e,t)}var s5=["className","tag","wrapperTag","children","onSwiper"];function s6(){return(s6=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}var s4=(0,v.forwardRef)(function(e,t){var r,s,n,a,i,l,o,d,c=void 0===e?{}:e,u=c.className,p=c.tag,h=c.wrapperTag,m=c.children,f=c.onSwiper,x=function(e,t){if(null==e)return{};var r,s,n={},a=Object.keys(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}(c,s5),g=!1,b=(0,v.useState)("swiper-container"),y=b[0],w=b[1],j=(0,v.useState)(null),C=j[0],_=j[1],k=(0,v.useState)(!1),N=k[0],E=k[1],S=(0,v.useRef)(!1),T=(0,v.useRef)(null),F=(0,v.useRef)(null),L=(0,v.useRef)(null),M=(0,v.useRef)(null),A=(0,v.useRef)(null),P=(0,v.useRef)(null),Z=(0,v.useRef)(null),I=(0,v.useRef)(null),D=(void 0===(r=x)&&(r={}),n={},a={},sX(s={on:{}},s$.defaults),sX(s,s$.extendedDefaults),s._emitClasses=!0,s.init=!1,i={},l=s1.map(function(e){return e.replace(/_/,"")}),Object.keys(r).forEach(function(e){l.indexOf(e)>=0?sY(r[e])?(s[e]={},a[e]={},sX(s[e],r[e]),sX(a[e],r[e])):(s[e]=r[e],a[e]=r[e]):0===e.search(/on[A-Z]/)&&"function"==typeof r[e]?n[""+e[2].toLowerCase()+e.substr(3)]=r[e]:i[e]=r[e]}),["navigation","pagination","scrollbar"].forEach(function(e){!0===s[e]&&(s[e]={}),!1===s[e]&&delete s[e]}),{params:s,passedParams:a,rest:i,events:n}),R=D.params,z=D.passedParams,O=D.rest,B=D.events,q=(o=[],d={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},v.Children.toArray(m).forEach(function(e){if(e.type&&"SwiperSlide"===e.type.displayName)o.push(e);else if(e.props&&e.props.slot&&d[e.props.slot])d[e.props.slot].push(e);else if(e.props&&e.props.children){var t=function e(t){var r=[];return v.Children.toArray(t).forEach(function(t){t.type&&"SwiperSlide"===t.type.displayName?r.push(t):t.props&&t.props.children&&e(t.props.children).forEach(function(e){return r.push(e)})}),r}(e.props.children);t.length>0?t.forEach(function(e){return o.push(e)}):d["container-end"].push(e)}else d["container-end"].push(e)}),{slides:o,slots:d}),H=q.slides,V=q.slots,U=function(){E(!N)};if(Object.assign(R.on,{_containerClasses:function(e,t){w(t)}}),!T.current&&(Object.assign(R.on,B),g=!0,F.current=new s$(R),F.current.loopCreate=function(){},F.current.loopDestroy=function(){},R.loop&&(F.current.loopedSlides=s2(H,R)),F.current.virtual&&F.current.params.virtual.enabled)){F.current.virtual.slides=H;var W={cache:!1,renderExternal:_,renderExternalUpdate:!1};sX(F.current.params.virtual,W),sX(F.current.originalParams.virtual,W)}F.current&&F.current.on("_beforeBreakpoint",U);var G=function(){!g&&B&&F.current&&Object.keys(B).forEach(function(e){F.current.on(e,B[e])})},$=function(){B&&F.current&&Object.keys(B).forEach(function(e){F.current.off(e,B[e])})};return(0,v.useEffect)(function(){return function(){F.current&&F.current.off("_beforeBreakpoint",U)}}),(0,v.useEffect)(function(){!S.current&&F.current&&(F.current.emitSlidesClasses(),S.current=!0)}),s3(function(){if(t&&(t.current=T.current),T.current){var e,r,s,n,a,i,l;return r=(e={el:T.current,nextEl:A.current,prevEl:P.current,paginationEl:Z.current,scrollbarEl:I.current,swiper:F.current}).el,s=e.nextEl,n=e.prevEl,a=e.paginationEl,i=e.scrollbarEl,l=e.swiper,sJ(R)&&s&&n&&(l.params.navigation.nextEl=s,l.originalParams.navigation.nextEl=s,l.params.navigation.prevEl=n,l.originalParams.navigation.prevEl=n),sK(R)&&a&&(l.params.pagination.el=a,l.originalParams.pagination.el=a),sQ(R)&&i&&(l.params.scrollbar.el=i,l.originalParams.scrollbar.el=i),l.init(r),f&&f(F.current),function(){F.current&&!F.current.destroyed&&F.current.destroy(!0,!1)}}},[]),s3(function(){G();var e,t,r,s,n,a,i,l,o,d,c,u,p,h,m,f,v,x,g,b,y,w,j=function(e,t,r,s){var n=[];if(!t)return n;var a=function(e){0>n.indexOf(e)&&n.push(e)},i=s.map(function(e){return e.key}),l=r.map(function(e){return e.key});return i.join("")!==l.join("")&&a("children"),s.length!==r.length&&a("children"),s1.filter(function(e){return"_"===e[0]}).map(function(e){return e.replace(/_/,"")}).forEach(function(r){if(r in e&&r in t){if(sY(e[r])&&sY(t[r])){var s=Object.keys(e[r]),n=Object.keys(t[r]);s.length!==n.length?a(r):(s.forEach(function(s){e[r][s]!==t[r][s]&&a(r)}),n.forEach(function(s){e[r][s]!==t[r][s]&&a(r)}))}else e[r]!==t[r]&&a(r)}}),n}(z,L.current,H,M.current);return L.current=z,M.current=H,j.length&&F.current&&!F.current.destroyed&&(i=(e={swiper:F.current,slides:H,passedParams:z,changedParams:j,nextEl:A.current,prevEl:P.current,scrollbarEl:I.current,paginationEl:Z.current}).swiper,l=e.slides,o=e.passedParams,d=e.changedParams,c=e.nextEl,u=e.prevEl,p=e.scrollbarEl,h=e.paginationEl,m=d.filter(function(e){return"children"!==e&&"direction"!==e}),f=i.params,v=i.pagination,x=i.navigation,g=i.scrollbar,b=i.virtual,y=i.thumbs,d.includes("thumbs")&&o.thumbs&&o.thumbs.swiper&&f.thumbs&&!f.thumbs.swiper&&(t=!0),d.includes("controller")&&o.controller&&o.controller.control&&f.controller&&!f.controller.control&&(r=!0),d.includes("pagination")&&o.pagination&&(o.pagination.el||h)&&(f.pagination||!1===f.pagination)&&v&&!v.el&&(s=!0),d.includes("scrollbar")&&o.scrollbar&&(o.scrollbar.el||p)&&(f.scrollbar||!1===f.scrollbar)&&g&&!g.el&&(n=!0),d.includes("navigation")&&o.navigation&&(o.navigation.prevEl||u)&&(o.navigation.nextEl||c)&&(f.navigation||!1===f.navigation)&&x&&!x.prevEl&&!x.nextEl&&(a=!0),w=function(e){i[e]&&(i[e].destroy(),"navigation"===e?(f[e].prevEl=void 0,f[e].nextEl=void 0,i[e].prevEl=void 0,i[e].nextEl=void 0):(f[e].el=void 0,i[e].el=void 0))},m.forEach(function(e){if(sY(f[e])&&sY(o[e]))sX(f[e],o[e]);else{var t=o[e];(!0===t||!1===t)&&("navigation"===e||"pagination"===e||"scrollbar"===e)?!1===t&&w(e):f[e]=o[e]}}),d.includes("children")&&b&&f.virtual.enabled?(b.slides=l,b.update(!0)):d.includes("children")&&i.lazy&&i.params.lazy.enabled&&i.lazy.load(),t&&y.init()&&y.update(!0),r&&(i.controller.control=f.controller.control),s&&(h&&(f.pagination.el=h),v.init(),v.render(),v.update()),n&&(p&&(f.scrollbar.el=p),g.init(),g.updateSize(),g.setTranslate()),a&&(c&&(f.navigation.nextEl=c),u&&(f.navigation.prevEl=u),x.init(),x.update()),d.includes("allowSlideNext")&&(i.allowSlideNext=o.allowSlideNext),d.includes("allowSlidePrev")&&(i.allowSlidePrev=o.allowSlidePrev),d.includes("direction")&&i.changeDirection(o.direction,!1),i.update()),function(){$()}}),s3(function(){var e;!(e=F.current)||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())},[C]),v.createElement(void 0===p?"div":p,s6({ref:T,className:s0(""+y+(u?" "+u:""))},O),V["container-start"],sJ(R)&&v.createElement(v.Fragment,null,v.createElement("div",{ref:P,className:"swiper-button-prev"}),v.createElement("div",{ref:A,className:"swiper-button-next"})),sQ(R)&&v.createElement("div",{ref:I,className:"swiper-scrollbar"}),sK(R)&&v.createElement("div",{ref:Z,className:"swiper-pagination"}),v.createElement(void 0===h?"div":h,{className:"swiper-wrapper"},V["wrapper-start"],R.virtual?function(e,t,r){if(!r)return null;var s,n=e.isHorizontal()?((s={})[e.rtlTranslate?"right":"left"]=r.offset+"px",s):{top:r.offset+"px"};return t.filter(function(e,t){return t>=r.from&&t<=r.to}).map(function(t){return v.cloneElement(t,{swiper:e,style:n})})}(F.current,H,C):!R.loop||F.current&&F.current.destroyed?H.map(function(e){return v.cloneElement(e,{swiper:F.current})}):function(e,t,r){var s=t.map(function(t,r){return v.cloneElement(t,{swiper:e,"data-swiper-slide-index":r})});function n(e,t,s){return v.cloneElement(e,{key:e.key+"-duplicate-"+t+"-"+s,className:(e.props.className||"")+" "+r.slideDuplicateClass})}if(r.loopFillGroupWithBlank){var a=r.slidesPerGroup-s.length%r.slidesPerGroup;if(a!==r.slidesPerGroup)for(var i=0;i<a;i+=1){var l=v.createElement("div",{className:r.slideClass+" "+r.slideBlankClass});s.push(l)}}"auto"!==r.slidesPerView||r.loopedSlides||(r.loopedSlides=s.length);var o=s2(s,r),d=[],c=[];return s.forEach(function(e,t){t<o&&c.push(n(e,t,"prepend")),t<s.length&&t>=s.length-o&&d.push(n(e,t,"append"))}),e&&(e.loopedSlides=o),[].concat(d,s,c)}(F.current,H,R),V["wrapper-end"]),V["container-end"])});s4.displayName="Swiper";var s7=["tag","children","className","swiper","zoom","virtualIndex"];function s8(){return(s8=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}var s9=(0,v.forwardRef)(function(e,t){var r,s=void 0===e?{}:e,n=s.tag,a=s.children,i=s.className,l=void 0===i?"":i,o=s.swiper,d=s.zoom,c=s.virtualIndex,u=function(e,t){if(null==e)return{};var r,s,n={},a=Object.keys(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}(s,s7),p=(0,v.useRef)(null),h=(0,v.useState)("swiper-slide"),m=h[0],f=h[1];function x(e,t,r){t===p.current&&f(r)}s3(function(){if(t&&(t.current=p.current),p.current&&o){if(o.destroyed){"swiper-slide"!==m&&f("swiper-slide");return}return o.on("_slideClass",x),function(){o&&o.off("_slideClass",x)}}}),s3(function(){o&&p.current&&f(o.getSlideClasses(p.current))},[o]),"function"==typeof a&&(r={isActive:m.indexOf("swiper-slide-active")>=0||m.indexOf("swiper-slide-duplicate-active")>=0,isVisible:m.indexOf("swiper-slide-visible")>=0,isDuplicate:m.indexOf("swiper-slide-duplicate")>=0,isPrev:m.indexOf("swiper-slide-prev")>=0||m.indexOf("swiper-slide-duplicate-prev")>=0,isNext:m.indexOf("swiper-slide-next")>=0||m.indexOf("swiper-slide-duplicate-next")>=0});var g=function(){return"function"==typeof a?a(r):a};return v.createElement(void 0===n?"div":n,s8({ref:p,className:s0(""+m+(l?" "+l:"")),"data-swiper-slide-index":c},u),d?v.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"==typeof d?d:void 0},g()):g())});function ne(){return(ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}s9.displayName="SwiperSlide",r(36512),r(41282),r(12767);var nt={update:function(){var e=this.rtl,t=this.params.pagination;if(t.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var r=this.virtual&&this.params.virtual.enabled?this.virtual.slides.length:this.slides.length,s=this.pagination.$el,n=this.params.loop?Math.ceil((r-2*this.loopedSlides)/this.params.slidesPerGroup):this.snapGrid.length;if(this.params.loop?((a=Math.ceil((this.activeIndex-this.loopedSlides)/this.params.slidesPerGroup))>r-1-2*this.loopedSlides&&(a-=r-2*this.loopedSlides),a>n-1&&(a-=n),a<0&&"bullets"!==this.params.paginationType&&(a=n+a)):a=void 0!==this.snapIndex?this.snapIndex:this.activeIndex||0,"bullets"===t.type&&this.pagination.bullets&&this.pagination.bullets.length>0){var a,i,l,o,d=this.pagination.bullets;if(t.dynamicBullets&&(this.pagination.bulletSize=d.eq(0)[this.isHorizontal()?"outerWidth":"outerHeight"](!0),s.css(this.isHorizontal()?"width":"height",this.pagination.bulletSize*(t.dynamicMainBullets+4)+"px"),t.dynamicMainBullets>1&&void 0!==this.previousIndex&&(this.pagination.dynamicBulletIndex+=a-this.previousIndex,this.pagination.dynamicBulletIndex>t.dynamicMainBullets-1?this.pagination.dynamicBulletIndex=t.dynamicMainBullets-1:this.pagination.dynamicBulletIndex<0&&(this.pagination.dynamicBulletIndex=0)),o=((l=(i=a-this.pagination.dynamicBulletIndex)+(Math.min(d.length,t.dynamicMainBullets)-1))+i)/2),d.removeClass(t.bulletActiveClass+" "+t.bulletActiveClass+"-next "+t.bulletActiveClass+"-next-next "+t.bulletActiveClass+"-prev "+t.bulletActiveClass+"-prev-prev "+t.bulletActiveClass+"-main"),s.length>1)d.each(function(e){var r=sC(e),s=r.index();s===a&&r.addClass(t.bulletActiveClass),t.dynamicBullets&&(s>=i&&s<=l&&r.addClass(t.bulletActiveClass+"-main"),s===i&&r.prev().addClass(t.bulletActiveClass+"-prev").prev().addClass(t.bulletActiveClass+"-prev-prev"),s===l&&r.next().addClass(t.bulletActiveClass+"-next").next().addClass(t.bulletActiveClass+"-next-next"))});else{var c=d.eq(a),u=c.index();if(c.addClass(t.bulletActiveClass),t.dynamicBullets){for(var p=d.eq(i),h=d.eq(l),m=i;m<=l;m+=1)d.eq(m).addClass(t.bulletActiveClass+"-main");if(this.params.loop){if(u>=d.length-t.dynamicMainBullets){for(var f=t.dynamicMainBullets;f>=0;f-=1)d.eq(d.length-f).addClass(t.bulletActiveClass+"-main");d.eq(d.length-t.dynamicMainBullets-1).addClass(t.bulletActiveClass+"-prev")}else p.prev().addClass(t.bulletActiveClass+"-prev").prev().addClass(t.bulletActiveClass+"-prev-prev"),h.next().addClass(t.bulletActiveClass+"-next").next().addClass(t.bulletActiveClass+"-next-next")}else p.prev().addClass(t.bulletActiveClass+"-prev").prev().addClass(t.bulletActiveClass+"-prev-prev"),h.next().addClass(t.bulletActiveClass+"-next").next().addClass(t.bulletActiveClass+"-next-next")}}if(t.dynamicBullets){var v=Math.min(d.length,t.dynamicMainBullets+4),x=(this.pagination.bulletSize*v-this.pagination.bulletSize)/2-o*this.pagination.bulletSize;d.css(this.isHorizontal()?e?"right":"left":"top",x+"px")}}if("fraction"===t.type&&(s.find(sM(t.currentClass)).text(t.formatFractionCurrent(a+1)),s.find(sM(t.totalClass)).text(t.formatFractionTotal(n))),"progressbar"===t.type){g=t.progressbarOpposite?this.isHorizontal()?"vertical":"horizontal":this.isHorizontal()?"horizontal":"vertical";var g,b=(a+1)/n,y=1,w=1;"horizontal"===g?y=b:w=b,s.find(sM(t.progressbarFillClass)).transform("translate3d(0,0,0) scaleX("+y+") scaleY("+w+")").transition(this.params.speed)}"custom"===t.type&&t.renderCustom?(s.html(t.renderCustom(this,a+1,n)),this.emit("paginationRender",s[0])):this.emit("paginationUpdate",s[0]),this.params.watchOverflow&&this.enabled&&s[this.isLocked?"addClass":"removeClass"](t.lockClass)}},render:function(){var e=this.params.pagination;if(e.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var t=this.virtual&&this.params.virtual.enabled?this.virtual.slides.length:this.slides.length,r=this.pagination.$el,s="";if("bullets"===e.type){var n=this.params.loop?Math.ceil((t-2*this.loopedSlides)/this.params.slidesPerGroup):this.snapGrid.length;this.params.freeMode&&!this.params.loop&&n>t&&(n=t);for(var a=0;a<n;a+=1)e.renderBullet?s+=e.renderBullet.call(this,a,e.bulletClass):s+="<"+e.bulletElement+' class="'+e.bulletClass+'"></'+e.bulletElement+">";r.html(s),this.pagination.bullets=r.find(sM(e.bulletClass))}"fraction"===e.type&&(s=e.renderFraction?e.renderFraction.call(this,e.currentClass,e.totalClass):'<span class="'+e.currentClass+'"></span> / <span class="'+e.totalClass+'"></span>',r.html(s)),"progressbar"===e.type&&(s=e.renderProgressbar?e.renderProgressbar.call(this,e.progressbarFillClass):'<span class="'+e.progressbarFillClass+'"></span>',r.html(s)),"custom"!==e.type&&this.emit("paginationRender",this.pagination.$el[0])}},init:function(){var e=this;e.params.pagination=sA(e.$el,e.params.pagination,e.params.createElements,{el:"swiper-pagination"});var t=e.params.pagination;if(t.el){var r=sC(t.el);0===r.length||(e.params.uniqueNavElements&&"string"==typeof t.el&&r.length>1&&(r=e.$el.find(t.el)),"bullets"===t.type&&t.clickable&&r.addClass(t.clickableClass),r.addClass(t.modifierClass+t.type),"bullets"===t.type&&t.dynamicBullets&&(r.addClass(""+t.modifierClass+t.type+"-dynamic"),e.pagination.dynamicBulletIndex=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&r.addClass(t.progressbarOppositeClass),t.clickable&&r.on("click",sM(t.bulletClass),function(t){t.preventDefault();var r=sC(this).index()*e.params.slidesPerGroup;e.params.loop&&(r+=e.loopedSlides),e.slideTo(r)}),sF(e.pagination,{$el:r,el:r[0]}),e.enabled||r.addClass(t.lockClass))}},destroy:function(){var e=this.params.pagination;if(e.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var t=this.pagination.$el;t.removeClass(e.hiddenClass),t.removeClass(e.modifierClass+e.type),this.pagination.bullets&&this.pagination.bullets.removeClass(e.bulletActiveClass),e.clickable&&t.off("click",sM(e.bulletClass))}}};function nr(){return(nr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}var ns={run:function(){var e=this,t=e.slides.eq(e.activeIndex),r=e.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(r=t.attr("data-swiper-autoplay")||e.params.autoplay.delay),clearTimeout(e.autoplay.timeout),e.autoplay.timeout=sE(function(){var t;e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),t=e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(t=e.slideTo(e.slides.length-1,e.params.speed,!0,!0),e.emit("autoplay")):(t=e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.params.loop?(e.loopFix(),t=e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(t=e.slideTo(0,e.params.speed,!0,!0),e.emit("autoplay")):(t=e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")),e.params.cssMode&&e.autoplay.running?e.autoplay.run():!1===t&&e.autoplay.run()},r)},start:function(){return void 0===this.autoplay.timeout&&!this.autoplay.running&&(this.autoplay.running=!0,this.emit("autoplayStart"),this.autoplay.run(),!0)},stop:function(){return!!this.autoplay.running&&void 0!==this.autoplay.timeout&&(this.autoplay.timeout&&(clearTimeout(this.autoplay.timeout),this.autoplay.timeout=void 0),this.autoplay.running=!1,this.emit("autoplayStop"),!0)},pause:function(e){var t=this;t.autoplay.running&&(t.autoplay.paused||(t.autoplay.timeout&&clearTimeout(t.autoplay.timeout),t.autoplay.paused=!0,0!==e&&t.params.autoplay.waitForTransition?["transitionend","webkitTransitionEnd"].forEach(function(e){t.$wrapperEl[0].addEventListener(e,t.autoplay.onTransitionEnd)}):(t.autoplay.paused=!1,t.autoplay.run())))},onVisibilityChange:function(){var e=sh();"hidden"===e.visibilityState&&this.autoplay.running&&this.autoplay.pause(),"visible"===e.visibilityState&&this.autoplay.paused&&(this.autoplay.run(),this.autoplay.paused=!1)},onTransitionEnd:function(e){var t=this;t&&!t.destroyed&&t.$wrapperEl&&e.target===t.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach(function(e){t.$wrapperEl[0].removeEventListener(e,t.autoplay.onTransitionEnd)}),t.autoplay.paused=!1,t.autoplay.running?t.autoplay.run():t.autoplay.stop())},onMouseEnter:function(){var e=this;e.params.autoplay.disableOnInteraction?e.autoplay.stop():e.autoplay.pause(),["transitionend","webkitTransitionEnd"].forEach(function(t){e.$wrapperEl[0].removeEventListener(t,e.autoplay.onTransitionEnd)})},onMouseLeave:function(){this.params.autoplay.disableOnInteraction||(this.autoplay.paused=!1,this.autoplay.run())},attachMouseEvents:function(){this.params.autoplay.pauseOnMouseEnter&&(this.$el.on("mouseenter",this.autoplay.onMouseEnter),this.$el.on("mouseleave",this.autoplay.onMouseLeave))},detachMouseEvents:function(){this.$el.off("mouseenter",this.autoplay.onMouseEnter),this.$el.off("mouseleave",this.autoplay.onMouseLeave)}},nn={lastScrollTime:sS(),lastEventBeforeSnap:void 0,recentWheelEvents:[],event:function(){return sf().navigator.userAgent.indexOf("firefox")>-1?"DOMMouseScroll":!function(){var e=sh(),t="onwheel",r=t in e;if(!r){var s=e.createElement("div");s.setAttribute(t,"return;"),r="function"==typeof s[t]}return!r&&e.implementation&&e.implementation.hasFeature&&!0!==e.implementation.hasFeature("","")&&(r=e.implementation.hasFeature("Events.wheel","3.0")),r}()?"mousewheel":"wheel"},normalize:function(e){var t=0,r=0,s=0,n=0;return"detail"in e&&(r=e.detail),"wheelDelta"in e&&(r=-e.wheelDelta/120),"wheelDeltaY"in e&&(r=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=r,r=0),s=10*t,n=10*r,"deltaY"in e&&(n=e.deltaY),"deltaX"in e&&(s=e.deltaX),e.shiftKey&&!s&&(s=n,n=0),(s||n)&&e.deltaMode&&(1===e.deltaMode?(s*=40,n*=40):(s*=800,n*=800)),s&&!t&&(t=s<1?-1:1),n&&!r&&(r=n<1?-1:1),{spinX:t,spinY:r,pixelX:s,pixelY:n}},handleMouseEnter:function(){this.enabled&&(this.mouseEntered=!0)},handleMouseLeave:function(){this.enabled&&(this.mouseEntered=!1)},handle:function(e){var t=e,r=this;if(r.enabled){var s=r.params.mousewheel;r.params.cssMode&&t.preventDefault();var n=r.$el;if("container"!==r.params.mousewheel.eventsTarget&&(n=sC(r.params.mousewheel.eventsTarget)),!r.mouseEntered&&!n[0].contains(t.target)&&!s.releaseOnEdges)return!0;t.originalEvent&&(t=t.originalEvent);var a=0,i=r.rtlTranslate?-1:1,l=nn.normalize(t);if(s.forceToAxis){if(r.isHorizontal()){if(!(Math.abs(l.pixelX)>Math.abs(l.pixelY)))return!0;a=-l.pixelX*i}else{if(!(Math.abs(l.pixelY)>Math.abs(l.pixelX)))return!0;a=-l.pixelY}}else a=Math.abs(l.pixelX)>Math.abs(l.pixelY)?-l.pixelX*i:-l.pixelY;if(0===a)return!0;s.invert&&(a=-a);var o=r.getTranslate()+a*s.sensitivity;if(o>=r.minTranslate()&&(o=r.minTranslate()),o<=r.maxTranslate()&&(o=r.maxTranslate()),(r.params.loop||o!==r.minTranslate()&&o!==r.maxTranslate())&&r.params.nested&&t.stopPropagation(),r.params.freeMode){var d={time:sS(),delta:Math.abs(a),direction:Math.sign(a)},c=r.mousewheel.lastEventBeforeSnap,u=c&&d.time<c.time+500&&d.delta<=c.delta&&d.direction===c.direction;if(!u){r.mousewheel.lastEventBeforeSnap=void 0,r.params.loop&&r.loopFix();var p=r.getTranslate()+a*s.sensitivity,h=r.isBeginning,m=r.isEnd;if(p>=r.minTranslate()&&(p=r.minTranslate()),p<=r.maxTranslate()&&(p=r.maxTranslate()),r.setTransition(0),r.setTranslate(p),r.updateProgress(),r.updateActiveIndex(),r.updateSlidesClasses(),(!h&&r.isBeginning||!m&&r.isEnd)&&r.updateSlidesClasses(),r.params.freeModeSticky){clearTimeout(r.mousewheel.timeout),r.mousewheel.timeout=void 0;var f=r.mousewheel.recentWheelEvents;f.length>=15&&f.shift();var v=f.length?f[f.length-1]:void 0,x=f[0];if(f.push(d),v&&(d.delta>v.delta||d.direction!==v.direction))f.splice(0);else if(f.length>=15&&d.time-x.time<500&&x.delta-d.delta>=1&&d.delta<=6){var g=a>0?.8:.2;r.mousewheel.lastEventBeforeSnap=d,f.splice(0),r.mousewheel.timeout=sE(function(){r.slideToClosest(r.params.speed,!0,void 0,g)},0)}r.mousewheel.timeout||(r.mousewheel.timeout=sE(function(){r.mousewheel.lastEventBeforeSnap=d,f.splice(0),r.slideToClosest(r.params.speed,!0,void 0,.5)},500))}if(u||r.emit("scroll",t),r.params.autoplay&&r.params.autoplayDisableOnInteraction&&r.autoplay.stop(),p===r.minTranslate()||p===r.maxTranslate())return!0}}else{var b={time:sS(),delta:Math.abs(a),direction:Math.sign(a),raw:e},y=r.mousewheel.recentWheelEvents;y.length>=2&&y.shift();var w=y.length?y[y.length-1]:void 0;if(y.push(b),w?(b.direction!==w.direction||b.delta>w.delta||b.time>w.time+150)&&r.mousewheel.animateSlider(b):r.mousewheel.animateSlider(b),r.mousewheel.releaseScroll(b))return!0}return t.preventDefault?t.preventDefault():t.returnValue=!1,!1}},animateSlider:function(e){var t=sf();return!(this.params.mousewheel.thresholdDelta&&e.delta<this.params.mousewheel.thresholdDelta||this.params.mousewheel.thresholdTime&&sS()-this.mousewheel.lastScrollTime<this.params.mousewheel.thresholdTime)&&(!!(e.delta>=6&&sS()-this.mousewheel.lastScrollTime<60)||(e.direction<0?this.isEnd&&!this.params.loop||this.animating||(this.slideNext(),this.emit("scroll",e.raw)):this.isBeginning&&!this.params.loop||this.animating||(this.slidePrev(),this.emit("scroll",e.raw)),this.mousewheel.lastScrollTime=new t.Date().getTime(),!1))},releaseScroll:function(e){var t=this.params.mousewheel;if(e.direction<0){if(this.isEnd&&!this.params.loop&&t.releaseOnEdges)return!0}else if(this.isBeginning&&!this.params.loop&&t.releaseOnEdges)return!0;return!1},enable:function(){var e=nn.event();if(this.params.cssMode)return this.wrapperEl.removeEventListener(e,this.mousewheel.handle),!0;if(!e||this.mousewheel.enabled)return!1;var t=this.$el;return"container"!==this.params.mousewheel.eventsTarget&&(t=sC(this.params.mousewheel.eventsTarget)),t.on("mouseenter",this.mousewheel.handleMouseEnter),t.on("mouseleave",this.mousewheel.handleMouseLeave),t.on(e,this.mousewheel.handle),this.mousewheel.enabled=!0,!0},disable:function(){var e=nn.event();if(this.params.cssMode)return this.wrapperEl.addEventListener(e,this.mousewheel.handle),!0;if(!e||!this.mousewheel.enabled)return!1;var t=this.$el;return"container"!==this.params.mousewheel.eventsTarget&&(t=sC(this.params.mousewheel.eventsTarget)),t.off(e,this.mousewheel.handle),this.mousewheel.enabled=!1,!0}};function na(){return(na=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}var ni={handle:function(e){if(this.enabled){var t=sf(),r=sh(),s=this.rtlTranslate,n=e;n.originalEvent&&(n=n.originalEvent);var a=n.keyCode||n.charCode,i=this.params.keyboard.pageUpDown,l=i&&33===a,o=i&&34===a,d=37===a,c=39===a,u=38===a,p=40===a;if(!this.allowSlideNext&&(this.isHorizontal()&&c||this.isVertical()&&p||o)||!this.allowSlidePrev&&(this.isHorizontal()&&d||this.isVertical()&&u||l))return!1;if(!n.shiftKey&&!n.altKey&&!n.ctrlKey&&!n.metaKey&&(!r.activeElement||!r.activeElement.nodeName||"input"!==r.activeElement.nodeName.toLowerCase()&&"textarea"!==r.activeElement.nodeName.toLowerCase())){if(this.params.keyboard.onlyInViewport&&(l||o||d||c||u||p)){var h=!1;if(this.$el.parents("."+this.params.slideClass).length>0&&0===this.$el.parents("."+this.params.slideActiveClass).length)return;var m=this.$el,f=m[0].clientWidth,v=m[0].clientHeight,x=t.innerWidth,g=t.innerHeight,b=this.$el.offset();s&&(b.left-=this.$el[0].scrollLeft);for(var y=[[b.left,b.top],[b.left+f,b.top],[b.left,b.top+v],[b.left+f,b.top+v]],w=0;w<y.length;w+=1){var j=y[w];if(j[0]>=0&&j[0]<=x&&j[1]>=0&&j[1]<=g){if(0===j[0]&&0===j[1])continue;h=!0}}if(!h)return}this.isHorizontal()?((l||o||d||c)&&(n.preventDefault?n.preventDefault():n.returnValue=!1),((o||c)&&!s||(l||d)&&s)&&this.slideNext(),((l||d)&&!s||(o||c)&&s)&&this.slidePrev()):((l||o||u||p)&&(n.preventDefault?n.preventDefault():n.returnValue=!1),(o||p)&&this.slideNext(),(l||u)&&this.slidePrev()),this.emit("keyPress",a)}}},enable:function(){var e=sh();this.keyboard.enabled||(sC(e).on("keydown",this.keyboard.handle),this.keyboard.enabled=!0)},disable:function(){var e=sh();this.keyboard.enabled&&(sC(e).off("keydown",this.keyboard.handle),this.keyboard.enabled=!1)}};function nl(){return(nl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}var no={toggleEl:function(e,t){e[t?"addClass":"removeClass"](this.params.navigation.disabledClass),e[0]&&"BUTTON"===e[0].tagName&&(e[0].disabled=t)},update:function(){var e=this.params.navigation,t=this.navigation.toggleEl;if(!this.params.loop){var r=this.navigation,s=r.$nextEl,n=r.$prevEl;n&&n.length>0&&(t(n,!!this.isBeginning),this.params.watchOverflow&&this.enabled&&n[this.isLocked?"addClass":"removeClass"](e.lockClass)),s&&s.length>0&&(t(s,!!this.isEnd),this.params.watchOverflow&&this.enabled&&s[this.isLocked?"addClass":"removeClass"](e.lockClass))}},onPrevClick:function(e){e.preventDefault(),(!this.isBeginning||this.params.loop)&&this.slidePrev()},onNextClick:function(e){e.preventDefault(),(!this.isEnd||this.params.loop)&&this.slideNext()},init:function(){var e,t,r=this.params.navigation;this.params.navigation=sA(this.$el,this.params.navigation,this.params.createElements,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),(r.nextEl||r.prevEl)&&(r.nextEl&&(e=sC(r.nextEl),this.params.uniqueNavElements&&"string"==typeof r.nextEl&&e.length>1&&1===this.$el.find(r.nextEl).length&&(e=this.$el.find(r.nextEl))),r.prevEl&&(t=sC(r.prevEl),this.params.uniqueNavElements&&"string"==typeof r.prevEl&&t.length>1&&1===this.$el.find(r.prevEl).length&&(t=this.$el.find(r.prevEl))),e&&e.length>0&&e.on("click",this.navigation.onNextClick),t&&t.length>0&&t.on("click",this.navigation.onPrevClick),sF(this.navigation,{$nextEl:e,nextEl:e&&e[0],$prevEl:t,prevEl:t&&t[0]}),!this.enabled&&(e&&e.addClass(r.lockClass),t&&t.addClass(r.lockClass)))},destroy:function(){var e=this.navigation,t=e.$nextEl,r=e.$prevEl;t&&t.length&&(t.off("click",this.navigation.onNextClick),t.removeClass(this.params.navigation.disabledClass)),r&&r.length&&(r.off("click",this.navigation.onPrevClick),r.removeClass(this.params.navigation.disabledClass))}},nd=r(77249),nc=r(8924);let nu=(0,tt.Z)("expand",[["path",{d:"m15 15 6 6",key:"1s409w"}],["path",{d:"m15 9 6-6",key:"ko1vev"}],["path",{d:"M21 16v5h-5",key:"1ck2sf"}],["path",{d:"M21 8V3h-5",key:"1qoq8a"}],["path",{d:"M3 16v5h5",key:"1t08am"}],["path",{d:"m3 21 6-6",key:"wwnumi"}],["path",{d:"M3 8V3h5",key:"1ln10m"}],["path",{d:"M9 9 3 3",key:"v551iv"}]]);var np=r(76567),nh=r(11122),nm=r(40598),nf=r(17859);s$.use([{name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){sL(this,{pagination:ne({dynamicBulletIndex:0},nt)})},on:{init:function(e){e.pagination.init(),e.pagination.render(),e.pagination.update()},activeIndexChange:function(e){e.params.loop?e.pagination.update():void 0===e.snapIndex&&e.pagination.update()},snapIndexChange:function(e){e.params.loop||e.pagination.update()},slidesLengthChange:function(e){e.params.loop&&(e.pagination.render(),e.pagination.update())},snapGridLengthChange:function(e){e.params.loop||(e.pagination.render(),e.pagination.update())},destroy:function(e){e.pagination.destroy()},"enable disable":function(e){var t=e.pagination.$el;t&&t[e.enabled?"removeClass":"addClass"](e.params.pagination.lockClass)},click:function(e,t){var r=t.target;if(e.params.pagination.el&&e.params.pagination.hideOnClick&&e.pagination.$el.length>0&&!sC(r).hasClass(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&r===e.navigation.nextEl||e.navigation.prevEl&&r===e.navigation.prevEl))return;!0===e.pagination.$el.hasClass(e.params.pagination.hiddenClass)?e.emit("paginationShow"):e.emit("paginationHide"),e.pagination.$el.toggleClass(e.params.pagination.hiddenClass)}}}},{name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}},create:function(){sL(this,{autoplay:nr({},ns,{running:!1,paused:!1})})},on:{init:function(e){e.params.autoplay.enabled&&(e.autoplay.start(),sh().addEventListener("visibilitychange",e.autoplay.onVisibilityChange),e.autoplay.attachMouseEvents())},beforeTransitionStart:function(e,t,r){e.autoplay.running&&(r||!e.params.autoplay.disableOnInteraction?e.autoplay.pause(t):e.autoplay.stop())},sliderFirstMove:function(e){e.autoplay.running&&(e.params.autoplay.disableOnInteraction?e.autoplay.stop():e.autoplay.pause())},touchEnd:function(e){e.params.cssMode&&e.autoplay.paused&&!e.params.autoplay.disableOnInteraction&&e.autoplay.run()},destroy:function(e){e.autoplay.detachMouseEvents(),e.autoplay.running&&e.autoplay.stop(),sh().removeEventListener("visibilitychange",e.autoplay.onVisibilityChange)}}},{name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null}},create:function(){sL(this,{mousewheel:{enabled:!1,lastScrollTime:sS(),lastEventBeforeSnap:void 0,recentWheelEvents:[],enable:nn.enable,disable:nn.disable,handle:nn.handle,handleMouseEnter:nn.handleMouseEnter,handleMouseLeave:nn.handleMouseLeave,animateSlider:nn.animateSlider,releaseScroll:nn.releaseScroll}})},on:{init:function(e){!e.params.mousewheel.enabled&&e.params.cssMode&&e.mousewheel.disable(),e.params.mousewheel.enabled&&e.mousewheel.enable()},destroy:function(e){e.params.cssMode&&e.mousewheel.enable(),e.mousewheel.enabled&&e.mousewheel.disable()}}},{name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}},create:function(){sL(this,{keyboard:na({enabled:!1},ni)})},on:{init:function(e){e.params.keyboard.enabled&&e.keyboard.enable()},destroy:function(e){e.keyboard.enabled&&e.keyboard.disable()}}},{name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){sL(this,{navigation:nl({},no)})},on:{init:function(e){e.navigation.init(),e.navigation.update()},toEdge:function(e){e.navigation.update()},fromEdge:function(e){e.navigation.update()},destroy:function(e){e.navigation.destroy()},"enable disable":function(e){var t=e.navigation,r=t.$nextEl,s=t.$prevEl;r&&r[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass),s&&s[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass)},click:function(e,t){var r,s=e.navigation,n=s.$nextEl,a=s.$prevEl,i=t.target;if(e.params.navigation.hideOnClick&&!sC(i).is(a)&&!sC(i).is(n)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===i||e.pagination.el.contains(i)))return;n?r=n.hasClass(e.params.navigation.hiddenClass):a&&(r=a.hasClass(e.params.navigation.hiddenClass)),!0===r?e.emit("navigationShow"):e.emit("navigationHide"),n&&n.toggleClass(e.params.navigation.hiddenClass),a&&a.toggleClass(e.params.navigation.hiddenClass)}}}}]);var nv=e=>{let{sources:t}=e,{isMobile:r,isReady:s}=(0,tU.Z)(),n=(0,v.useRef)(null);return(0,f.jsxs)(s4,{slidesPerView:r&&s?1:3,spaceBetween:12,onSwiper:e=>{n.current=e},autoplay:!0,mousewheel:!0,navigation:{nextEl:"#SvgFeloSearch"},cssMode:!0,keyboard:!0,pagination:{clickable:!0},className:"grid gap-6 !px-14 !pb-8 md:!pb-4",children:[(0,f.jsx)(tw.A,{id:"preSvgFeloSearch",className:"prevEl group !h-[40px] bg-gray-100 hover:bg-blue-100 dark:bg-gray-800 dark:hover:bg-blue-950",radius:"full",onClick:e=>{if(n.current){n.current.autoplay.stop();let e=n.current.activeIndex;n.current.slideTo(Math.max(e-1,0))}},isIconOnly:!0,children:(0,f.jsx)(nd.Z,{className:"text-gray-400 group-hover:text-blue-500"})}),(0,f.jsx)(tw.A,{id:"SvgFeloSearch",className:"nextEl group !h-[40px] bg-gray-100 hover:bg-blue-100 dark:bg-gray-800 dark:hover:bg-blue-950",radius:"full",onClick:()=>{n.current&&(n.current.autoplay.stop(),n.current.slideNext())},isIconOnly:!0,children:(0,f.jsx)(nc.Z,{className:"text-gray-400 group-hover:text-blue-500"})}),t.map((e,r)=>{let{title:s,url:n,link:a,onClick:i}=e,{other_info:l}=e;l||(l=e);let o=l;return i?(0,f.jsx)(s9,{children:(0,f.jsx)("section",{className:(0,t_.cn)("flex justify-center",t.length>2&&"aspect-[4/5]"),children:(0,f.jsxs)("div",{className:(0,t_.cn)("flex flex-col","border border-gray-200 dark:border-gray-800 rounded-lg mx-1","transition-all duration-300 hover:border-blue-300 dark:hover:border-blue-800"),children:[(0,f.jsxs)("div",{className:"flex-none flex items-center justify-between p-4",children:[(0,f.jsx)("div",{className:"text-lg font-medium",children:s}),(0,f.jsx)(tw.A,{size:"sm",className:"bg-gray-100 dark:bg-gray-900 text-gray-500 dark:text-gray-400",onClick:i,isIconOnly:!0,children:(0,f.jsx)(nu,{size:16})})]}),(0,f.jsx)("div",{className:"flex-1 overflow-hidden flex items-center justify-center px-4 pb-4",children:(0,f.jsx)(tO.J,{src:o.imageUrl,alt:s,className:(0,t_.cn)("flex-1 object-cover max-h-full max-w-full rounded-lg cursor-pointer dark:brightness-75"),onClick:i})})]})})},r):(0,f.jsx)(s9,{children:(0,f.jsxs)("section",{className:"pb-3",children:[(0,f.jsx)(nh.w,{className:"aspect-[4/5] overflow-hidden",children:(0,f.jsxs)("div",{className:"relative h-full group cursor-pointer",children:[(0,f.jsx)("img",{src:(0,nf.V)(o.imageUrl),alt:e.title,className:"w-full h-full object-cover"}),(0,f.jsx)("div",{className:"absolute inset-0 bg-black opacity-0 group-hover:opacity-40 transition-opacity duration-300 ease-in-out",onClick:()=>{window.open(a||n,"_blank")}})]})}),(0,f.jsxs)("div",{className:"pt-2 pb-4",children:[(0,f.jsx)("h3",{className:"text-sm mb-2",children:s}),(0,f.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600 dark:text-gray-400",children:[(0,f.jsxs)("div",{className:"flex",children:[(0,f.jsx)(nm.h,{className:"w-4 h-4 mr-2",src:o.avatar}),(0,f.jsx)("span",{children:o.nickname})]}),(0,f.jsxs)("div",{className:"flex items-center gap-1",children:[(0,f.jsx)(np.Z,{size:14}),(0,f.jsx)("span",{children:isNaN(Number(o.liked_count))?0:o.liked_count})]})]})]})]})},r)})]})},nx=e=>{let{sources:t,isAgentMindmap:r}=e,s=(0,g.useTranslations)(),{isMobile:n}=(0,tU.Z)();return(0,f.jsx)("div",{className:"flex flex-wrap gap-4 py-1 md:py-4 w-full",children:t.map((e,a)=>{let{title:i,other_info:l,imageClassName:o,onClick:d}=e,{imageUrl:c}=l,u=t.length<2&&!n;return c?(0,f.jsxs)("div",{className:(0,t_.cn)("flex-1 flex flex-col","border border-gray-200 dark:border-gray-800 rounded-lg","transition-all duration-300 hover:border-blue-300 dark:hover:border-blue-800",r?"mb-0":"mb-8"),children:[(0,f.jsxs)("div",{className:"flex-none flex items-center justify-between p-4",children:[(0,f.jsx)("div",{className:"text-xl font-medium",children:i}),(0,f.jsx)(tw.A,{size:"sm",className:"bg-gray-100 dark:bg-gray-900 text-gray-500 dark:text-gray-400",onClick:d,startContent:u?(0,f.jsx)(nu,{size:16}):null,isIconOnly:!u,children:u?s("preview_full_version"):(0,f.jsx)(nu,{size:16})})]}),(0,f.jsx)("div",{className:"flex-1 overflow-hidden flex items-center justify-center px-4 pb-4",children:(0,f.jsx)(tO.J,{src:c,alt:i,className:(0,t_.cn)("flex-1 object-cover max-w-full z-[1] rounded-lg cursor-pointer dark:brightness-75",o),onClick:d})})]},c):null})})},ng=r(19583),nb=r(35063),ny=e=>{let{index:t,thread:r,threadId:s,messageId:n,pptCover:a,sources:i,threadTypeFrom:l,isAgentMindmap:o}=e,d=(0,g.useTranslations)(),{isMobile:c}=(0,tU.Z)(),{setIsRegenerate:u,setIsShowPptModal:p,setBesinessId:h,setUiModalType:m,setBusinessType:x,setPreviewPPTData:b}=(0,tZ.Z)(),y=(0,rt.Z)(),{setPptStatus:w,pptStatus:j,pptDetail:C}=(0,t8.Z)(),{mindmapList:_}=(0,tX.Z)(),{threadPPTCacheData:k}=(0,t0.Z)(),N=l===tJ.zA,E=(0,v.useMemo)(()=>{var e,a,l,o,f,v;let g=N?[...i]:[],j=_.find(e=>e.message_id===n),E=(null==j?void 0:null===(l=j.images)||void 0===l?void 0:null===(a=l.covers)||void 0===a?void 0:null===(e=a.find(e=>"svg"===e.type))||void 0===e?void 0:e.path)||"",S=(null==j?void 0:null===(v=j.images)||void 0===v?void 0:null===(f=v.covers)||void 0===f?void 0:null===(o=f.find(e=>"png"===e.type))||void 0===o?void 0:o.path)||"";(E||S)&&g.push({url:"",title:d("mindmap"),snippet:"",imageClassName:"max-h-[200px] md:max-h-[300px]",other_info:{nickname:"",avatar:"",imageUrl:E||S},onClick:()=>{ng.Z.getState().setCurrentData({query:r.query,threadId:s,messageId:n})}});let T=c?C:k,F=(null==T?void 0:T.cover_url)||"";return 0===t&&F&&g.push({url:"",title:d("ppt.title"),snippet:"",imageClassName:"drop-shadow-lg",other_info:{nickname:"",avatar:"",imageUrl:F,type:"PPT"},onClick:()=>{if(c&&(null==C?void 0:C.status)===tD.nV.TIMEOUT){y.default(d("ppt.generate_failure_tip"));return}if(c&&(null==C?void 0:C.status)!==tD.nV.SUCCESS||(null==C?void 0:C.status)===tD.nV.TIMEOUT){y.default(d("ppt.generating_ppt_tip"));return}x(tD.LB.THREAD),w("preview"),m("preview"),b(c?C:k),u(!1),h(s),p(!0)}}),g},[_,a,i,null==k?void 0:k.cover_url,C,c,s,n]);return((0,v.useEffect)(()=>{nb.Z.getState().setMergedSources(E)},[E]),0===E.length)?null:E.length>(c?1:2)?(0,f.jsx)(nv,{sources:E}):(0,f.jsx)(nx,{sources:E,isAgentMindmap:o})},nw=r(13003),nj=e=>{let{sources:t,processValue:r,messageId:s,thread:n}=e,a=(0,g.useTranslations)(),{setScholarReferences:i}=(0,nb.Z)(),[l,o]=(0,v.useState)([]),[d,c]=(0,v.useState)([]);return(0,v.useEffect)(()=>{if(100===r){let e=document.querySelector(".thread-container-".concat(s));if(e){let r=Array.from(new Set(Array.from(e.querySelectorAll("[class^='markdown_']")).flatMap(e=>Array.from(e.querySelectorAll("a")).map(e=>e.textContent)).join(" ").match(/\d+/g)));if(r.sort((e,t)=>Number(e)-Number(t)),o(r),r.length>0){let e=r.filter(e=>t[Number(e)-1]).map(e=>{let r=t[Number(e)-1],{title:s}=r,{other_info:n}=r;n||(n=r);let a=n,i=a.publication_date?a.publication_date.slice(0,10)+".":"";return{number:e,title:s,infoSource:a.source,link:a.source_url,formattedDate:i,source:r}});c(e),i(e)}}}},[s,r]),(0,f.jsx)("section",{children:(0,f.jsxs)("div",{className:"grid gap-4",children:[l.length>0&&(0,f.jsx)("div",{className:"text-xl font-medium text-[#344054] dark:text-[#CECFD2]",children:a("scholar.references")}),d.length>0&&d.map(e=>(0,f.jsx)("section",{children:e.title&&e.link&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(tv(),{href:e.link,target:"_blank",className:"hover:underline hover:text-[#0080FF] text-sm dark:text-[#CECFD2]",children:[(0,f.jsxs)("span",{className:"font-semibold",children:["[",e.number,"]"]})," ",(0,f.jsx)("span",{children:e.title&&e.title.endsWith(".")?e.title+" ":e.title+". "}),(0,f.jsx)("span",{children:e.infoSource&&e.infoSource.endsWith(".")?e.infoSource+" ":e.infoSource+". "}),(0,f.jsx)("span",{children:e.formattedDate})]}),(0,f.jsx)("span",{className:"w-5 h-5 p-0.5 inline-block align-sub  text-[#344054] dark:text-[#CECFD2] hover:text-[#0080FF] dark:hover:text-[#0080FF] hover:bg-[#E7F3FF] dark:hover:bg-[#2E3848] hover:rounded-[4px] transition duration-200",children:(0,f.jsx)(nw.Z,{source:e.source,rid:n.rid,children:(0,f.jsx)(tv(),{href:e.link,target:"_blank",children:(0,f.jsx)(tp.Zm,{})})})})]})},e.number))]})})},nC=r(26152),n_=r(34778),nk=r(46988),nN=e=>{let{initialQuery:t,queryMode:r,onSave:s,onCancel:n}=e,a=(0,g.useTranslations)(),[i,l]=(0,v.useState)(t),[o,d]=(0,v.useState)(!1),c=(0,v.useRef)(null);(0,v.useEffect)(()=>{let e=setTimeout(()=>{if(c.current){c.current.focus();let e=c.current.value.length;c.current.setSelectionRange(e,e),c.current.scrollIntoView({behavior:"smooth",block:"center"})}},500);return()=>clearTimeout(e)},[]),(0,v.useEffect)(()=>{(0,tb.fk)(ty.U.THREAD_EDIT,{query:t},!0)},[]);let u=(e,t)=>{let{query:r}=t;13===e.keyCode&&!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey&&i.trim()&&(e.preventDefault(),s(r))};return(0,f.jsx)(tA.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.1,delay:.1},children:(0,f.jsxs)("div",{className:"py-2",children:[(0,f.jsx)(nk.Z,{className:(0,t_.cn)("border bg-white dark:border-[#6D7276] dark:bg-[#35363880]","p-3 w-full bg-inherit outline-none resize-none",o?"rounded-xl":"rounded-full"),ref:c,value:i,maxLength:tJ.N2,placeholder:a("search_placeholder"),spellCheck:!1,onChange:e=>l(e.target.value),onKeyDown:e=>{u(e,{query:i})},onKeyUpCapture:e=>{e.stopPropagation()},onHeightChange:(e,t)=>{setTimeout(()=>{e>50?d(!0):d(!1)},100)}}),(0,f.jsxs)("div",{className:"flex justify-end pt-2 gap-2",children:[(0,f.jsx)(tw.A,{size:"sm",radius:"full",variant:"bordered",onPress:n,children:a("cancel")}),(0,f.jsx)(tw.A,{size:"sm",color:i.trim()?"primary":"default",radius:"full",isDisabled:!i.trim(),onPress:()=>{s(i)},children:a(r===tJ.iV?"re_research_title":"quick_search_title")})]})]})})},nE=r(36336),nS=r(91708),nT=e=>{let{query:t,canEdit:r,onEditClick:s}=e,n=(0,g.useTranslations)(),{copy:a,copied:i}=(0,to.V)(),[l,o]=(0,v.useState)(!1),[d,c]=(0,v.useState)(!1),u=(0,v.useRef)(null);return(0,v.useEffect)(()=>{let e=()=>{u.current&&c(u.current.scrollHeight>205)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),(0,f.jsx)("div",{className:"w-full relative group",children:(0,f.jsxs)("h1",{className:"flex gap-2 text-2xl font-bold dark:text-white",children:[(0,f.jsxs)("div",{className:"overflow-hidden",children:[(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)("pre",{ref:u,className:(0,t_.cn)("!leading-normal whitespace-pre-wrap break-words text-3xl text-[#30394A] dark:text-white",t.length>=100&&t.length<200&&"text-lg",t.length>=200&&"text-sm",!l&&"max-h-[196px] overflow-hidden"),children:t}),d&&!l&&(0,f.jsx)("div",{className:"absolute bottom-[0px] left-0 w-full h-[80px] bg-gradient-to-t from-white/60 to-transparent dark:from-black/60 dark:to-transparent pointer-events-none"})]}),d&&(0,f.jsx)("div",{className:"py-3",children:(0,f.jsx)("div",{onClick:()=>o(!l),className:"w-full cursor-pointer text-left text-sm text-[#0080FF] dark:text-[#0694FF] transition-colors flex items-center gap-1",children:n(l?"show_less":"show_more")})})]}),(0,f.jsxs)("div",{className:"absolute top-0 right-0",children:[r&&(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(e6.e,{placement:"bottom",content:n("rewrite_query_desc"),className:"bg-[#353B46] text-white dark:bg-[#353B46] dark:text-white",children:(0,f.jsx)(tw.A,{size:"sm",isIconOnly:!0,radius:"full","aria-label":"Edit",tabIndex:-1,className:"opacity-0 mr-1 group-hover:opacity-100 transition-opacity duration-300",onPress:s,children:(0,f.jsx)(nE.Z,{size:16})})})}),(0,f.jsx)(e6.e,{placement:"bottom",content:n("copy"),className:"bg-[#353B46] text-white dark:bg-[#353B46] dark:text-white",children:(0,f.jsx)(tw.A,{size:"sm",isIconOnly:!0,radius:"full","aria-label":"Edit",tabIndex:-1,className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300",onPress:()=>{a(t)},children:i?(0,f.jsx)(ts.Z,{size:16,color:"#4ba570"}):(0,f.jsx)(nS.Z,{size:16})})})]})]})})},nF=r(59470),nL=r(30674);let nM=async(e,t,r,s,n)=>{let a=new TextDecoder,i=await fetch("https://quality.gptbase.ai/api/evaluate/datas",{method:"POST",headers:{"Content-Type":"application/json",Accept:"*./*"},signal:e.signal,body:JSON.stringify({datas:[{question:t,answer_from_robot_source:"https://search.glarity.ai/",keywords:[],answer_from_file_source:[],answer_from_page_source:[],ground_truths:[],contexts:r}],stream:!0,llm_type:"gpt-4-0125-preview",run_type:"ragas",service_type:"local",service_params:{glarity_search_key:"",glarity_search_url:"",search_engine:"",rerank:!0,multi_search:!0,query_rewriter:!0,use_description_for_ref:!0},metric_types:["reference_relevancy"]})}).catch(e=>{null==n||n(e||"Internal Server Error")});if(!i)return;if(!i.body){null==n||n("Internal Server Error");return}if(200!==i.status){if(400===i.status){null==n||n("Sorry, the link you tried to access appears to have an issue.");return}let e=i.body.getReader(),t=(await e.read()).value,r=JSON.parse(a.decode(t,{stream:!0})),s=r.detail?r.detail[0].msg:r.message;null==n||n(s);return}let l=i.body.getReader(),o="";for(;;){let{done:e,value:t}=await l.read();if(e){o.split("\n").forEach(e=>{let t=e.trim();if(t.startsWith("data:"))try{let e=JSON.parse(t.slice(5).trim()).logs.reference_relevancy_logs[0].prompt;s(e)}catch(e){console.warn(e)}});break}o+=a.decode(t,{stream:!0})}},nA=e=>{let{info:t}=e,{isDark:r}=(0,rY.Z)(),[s,n]=(0,v.useState)(null),[a,i]=(0,v.useState)(!1),[l,o]=(0,v.useState)(""),d=()=>{if(!t||a)return;i(!0);let e=t.sources.map(e=>({link:e.link,title:e.title,description:e.snippet,meta_description:""}));nM(new AbortController,t.question,e,o,n)};return(0,v.useEffect)(()=>{t&&t.question&&d()},[t]),(0,f.jsxs)("section",{className:"".concat(l&&"mb-10"),children:[a&&!l&&!s&&(0,f.jsx)(nL.c,{className:"my-10",color:r?"white":"default",labelColor:"foreground"}),!!l&&(0,f.jsx)(t5.j,{className:"my-10"}),(0,f.jsx)("pre",{className:"prose whitespace-pre-wrap break-words contents pb-10",children:l||s})]})};var nP=r(8904),nZ=e=>{let{className:t}=e,r=(0,th.ZP)(e=>e.isLogin),s=(0,rs.ZP)(e=>e.subscriptionInfo),n=(0,v.useMemo)(()=>{if(!s)return 0;let{used:{balance:e,total:t}}=s;return"".concat(e," / ").concat(t)},[s]);return r?(0,f.jsx)("span",{className:t,children:n}):null},nI=r(16427);let nD=(0,r(75910).Ue)(e=>({videos:[],setVideos:t=>e({videos:t})}));var nR=r(73522),nz=r(64657),nO=r(5687),nB=r(55383),nq=r(93650),nH=r(49983),nV=e=>{let{isShowNotionList:t,setIsShowNotionList:r,saveToNotionPage:s}=e,n=(0,g.useTranslations)(),{notionDirectories:a,setNotionTemplateId:i}=(0,nR.Z)(),[l,o]=(0,v.useState)(""),d=()=>{i(l),r(!1),s({templateId:l}),(0,nI.Ye)({templateId:l})};return(0,f.jsx)(nz.R,{isOpen:t,onClose:()=>{r(!1)},classNames:{body:"pb-6 max-h-[500px] overflow-y-auto",footer:"flex justify-center"},children:(0,f.jsx)(nO.A,{children:()=>(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(nB.k,{className:"flex flex-col gap-1",children:n("notion.select_notion_directory")}),(0,f.jsx)(nq.I,{children:(0,f.jsx)("div",{className:"flex flex-col gap-2",children:(0,f.jsx)(tG.X,{value:l,onValueChange:o,children:a.map(e=>(0,f.jsx)(t$.J,{value:e.id,description:e.description,children:e.title},e.id))})})}),(0,f.jsx)(nH.R,{children:(0,f.jsx)(tw.A,{onPress:d,isDisabled:!l,color:"primary",children:n("notion.save_to_notion")})})]})})})},nU=e=>{let{shortId:t,query:r,answer:s,sources:n,relates:a,thread:i,pptCover:l,images:o}=e,d=(0,g.useTranslations)(),c=(0,b.useRouter)(),{coverUrl:u}=(0,tZ.Z)();(0,rt.Z)();let{videos:p}=nD(),{mergedSources:h}=(0,nb.Z)(),{setNotionDirectories:m,isSaveLoading:x,setIsSaveLoading:y}=(0,nR.Z)(),[w,j]=(0,v.useState)(!1),{scholarReferences:C}=(0,nb.Z)(),[_,k]=(0,v.useState)(!1),N=(null==l?void 0:l.cover_url)&&(null==l?void 0:l.ppt_url)?l.cover_url:u,E=async e=>{let{templateId:t}=e;tg.Z.close(),tg.Z.show({content:(0,f.jsx)(rw.E,{children:d("message.saving_to_notion")}),duration:99999,type:"custom"});let{isExist:r,notionDirectories:s}=await (0,t9.Do)({templateId:t,setNotionDirectories:m});if(!r){(null==s?void 0:s.length)?j(!0):F();return}await S({templateId:t})},S=async e=>{let{templateId:l}=e;if(y(!0),!l){await F();return}let c=await (0,nI.MJ)({shortId:t,databaseId:l,title:r.slice(0,100)||"",url:location.href,summary:s,content:s,sources:n,relates:a,thread:i,pptCoverUrl:N,images:o,videos:p,mergedSources:h,scholarReferences:C});console.log("\uD83D\uDE80 ~ handleSaveToNotion ~ postPageResult:",c),(null==c?void 0:c.code)==="OK"?(tg.Z.close(),tg.Z.show({content:(0,f.jsx)(rw.E,{children:(0,f.jsxs)("div",{className:"flex items-center gap-20",children:[(0,f.jsxs)("span",{children:[" ",d("notion.save_success")]}),(0,f.jsx)("div",{className:"flex items-center border-1  text-[#0080FF] bg-[#fff] border-[#0694FF] cursor-pointer dark:bg-[#202531] py-[4px] px-[12px] rounded-[8px] ",onClick:()=>{var e;window.open(null==c?void 0:null===(e=c.data)||void 0===e?void 0:e.url)},children:d("open")})]})}),duration:6e3,type:"custom"}),k(!0),setTimeout(()=>{k(!1)},2e3)):(tg.Z.close(),tg.Z.error("".concat(d("notion.save_failed"),"  ").concat(c),6e3)),y(!1)},T=async()=>{(0,tb.fk)(ty.U.SAVE_TO_NOTION,{value:"generate"},!0),y(!0);try{let n=await (0,nI.Zl)();if(console.log("\uD83D\uDE80 ~ handleSaveToNotion ~ isAuthorized:",n),null==n?void 0:n.isAuthorized){var e,t,r,s;if(null==n?void 0:n.templateId){await E({templateId:n.templateId});return}let a=await (0,nI.ey)({}),i=(null===(e=a.find(e=>{var t,r,s,n;return(null==e?void 0:e.object)==="database"&&(null==e?void 0:null===(t=e.parent)||void 0===t?void 0:t.type)==="workspace"&&(null==e?void 0:null===(n=e.title)||void 0===n?void 0:null===(s=n.find(e=>(null==e?void 0:e.type)==="text"))||void 0===s?void 0:null===(r=s.text)||void 0===r?void 0:r.content)==="Felo.ai"}))||void 0===e?void 0:e.id)||(null===(t=a.find(e=>{var t,r,s;return(null==e?void 0:e.object)==="database"&&(null==e?void 0:null===(s=e.title)||void 0===s?void 0:null===(r=s.find(e=>(null==e?void 0:e.type)==="text"))||void 0===r?void 0:null===(t=r.text)||void 0===t?void 0:t.content)==="Felo.ai"}))||void 0===t?void 0:t.id);if(!i){let e=(null===(r=a.find(e=>{var t;return(null==e?void 0:e.object)==="page"&&(null==e?void 0:null===(t=e.parent)||void 0===t?void 0:t.type)==="workspace"}))||void 0===r?void 0:r.id)||(null===(s=a.find(e=>(null==e?void 0:e.object)==="page"))||void 0===s?void 0:s.id);e&&(i=await (0,nI.C8)({pageId:e}),y(!0),await (0,tD.gw)(3e3))}if(!i){F();return}await S({templateId:i});return}await F()}catch(e){if((null==e?void 0:e.message)==="403"){F();return}tg.Z.close(),tg.Z.error("".concat(d("notion.save_failed"),"  ").concat(e),6e3)}finally{y(!1)}},F=async()=>{y(!0);try{(0,t9.iL)(),await (0,t9.N6)();let n=await (0,t9.EY)();if(!n){var e,t,r,s;y(!0);let n=await (0,nI.ey)({}),a=(null===(e=n.find(e=>{var t,r,s,n;return(null==e?void 0:e.object)==="database"&&(null==e?void 0:null===(t=e.parent)||void 0===t?void 0:t.type)==="workspace"&&(null==e?void 0:null===(n=e.title)||void 0===n?void 0:null===(s=n.find(e=>(null==e?void 0:e.type)==="text"))||void 0===s?void 0:null===(r=s.text)||void 0===r?void 0:r.content)==="Felo.ai"}))||void 0===e?void 0:e.id)||(null===(t=n.find(e=>{var t,r,s;return(null==e?void 0:e.object)==="database"&&(null==e?void 0:null===(s=e.title)||void 0===s?void 0:null===(r=s.find(e=>(null==e?void 0:e.type)==="text"))||void 0===r?void 0:null===(t=r.text)||void 0===t?void 0:t.content)==="Felo.ai"}))||void 0===t?void 0:t.id);if(!a){let e=(null===(r=n.find(e=>{var t;return(null==e?void 0:e.object)==="page"&&(null==e?void 0:null===(t=e.parent)||void 0===t?void 0:t.type)==="workspace"}))||void 0===r?void 0:r.id)||(null===(s=n.find(e=>(null==e?void 0:e.object)==="page"))||void 0===s?void 0:s.id);e&&(a=await (0,nI.C8)({pageId:e}))}if(!a){F();return}await S({templateId:a});return}y(!0),await (0,tD.gw)(t9.xI),await S({templateId:n})}catch(e){if((null==e?void 0:e.message)==="403"){F();return}tg.Z.close(),tg.Z.error("".concat(d("notion.save_failed"),"  ").concat(e),6e3)}finally{y(!1)}};return(0,v.useEffect)(()=>{let e=e=>{console.log("handleRouteChange: ",e),nD.setState({videos:[]}),nb.Z.setState({mergedSources:[],scholarReferences:[]})};return c.events.on("routeChangeStart",e),()=>{c.events.off("routeChangeStart",e)}},[c.events]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(tw.A,{size:"sm",radius:"full",className:"bg-transparent text-base text-[#30394A] dark:text-white w-full justify-start",startContent:x?null:_?(0,f.jsx)(ts.Z,{size:20,color:"#4ba570"}):(0,f.jsx)(rC.oDT,{className:"w-5 h-5"}),onPress:T,isLoading:x,isDisabled:x,children:d("notion.save_to_notion")}),(0,f.jsx)(nV,{isShowNotionList:w,setIsShowNotionList:j,saveToNotionPage:S})]})},nW=r(32700),nG=r(31510),n$=r(25568),nY=r(87106),nX=r(99421),nJ=r(74926),nK=e=>{let{thread:t}=e,r=(0,g.useTranslations)(),s=(0,g.useLocale)(),n=async e=>{var r,n;e.preventDefault();let a=await (0,nY.Vk)(s,C.PZ),i=t.query,l=await (0,nX.h_)(t.answer||""),o={query:"".concat(i,"\n").concat(l,"\n")};if(null===(r=a.data)||void 0===r?void 0:r.template_info){let e=null===(n=a.data)||void 0===n?void 0:n.template_info;nJ.Z.getState().setTemplate(e),o.category="long_text",o.model=e.sub_topics[0].llm_model,o.templateId=e.id;let t=(0,rM.MD)({...o,category:tJ.Wh,prefix:"/thread-chat"});window.open("/page/".concat(C.yw,"?chatUrl=").concat(encodeURIComponent(t),"&business_type=AGENT_THREAD"),"_blank","noopener,noreferrer"),(0,tb.fk)(ty.U.CREATE_WEBPAGE,{value:"create_webpage"},!0)}};return(0,f.jsxs)("a",{className:"bg-transparent w-full flex gap-2 items-center text-base z-0 text-[#30394A] p-2 px-3 dark:text-white cursor-pointer",onClick:e=>{n(e)},children:[(0,f.jsx)(n$.fb,{className:"w-5 h-5"}),r("html_agent"),(0,f.jsx)("div",{className:"rounded-3xl px-[6px] text-xs text-[#D14625] bg-[#F5CCB3] dark:text-[#E68054] dark:bg-[#70271E]",children:"New"})]})};let nQ=(0,tt.Z)("list-tree",[["path",{d:"M21 12h-8",key:"1bmf0i"}],["path",{d:"M21 6H8",key:"1pqkrb"}],["path",{d:"M21 18h-8",key:"1tm79t"}],["path",{d:"M3 6v4c0 1.1.9 2 2 2h3",key:"1ywdgy"}],["path",{d:"M3 10v6c0 1.1.9 2 2 2h3",key:"2wc746"}]]),n0=(0,tt.Z)("pencil-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]]);var n1=r(416),n2=r(39071),n3=r(1167),n5=r(38188);let n6=e=>{let{isOpen:t,onClose:r}=e,s=(0,g.useTranslations)(),n=(0,v.useRef)(null);return(0,v.useEffect)(()=>{if(t){var e;null===(e=n.current)||void 0===e||e.focus()}},[t]),(0,v.useEffect)(()=>{!localStorage.getItem(n5.J.FEEDBACK_FIRST_CLICK)&&t&&localStorage.setItem(n5.J.FEEDBACK_FIRST_CLICK,"true")},[t]),(0,f.jsx)(nz.R,{isOpen:t,onClose:r,hideCloseButton:!0,children:(0,f.jsxs)(nO.A,{children:[(0,f.jsx)(nq.I,{className:"mt-6",children:(0,f.jsxs)("div",{className:"flex gap-2 my-4",children:[(0,f.jsx)(tp.vZ,{className:"h-6 w-6"}),(0,f.jsx)("p",{children:s("feedback_join_discord")})]})}),(0,f.jsxs)(nH.R,{children:[(0,f.jsx)(tw.A,{onPress:r,children:s("cancel")}),(0,f.jsx)(tw.A,{autoFocus:!0,color:"primary",onPress:()=>{r(),window.open(e2.es,"_blank")},ref:n,children:s("confirm")})]})]})})};var n4=r(97382);let n7=e=>{let{rid:t,type:r}=e,s=(0,r8.a1)();return fetch("".concat(r7.XJ,"/query/").concat(t,"/reaction"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(s)},body:JSON.stringify({search_uuid:t,reaction_type:r})})},n8=e=>{let t=(0,r8.a1)();return fetch("".concat(r7.XJ,"/query/").concat(e,"/reaction"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"".concat(t)}}).then(async e=>200!==e.status?[]:await e.json()).catch(()=>null)},n9=e=>{let t=(0,r8.a1)();return fetch("".concat(r7.XJ,"/query/").concat(e,"/reaction"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"".concat(t)}})};var ae=e=>{let{rid:t,onFirstClick:r}=e,s=(0,g.useTranslations)(),[n,a]=(0,v.useState)("none"),i=e=>{if(e===n||"none"===e){a("none"),n9(t);return}a(e),n7({rid:t,type:e})},l=()=>{n8(t).then(e=>{e&&e.reaction_type&&a(e.reaction_type)})};return(0,v.useEffect)(()=>{t&&l()},[]),(0,f.jsxs)("div",{className:(0,t_.cn)("flex items-center gap-2 p-0 bg-transparent","text-[#1D3C6D] hover:!text-[#1D3C6D] dark:text-[#EDF3FC] hover:dark:!text-[#EDF3FC]"),onClick:()=>{i("dislike"),"true"===localStorage.getItem(n5.J.FEEDBACK_FIRST_CLICK)||(0,r2.N0)()||r()},children:[(0,f.jsx)(n4.Z,{size:16,className:(0,t_.cn)("dislike"===n&&"text-red-500"),fill:"dislike"===n?"currentColor":"none"}),s("dislike"===n?"feedback_clicked":"feedback_btn")]})},at=r(92774),ar=e=>{let{shortId:t,rid:r,answer:s,sources:n,canEdit:a,isFirst:i,isLast:l,onDelete:o,relates:d,isShowRelates:c,setIsShowRelates:u,thread:p}=e,h=(0,g.useTranslations)(),m=(0,to.V)(),x=(0,to.V)(),b=(0,to.V)();(0,th.gQ)();let[y,w]=(0,v.useState)(!1),{isMyThread:j}=(0,tX.Z)(),C=(0,th.ZP)(e=>e.isLogin),{isOpen:_,onOpen:k,onClose:N}=(0,e5.q)(),E=async()=>{let e=(0,nX.rP)(s);b.copy(await (0,nX.h_)(e))};return(0,f.jsxs)(f.Fragment,{children:[!l&&d&&d.length>0&&(0,f.jsx)(n3.pn,{children:(0,f.jsxs)(n3.u,{children:[(0,f.jsx)(n3.aJ,{asChild:!0,children:(0,f.jsx)(tK.z,{className:"bg-transparent rounded-lg hover:bg-[#F6F7F9] dark:hover:bg-[#353B46] text-[#4B5F7E] dark:text-[#F3F5F7]",onClick:()=>u(!c),children:(0,f.jsx)(nQ,{size:16,className:(0,t_.cn)(c&&"text-theme-blue-500 cursor-pointer")})})}),(0,f.jsx)(n3._v,{className:"bg-[#353B46] text-white dark:bg-[#353B46] dark:text-white",children:h(c?"hide_related":"show_related")})]})}),s&&(0,f.jsx)(n3.pn,{children:(0,f.jsxs)(n3.u,{children:[(0,f.jsx)(n3.aJ,{asChild:!0,children:(0,f.jsx)("div",{className:"max-w-fit",children:(0,f.jsx)(tK.z,{className:"bg-transparent rounded-lg hover:bg-[#F6F7F9] dark:hover:bg-[#353B46] text-[#4B5F7E] dark:text-[#F3F5F7]",onClick:E,children:b.copied?(0,f.jsx)(ts.Z,{size:20,color:"#4ba570"}):(0,f.jsx)(nS.Z,{size:16})})})}),(0,f.jsx)(n3._v,{className:"bg-[#353B46] text-white dark:bg-[#353B46] dark:text-white",children:h("copy_answer")})]})}),j&&C&&s&&(0,f.jsx)(n3.pn,{children:(0,f.jsxs)(n3.u,{children:[(0,f.jsx)(n3.aJ,{asChild:!0,children:(0,f.jsx)("div",{className:"max-w-fit",children:(0,f.jsx)(tK.z,{className:"bg-transparent rounded-lg hover:bg-[#F6F7F9] dark:hover:bg-[#353B46] text-[#4B5F7E] dark:text-[#F3F5F7]",onClick:()=>{at.Z.getState().setEditMessage(p),at.Z.getState().setEditThreadId(t);let e=(0,tN.pn)((null==p?void 0:p.answer)||s);at.Z.getState().setEditMessageMarkdown(e),ry.Z.getState().setUpdateGraphicData({}),at.Z.getState().setOpenMessageEditor(!0),tP.Z.getState().setSourceType("messageEdit"),tP.Z.getState().setIsShowAgentSources(!0),(0,tb.fk)(ty.U.THREAD_EDIT_ANSWER,{},!0)},children:(0,f.jsx)(n0,{size:16})})})}),(0,f.jsx)(n3._v,{className:"bg-[#353B46] text-white dark:bg-[#353B46] dark:text-white",children:h("edit")})]})}),(0,f.jsx)(n3.pn,{children:(0,f.jsxs)(n3.u,{children:[(0,f.jsx)(n3.aJ,{asChild:!0,children:(0,f.jsx)(tK.z,{className:"bg-transparent rounded-lg hover:bg-[#F6F7F9] dark:hover:bg-[#353B46] text-[#4B5F7E] dark:text-[#F3F5F7]",onClick:()=>{let e=t3.Z.getState().current,r=new URL("".concat(location.origin,"/search/").concat(t));e&&r.searchParams.append("invite",e),m.copy(r.toString()),rc.Z.getState().setShareData({type:"share",link:r.toString()}),rc.Z.getState().setShowThreadModel(!0),(0,tb.fk)(ty.U.THREAD_QUERY_SHARE,{id:t},!0)},children:m.copied?(0,f.jsx)(ts.Z,{size:16,color:"#4ba570"}):(0,f.jsx)(n1.Z,{size:16})})}),(0,f.jsx)(n3._v,{className:"bg-[#353B46] text-white dark:bg-[#353B46] dark:text-white",children:h("share_link")})]})}),(0,f.jsxs)(rh.h_,{open:y,onOpenChange:w,children:[(0,f.jsx)(rh.$F,{asChild:!0,children:(0,f.jsx)(tK.z,{className:"bg-transparent rounded-lg hover:bg-[#F6F7F9] dark:hover:bg-[#353B46] text-[#4B5F7E] dark:text-[#F3F5F7]",children:(0,f.jsx)(ta.Z,{size:16})})}),(0,f.jsxs)(rh.AW,{align:"end",className:"rounded-xl",children:[s&&(0,f.jsxs)(rh.Xi,{className:"text-[#1D3C6D] dark:text-white",onClick:()=>{let e=s.replace(/^\n\n/,"");e=(0,nX.rP)(e),x.copy(e+"\n".concat(n.map((e,t)=>"[".concat(t+1,"] ").concat(e.link)).join("\n"))),setTimeout(()=>{w(!1)},1e3)},children:[x.copied?(0,f.jsx)(ts.Z,{size:16,color:"#4ba570"}):(0,f.jsx)(tp.WO,{className:"h-4 w-4 text-[#1D3C6D] dark:text-white"}),h("copyMarkdown")]}),(0,f.jsx)(rh.Xi,{onClick:()=>w(!1),children:(0,f.jsx)(ae,{rid:r,onFirstClick:k})}),!i&&!!a&&(0,f.jsxs)(rh.Xi,{className:"text-[#a52e2e] hover:!bg-red-100 hover:!text-[#6d1d1d] dark:text-[#ee5757] hover:dark:!bg-[#432e2e] hover:dark:!text-[#ee5757]",onClick:()=>{w(!1),o()},children:[(0,f.jsx)(n2.Z,{size:16}),h("delete")]})]})]}),(0,f.jsx)(n6,{isOpen:_,onClose:N})]})},as=r(75307),an=r(44268),aa=e=>{let{thread:t,path:r,content:s,modelType:n,query:a,answer:i}=e,l=(0,g.useTranslations)(),o=(0,g.useLocale)(),d=(0,rt.Z)(),c=async()=>{var e,t;let r=await (0,nY.Vk)(o,"ppt_generation_v2");i=await (0,nX.h_)(i||"");let s={query:"".concat(a,"\n").concat(i,"\n").concat(l("searchAddition.generate_ppt_from_file"))};if(null===(e=r.data)||void 0===e?void 0:e.template_info){let e=null===(t=r.data)||void 0===t?void 0:t.template_info;nJ.Z.getState().setTemplate(e),s.category="long_text",s.model=e.sub_topics[0].llm_model,s.templateId=e.id;let n=(0,rM.MD)({...s,category:tJ.Wh,prefix:"/thread-chat"});window.open("/slides/".concat(C.yw,"?chatUrl=").concat(encodeURIComponent(n)),"_blank","noopener,noreferrer")}else d.error(l("ppt.failed_generate"));"PRO"===n?(0,tb.fk)(ty.U.CREATE_SLIDES_PPT_PRO,{value:"create_slides_ppt_pro"},!0):(0,tb.fk)(ty.U.CREATE_SLIDES_PPT,{value:"create_slides_ppt"},!0)};return(0,f.jsxs)("div",{className:"bg-transparent cursor-pointer w-full flex gap-2 items-center text-base z-0 text-[#30394A] p-2 px-3 dark:text-white",onClick:c,children:["PRO"===n?(0,f.jsx)(rb.rq,{className:"w-[18px]"}):(0,f.jsx)(rb.HC,{className:"w-[18px]"}),s||l("ppt_generation_v2"),"PRO"===n?(0,f.jsx)(an.Z,{text:l("generateSlides.slides_btn_pro_badge")}):(0,f.jsx)(as.C,{variant:"secondary",children:l("generateSlides.slides_btn_badge")})]})},ai=r(29634),al=r(50403),ao=r(97682),ad=r(32733),ac=e=>{var t;let{index:r,thread:s,messageId:n,shortId:a,rid:i,query:l,answer:o,sources:d,canEdit:c,onEditQueryClick:u,onReanswer:p,isFirst:h,isLast:m,onDelete:x,hideRewriteModel:y,hideChat:w,relates:j,pptCover:C,images:_,id:k,mode:N,category:E,isShowRelates:S,setIsShowRelates:T}=e,F=(0,g.useTranslations)(),{features:L}=(0,rf.Z)(),M=(0,b.useRouter)(),A=(0,tP.Z)(e=>e.loading),{threads:P}=(0,tX.Z)(),Z=(0,g.useLocale)(),{proUsageQuota:I}=(0,nW.I)(),{selectModelValueList:D}=(0,nG.Z)(),[R,z]=(0,v.useState)([]),O=(0,rs.ZP)(e=>e.isPro),{isMyThread:B}=(0,tX.Z)(),{isTopicReply:q,allModelList:H}=(0,tP.Z)(),V=(0,th.ZP)(e=>e.isLogin),[U,W]=(0,v.useState)(void 0),{isMobile:G}=(0,re.b)(),[$,Y]=(0,v.useState)(!0),{exportToDriveAndDocs:X}=(0,rE.IE)({onSuccess:e=>{tg.Z.close(),tg.Z.show({content:(0,f.jsx)(rw.E,{children:(0,f.jsxs)("div",{className:"flex items-center gap-20",children:[(0,f.jsxs)("span",{children:[" ",F("save_success")]}),(0,f.jsx)("div",{className:"flex items-center border-1  text-[#0080FF] bg-[#fff] border-[#0694FF] cursor-pointer dark:bg-[#202531] py-[4px] px-[12px] rounded-[8px] ",onClick:()=>{window.open(e)},children:F("open")})]})}),duration:6e3,type:"custom"})},onError:e=>{tg.Z.close(),tg.Z.error("".concat(F("ppt.import_ppt_failed"),"  ").concat(e),6e3)}}),J=(0,rs.ZP)(e=>e.isSearchOnlyProduct);(0,v.useEffect)(()=>{"true"===ai.Z.get("aiTypeBadgeHidden")&&Y(!1)},[]);let K=()=>{Y(!1),ai.Z.set("aiTypeBadgeHidden","true",{expires:365})},Q=(0,v.useMemo)(()=>{var e,t,r,n;return(null===(e=(null==s?void 0:null===(n=s.template)||void 0===n?void 0:null===(r=n.sub_topics)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.tools)||[])||void 0===e?void 0:e.findIndex(e=>["mindmap","ppt_render"].includes(null==e?void 0:e.name)))!==-1},[null==s?void 0:null===(t=s.template)||void 0===t?void 0:t.sub_topics]),ee=()=>{let e=tD.OA.includes(E)?null==d?void 0:d.map(e=>(null==e?void 0:e.snippet)||"").join(""):"";console.log("ActionButtons",e,E,l);let t=e||l;ng.Z.getState().setCurrentData({query:t,threadId:a,messageId:n}),a&&(0,tb.zS)(l,a)};(0,v.useEffect)(()=>{M.query.showMindmap===n&&ee()},[M.isReady]),(0,v.useEffect)(()=>{if(D&&0!==D.length){let e=D.map(e=>H.find(t=>t.value===e)).filter(e=>void 0!==e);!O&&e.some(e=>!e.is_default)&&(e=H.filter(e=>e.is_default)),z(e&&e.length>0?[ad.Fm,...e]:[])}else{let e=H.filter(e=>{let t=e.is_default;return J?t&&!e.value.toLowerCase().includes("sonnet"):t});z([ad.Fm,...e])}},[D]);let et=e=>{p(e)},er=e=>{var t,r,s,n,a,i,l,o;let d=e.answer,c=tX.Z.getState().mindmapList;d=(d="".replace("",d)).replace(/((\[\d+\][ \t]*)+)/g,e=>{let t=e.match(/\[\d+\]/g);return t&&t.length>3?t.slice(0,3).join(" "):e});let u=c?null===(n=c.find(t=>t.message_id===e.id))||void 0===n?void 0:null===(s=n.images)||void 0===s?void 0:null===(r=s.covers)||void 0===r?void 0:null===(t=r.find(e=>"png"===e.type))||void 0===t?void 0:t.path:"";d=d.replace(/!\[([^\]]*)\]|(\[\d+\])/g,(t,r,s)=>{if(void 0!==r)return t;let n=parseInt(s.replace(/[\[\]]/g,"")),a=e.recall_contexts[Number(n)-1];return a?"[[".concat(n,"](").concat(a.link,")]"):t});let p=null===(a=ry.Z.getState().allGraphicData)||void 0===a?void 0:a[e.id],h="",m=(null==p?void 0:null===(l=p.images)||void 0===l?void 0:null===(i=l.find(e=>"png"===e.type))||void 0===i?void 0:i.path)||"";if(m){let e=new URL(m);e.searchParams.set("smart_art_id",p.smart_art_id),h=e.toString()}let f=null===(o=e.recall_contexts)||void 0===o?void 0:o.map((e,t)=>"".concat(t+1,". [").concat(e.title,"](").concat(e.link,")")).join("\n");return"\n# ".concat(e.query,"\n\n").concat(u?"![mindmap](".concat(u,")"):"","\n\n").concat(d,"\n\n").concat(m?"![graphic](".concat(h,")"):"","\n\n").concat(f,"\n\n")},es=async()=>{if(!V){rn.$.publish("showLogin",void 0);return}let e=s.query.slice(0,100),t=er(s);try{let r=await (0,al.SB)({thread_id:s.id,title:e,content:t,other:{sources:d}});tg.Z.close(),200===r.status&&(tg.Z.success(F("drive.import_successful")),window.open("/docs/".concat(r.data.note_id),"_blank"))}catch(e){tg.Z.close()}},en=(0,v.useCallback)(()=>{let e=er(s);X(s.query.slice(0,100),e)},[s]),ea=(0,v.useCallback)(async e=>{let t=er(s),r=s.query.slice(0,100),n={SAVE_DOC:F("message.saving_to_felo_docs"),GOOGLE_DRIVE:F("saving_to_google_docs"),SAVE_NOTION:F("message.saving_to_notion")}[e]||F("topic.creating");tg.Z.show({content:(0,f.jsx)(rw.E,{children:n}),duration:99999,type:"custom"});let a=th.ZP.getState().userInfo,i=a.language&&"auto"!==a.language?a.language:Z;try{switch(e){case"DOCX":(0,rj.zC)({file_type:"DOCX",markdown:t,language:i},()=>{tg.Z.close()},r);break;case"MD":let s=(0,nX.rP)(t);(0,tN.qE)(s,r,()=>{tg.Z.close()});break;case"PDF":(0,rj.zC)({file_type:"PDF",markdown:t,language:i},()=>{tg.Z.close()},r);break;case"TXT":(0,tN.rb)(t,r,()=>{tg.Z.close()});break;case"SAVE_DOC":es();break;case"GOOGLE_DRIVE":en()}}catch(e){tg.Z.close(),tg.Z.error(F("".concat(e)),6e3)}},[s]);return(0,f.jsxs)(f.Fragment,{children:[r7.r8&&(0,f.jsx)(nA,{info:U}),(0,f.jsxs)("section",{className:"flex flex-wrap justify-between mt-6 gap-5",children:[(0,f.jsxs)("section",{className:"flex flex-wrap gap-3",children:[(0,f.jsxs)(rh.h_,{onOpenChange:e=>{e&&K()},children:[(0,f.jsx)(rh.$F,{className:(0,t_.cn)((!(c&&!A)||!o)&&"hidden","outline-none"),children:(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsxs)(tK.z,{variant:"outline-primary",className:(0,t_.cn)("bg-transparent border-1 flex px-3 items-center gap-0 h-8 z-0 rounded-2xl border-[#0080FF] focus-visible:bg-[#EDFAFF] dark:focus-visible:bg-[#25364DCC] dark:border-[#0694FF] hover:bg-[#EDFAFF] dark:hover:bg-[#25364DCC] text-[#0080FF] dark:text-[#0694FF] hover:text-[#0080FF]",(!c||!o)&&"hidden"),children:[F("convert_answer_to"),(0,f.jsxs)("div",{className:"ml-1 flex items-center",children:[(0,f.jsx)("div",{className:"p-1 rounded-full border border-white bg-[#0080FF] dark:border-[#202531]",children:(0,f.jsx)(rb.k4,{className:"text-white !size-3"})}),!(0,r2.N0)()&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"p-1 -ml-2 rounded-full border border-white bg-[#D14625] dark:border-[#202531]",children:(0,f.jsx)(rb.fb,{className:"text-white !size-3"})}),(0,f.jsx)("div",{className:"p-1 -ml-2 rounded-full border border-white bg-gradient-to-br from-[#9A4DFF] to-[#0080FF] dark:border-[#202531]",children:(0,f.jsx)(rb.rq,{className:"text-white !size-3"})})]})]})]}),$&&(0,f.jsx)(as.C,{variant:"destructive",className:"absolute py-0 px-1 text-xs -top-2 -right-3",children:"New"})]})}),(0,f.jsxs)(rh.AW,{className:"rounded-xl",align:"start",children:[(0,f.jsx)(rh.Xi,{className:"p-0",children:(0,f.jsxs)("button",{className:"bg-transparent w-full flex gap-2 items-center text-base z-0 text-[#30394A] p-2 px-3 dark:text-white",onClick:ee,children:[(0,f.jsx)(rb.k4,{className:"w-5 h-5"}),F("mindmap")]})}),!(0,r2.N0)()&&!G&&(0,f.jsx)(rh.Xi,{className:"p-0",children:(0,f.jsx)(nK,{thread:s})}),!G&&!(0,r2.N0)()&&(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(rh.Xi,{className:"p-0",children:(0,f.jsx)(aa,{thread:s,modelType:"PRO",query:l,answer:o})})})]})]}),(0,f.jsxs)(rh.h_,{children:[(0,f.jsx)(rh.$F,{className:(0,t_.cn)((!(c&&!A)||!o)&&"hidden","outline-none"),children:(0,f.jsxs)(tK.z,{className:(0,t_.cn)("rounded-2xl text-[#4B5F7E] gap-1 z-0 dark:text-[#F3F5F7]",(!c||!o)&&"hidden"),variant:"simple",children:[(0,f.jsx)(ti.Z,{size:16}),F("export")]})}),(0,f.jsxs)(rh.AW,{className:"rounded-xl",children:[(0,f.jsx)("div",{className:"py-1 px-3 box-border text-[14px] leading-5 text-[#5F7698] dark:text-[#D0D4DC]",children:F("enterprise.save")}),(0,f.jsx)(rh.Xi,{className:"p-0",children:(0,f.jsx)(nU,{shortId:a||"",query:l,answer:o,sources:d,relates:j,thread:s,pptCover:C,images:_})}),!G&&(0,f.jsx)(rh.Xi,{className:"p-0",children:(0,f.jsxs)("button",{className:(0,t_.cn)("bg-transparent w-full flex items-center text-base z-0 text-[#30394A] p-2 px-3 dark:text-white"),onClick:()=>{ea("GOOGLE_DRIVE")},children:[(0,f.jsx)(r_.X,{className:"mr-2 w-5 h-5"}),F("save_google_docs")]})},"Google Drive"),(0,f.jsx)(rh.Xi,{className:"p-0",children:(0,f.jsxs)("button",{className:(0,t_.cn)("bg-transparent w-full flex items-center text-base z-0 text-[#30394A] p-2 px-3 dark:text-white"),onClick:()=>{ea("SAVE_DOC")},children:[(0,f.jsx)(rb.EO,{className:"mr-2 w-5 h-5"}),F("rewrite_to_docs.title")]})},"SAVE_DOC"),!G&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"py-1 px-3 box-border text-[14px] leading-5 text-[#5F7698] dark:text-[#D0D4DC]",children:F("download.label")}),(0,f.jsx)(rh.Xi,{className:"p-0",children:(0,f.jsxs)("button",{className:(0,t_.cn)("bg-transparent w-full flex items-center text-base z-0 text-[#30394A] p-2 px-3 dark:text-white"),onClick:()=>{ea("PDF")},children:[(0,f.jsx)("span",{className:"mr-2",children:(0,f.jsx)(rN.Q,{fileName:"pdf",w:5,h:5})}),F("download_pdf")]})},"PDF"),(0,f.jsx)(rh.Xi,{className:"p-0",children:(0,f.jsxs)("button",{className:(0,t_.cn)("bg-transparent w-full flex items-center text-base z-0 text-[#30394A] p-2 px-3 dark:text-white"),onClick:()=>{ea("DOCX")},children:[(0,f.jsx)("span",{className:"mr-2",children:(0,f.jsx)(rN.Q,{fileName:"docx",w:5,h:5})}),F("download_word")]})},"DOCX"),(0,f.jsx)(rh.Xi,{className:"p-0",children:(0,f.jsxs)("button",{className:(0,t_.cn)("bg-transparent w-full flex items-center text-base z-0 text-[#30394A] p-2 px-3 dark:text-white"),onClick:()=>{ea("MD")},children:[(0,f.jsx)("span",{className:"mr-2",children:(0,f.jsx)(rN.Q,{fileName:"md",w:5,h:5})}),F("download_md")]})},"MD"),(0,f.jsx)(rh.Xi,{className:"p-0",children:(0,f.jsxs)("button",{className:(0,t_.cn)("bg-transparent w-full flex items-center text-base z-0 text-[#30394A] p-2 px-3 dark:text-white"),onClick:()=>{ea("TXT")},children:[(0,f.jsx)("span",{className:"mr-2",children:(0,f.jsx)(rN.Q,{fileName:"txt",w:5,h:5})}),F("download_txt")]})},"TXT")]})]})]}),r7.r8&&(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(tK.z,{variant:"simple",className:"rounded-2xl gap-1 text-[#4B5F7E] dark:text-[#F3F5F7]",onClick:()=>{W({question:l,sources:d})},children:[(0,f.jsx)(nP.Z,{size:16}),"Debug"]})})]}),(0,f.jsxs)("section",{className:"flex",children:[Q?(0,f.jsx)(n3.pn,{children:(0,f.jsxs)(n3.u,{children:[(0,f.jsx)(n3.aJ,{asChild:!0,children:(0,f.jsx)(tK.z,{className:(0,t_.cn)(!(c&&!A)&&"hidden","bg-transparent hover:bg-[#e9e9e9] rounded-lg dark:hover:bg-[#353B46] text-[#4B5F7E] dark:text-[#F3F5F7]"),onClick:()=>p("pro"),children:(0,f.jsx)(rb.XL,{})})}),(0,f.jsx)(n3._v,{className:"bg-[#353B46] text-white dark:bg-[#353B46] dark:text-white",children:F("rewrite")})]})}):(0,f.jsxs)(rh.h_,{onOpenChange:e=>{e&&(0,ao.a)(ty.U.THREAD_REANSWER_MENU_OPEN)},children:[(0,f.jsx)(n3.pn,{children:(0,f.jsxs)(n3.u,{children:[(0,f.jsx)(n3.aJ,{asChild:!0,children:(0,f.jsx)("div",{className:"max-w-fit",children:(0,f.jsx)(rh.$F,{className:(0,t_.cn)(!(c&&!A)&&"hidden","outline-none"),children:(0,f.jsx)(tK.z,{className:"bg-transparent rounded-lg hover:bg-[#F6F7F9] dark:hover:bg-[#353B46] text-[#4B5F7E] dark:text-[#F3F5F7]",children:(0,f.jsx)(rb.XL,{})})})})}),(0,f.jsx)(n3._v,{className:"bg-[#353B46] text-white dark:bg-[#353B46] dark:text-white",children:F("rewrite")})]})}),(0,f.jsxs)(rh.AW,{children:[(0,f.jsx)(rh.Xi,{onSelect:()=>u(!0),children:(0,f.jsxs)("div",{className:"flex flex-col",children:[(0,f.jsx)("span",{children:F("edit_query")}),(0,f.jsx)("span",{className:"text-xs text-muted-foreground",children:F("rewrite_query_desc")})]})}),N!==tJ.iV&&(0,f.jsx)(rh.Xi,{onSelect:()=>p("pro"),children:(0,f.jsxs)("div",{className:"flex flex-col",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{children:"Pro Search"}),(0,f.jsx)(nZ,{className:"rounded bg-theme-bg-300 dark:bg-theme-bg-dark-300 px-2 py-0.5 text-xs text-nowrap"})]}),(0,f.jsx)("span",{className:"text-xs text-muted-foreground",children:F("pro_search_description")})]})}),P[r].category===tJ.gl&&N!==tJ.iV&&!q&&(0,f.jsx)(rh.Xi,{disabled:!I,onSelect:()=>p("discovery"),children:(0,f.jsxs)("div",{className:"flex flex-col",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{children:F("deep_research")}),I!==1/0&&(0,f.jsx)(nZ,{className:"rounded bg-theme-bg-300 dark:bg-theme-bg-dark-300 px-2 py-0.5 text-xs text-nowrap"})]}),(0,f.jsx)("span",{className:"text-xs text-muted-foreground",children:F("deep_research_desc_two")})]})}),N!==tJ.iV&&R.map(e=>(0,f.jsx)(rh.Xi,{className:(0,t_.cn)(y&&"hidden",!r7.r8&&e.is_dev&&"hidden",!L.includes("subscriptionPlan")&&"hidden"),onSelect:()=>et(e.value),children:(0,f.jsxs)("div",{className:"flex flex-col",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{children:e.label}),e.is_pro&&I!==1/0&&(0,f.jsx)(nZ,{className:"rounded bg-theme-bg-300 dark:bg-theme-bg-dark-300 px-2 py-0.5 text-xs text-nowrap"})]}),(0,f.jsx)("span",{className:"text-xs text-muted-foreground",children:"google"===e.provider?F("gemini-pro_desc"):F(e.value.split(".").join("")+"_desc")})]})},e.value)),(0,f.jsx)(rh.Xi,{className:(0,t_.cn)(w&&"hidden"),onSelect:()=>p("chat"),children:(0,f.jsxs)("div",{className:"flex flex-col",children:[(0,f.jsx)("span",{children:F("rewrite_chat")}),(0,f.jsx)("span",{className:"text-xs text-muted-foreground",children:F("rewrite_chat_desc")})]})}),N!==tJ.iV&&(0,f.jsx)(rh.Xi,{className:(0,t_.cn)(w&&"hidden","!bg-transparent mt-2 border-t rounded-none border-gray-200 dark:border-theme-border-dark-300"),onSelect:()=>M.push("/settings"),children:(0,f.jsx)("div",{className:"text-[#1790ff]",children:F("set_advanced_model")})})]})]}),(0,f.jsx)(ar,{shortId:a,rid:i,answer:o,sources:d,canEdit:c,isFirst:h,isLast:m,relates:j,onDelete:x,isShowRelates:S,setIsShowRelates:T,thread:s})]})]})]})},au=r(38363),ap=r(29864),ah=r(2605);let am=e=>{let{id:t,query:r}=e,s=(0,r8.a1)();return fetch("".concat(r7.XJ,"/query/images"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(s)},body:JSON.stringify({search_uuid:t,query:r})}).then(async e=>200!==e.status?[]:await e.json()).catch(()=>[])};var af=r(90488);function av(e){let{className:t,...r}=e;return(0,f.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:(0,t_.cn)("animate-spin",t),...r,children:[(0,f.jsx)("g",{"clip-path":"url(#paint0_angular_14983_108097_clip_path)","data-figma-skip-parse":"true",children:(0,f.jsx)("g",{transform:"matrix(0 -0.024 0.024 0 24 24)",children:(0,f.jsx)("foreignObject",{x:"-1041.67",y:"-1041.67",width:"2083.33",height:"2083.33",children:(0,f.jsx)("div",{style:{background:"conic-gradient(from 90deg,rgba(0, 128, 255, 1) 0deg,rgba(134, 79, 255, 0) 360deg)",height:"100%",width:"100%",opacity:1}})})})}),(0,f.jsx)("path",{d:"M0 24C0 10.7452 10.7452 0 24 0C37.2548 0 48 10.7452 48 24C48 37.2548 37.2548 48 24 48C10.7452 48 0 37.2548 0 24ZM40.8 24C40.8 14.7216 33.2784 7.2 24 7.2C14.7216 7.2 7.2 14.7216 7.2 24C7.2 33.2784 14.7216 40.8 24 40.8C33.2784 40.8 40.8 33.2784 40.8 24Z","data-figma-gradient-fill":'{"type":"GRADIENT_ANGULAR","stops":[{"color":{"r":0.0,"g":0.50196081399917603,"b":1.0,"a":1.0},"position":0.0},{"color":{"r":0.52726632356643677,"g":0.31238731741905212,"b":1.0,"a":0.0},"position":1.0}],"stopsVar":[{"color":{"r":0.0,"g":0.50196081399917603,"b":1.0,"a":1.0},"position":0.0},{"color":{"r":0.52726632356643677,"g":0.31238731741905212,"b":1.0,"a":0.0},"position":1.0}],"transform":{"m00":2.9391518109296924e-15,"m01":48.0,"m02":0.0,"m10":-48.0,"m11":2.9391518109296924e-15,"m12":48.0},"opacity":1.0,"blendMode":"NORMAL","visible":true}'}),(0,f.jsx)("defs",{children:(0,f.jsx)("clipPath",{id:"paint0_angular_14983_108097_clip_path",children:(0,f.jsx)("path",{d:"M0 24C0 10.7452 10.7452 0 24 0C37.2548 0 48 10.7452 48 24C48 37.2548 37.2548 48 24 48C10.7452 48 0 37.2548 0 24ZM40.8 24C40.8 14.7216 33.2784 7.2 24 7.2C14.7216 7.2 7.2 14.7216 7.2 24C7.2 33.2784 14.7216 40.8 24 40.8C33.2784 40.8 40.8 33.2784 40.8 24Z"})})})]})}let ax=e=>(0,f.jsxs)("svg",{width:"229",height:"135",viewBox:"0 0 229 135",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,f.jsx)("path",{d:"M17 133.556L217 133.556",stroke:"#4B5F7E","stroke-width":"1.5","stroke-linecap":"round"}),(0,f.jsx)("path",{d:"M222 133.556L228 133.556",stroke:"#4B5F7E","stroke-width":"1.5","stroke-linecap":"round"}),(0,f.jsx)("path",{d:"M1 133.556L13 133.556",stroke:"#4B5F7E","stroke-width":"1.5","stroke-linecap":"round"}),(0,f.jsx)("path",{d:"M173.829 95.6604C179.858 93.5587 191.232 88.4463 191.232 78.5169C191.232 67.1777 179.229 57.8748 155.127 53.8406C142.238 51.6833 72.6163 51.1048 60.1953 27.667",stroke:"#4B5F7E","stroke-linecap":"round","stroke-dasharray":"1 2"}),(0,f.jsx)("path",{d:"M55.0106 54.7763C54.68 49.0369 59.2452 44.2013 64.9941 44.2013H163.75C169.442 44.2013 173.986 48.946 173.74 54.6329L171.604 104.079C171.373 109.429 166.969 113.647 161.614 113.647H67.8421C62.5426 113.647 58.1634 109.513 57.8586 104.222L55.0106 54.7763Z",fill:"#E6E9EF",stroke:"#4B5F7E"}),(0,f.jsx)("circle",{cx:"55.9496",cy:"22.7352",r:"9.63213",transform:"rotate(-36.6555 55.9496 22.7352)",fill:"#F6C846"}),(0,f.jsx)("ellipse",{cx:"53.4332",cy:"22.5961",rx:"0.627742",ry:"2.64822",transform:"rotate(-36.6555 53.4332 22.5961)",fill:"black"}),(0,f.jsx)("ellipse",{cx:"56.5388",cy:"20.285",rx:"0.627742",ry:"2.64822",transform:"rotate(-36.6555 56.5388 20.285)",fill:"black"}),(0,f.jsx)("path",{d:"M55.6891 28.2418L61.2516 24.0034",stroke:"black","stroke-width":"0.868219","stroke-linecap":"round"}),(0,f.jsx)("path",{d:"M60.0967 8.3207C60.0737 9.71758 59.6816 12.0261 59.2451 12.0189C58.8086 12.0117 58.4929 9.69149 58.516 8.2946C58.5312 7.36961 58.8921 6.95311 59.3286 6.96031C59.7651 6.96752 60.1103 7.50082 60.0967 8.3207Z",fill:"black"}),(0,f.jsx)("path",{d:"M63.0149 10.4012C62.0109 11.3726 60.1013 12.7277 59.7977 12.4139C59.4941 12.1002 60.9115 10.2364 61.9156 9.26493C62.5805 8.62166 63.1301 8.58229 63.4337 8.89606C63.7373 9.20982 63.6042 9.83098 63.0149 10.4012Z",fill:"black"}),(0,f.jsx)("path",{d:"M45.0225 64.8606C44.2758 58.8918 48.9298 53.6193 54.9452 53.6193L103.815 53.6193C105.414 53.6193 106.948 54.2582 108.074 55.3941L120.497 67.9189C122.75 70.1906 125.818 71.4684 129.017 71.4684H173.737C179.894 71.4684 184.589 76.9796 183.609 83.0586L176.831 125.146C176.05 129.992 171.867 133.556 166.958 133.556H62.4431C57.4003 133.556 53.1465 129.801 52.5205 124.797L45.0225 64.8606Z",fill:"white",stroke:"#4B5F7E"}),(0,f.jsx)("path",{d:"M91.646 92.1473C94.3337 92.1474 96.5308 94.3759 96.5308 97.1473C96.5308 99.9188 94.3337 102.147 91.646 102.147C88.9582 102.147 86.7612 99.9188 86.7612 97.1473C86.7612 94.3759 88.9582 92.1473 91.646 92.1473Z",fill:"#4B5F7E",stroke:"#4B5F7E"}),(0,f.jsx)("path",{d:"M136.877 92.1473C139.564 92.1474 141.761 94.3759 141.761 97.1473C141.761 99.9188 139.564 102.147 136.877 102.147C134.189 102.147 131.992 99.9188 131.992 97.1473C131.992 94.3759 134.189 92.1473 136.877 92.1473Z",fill:"#4B5F7E",stroke:"#4B5F7E"}),(0,f.jsx)("path",{d:"M123.261 113.647C121.98 110.154 118.172 107.647 114.189 107.647C110.061 107.647 106.551 110.154 105.261 113.647",stroke:"#4B5F7E","stroke-width":"2.16","stroke-linecap":"round"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M196.76 106.754C197.902 105.796 198.051 104.094 197.093 102.952C196.135 101.811 192.72 100.281 191.903 100.966C191.087 101.651 192.001 105.28 192.959 106.421C193.917 107.563 195.619 107.712 196.76 106.754Z",fill:"#D3D9E4"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M191.311 115.909C192.639 115.232 193.167 113.607 192.49 112.28C191.813 110.952 188.83 108.693 187.88 109.177C186.931 109.66 187.005 113.402 187.681 114.73C188.358 116.058 189.983 116.586 191.311 115.909Z",fill:"#D3D9E4"}),(0,f.jsx)("path",{d:"M134.892 20.051H174.392C178.811 20.051 182.392 23.6327 182.392 28.051V28.051C182.392 32.4692 178.811 36.051 174.392 36.051H133.658",stroke:"#4B5F7E","stroke-linecap":"round"}),(0,f.jsx)("path",{d:"M170.892 23.051C173.376 23.051 175.392 25.067 175.392 27.551C175.392 30.035 173.376 32.051 170.892 32.051C168.408 32.051 166.392 30.035 166.392 27.551C166.392 25.067 168.408 23.051 170.892 23.051ZM170.892 31.051C172.826 31.051 174.392 29.4847 174.392 27.551C174.392 25.6172 172.826 24.051 170.892 24.051C168.958 24.051 167.392 25.6172 167.392 27.551C167.392 29.4847 168.958 31.051 170.892 31.051ZM173.633 30.3428C173.827 30.1492 174.14 30.1474 174.336 30.3387L176.187 32.1472C176.386 32.3418 176.388 32.6615 176.191 32.8584C175.998 33.052 175.684 33.0538 175.488 32.8625L173.637 31.054C173.438 30.8594 173.436 30.5397 173.633 30.3428Z",fill:"#4B5F7E"}),(0,f.jsxs)("mask",{id:"path-20-outside-1_15299_159378",maskUnits:"userSpaceOnUse",x:"121.214",y:"50.8805",width:"45.0656",height:"39.0288",fill:"black",children:[(0,f.jsx)("rect",{fill:"white",x:"121.214",y:"50.8805",width:"45.0656",height:"39.0288"}),(0,f.jsx)("path",{d:"M127.931 54.8545L134.975 60.0915C136.881 59.2781 139.157 59.4843 140.921 60.8303L159.878 75.2889C162.489 77.2804 162.991 81.012 160.999 83.623C159.008 86.2337 155.277 86.7355 152.666 84.744L133.71 70.2855C131.975 68.9621 131.171 66.8706 131.411 64.8501L124.325 59.5817L127.931 54.8545Z"})]}),(0,f.jsx)("path",{d:"M127.931 54.8545L134.975 60.0915C136.881 59.2781 139.157 59.4843 140.921 60.8303L159.878 75.2889C162.489 77.2804 162.991 81.012 160.999 83.623C159.008 86.2337 155.277 86.7355 152.666 84.744L133.71 70.2855C131.975 68.9621 131.171 66.8706 131.411 64.8501L124.325 59.5817L127.931 54.8545Z",fill:"#0080FF"}),(0,f.jsx)("path",{d:"M127.931 54.8545L128.527 54.052C128.088 53.7254 127.468 53.8128 127.136 54.2481L127.931 54.8545ZM134.975 60.0915L134.379 60.894C134.664 61.1062 135.041 61.1508 135.368 61.0112L134.975 60.0915ZM140.921 60.8303L140.315 61.6254L140.921 60.8303ZM159.878 75.2889L160.484 74.4937L159.878 75.2889ZM160.999 83.623L161.794 84.2295L161.794 84.2295L160.999 83.623ZM131.411 64.8501L132.404 64.9681C132.446 64.6124 132.295 64.2613 132.008 64.0476L131.411 64.8501ZM124.325 59.5817L123.53 58.9753C123.368 59.1878 123.298 59.4565 123.335 59.7212C123.372 59.9859 123.514 60.2247 123.729 60.3842L124.325 59.5817ZM127.931 54.8545L127.334 55.6571L134.379 60.894L134.975 60.0915L135.572 59.2889L128.527 54.052L127.931 54.8545ZM134.975 60.0915L135.368 61.0112C136.956 60.3333 138.848 60.5067 140.315 61.6254L140.921 60.8303L141.528 60.0352C139.465 58.4619 136.805 58.2229 134.583 59.1718L134.975 60.0915ZM140.921 60.8303L140.315 61.6254L159.271 76.084L159.878 75.2889L160.484 74.4937L141.528 60.0352L140.921 60.8303ZM159.878 75.2889L159.271 76.084C161.443 77.7406 161.861 80.8446 160.204 83.0166L160.999 83.623L161.794 84.2295C164.121 81.1793 163.534 76.8202 160.484 74.4937L159.878 75.2889ZM160.999 83.623L160.204 83.0165C158.548 85.1881 155.444 85.6055 153.272 83.9489L152.666 84.744L152.059 85.5391C155.109 87.8654 159.468 87.2794 161.794 84.2295L160.999 83.623ZM152.666 84.744L153.272 83.9489L134.316 69.4904L133.71 70.2855L133.103 71.0806L152.059 85.5391L152.666 84.744ZM133.71 70.2855L134.316 69.4904C132.874 68.3903 132.204 66.6519 132.404 64.9681L131.411 64.8501L130.418 64.732C130.138 67.0893 131.075 69.5339 133.103 71.0806L133.71 70.2855ZM131.411 64.8501L132.008 64.0476L124.922 58.7792L124.325 59.5817L123.729 60.3842L130.814 65.6526L131.411 64.8501ZM124.325 59.5817L125.12 60.1882L128.726 55.461L127.931 54.8545L127.136 54.2481L123.53 58.9753L124.325 59.5817Z",fill:"#30394A",mask:"url(#path-20-outside-1_15299_159378)"}),(0,f.jsx)("path",{d:"M81.5789 23.046C91.5858 9.92634 110.344 7.42393 123.472 17.4372L124.08 17.9129C136.676 28.0351 138.989 46.4067 129.138 59.3212C119.131 72.4404 100.375 74.9432 87.2472 64.9304L86.6389 64.4542C74.0424 54.3321 71.7288 35.9606 81.5789 23.046Z",stroke:"#30394A","stroke-linecap":"round","stroke-linejoin":"round"}),(0,f.jsx)("foreignObject",{x:"71.9287",y:"7.76447",width:"66.8607",height:"66.8383",children:(0,f.jsx)("div",{style:{backdropFilter:"blur(2px)",clipPath:"url(#bgblur_0_15299_159378_clip_path)",height:"100%",width:"100%"}})}),(0,f.jsx)("path",{"data-figma-bg-blur-radius":"4",d:"M83.538 24.5402C92.718 12.5046 109.929 10.205 121.978 19.3948C134.027 28.585 136.36 45.7918 127.18 57.8275C118 69.863 100.789 72.1616 88.7401 62.9715C76.6915 53.7814 74.3582 36.5758 83.538 24.5402Z",fill:"#0080FF",stroke:"white","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round"}),(0,f.jsx)("path",{d:"M93.3848 50.7454C94.6295 49.1137 96.963 48.8016 98.5975 50.048C100.232 51.2947 100.549 53.6282 99.3039 55.2601C98.0592 56.892 95.7244 57.2045 94.0899 55.9577C92.4556 54.711 92.1402 52.3772 93.3848 50.7454ZM102.399 38.9267C103.644 37.2949 105.978 36.982 107.613 38.2284C109.247 39.4752 109.563 41.8095 108.319 43.4414C107.074 45.073 104.74 45.3848 103.105 44.1382C101.471 42.8915 101.155 40.5584 102.399 38.9267ZM111.415 27.1071C112.659 25.4753 114.993 25.1624 116.628 26.4089C118.262 27.6556 118.578 29.9899 117.334 31.6218C116.089 33.2536 113.755 33.5654 112.12 32.3187C110.486 31.0719 110.17 28.7389 111.415 27.1071Z",fill:"white"}),(0,f.jsx)("path",{d:"M204.388 120.83C204.41 120.721 204.566 120.721 204.589 120.83L205.059 123.073C205.067 123.109 205.093 123.138 205.128 123.15L207.273 123.85C207.367 123.881 207.367 124.015 207.273 124.046L205.128 124.746C205.093 124.758 205.067 124.787 205.059 124.823L204.589 127.066C204.566 127.175 204.41 127.175 204.388 127.066L203.917 124.823C203.909 124.787 203.883 124.758 203.848 124.746L201.703 124.046C201.609 124.015 201.609 123.881 201.704 123.85L203.848 123.15C203.883 123.138 203.909 123.109 203.917 123.073L204.388 120.83Z",fill:"#FF69B1",stroke:"#4B5F7E","stroke-width":"0.513973"}),(0,f.jsx)("path",{d:"M156.764 55.1376C156.782 55.0467 156.912 55.0467 156.931 55.1376L157.483 57.8186C157.49 57.8484 157.511 57.8727 157.54 57.8823L160.019 58.7063C160.097 58.7322 160.097 58.8425 160.019 58.8684L157.54 59.6924C157.511 59.702 157.49 59.7263 157.483 59.7561L156.931 62.4371C156.912 62.528 156.782 62.528 156.764 62.4371L156.211 59.7561C156.205 59.7263 156.184 59.702 156.155 59.6924L153.676 58.8684C153.598 58.8425 153.598 58.7322 153.676 58.7063L156.155 57.8823C156.184 57.8727 156.205 57.8484 156.211 57.8186L156.764 55.1376Z",fill:"#FF7ABA",stroke:"#4B5F7E","stroke-width":"0.426906"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M152.802 12.6413L151.513 12.317C151.416 12.2928 151.357 12.1948 151.382 12.0982C151.398 12.0337 151.448 11.9834 151.513 11.9672L152.802 11.643C152.866 11.6268 152.917 11.5765 152.933 11.5121L153.257 10.2227C153.281 10.1261 153.379 10.0674 153.476 10.0917C153.541 10.1079 153.591 10.1582 153.607 10.2227L153.931 11.5121C153.947 11.5765 153.998 11.6268 154.062 11.643L155.352 11.9672C155.448 11.9915 155.507 12.0895 155.483 12.1861C155.466 12.2505 155.416 12.3008 155.352 12.317L154.062 12.6413C153.998 12.6575 153.947 12.7078 153.931 12.7722L153.607 14.0616C153.583 14.1582 153.485 14.2168 153.388 14.1925C153.324 14.1763 153.273 14.126 153.257 14.0616L152.933 12.7722C152.917 12.7078 152.866 12.6575 152.802 12.6413Z",fill:"#EDFF1B",stroke:"#4B5F7E","stroke-width":"0.513973"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M165.016 121.925L162.599 121.317C162.417 121.271 162.308 121.088 162.353 120.906C162.383 120.786 162.478 120.691 162.599 120.661L165.016 120.053C165.137 120.023 165.231 119.928 165.262 119.808L165.87 117.39C165.915 117.209 166.099 117.099 166.28 117.144C166.401 117.175 166.495 117.269 166.526 117.39L167.133 119.808C167.164 119.928 167.258 120.023 167.379 120.053L169.797 120.661C169.978 120.706 170.088 120.89 170.042 121.071C170.012 121.192 169.917 121.286 169.797 121.317L167.379 121.925C167.258 121.955 167.164 122.049 167.133 122.17L166.526 124.588C166.48 124.769 166.296 124.879 166.115 124.833C165.994 124.803 165.9 124.709 165.87 124.588L165.262 122.17C165.231 122.049 165.137 121.955 165.016 121.925Z",fill:"white"}),(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.0689 106.877L21.296 106.431C21.1631 106.398 21.0825 106.263 21.1159 106.13C21.1382 106.041 21.2074 105.972 21.296 105.95L23.0689 105.504C23.1575 105.482 23.2267 105.413 23.249 105.324L23.6947 103.551C23.7281 103.418 23.8629 103.338 23.9957 103.371C24.0843 103.393 24.1535 103.463 24.1757 103.551L24.6215 105.324C24.6438 105.413 24.713 105.482 24.8016 105.504L26.5745 105.95C26.7073 105.983 26.7879 106.118 26.7545 106.251C26.7323 106.339 26.6631 106.409 26.5745 106.431L24.8016 106.877C24.713 106.899 24.6438 106.968 24.6215 107.057L24.1757 108.83C24.1423 108.963 24.0076 109.043 23.8748 109.01C23.7862 108.987 23.717 108.918 23.6947 108.83L23.249 107.057C23.2267 106.968 23.1575 106.899 23.0689 106.877Z",fill:"#FF8D3B",stroke:"#4B5F7E","stroke-width":"0.513973"}),(0,f.jsx)("path",{d:"M44.6839 77.7247C48.4629 77.5267 51.7767 79.9283 52.8885 83.366L53.0192 83.3571C55.8171 83.2104 58.2041 85.3597 58.3507 88.1575C58.4973 90.9554 56.3481 93.3424 53.5502 93.489C52.2473 93.5573 51.0336 93.1277 50.0936 92.3666C48.8255 93.3433 47.2585 93.9583 45.5394 94.0484C42.9341 94.1849 40.5499 93.0859 38.956 91.2636C37.911 93.1617 35.9376 94.4926 33.6141 94.6144C31.0965 94.7463 28.8393 93.4235 27.6588 91.3808C27.2032 91.6227 26.6884 91.7712 26.139 91.8C24.1183 91.9059 22.3944 90.3536 22.2885 88.3329C22.1826 86.3123 23.7348 84.5883 25.7555 84.4824C26.4418 84.4465 27.0938 84.6018 27.6598 84.9017C28.7204 83.0662 30.6601 81.7873 32.9356 81.668C34.6269 81.5794 36.2008 82.1473 37.4095 83.149C38.4822 80.1316 41.2862 77.9028 44.6839 77.7247Z",fill:"#F6F7F9",stroke:"#4B5F7E","stroke-linejoin":"round"}),(0,f.jsx)("path",{d:"M186.203 83.2527C189.495 83.0802 192.399 85.0712 193.536 87.9825C193.789 87.9251 194.05 87.8886 194.317 87.8746C196.868 87.7409 199.045 89.7007 199.179 92.2519C199.312 94.8031 197.353 96.9797 194.801 97.1134C193.634 97.1746 192.546 96.7978 191.695 96.1268C190.457 97.2919 188.814 98.0415 186.983 98.1375C184.628 98.2609 182.471 97.2774 181.018 95.642C179.962 97.0738 178.295 98.0388 176.379 98.1392C174.174 98.2548 172.178 97.1972 170.999 95.5121C170.51 95.8459 169.927 96.054 169.292 96.0872C167.45 96.1838 165.878 94.7684 165.781 92.9258C165.685 91.0833 167.1 89.5113 168.943 89.4147C169.438 89.3888 169.913 89.472 170.346 89.6434C171.223 87.5053 173.272 85.9498 175.733 85.8208C177.344 85.7364 178.842 86.2776 179.993 87.2319C181.175 84.9822 183.48 83.3954 186.203 83.2527Z",fill:"#F6F7F9",stroke:"#4B5F7E","stroke-linejoin":"round"}),(0,f.jsx)("defs",{children:(0,f.jsx)("clipPath",{id:"bgblur_0_15299_159378_clip_path",transform:"translate(-71.9287 -7.76447)",children:(0,f.jsx)("path",{d:"M83.538 24.5402C92.718 12.5046 109.929 10.205 121.978 19.3948C134.027 28.585 136.36 45.7918 127.18 57.8275C118 69.863 100.789 72.1616 88.7401 62.9715C76.6915 53.7814 74.3582 36.5758 83.538 24.5402Z"})})})]});var ag=e=>{let{id:t,query:r,imageList:s,isAllDisabled:n}=e,a=(0,g.useTranslations)(),{isDark:i}=(0,rY.Z)(),[l,o]=(0,v.useState)(!0),[d,c]=(0,v.useState)([]),{isOpen:u,onOpen:p,onClose:h}=(0,e5.q)(),[m,x]=(0,v.useState)(!1),[b,y]=(0,v.useState)([]),[w,j]=(0,v.useState)([]),[C,_]=(0,v.useState)(0),k=(0,v.useRef)(""),N=b.length>=d.length&&d.length>0;(0,v.useEffect)(()=>{let e=setTimeout(()=>x(!0),1e3);return()=>clearTimeout(e)},[t]),(0,v.useEffect)(()=>{!t||s&&s.length||k.current===t||(y([]),am({id:t,query:r}).then(e=>{c(e),k.current=t}).finally(()=>o(!1)))},[t]),(0,v.useEffect)(()=>{if(s&&s.length>0){y([]),c(s),o(!1);return}},[s]);let E=()=>{let e=d[C].image.contextLink;(0,r2.N0)()&&(0,rd.oh)({url:e}),window.open(e,"_blank")},S=(e,t)=>{let r=e;do r=(r+t+d.length)%d.length;while(w.includes(r)&&r!==e);return r},T=e=>{if(u)switch(e.key){case"ArrowLeft":case"ArrowUp":_(e=>S(e,-1));break;case"ArrowRight":case"ArrowDown":_(e=>S(e,1))}};return(0,f.jsxs)(f.Fragment,{children:[!m&&(0,f.jsx)(av,{className:"my-20 w-full"}),(0,f.jsxs)("section",{className:(0,t_.cn)("pb-12",!m&&"hidden"),children:[l?(0,f.jsx)(av,{className:"my-20 w-full"}):!d.length&&(0,f.jsxs)("section",{className:"flex flex-col items-center justify-center gap-4 my-20",children:[(0,f.jsx)(ax,{}),(0,f.jsx)("div",{children:a("no_images")})]}),N?(0,f.jsx)("section",{className:"text-center my-10",children:a("no_images")}):(0,f.jsx)("section",{className:"columns-2 md:columns-3 gap-2 mt-1.5 space-y-2",style:{columnGap:"0.5rem"},children:d.map((e,t)=>b.includes(t)?null:(0,f.jsx)("section",{className:"mb-2 break-inside-avoid rounded-2xl border-1 border-slate-100 dark:border-transparent overflow-hidden bg-offset group transition-all duration-200 ease-in-out",children:(0,f.jsx)(tO.J,{className:"cursor-zoom-in z-0 w-full object-cover object-top transition-all ease-in-out hover:scale-[1.05] dark:brightness-75",classNames:{wrapper:"overflow-hidden hover:shadow-lg rounded-2xl"},src:e.link,width:"100%",height:"100%",shadow:"none",alt:e.title,onClick:()=>{j(b),_(t),p()},onError:()=>{b.includes(t)||y(e=>[...e,t])}})},t))})]}),(0,f.jsx)(nz.R,{size:"full",backdrop:"blur",isOpen:u,onClose:h,closeButton:(0,f.jsx)(f.Fragment,{}),onKeyDown:e=>T(e),classNames:{base:"h-full",backdrop:"bg-zinc-900/80"},children:(0,f.jsx)(nO.A,{className:"flex bg-transparent",children:e=>(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(nB.k,{className:"flex flex-col gap-1",children:(0,f.jsxs)("section",{className:"flex flex-col md:flex-row gap-4 border-b border-theme-border-100 dark:border-theme-border-dark-100 pb-5",children:[(0,f.jsx)("span",{className:"text-white text-base md:text-2xl truncate md:mr-auto",children:d[C].title}),(0,f.jsxs)("section",{className:"flex items-center gap-4",children:[(0,f.jsxs)(tw.A,{className:"mr-auto",variant:"ghost",radius:"full",onPress:E,children:[(0,f.jsx)(af.Z,{classNames:{wrapper:"w-4 flex-initial flex-shrink-0"},src:"https://www.google.com/s2/favicons?domain=".concat(d[C].displayLink,"&sz=",16)}),(0,f.jsx)("span",{className:"text-white",children:d[C].displayLink})]}),(0,f.jsx)(tw.A,{variant:"ghost",isIconOnly:!0,radius:"full",onPress:e,children:(0,f.jsx)(tC.Z,{color:"white"})})]})]})}),(0,f.jsxs)(nq.I,{className:"flex flex-auto flex-col md:flex-row gap-10 min-h-0",onClick:e,children:[(0,f.jsx)("section",{className:"flex w-full select-none py-md pl-lg min-h-0 flex-1",children:(0,f.jsx)("img",{className:"m-auto max-h-full rounded-md transition-all ease-in-out cursor-pointer dark:brightness-75",src:d[C].link,alt:C.toString(),onClick:e=>{e.stopPropagation(),window.open(d[C].link,"_blank")}},C)}),(0,f.jsx)("section",{className:"w-full md:w-32 overflow-auto",children:(0,f.jsx)("div",{className:"flex gap-4 flex-row md:flex-col",children:d.map((e,t)=>{if(!w.includes(t))return(0,f.jsx)("section",{className:"flex-shrink-0 break-inside-avoid",children:(0,f.jsx)("img",{className:(0,t_.cn)("h-32 w-32 bg-zinc-600 rounded-md object-cover cursor-pointer dark:brightness-75",C===t?"border-2 border-blue-500":"border-2 border-transparent"),src:e.link,width:"100%",height:"100%",alt:e.title,onClick:e=>{e.stopPropagation(),_(t)},onError:()=>{w.includes(t)||j(e=>[...e,t])}})},t)})})})]})]})})})]})},ab=r(6967);let ay=e=>{let t=(0,r8.a1)();return fetch("".concat(r7.XJ,"/query/videos"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(t)},body:JSON.stringify({search_uuid:e})}).then(async e=>200!==e.status?[]:await e.json()).catch(()=>[])};var aw=r(69047),aj=r(40507),aC=r.n(aj),a_=r(3341),ak=r.n(a_),aN=r(70905),aE=r.n(aN),aS=Object.defineProperty,aT=Object.defineProperties,aF=Object.getOwnPropertyDescriptors,aL=Object.getOwnPropertySymbols,aM=Object.prototype.hasOwnProperty,aA=Object.prototype.propertyIsEnumerable,aP=(e,t,r)=>t in e?aS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,aZ=(e,t)=>{for(var r in t||(t={}))aM.call(t,r)&&aP(e,r,t[r]);if(aL)for(var r of aL(t))aA.call(t,r)&&aP(e,r,t[r]);return e},aI=(e,t)=>aT(e,aF(t)),aD=(e,t,r)=>new Promise((s,n)=>{var a=e=>{try{l(r.next(e))}catch(e){n(e)}},i=e=>{try{l(r.throw(e))}catch(e){n(e)}},l=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,t)).next())});function aR(e={}){return aI(aZ({},e),{height:0,width:0,playerVars:aI(aZ({},e.playerVars),{autoplay:0,start:0,end:0})})}var az={videoId:aC().string,id:aC().string,className:aC().string,iframeClassName:aC().string,style:aC().object,title:aC().string,loading:aC().oneOf(["lazy","eager"]),opts:aC().objectOf(aC().any),onReady:aC().func,onError:aC().func,onPlay:aC().func,onPause:aC().func,onEnd:aC().func,onStateChange:aC().func,onPlaybackRateChange:aC().func,onPlaybackQualityChange:aC().func},aO=class extends v.Component{constructor(e){super(e),this.destroyPlayerPromise=void 0,this.onPlayerReady=e=>{var t,r;return null==(r=(t=this.props).onReady)?void 0:r.call(t,e)},this.onPlayerError=e=>{var t,r;return null==(r=(t=this.props).onError)?void 0:r.call(t,e)},this.onPlayerStateChange=e=>{var t,r,s,n,a,i,l,o;switch(null==(r=(t=this.props).onStateChange)||r.call(t,e),e.data){case aO.PlayerState.ENDED:null==(n=(s=this.props).onEnd)||n.call(s,e);break;case aO.PlayerState.PLAYING:null==(i=(a=this.props).onPlay)||i.call(a,e);break;case aO.PlayerState.PAUSED:null==(o=(l=this.props).onPause)||o.call(l,e)}},this.onPlayerPlaybackRateChange=e=>{var t,r;return null==(r=(t=this.props).onPlaybackRateChange)?void 0:r.call(t,e)},this.onPlayerPlaybackQualityChange=e=>{var t,r;return null==(r=(t=this.props).onPlaybackQualityChange)?void 0:r.call(t,e)},this.destroyPlayer=()=>this.internalPlayer?(this.destroyPlayerPromise=this.internalPlayer.destroy().then(()=>this.destroyPlayerPromise=void 0),this.destroyPlayerPromise):Promise.resolve(),this.createPlayer=()=>{if("undefined"==typeof document)return;if(this.destroyPlayerPromise){this.destroyPlayerPromise.then(this.createPlayer);return}let e=aI(aZ({},this.props.opts),{videoId:this.props.videoId});this.internalPlayer=aE()(this.container,e),this.internalPlayer.on("ready",this.onPlayerReady),this.internalPlayer.on("error",this.onPlayerError),this.internalPlayer.on("stateChange",this.onPlayerStateChange),this.internalPlayer.on("playbackRateChange",this.onPlayerPlaybackRateChange),this.internalPlayer.on("playbackQualityChange",this.onPlayerPlaybackQualityChange),(this.props.title||this.props.loading)&&this.internalPlayer.getIframe().then(e=>{this.props.title&&e.setAttribute("title",this.props.title),this.props.loading&&e.setAttribute("loading",this.props.loading)})},this.resetPlayer=()=>this.destroyPlayer().then(this.createPlayer),this.updatePlayer=()=>{var e;null==(e=this.internalPlayer)||e.getIframe().then(e=>{this.props.id?e.setAttribute("id",this.props.id):e.removeAttribute("id"),this.props.iframeClassName?e.setAttribute("class",this.props.iframeClassName):e.removeAttribute("class"),this.props.opts&&this.props.opts.width?e.setAttribute("width",this.props.opts.width.toString()):e.removeAttribute("width"),this.props.opts&&this.props.opts.height?e.setAttribute("height",this.props.opts.height.toString()):e.removeAttribute("height"),this.props.title?e.setAttribute("title",this.props.title):e.setAttribute("title","YouTube video player"),this.props.loading?e.setAttribute("loading",this.props.loading):e.removeAttribute("loading")})},this.getInternalPlayer=()=>this.internalPlayer,this.updateVideo=()=>{var e,t,r,s;if(void 0===this.props.videoId||null===this.props.videoId){null==(e=this.internalPlayer)||e.stopVideo();return}let n=!1,a={videoId:this.props.videoId};if((null==(t=this.props.opts)?void 0:t.playerVars)&&(n=1===this.props.opts.playerVars.autoplay,"start"in this.props.opts.playerVars&&(a.startSeconds=this.props.opts.playerVars.start),"end"in this.props.opts.playerVars&&(a.endSeconds=this.props.opts.playerVars.end)),n){null==(r=this.internalPlayer)||r.loadVideoById(a);return}null==(s=this.internalPlayer)||s.cueVideoById(a)},this.refContainer=e=>{this.container=e},this.container=null,this.internalPlayer=null}componentDidMount(){this.createPlayer()}componentDidUpdate(e){return aD(this,null,function*(){var t,r,s,n,a,i;t=this.props,(e.id!==t.id||e.className!==t.className||(null==(r=e.opts)?void 0:r.width)!==(null==(s=t.opts)?void 0:s.width)||(null==(n=e.opts)?void 0:n.height)!==(null==(a=t.opts)?void 0:a.height)||e.iframeClassName!==t.iframeClassName||e.title!==t.title)&&this.updatePlayer(),i=this.props,e.videoId===i.videoId&&ak()(aR(e.opts),aR(i.opts))||(yield this.resetPlayer()),function(e,t){var r,s;if(e.videoId!==t.videoId)return!0;let n=(null==(r=e.opts)?void 0:r.playerVars)||{},a=(null==(s=t.opts)?void 0:s.playerVars)||{};return n.start!==a.start||n.end!==a.end}(e,this.props)&&this.updateVideo()})}componentWillUnmount(){this.destroyPlayer()}render(){return v.createElement("div",{className:this.props.className,style:this.props.style},v.createElement("div",{id:this.props.id,className:this.props.iframeClassName,ref:this.refContainer}))}};aO.propTypes=az,aO.defaultProps={videoId:"",id:"",className:"",iframeClassName:"",style:{},title:"",loading:void 0,opts:{},onReady:()=>{},onError:()=>{},onPlay:()=>{},onPause:()=>{},onEnd:()=>{},onStateChange:()=>{},onPlaybackRateChange:()=>{},onPlaybackQualityChange:()=>{}},aO.PlayerState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};let aB=r7.r8?"https://api-v2-dev.glarity.app":"https://api-v2.glarity.app",aq=e=>fetch("".concat(aB,"/video/video?video_summary_code=").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}).then(async e=>{if(200!==e.status)return"";let t=await e.json();return"OK"!==t.code?"":t.data}),aH=(0,tt.Z)("scroll-text",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]);var aV=r(46046);let aU=(0,tt.Z)("send-horizontal",[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]]);var aW=r(37067);let aG=(0,tt.Z)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var a$=r(82313);let aY=e=>{var t;let{isOpen:r,onOpenChange:s,videoInfo:n}=e,a=(0,g.useTranslations)(),{isDark:i}=(0,rY.Z)(),{isMobile:l}=(0,tU.Z)(),[o,d]=(0,v.useState)(!1),[c,u]=(0,v.useState)(!1),[p,h]=(0,v.useState)(),m=(0,v.useRef)(null),x=(0,v.useRef)(null),b=(0,v.useMemo)(()=>(null==n?void 0:n.video_code)?n.video_code:n&&(0,k.lx)(n.url).searchParams.get("v")||"",[n]),y=()=>{if(!n)return;let e="".concat(n.random,"_").concat(n.summary_id);u(!0),aq(e).then(e=>{let t="";if(e.content){let r=JSON.parse(e.content),s="### keyword\n";r.total_summary&&-1!==r.total_summary.indexOf(s)&&(t=r.total_summary.split(s).at(-1)||"")}h({title:e.title,summary:e.summary,highlights:JSON.parse(e.video_highlights),keyMoments:JSON.parse(e.key_moments||"[]"),qa:e.qand_a||"",keyword:t})}).finally(()=>{u(!1)})},w=e=>{m.current&&m.current.seekTo(e,!0)};return(0,v.useEffect)(()=>{r||(d(!1),h(void 0)),r&&n&&n.summary_id&&y()},[r]),(0,f.jsx)(nz.R,{isOpen:r,onOpenChange:s,closeButton:l?void 0:(0,f.jsx)(f.Fragment,{}),size:l?"full":void 0,classNames:{base:"bg-transparent max-w-7xl",body:"p-0",backdrop:"bg-zinc-900/80 backdrop-opacity-20"},children:(0,f.jsx)(nO.A,{children:(0,f.jsx)(nq.I,{className:"flex items-center justify-center overflow-hidden",children:(0,f.jsxs)("section",{className:"flex flex-col md:flex-row w-full",children:[(0,f.jsxs)("section",{className:"flex-1 relative rounded-large overflow-hidden bg-gray-900",ref:x,children:[!o&&(0,f.jsx)(tO.J,{width:"100%",height:"100%",src:r7.XJ+(null==n?void 0:n.cover_image_url),alt:null==n?void 0:n.summary,classNames:{wrapper:"absolute w-full h-full",img:"-top-[96px]"}}),(0,f.jsx)("section",{className:"w-full aspect-video",children:(0,f.jsx)(aO,{videoId:b,opts:{width:"100%",height:"100%",playerVars:{autoplay:1}},onReady:e=>{let{width:t,height:r}=e.target.getSize();e.target.setSize(t,t/16*9),d(!0),m.current=e.target}})})]}),(null==n?void 0:n.summary_id)&&(0,f.jsx)(tA.E.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{type:"spring",bounce:.4,duration:.8,delay:.2},children:(0,f.jsx)("section",{className:"flex-none w-full md:w-80 h-full mt-5 md:mt-0 md:ml-5 rounded-large overflow-hidden bg-gray-50",style:{maxHeight:null==x?void 0:null===(t=x.current)||void 0===t?void 0:t.clientHeight},children:(0,f.jsx)("section",{className:"flex flex-col gap-5 py-3 px-5 h-full break-words overflow-y-auto scrollbar",children:c?(0,f.jsx)("section",{className:"h-full flex items-center justify-center",children:(0,f.jsx)(nL.c,{color:i?"white":"default"})}):(0,f.jsx)(f.Fragment,{children:p?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("section",{className:"text-lg text-gray-900 font-medium",children:p.title}),p.summary&&(0,f.jsxs)("section",{className:"text-sm/relaxed",children:[(0,f.jsxs)("p",{className:"font-medium text-gray-900 flex items-center gap-2 pb-2 mb-2 border-b border-gray-200",children:[(0,f.jsx)(aH,{size:18}),a("summary")]}),(0,f.jsx)("p",{className:"text-gray-500",children:p.summary})]}),!!p.highlights.filter(e=>!!e).length&&(0,f.jsxs)("section",{className:"text-sm/relaxed",children:[(0,f.jsxs)("p",{className:"font-medium text-gray-900 flex items-center gap-2 pb-2 mb-2 border-b border-gray-200",children:[(0,f.jsx)(aV.Z,{size:18}),a("highlights")]}),(0,f.jsx)("ul",{className:"list-disc list-inside text-gray-500",children:p.highlights.map((e,t)=>(0,f.jsx)("li",{children:e},t))})]}),!!p.keyMoments.filter(e=>!!e).length&&(0,f.jsxs)("section",{className:"text-sm/relaxed",children:[(0,f.jsxs)("p",{className:"font-medium text-gray-900 flex items-center gap-2 pb-2 mb-2 border-b border-gray-200",children:[(0,f.jsx)(aU,{size:18}),a("key_moments")]}),(0,f.jsx)("section",{className:"mt-4 text-gray-500 flex flex-wrap gap-2",children:p.keyMoments.map((e,t)=>(0,f.jsx)(e6.e,{closeDelay:0,content:(0,f.jsx)("section",{children:(0,f.jsx)("ul",{className:"list-disc list-inside py-2 px-3",children:e.highlights.map((e,t)=>(0,f.jsx)("li",{children:e},t))})}),children:(0,f.jsx)(tw.A,{radius:"full",size:"sm",onPress:()=>{w(e.timestamp)},children:e.title})},t))})]}),p.qa&&(0,f.jsxs)("section",{className:"text-sm/relaxed",children:[(0,f.jsxs)("p",{className:"font-medium text-gray-900 flex items-center gap-2 pb-2 mb-2 border-b border-gray-200",children:[(0,f.jsx)(aW.Z,{size:18}),a("qa")]}),(0,f.jsx)("section",{className:"text-gray-500 prose prose-md text-sm",children:(0,f.jsx)(a$.U,{children:p.qa})})]}),p.keyword&&(0,f.jsxs)("section",{className:"text-sm/relaxed",children:[(0,f.jsxs)("p",{className:"font-medium text-gray-900 flex items-center gap-2 pb-2 mb-2 border-b border-gray-200",children:[(0,f.jsx)(aG,{size:18}),a("keyword")]}),(0,f.jsx)("p",{className:"text-gray-500",children:p.keyword})]})]}):(0,f.jsx)("section",{className:"h-full flex items-center justify-center ",children:(0,f.jsx)("h1",{className:"uppercase tracking-widest text-gray-500",children:a("error.request")})})})})})})]})})})})};var aX=r(30967);let aJ=e=>{let{children:t}=e,[r,s]=(0,v.useState)(!1);return((0,v.useEffect)(()=>(s(!0),()=>s(!1)),[]),r)?(0,aX.createPortal)(t,document.body):null},aK=e=>{let{videoInfo:t}=e,{isOpen:r,onOpen:s,onOpenChange:n}=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,r]=(0,v.useState)(e);return{isOpen:t,onOpen:(0,v.useCallback)(()=>{r(!0)},[]),onClose:(0,v.useCallback)(()=>{r(!1)},[]),onOpenChange:(0,v.useCallback)(e=>{r(e)},[])}}(),a=(0,v.useMemo)(()=>(null==t?void 0:t.cover_image_url)?t.cover_image_url.startsWith("http")||t.cover_image_url.startsWith("data:image")?t.cover_image_url:r7.XJ+t.cover_image_url:"/placeholder.png",[null==t?void 0:t.cover_image_url]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(aw.Zb,{className:"rounded-xl shadow-md overflow-hidden group/video p-0 cursor-pointer hover:opacity-90 transition-opacity",onClick:e=>{t?((0,r2.N0)()&&(0,rd.oh)({url:t.url}),window.open(null==t?void 0:t.url,"_blank")):s()},children:[(0,f.jsx)("div",{className:"relative aspect-video bg-muted",children:(0,f.jsx)("img",{className:"object-cover w-full h-full",src:a,alt:(null==t?void 0:t.summary)||"视频封面",loading:"lazy"})}),(0,f.jsx)("section",{className:"rounded-b-xl p-5",children:(0,f.jsx)(n3.pn,{children:(0,f.jsxs)(n3.u,{children:[(0,f.jsx)(n3.aJ,{asChild:!0,children:(0,f.jsx)("div",{className:"text-base font-medium text-gray-800 dark:text-gray-200 line-clamp-2 min-h-[3rem]",children:null==t?void 0:t.title})}),(0,f.jsx)(aJ,{children:(0,f.jsx)(n3._v,{children:(0,f.jsx)("p",{className:"max-w-[300px] break-words",children:null==t?void 0:t.title})})})]})})})]}),(0,f.jsx)(aY,{isOpen:r,onOpenChange:n,videoInfo:t})]})},aQ=e=>{let{list:t}=e;return(0,f.jsx)("section",{className:"columns-2 gap-8 py-8",children:t.map((e,t)=>(0,f.jsx)("section",{className:"break-inside-avoid p-2 mb-5",children:(0,f.jsxs)("section",{className:"flex flex-col gap-2",children:[(0,f.jsx)("p",{className:"text-base md:text-lg font-medium text-gray-900 dark:text-gray-200",children:e.title}),e.video_content.video_author&&(0,f.jsx)("p",{className:"text-sm/relaxed",children:e.video_content.video_author}),(0,f.jsx)("p",{className:"line-clamp-3 text-sm/relaxed text-gray-500 dark:text-gray-400",children:e.summary}),(0,f.jsx)(aK,{videoInfo:e})]})},t))})};var a0=e=>{let{id:t}=e,{isMobile:r}=(0,tU.Z)(),s=(0,g.useTranslations)(),{isDark:n}=(0,rY.Z)(),{isOpen:a,onOpen:i,onOpenChange:l}=(0,e5.q)(),[o,d]=(0,v.useState)(!0),{videos:c,setVideos:u}=nD();return(0,v.useEffect)(()=>{u([]),t&&ay(t).then(e=>u([...e])).finally(()=>d(!1))},[t,u]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("section",{className:"pb-12 px-2",children:[o?(0,f.jsx)(av,{className:"my-20 w-full"}):!c.length&&(0,f.jsxs)("section",{className:"flex flex-col items-center justify-center gap-4 my-20",children:[(0,f.jsx)(ax,{}),(0,f.jsx)("div",{children:s("no_videos")})]}),(0,f.jsx)("section",{className:"columns-1 md:columns-3 gap-2 mt-1.5 space-y-2",children:c.map((e,t)=>(0,f.jsx)("section",{className:"".concat(t?"":"col-span-2"),children:(0,f.jsx)(aK,{videoInfo:e})},t))})]}),(0,f.jsx)(nz.R,{isOpen:a,onOpenChange:l,scrollBehavior:"inside",size:"full",backdrop:r?"transparent":"blur",classNames:{base:"absolute top-0 right-0 overflow-auto max-h-lvh bg-opacity-94 ".concat(r?"":"w-[60vw] max-w-[800px]"),backdrop:"bg-zinc-900/80",header:"border-b border-slate-200 dark:border-[#6D7276]",body:"p-0"},motionProps:{variants:{enter:{x:0,opacity:1,transition:{duration:.3,ease:"easeOut"}},exit:{x:100,opacity:0,transition:{duration:.2,ease:"easeIn"}}}},children:(0,f.jsxs)(nO.A,{children:[(0,f.jsx)(nB.k,{className:"flex flex-col gap-1",children:(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)(ab.Z,{})," ",s("recommended_video")]})}),(0,f.jsx)(nq.I,{children:(0,f.jsx)(aQ,{list:c})})]})})]})},a1=r(26949),a2=e=>{let{query:t,threadRid:r,images:s,isDisabled:n}=e;(0,g.useTranslations)();let{threads:a}=(0,tX.Z)(),i=a.length>1;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a1.nU,{value:"images",className:(0,t_.cn)("min-h-[50vh] mb-8",i&&"border-b"),children:(0,f.jsx)(ag,{id:r,query:t,imageList:s,isAllDisabled:n})}),(0,f.jsx)(a1.nU,{value:"videos",className:(0,t_.cn)("min-h-[50vh]",i&&"border-b"),children:(0,f.jsx)(a0,{id:r})})]})},a3=r(57591),a5=r(8289),a6=r(29764),a4=e=>{let{shouldUseDiscovery:t,onSearch:r,onDiscoverySearch:s}=e,n=(0,g.useTranslations)(),[a,i]=(0,v.useState)(!0),{proUsageQuota:l}=(0,nW.I)(),o=(0,v.useMemo)(()=>t&&l>0,[t,l]);return a?(0,f.jsxs)("div",{className:"relative flex items-center border-y border-gray-200 dark:border-gray-700 py-4 my-4",children:[(0,f.jsxs)("div",{className:"flex-1 flex items-center justify-center text-sm text-gray-500 dark:text-gray-400",children:[(0,f.jsx)(a5.Z,{className:"flex-none w-4 h-4 mr-2"}),(0,f.jsx)("span",{children:n(o?"answer_discovery_tip":"answer_tip")}),o?(0,f.jsx)(tw.A,{className:"ml-2",size:"sm",color:"primary",variant:"flat",radius:"full",onPress:s,startContent:(0,f.jsx)(a6.Z,{size:14}),children:n("deep_reasoning")}):(0,f.jsx)(tw.A,{className:"ml-2",size:"sm",color:"primary",variant:"flat",radius:"full",onPress:r,startContent:(0,f.jsx)(a6.Z,{size:14}),children:n("search")})]}),(0,f.jsx)(tw.A,{isIconOnly:!0,size:"sm",variant:"light",className:"ml-2",onPress:()=>i(!1),children:(0,f.jsx)(tC.Z,{className:"w-4 h-4"})})]}):null};r(14059);var a7=r(79736),a8=r(46024),a9=r(9369),ie=r(80145),it=e=>{let{label:t,labelClassName:r,rewriters:s,className:n}=e,[a,i]=(0,v.useState)([]),l=(0,v.useRef)(0);(0,v.useEffect)(()=>{if(!s)return;let e=()=>{setTimeout(()=>{l.current+=1,i(s.slice(0,l.current)),s[l.current]&&e()},500)};e()},[s]);let o=(0,v.useMemo)(()=>a.slice(-1)[0],[a]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:(0,t_.cn)("mr-2",r),children:t}),(0,f.jsx)(a7.M,{mode:"wait",children:(0,f.jsx)(tA.E.span,{initial:{y:10,opacity:0},animate:{y:0,opacity:1},exit:{y:-10,opacity:0},transition:{duration:.2},className:n,children:o},o)})]})},ir=e=>{let{items:t,threshold:r=3,renderItem:s,className:n,itemClassName:a}=e,[i,l]=(0,v.useState)(!1);return t.length<=r?(0,f.jsx)("div",{className:(0,t_.cn)("flex flex-wrap items-center gap-2",n),children:t.map((e,t)=>(0,f.jsx)("div",{className:a,children:s(e,t)},t))}):(0,f.jsxs)("div",{className:(0,t_.cn)("flex flex-wrap items-center gap-2 [&>*]:my-1",n),children:[t.slice(0,r).map((e,t)=>(0,f.jsx)("div",{className:a,children:s(e,t)},t)),i?t.slice(r).map((e,t)=>(0,f.jsx)("div",{className:a,children:s(e,t+r)},t+r)):(0,f.jsxs)("button",{onClick:e=>{e.stopPropagation(),l(!0)},className:"px-3 py-2 flex cursor-pointer items-center rounded-lg bg-theme-bg-300 dark:bg-theme-bg-dark-300 text-theme-font-600 dark:text-theme-font-dark-600 text-xs hover:bg-theme-bg-400 dark:hover:bg-theme-bg-dark-200",children:["+",t.length-r]})]})};function is(e){let{color:t="default",className:r}=e,s={default:"bg-[#B9BFCA]",success:"bg-green-500",warning:"bg-yellow-500",error:"bg-red-500"};return(0,f.jsx)("div",{className:(0,eY.cn)("inline-flex items-center justify-center w-[6px] h-[6px]",r),children:(0,f.jsxs)("div",{className:"relative inline-flex h-[6px] w-[6px]",children:[(0,f.jsx)("span",{className:(0,eY.cn)("animate-ping absolute inline-flex h-full w-full rounded-full opacity-75",s[t])}),(0,f.jsx)("span",{className:(0,eY.cn)("relative inline-flex rounded-full h-[6px] w-[6px]",s[t])})]})})}var ia=e=>{let{reflectionInfo:t,value:r}=e,s=(0,g.useTranslations)(),[n,a]=(0,v.useState)([]),{isMobile:i}=(0,tU.Z)(),l=e=>{a(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},o=e=>{if((0,r2.N0)()){(0,rd.oh)({url:e});return}window.open(e,"_blank")},d=e=>{if(!e)return"";try{return(0,k.lx)(e).hostname}catch(t){return e}};return(0,f.jsx)("div",{className:"mt-0 text-sm",children:t.map((e,a)=>{var c,u,p,h;return(0,f.jsxs)("div",{className:"flex p-2 rounded-lg mt-3 bg-theme-bg-100 dark:bg-theme-bg-dark-100",children:[(0,f.jsxs)("div",{className:"relative flex flex-col items-center",children:[r>70||t.length>a+1?(0,f.jsx)(a8.e,{className:(0,t_.cn)("text-theme-font-400 mt-[2px] mr-2",!1)}):(0,f.jsx)("span",{className:"inline-flex w-4 h-4 items-center justify-center mt-[2px] mr-2",children:(0,f.jsx)(is,{})}),a<t.length-1&&(0,f.jsx)("div",{className:"w-[2px] absolute h-[calc(100%+12px)] top-[18px] left-[7px] -bottom-[15px] bg-[#D9D9D9] dark:bg-gray-600"})]}),(0,f.jsxs)("div",{className:(0,t_.cn)("flex flex-col gap-3 flex-1 mr-4",n.includes(a)&&"h-5 line-clamp-1"),children:[(0,f.jsx)("div",{onClick:()=>l(a),className:"flex cursor-pointer text-theme-font-600 dark:text-theme-font-dark-600",children:e.info.reasoning_content}),e.info.query_rewrites&&(null===(c=e.info.query_rewrites)||void 0===c?void 0:c.length)>0&&(0,f.jsx)("div",{className:"flex items-center mt-1 text-sm text-[#9EA7B8]",children:e.final_contexts&&(null===(u=e.final_contexts)||void 0===u?void 0:u.length)>0||r>70||t.length>a+1?s("step.search"):(0,f.jsx)("section",{className:"text-sm",children:(0,f.jsx)(it,{label:s("step.searching"),labelClassName:"text-sm animate-[shimmer_2s_infinite_linear] bg-clip-text text-transparent bg-gradient-to-r from-theme-font-500 via-theme-font-900 to-theme-font-500 dark:from-theme-font-dark-500 dark:via-theme-font-dark-900 dark:to-theme-font-dark-500 bg-[length:200%_100%]",rewriters:[]})})}),e.info.query_rewrites&&(null===(p=e.info.query_rewrites)||void 0===p?void 0:p.length)>0&&(0,f.jsx)(ir,{items:e.info.query_rewrites,renderItem:e=>(0,f.jsx)("div",{className:"px-3 py-2 rounded-lg bg-theme-bg-300 dark:bg-theme-bg-dark-300 text-theme-font-600 dark:text-theme-font-dark-600 text-xs",children:e}),threshold:i?1:2}),e.final_contexts&&(null===(h=e.final_contexts)||void 0===h?void 0:h.length)>0&&(0,f.jsx)("div",{className:"flex items-center mt-1 text-sm text-[#9EA7B8]",children:r>70||t.length>a+1?s("step.read"):(0,f.jsx)("section",{className:"text-sm",children:(0,f.jsx)(it,{label:s("step.reading"),labelClassName:"animate-[shimmer_2s_infinite_linear] text-sm bg-clip-text text-transparent bg-gradient-to-r from-theme-font-500 via-theme-font-900 to-theme-font-500 dark:from-theme-font-dark-500 dark:via-theme-font-dark-900 dark:to-theme-font-dark-500 bg-[length:200%_100%]",rewriters:e.final_contexts.map(e=>d(e.link)).filter(Boolean)})})}),e.final_contexts&&e.final_contexts.length>0&&(0,f.jsx)(ir,{items:e.final_contexts,renderItem:e=>(0,f.jsx)(nw.Z,{source:e,rid:e.url,children:(0,f.jsxs)("div",{onClick:()=>"document"!==e.source_type&&e.link&&o(e.link),className:(0,t_.cn)("px-3 py-2 flex items-center rounded-lg bg-theme-bg-300 dark:bg-theme-bg-dark-300 text-theme-font-600 dark:text-theme-font-dark-600 text-xs","document"!==e.source_type&&e.link&&"cursor-pointer"),children:[(0,f.jsx)(af.Z,{src:"https://www.google.com/s2/favicons?domain=".concat(d(e.link),"&sz=",16),title:e.title,className:"z-0"}),(0,f.jsx)("div",{className:"ml-2",children:"document"===e.source_type?e.title:d(e.link)})]})}),threshold:i?1:2,className:"flex-wrap items-center gap-2"})]}),(0,f.jsx)("button",{onClick:()=>l(a),className:"ml-auto cursor-pointer h-min mt-[4px] text-sm text-theme-font-500 dark:text-theme-font-dark-500",children:n.includes(a)?(0,f.jsx)(a9.Z,{size:16}):(0,f.jsx)(ie.Z,{size:16})})]},a)})})},ii=e=>{let{label:t,labelClassName:r,rewriters:s,className:n}=e,[a,i]=(0,v.useState)([]),l=(0,v.useRef)(0);(0,v.useEffect)(()=>{if(!s)return;let e=()=>{setTimeout(()=>{l.current+=1,i(s.slice(0,l.current)),s[l.current]&&e()},500)};e()},[s]);let o=(0,v.useMemo)(()=>a.slice(-1)[0],[a]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:(0,t_.cn)("mr-2",r),children:t}),(0,f.jsx)(a7.M,{mode:"wait",children:(0,f.jsx)(tA.E.span,{initial:{y:10,opacity:0},animate:{y:0,opacity:1},exit:{y:-10,opacity:0},transition:{duration:.2},className:n,children:o},o)})]})},il=e=>{let{items:t,threshold:r=3,renderItem:s,className:n,itemClassName:a}=e,[i,l]=(0,v.useState)(!1);return t.length<=r?(0,f.jsx)("div",{className:(0,t_.cn)("flex flex-wrap items-center gap-2",n),children:t.map((e,t)=>(0,f.jsx)("div",{className:(0,t_.cn)(a,"min-h-8"),children:s(e,t)},t))}):(0,f.jsxs)("div",{className:(0,t_.cn)("flex flex-wrap items-center gap-2",n),children:[t.slice(0,r).map((e,t)=>(0,f.jsx)("div",{className:a,children:s(e,t)},t)),i?t.slice(r).map((e,t)=>(0,f.jsx)("div",{className:a,children:s(e,t+r)},t+r)):(0,f.jsxs)("div",{onClick:e=>{e.stopPropagation(),l(!0)},className:(0,t_.cn)("px-3 py-2 cursor-pointer rounded-lg bg-[#F6F7F9] dark:bg-[#353B46] text-[#30394A] dark:text-white text-xs"),children:["+",t.length-r]})]})},io=r(49905);let id=(0,tt.Z)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]);var ic=v.memo(e=>{let t,{sourcesHtml:r,children:s,sourceItem:n}=e,{isMobile:a}=(0,tU.Z)(),{isOpen:i,onOpen:l,onClose:o}=(0,e5.q)(),d=(0,g.useTranslations)(),[c,u]=(0,v.useState)("top"),p=(0,v.useRef)(null),h=e=>{if(e){var t;let e=null===(t=p.current)||void 0===t?void 0:t.getBoundingClientRect();if(e){let t=window.innerHeight,r=e.top;t-e.bottom>r?u("bottom"):u("top")}}};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(e6.e,{delay:0,closeDelay:100,shouldFlip:!0,offset:-2,showArrow:!0,onOpenChange:e=>{h(e)},placement:c,style:{zIndex:10},className:"notranslate p-0 shadow-xl rounded-xl overflow-hidden bg-white dark:bg-theme-bg-dark-300",classNames:{base:"notranslate"},content:(0,f.jsxs)("div",{className:"py-4 pl-4 h-[40vh] w-[400px] border border-gray-200 dark:border-gray-700 rounded-md flex flex-col",children:[r&&"Page not found"!==r&&(0,f.jsx)("div",{className:"absolute p-1 bottom-2 right-2 cursor-pointer hover:bg-gray-100 rounded-md dark:hover:bg-gray-800",onClick:()=>{l()},children:(0,f.jsx)(id,{className:"w-4 h-4 text-[#667085] dark:text-[#B9BFCA]"})}),(0,f.jsx)("div",{className:"text-base font-bold mb-2",children:null==n?void 0:n.title}),(0,f.jsx)("div",{className:(0,t_.cn)("flex-1 custom-scrollbar mr-1 overflow-x-hidden mb-2"),children:r&&"Page not found"!==r?(0,f.jsx)(rR.Z,{rid:"",loading:!1,isVisible:!0,className:"break-all mr-3",children:r}):d("step.tool.page_not_found")})]}),children:(0,f.jsx)("span",{ref:p,children:s})}),(0,f.jsx)(nz.R,{isOpen:i,onClose:o,size:"3xl",hideCloseButton:!0,children:(0,f.jsxs)(nO.A,{children:[(0,f.jsx)(nB.k,{className:"flex p-0",children:(0,f.jsx)(tw.A,{className:"rounded-full ml-auto",isIconOnly:!0,variant:"light",onPress:o,children:(0,f.jsx)(tC.Z,{})})}),(0,f.jsxs)(nq.I,{className:"py-0 flex flex-col justify-center",children:[(0,f.jsx)("div",{className:"text-lg font-bold mb-1 mt-[-16px]",children:null==n?void 0:n.title}),(0,f.jsx)(t5.j,{className:"h-[2px] bg-gray-200 dark:bg-gray-700"}),(0,f.jsx)("section",{className:"",children:(0,f.jsx)("div",{className:(0,t_.cn)("custom-scrollbar overflow-x-hidden",t?"relative":"h-[60vh]"),children:(0,f.jsx)("div",{className:(0,t_.cn)("prose prose-md dark:prose-invert max-w-full flex justify-center",rD().prose),children:(0,f.jsx)(rR.Z,{rid:"",loading:!1,isVisible:!0,className:"break-all",children:r})})})})]})]})})]})}),iu=e=>{let{url:t,sourceItem:r}=e;return(0,f.jsx)(ic,{sourcesHtml:(null==r?void 0:r.snippet)||"",sourceItem:r,children:(0,f.jsxs)("div",{onClick:()=>(0,tN.nG)(t||""),className:(0,t_.cn)("px-3 py-2 rounded-lg flex items-center bg-[#F6F7F9] dark:bg-[#353B46] text-[#30394A] dark:text-white text-xs","cursor-pointer"),children:[(0,f.jsx)(af.Z,{src:"https://www.google.com/s2/favicons?domain=".concat((0,io.ge)(null==r?void 0:r.link),"&sz=",16),title:null==r?void 0:r.title,className:"w-5 h-5 z-0",hasHtml:null!=r&&!!r.snippet}),(0,f.jsx)("div",{className:"ml-2",children:(0,io.ge)(t)})]})},t)},ip=e=>{let{isCompleted:t,isShowLine:r,isLast:s}=e;return(0,f.jsxs)("div",{className:"relative items-center mt-[0px] mr-[18px] ml-[1px]",children:[t?(0,f.jsx)("div",{className:"w-[6px] h-[6px] rounded-full mt-2 bg-[#B9BFCA]"}):(0,f.jsx)("span",{className:"inline-flex w-[6px] h-[6px] items-center justify-center mt-2",children:(0,f.jsx)(is,{})}),r&&(0,f.jsx)("div",{className:(0,t_.cn)("w-[1px] absolute top-[18px] left-[2.5px] -bottom-[0px] bg-[#D9D9D9] dark:bg-gray-600",s?"h-[calc(100%+20px)]":"h-[calc(100%+0px)]")})]})},ih=e=>{let{tools:t,value:r,sources:s,reflectionAgentAnswer:n}=e,a=(0,g.useTranslations)(),{isMobile:i}=(0,tU.Z)(),l=(e,t)=>t&&Array.isArray(t)&&t.find(t=>t.link===e)||{url:"",title:"",snippet:""},o=e=>{if((0,r2.N0)()){(0,rd.oh)({url:e});return}window.open(e,"_blank")},d=e=>e.split(/(\[\d+\])/g).map((e,t)=>{let r=e.match(/\[(\d+)\]/);if(r){let n=r[1],a=s[Number(n)-1];return a?(0,f.jsx)("span",{className:"footnote-ref inline-block mx-[2px] my-0 select-none",children:(0,f.jsx)(nw.Z,{source:a,rid:a.url,children:(0,f.jsx)("a",{className:"inline-block leading-normal !text-inherit cursor-pointer no-underline font-medium bg-theme-bg-400  dark:bg-[#3F4961] min-w-4 h-4 text-center rounded-full align-top text-xs",href:a.url,target:"_blank",onClick:e=>{e.preventDefault(),e.stopPropagation(),o(a.url)},children:n})})},t):(0,f.jsx)("span",{children:e},t)}return(0,f.jsx)("span",{children:e},t)});return(0,f.jsxs)("div",{children:[t.filter(e=>e.params).map((e,s)=>{var o,c,u,p,h,m,v,x,g,b;return(0,f.jsxs)("div",{className:(0,t_.cn)("mt-2 flex"),children:[(0,f.jsx)(ip,{isCompleted:r>70||s<t.length-1,isShowLine:s<t.length-1||n.length>0||r>70,isLast:0===n.length&&s===t.length-1}),(0,f.jsxs)("div",{className:(0,t_.cn)("flex flex-col rounded-lg"),children:[e.content&&(0,f.jsx)("div",{className:"mb-2",children:(0,f.jsx)("span",{className:(0,t_.cn)("text-[#4B5F7E] break-all dark:text-[#B9BFCA] whitespace-pre-line text-sm"),children:d(e.content.trim().replace(/\n{2,}/g,"\n"))})}),"web_scraper"===e.name&&(null===(o=e.params)||void 0===o?void 0:o.urls)&&e.params.urls.length>=0&&(0,f.jsx)("span",{className:"text-[#4B5F7E] dark:text-[#B9BFCA] text-sm",children:r>70||t.length>s+1||n?a("step.tool.reading_done"):(0,f.jsx)(ii,{label:a("step.reading"),labelClassName:"animate-[shimmer_2s_infinite_linear] text-sm bg-clip-text text-transparent bg-gradient-to-r from-theme-font-500 via-theme-font-900 to-theme-font-500 dark:from-theme-font-dark-500 dark:via-theme-font-dark-900 dark:to-theme-font-dark-500 bg-[length:200%_100%]",rewriters:null===(c=e.params)||void 0===c?void 0:c.urls.map(e=>(0,io.ge)(e.url)).filter(Boolean)})}),"web_search"===e.name&&(null===(u=e.params)||void 0===u?void 0:u.search_queries)&&e.params.search_queries.length>=0&&(0,f.jsx)("span",{className:"text-[#4B5F7E] dark:text-[#B9BFCA] text-sm",children:r>70||t.length>s+1||n?a("step.search"):(0,f.jsx)(ii,{label:a("step.searching"),labelClassName:"animate-[shimmer_2s_infinite_linear] text-sm bg-clip-text text-transparent bg-gradient-to-r from-theme-font-500 via-theme-font-900 to-theme-font-500 dark:from-theme-font-dark-500 dark:via-theme-font-dark-900 dark:to-theme-font-dark-500 bg-[length:200%_100%]",rewriters:null===(p=e.params)||void 0===p?void 0:p.search_queries.filter(Boolean)})}),(0,f.jsx)("div",{className:"flex my-2 overflow-hidden w-full",children:(0,f.jsxs)("div",{className:"text-sm flex flex-wrap gap-2",children:[(null===(h=e.params)||void 0===h?void 0:h.search_queries)&&(null===(m=e.params)||void 0===m?void 0:m.search_queries.length)>0&&(0,f.jsx)(il,{items:null===(v=e.params)||void 0===v?void 0:v.search_queries,renderItem:(e,t)=>(0,f.jsx)("div",{className:(0,t_.cn)("px-3 py-2 rounded-lg bg-[#F6F7F9] dark:bg-[#353B46] text-[#30394A] dark:text-white text-xs"),children:(0,f.jsx)("div",{className:"ml-2",children:e})},t),threshold:i?1:2}),(null===(x=e.params)||void 0===x?void 0:x.urls)&&(null===(g=e.params)||void 0===g?void 0:g.urls.length)>0&&(0,f.jsx)(il,{items:null===(b=e.params)||void 0===b?void 0:b.urls,renderItem:t=>(0,f.jsx)("div",{children:(0,f.jsx)(iu,{url:t.url,sourceItem:l(t.url,e.call_result)})},t.url),threshold:i?1:2})]})},s)]})]},s)}),n&&(0,f.jsxs)("div",{className:"mt-2 px-0 py-2 flex rounded-lg",children:[(0,f.jsx)(ip,{isCompleted:r>70,isShowLine:r>=90,isLast:!0}),(0,f.jsx)("div",{className:(0,t_.cn)("flex flex-col rounded-lg"),children:(0,f.jsx)("div",{className:"mb-2",children:(0,f.jsx)("span",{className:(0,t_.cn)("text-[#4B5F7E] dark:text-[#B9BFCA] whitespace-pre-line text-sm"),children:d(n.trim().replace(/\n{2,}/g,"\n"))})})})]})]})},im=e=>{let{reasoningText:t,reasoningEnd:r,value:s,sources:n}=e;(0,g.useTranslations)();let[a,i]=(0,v.useState)([]),l=(0,v.useMemo)(()=>t.split("\n").filter(Boolean),[t]),o=e=>{if((0,r2.N0)()){(0,rd.oh)({url:e});return}window.open(e,"_blank")},d=e=>e.split(/(\[\d+\])/g).map((e,t)=>{let r=e.match(/\[(\d+)\]/);if(r){let s=r[1],a=n[Number(s)-1];return a?(0,f.jsx)("span",{className:"footnote-ref inline-block mx-[2px] my-0 select-none",children:(0,f.jsx)(nw.Z,{source:a,rid:a.url,children:(0,f.jsx)("a",{className:"inline-block leading-normal !text-inherit cursor-pointer no-underline font-medium bg-theme-bg-400  dark:bg-[#3F4961] min-w-4 h-4 text-center rounded-full align-top text-xs",href:a.url,target:"_blank",onClick:e=>{e.preventDefault(),e.stopPropagation(),o(a.url)},children:s})})},t):(0,f.jsx)("span",{children:e},t)}return(0,f.jsx)("span",{children:e},t)});return(0,f.jsx)("div",{className:"mt-3",children:l.map((e,t)=>(0,f.jsxs)("div",{className:"pr-10 flex pb-2 text-[#4B5F7E] dark:text-[#F3F5F7] rounded-md",children:[(0,f.jsx)(ip,{isCompleted:s>=90||t<l.length-1,isShowLine:t!==l.length-1||s>=90,isLast:s>=90}),(0,f.jsx)("p",{className:(0,t_.cn)("text-sm origin-top",a.includes(t)&&"line-clamp-1",!r&&t===l.length-1&&"text-[#283a3d] dark:text-white"),children:d(e)})]},t))})},iv=e=>{let{queryRewriters:t,qrInfoUrlExpands:r,value:s,isShowNextLine:n}=e,a=(0,g.useTranslations)(),{isMobile:i}=(0,tU.Z)(),l=(0,v.useMemo)(()=>t.reduceRight((e,t,r)=>-1===e&&t.rewriters&&t.rewriters.length>0?r:e,-1),[t]);return(0,f.jsxs)("section",{children:[t.map((e,o)=>{let d=!!e.label&&l===o&&s<70&&!!e.rewriters.length;return(0,f.jsxs)("section",{className:"flex",children:[(0,f.jsx)(ip,{isCompleted:o<t.length-1||(null==r?void 0:r.length)>0||s>50,isShowLine:o<=t.length-1||(null==r?void 0:r.length)>0||n&&(null==r?void 0:r.length)===0,isLast:(null==r?void 0:r.length)===0&&s>50&&o===t.length-1}),(0,f.jsxs)("div",{className:"mb-2",children:[(0,f.jsx)("p",{className:"text-sm mb-3  text-[#4B5F7E] dark:text-[#F3F5F7]",children:e.label}),(0,f.jsxs)("section",{children:[(0,f.jsx)("section",{className:(0,t_.cn)("flex flex-wrap items-center gap-2",o===t.length-1?"mb-0":"mb-3"),children:(0,f.jsx)(il,{items:e.rewriters,renderItem:e=>(0,f.jsx)("span",{className:"px-3 py-2 rounded-lg bg-[#F6F7F9] dark:bg-[#353B46] text-[#30394A] dark:text-white text-xs",children:e}),threshold:i?1:2})}),d&&(0,f.jsx)("section",{className:"text-sm my-3",children:(0,f.jsx)(ii,{label:a("step.reading"),labelClassName:"animate-[shimmer_2s_infinite_linear] bg-clip-text text-transparent bg-gradient-to-r from-theme-font-500 via-theme-font-900 to-theme-font-500 dark:from-theme-font-dark-500 dark:via-theme-font-dark-900 dark:to-theme-font-dark-500 bg-[length:200%_100%]",rewriters:e.rewriters})})]})]})]},o)}),(null==r?void 0:r.length)>0&&(0,f.jsxs)("section",{className:"flex",children:[(0,f.jsx)(ip,{isCompleted:n||s>50,isShowLine:n,isLast:s>50}),(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"my-2 mt-0 text-sm text-[#4B5F7E] dark:text-[#F3F5F7]",children:a("step.tool.reading_done")}),(0,f.jsx)("section",{className:(0,t_.cn)("flex text-[#4B5F7E] dark:text-[#F3F5F7] flex-wrap items-center gap-2","mb-0"),children:(0,f.jsx)(il,{items:r,renderItem:e=>(0,f.jsx)("div",{children:(0,f.jsx)(iu,{url:e.link,sourceItem:e})},e.link),threshold:i?1:2})})]})]})]})};function ix(e){let{color:t="default",className:r}=e,s={default:"bg-blue-500",success:"bg-green-500",warning:"bg-yellow-500",error:"bg-red-500"};return(0,f.jsx)("div",{className:(0,eY.cn)("inline-flex items-center justify-center w-[8px] h-[8px]",r),children:(0,f.jsxs)("div",{className:"relative inline-flex h-[8px] w-[8px]",children:[(0,f.jsx)("span",{className:(0,eY.cn)("animate-ping absolute inline-flex h-full w-full rounded-full opacity-75",s[t])}),(0,f.jsx)("span",{className:(0,eY.cn)("relative inline-flex rounded-full h-2 w-2",s[t])})]})})}var ig=e=>{let{isCompleted:t,isShowLine:r,isLast:s,allShow:n}=e;return(0,f.jsxs)("div",{className:"relative items-center mt-[0px] mr-4",children:[t?(0,f.jsx)("div",{className:(0,t_.cn)("w-2 h-2 rounded-full mt-2 ",n?"bg-[#B9BFCA]":"bg-[#0080FF]")}):(0,f.jsx)("span",{className:"inline-flex w-2 h-2 items-center justify-center mt-2",children:(0,f.jsx)(ix,{})}),r&&(0,f.jsx)("div",{className:(0,t_.cn)("w-[1px] absolute top-[16px] left-[3.5px] -bottom-[0px] bg-[#D9D9D9] dark:bg-gray-600",s?"h-[calc(100%+20px)]":"h-[calc(100%+0px)]")})]})},ib=e=>{let{toolsInfo:t}=e;return(0,f.jsx)("section",{children:null==t?void 0:t.map((e,r)=>(0,f.jsxs)("section",{className:"flex",children:[(0,f.jsx)(ip,{isCompleted:r<=t.length-1,isShowLine:!0,isLast:r===t.length-1}),(0,f.jsx)("p",{className:"text-sm text-[#4B5F7E] dark:text-[#F3F5F7]",children:e})]},r))})};let iy=e=>{let{textArr:t,initStatus:r=!1,errorStatus:s=!1}=e,[n,a]=(0,v.useState)(Array(t.length).fill(r));return(0,v.useEffect)(()=>{let e=[],r=Math.floor(1e3/t.length);return t.forEach((t,s)=>{let n=setTimeout(()=>{a(e=>{let t=[...e];return t[s]=!0,t})},r*s);e.push(n)}),()=>{e.forEach(e=>clearTimeout(e))}},[t.length]),(0,f.jsx)("section",{className:"flex gap-2",children:t.map((e,t)=>(0,f.jsxs)("section",{className:"flex items-center justify-center gap-1",children:[(0,f.jsx)("span",{className:"text-sm text-gray-400 dark:text-gray-300",children:e}),(0,f.jsx)("span",{className:"w-[16px] h-[16px] ".concat(s?"text-red-600":"text-green-600"),children:s?(0,f.jsx)(tC.Z,{size:16}):(0,f.jsx)(iw,{initial:!1,isVisible:n[t]})})]},t))})},iw=e=>{let{initial:t=!0,isVisible:r=!1}=e;return(0,f.jsx)(a7.M,{initial:t,children:r&&(0,f.jsx)("svg",{width:"16",height:"16",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:3,stroke:"currentColor",children:(0,f.jsx)(tA.E.path,{initial:{pathLength:0},animate:{pathLength:1},exit:{pathLength:0},transition:{type:"tween",duration:.3,ease:r?"easeOut":"easeIn"},strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})})})};var ij=e=>{let{method:t,query:r,toolsInfo:s,tools:n,languageCount:a,value:i,relevancyInfo:l,rewritersInfo:o,firstSources:d,secondSources:c,queryRewriters:u,reasoningText:p,reasoningEnd:h,sources:m,reflectionInfo:x,reflectionAgentAnswer:b,qrInfoUrlExpands:y,allShow:w}=e,j=(0,g.useTranslations)(),{isDark:C}=(0,rY.Z)(),_=(0,v.useRef)(null),{isMobile:k}=(0,tU.Z)();(0,v.useRef)(0);let[N,E]=(0,v.useState)(!(i>=90)),S=null==s?void 0:s.some(e=>!!e),T=(0,v.useMemo)(()=>!!l&&l.relevancy_model_use,[l]),F=(0,v.useMemo)(()=>!!l&&"Yes"===l.relevancy_model_request,[l]),L=(0,v.useMemo)(()=>!!o&&0!==o.length&&o.some(e=>e.query_rewriter_use),[o]),M=(0,v.useMemo)(()=>u.some(e=>!!e.label),[u]);(0,v.useMemo)(()=>u.reduceRight((e,t,r)=>-1===e&&t.rewriters&&t.rewriters.length>0?r:e,-1),[u]);let A=(0,v.useMemo)(()=>i>=100,[i]),P=(0,v.useMemo)(()=>{let e=t&&(0,rX.h)(t);return[{key:"understandProblem",text:j("step.understand_problem"),icon:(0,f.jsx)(rB,{size:8}),component:()=>(0,f.jsx)("span",{className:"w-full flex flex-nowrap items-center justify-between gap-2 mr-10 overflow-hidden",children:(0,f.jsx)("span",{className:"leading-6 text-sm text-theme-font-500 dark:text-[#B9BFCA] line-clamp-1",children:"".concat(e?"".concat(j(e)," "):"",'"').concat(r,'"')})})},{key:"tools",text:j("step.execute"),icon:(0,f.jsx)(rB,{size:8}),component:()=>(0,f.jsx)("span",{className:"leading-6 text-sm text-theme-font-500 dark:text-[#B9BFCA]",children:j("step.executing")})},{key:"searchNetwork",text:j("step.search_network"),icon:(0,f.jsx)(rB,{size:8}),component:()=>(0,f.jsx)("span",{className:"leading-6 text-sm text-theme-font-500 dark:text-[#B9BFCA]",children:d.length?j("step.search_sources",{count:d.length}):l?j("step.searching"):j("no_sources")})},{key:"evaluateQuality",text:j("step.evaluate_quality"),icon:(0,f.jsx)(rB,{size:8}),component:()=>F?(0,f.jsx)(iy,{textArr:[j("step.relevance"),j("step.reliability"),j("step.timeliness")],errorStatus:!d.length}):(0,f.jsx)("span",{className:"leading-6 text-sm text-theme-font-500 dark:text-[#B9BFCA]0",children:j("step.search_cannot_answer")})},{key:"deepSearch",text:M?j("deep_search"):j("step.deep_search"),icon:(0,f.jsx)(rB,{size:8}),component:()=>(0,f.jsx)("span",{className:"leading-6 text-sm text-theme-font-500 dark:text-[#B9BFCA]",children:c.length?(0,f.jsx)("span",{className:"leading-6 text-sm text-theme-font-500 dark:text-[#B9BFCA]",dangerouslySetInnerHTML:{__html:j("step.search_sources_rewriters_done",{count2:'<span class="text-[#101828] dark:text-[#F5F5F6]">'.concat(u?u.map(e=>e.rewriters).flat().length:0,"</span>"),count:'<span class="text-[#101828] dark:text-[#F5F5F6]">'.concat(c.length,"</span>"),language:'<span class="text-[#101828] dark:text-[#F5F5F6]">'.concat(a,"</span>")})}}):A?j("no_sources"):j("step.searching")})},{key:"introspection",text:j("step.introspection"),icon:(0,f.jsx)(rB,{size:8}),component:()=>(0,f.jsx)(f.Fragment,{})},{key:"reasoning",text:j("step.reasoning"),icon:(0,f.jsx)(rB,{size:8}),component:()=>(0,f.jsx)(f.Fragment,{})},{key:"answerQuestion",text:j(A?"step.answer_done":"step.answer_question"),icon:a8.pi,component:()=>(0,f.jsx)("span",{className:"leading-6 text-sm text-theme-font-500 dark:text-[#B9BFCA]",children:j("step.answer_done_desc")})}]},[d,c,u,A,F,M,p,s]),Z=(0,v.useMemo)(()=>{let e=P.length;return(S&&e++,i>=100)?e-1:Math.floor(i/Math.ceil(100/e))},[i]);return(0,f.jsx)("section",{className:" \n        rounded-xl overflow-hidden transition-[height]\n        duration-500 ease-in-out",ref:_,children:(0,f.jsx)("div",{children:(0,f.jsx)("div",{className:"px-3",children:P.map((e,t)=>{if(t>Z)return null;let r="searchNetwork"===e.key,a="evaluateQuality"===e.key,l="deepSearch"===e.key,o="reasoning"===e.key,d="introspection"===e.key,c="tools"===e.key;if(!T&&(r||a)||!L&&l||o&&!p||c&&!S||d&&(!x||0===x.length)&&(!n||0===n.length)&&!b)return null;e.icon;let v=e.component;return(0,f.jsxs)("section",{className:"pb-6",children:[(0,f.jsxs)("section",{className:"flex",children:["understandProblem"===e.key?(0,f.jsx)(ig,{isCompleted:i>50,isShowLine:i>50,isLast:i>50,allShow:w}):(0,f.jsx)(ig,{isCompleted:Z>t||A,isShowLine:"answerQuestion"!==e.key,isLast:"understandProblem"===e.key,allShow:w}),(0,f.jsxs)("section",{className:"flex-1 flex flex-col min-w-0",children:[(0,f.jsx)("div",{className:"flex-none flex flex-col md:flex-row gap-x-3 gap-y-1",children:(0,f.jsx)("span",{className:(0,t_.cn)("text-base font-medium whitespace-nowrap","text-[#4B5F7E] dark:text-[#F3F5F7]"),children:P[t].text})}),v&&(0,f.jsx)("div",{className:"my-2",children:(0,f.jsx)(v,{})})]})]}),(0,f.jsxs)("section",{children:[p&&"reasoning"===e.key&&(0,f.jsx)(im,{reasoningText:p,reasoningEnd:h,value:i,sources:m}),c&&s&&(null==s?void 0:s.length)>0&&(0,f.jsx)(ib,{toolsInfo:s}),x&&"introspection"===e.key&&(0,f.jsx)(ia,{value:i,reflectionInfo:x}),(n||b)&&"introspection"===e.key&&(0,f.jsx)(ih,{tools:n,value:i,sources:m,reflectionAgentAnswer:b}),l&&(0,f.jsx)(iv,{queryRewriters:u,qrInfoUrlExpands:y,value:i,isShowNextLine:n.length>0||b.length>0||p.length>0})]})]},t)})})})})},iC=e=>{let{defaultExpanded:t,defaultDiscoveryModeStyle:r,query:s,tools:n,category:a,languageCount:i,processValue:l,queryPlans:o,relevancyInfo:d,rewritersInfo:c,firstSources:u,secondSources:p,reasoningText:h,reasoningEnd:m,sources:x,reflectionInfo:b,reflectionAgentAnswer:y,qrInfoUrlExpands:w,topicTools:j,allShow:C=!1}=e,_=(0,g.useTranslations)(),k=(0,v.useRef)(null),{isMobile:N}=(0,tU.Z)(),E=(0,v.useRef)(0),S=(0,v.useRef)(!1),T=(0,v.useRef)(),[F,L]=(0,v.useState)(!(l>=90)),[M,A]=(0,v.useState)(!1),P=(0,v.useMemo)(()=>c&&0!==c.length?o.length>0?o.map(e=>{var t;return{label:e.query,rewriters:(null===(t=c.find(t=>t.plan_id===e.id))||void 0===t?void 0:t.rewriters)||[]}}):c.map(e=>({label:r?s:"",rewriters:e.rewriters})):[],[c,o]),Z=(0,v.useMemo)(()=>j.filter(e=>"ppt_render"!==e.name).map(e=>{var t,r,s,n,a,i,l,o,d,c;switch(e.name){case"web_scraper":return _("step.tool.web_scraper",{urls:null===(r=e.params)||void 0===r?void 0:null===(t=r.urls)||void 0===t?void 0:t.join(",")});case"web_search":return _("step.tool.web_search",{queries:null===(n=e.params)||void 0===n?void 0:null===(s=n.search_queries)||void 0===s?void 0:s.join(",")});case"website_search":return _("step.tool.website_search",{sites:null===(i=e.params)||void 0===i?void 0:null===(a=i.sites)||void 0===a?void 0:a.join(","),queries:null===(o=e.params)||void 0===o?void 0:null===(l=o.search_queries)||void 0===l?void 0:l.join(",")});case"knowledge_base_retrieval":return _("step.tool.knowledge_base_retrieval",{queries:null===(c=e.params)||void 0===c?void 0:null===(d=c.search_queries)||void 0===d?void 0:d.join(",")});default:return""}}),[j,_]),I=()=>{if(k.current){let{scrollTop:e,scrollHeight:t,clientHeight:r}=k.current;A(t>r&&e>0)}F&&k.current&&l<90&&!S.current&&setTimeout(()=>{k.current&&(k.current.scrollTop=k.current.scrollHeight)},100)};(0,v.useEffect)(()=>{I()},[n,y,P,w,h,l]);let D=e=>{if(k.current&&!(l>=90)){if(k.current){let{scrollTop:e,scrollHeight:t,clientHeight:r}=k.current;A(t>r&&e>0)}S.current=!0,L(!1),T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{if(!k.current)return;let{scrollTop:e,scrollHeight:t,clientHeight:r}=k.current;S.current=!1,l<90&&L(20>Math.abs(t-e-r))},100)}};return(0,v.useEffect)(()=>{let e=k.current;return e&&e.addEventListener("wheel",D),()=>{e&&e.removeEventListener("wheel",D),T.current&&clearTimeout(T.current)}},[]),(0,v.useEffect)(()=>{let e=k.current,t=e=>{e.touches[0].clientY},r=e=>{if(k.current&&!(l>=90)){if(e.touches[0].clientY,k.current){let{scrollTop:e,scrollHeight:t,clientHeight:r}=k.current;A(t>r&&e>0)}S.current=!0,L(!1),T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{if(!k.current)return;let{scrollTop:e,scrollHeight:t,clientHeight:r}=k.current;S.current=!1,l<90&&L(20>Math.abs(t-e-r))},100)}};return e&&(e.addEventListener("wheel",D),e.addEventListener("touchstart",t),e.addEventListener("touchmove",r)),()=>{e&&(e.removeEventListener("wheel",D),e.removeEventListener("touchstart",t),e.removeEventListener("touchmove",r)),T.current&&clearTimeout(T.current)}},[]),(0,v.useEffect)(()=>{10===l&&(L(!0),E.current=0),l>=90&&L(!1)},[l]),(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)("div",{className:(0,t_.cn)("absolute top-0 left-0 w-full right-0 h-[80px] z-[1] bg-gradient-to-b from-background via-background/80 to-transparent pointer-events-none","transition-opacity duration-300",l<90&&M?"opacity-100 ":"opacity-0")}),(0,f.jsx)("div",{className:(0,t_.cn)("overflow-y-auto custom-scrollbar p-0",C?N?"h-[calc(80vh-120px)] py-2 px-3":"h-[calc(100vh-64px)] py-2 px-3":"max-h-[30vh]"),ref:k,children:(0,f.jsx)(ij,{query:s,method:a,languageCount:i,value:l,tools:n,toolsInfo:Z,relevancyInfo:d,rewritersInfo:c,firstSources:u,secondSources:p,queryRewriters:P,reasoningText:h,reasoningEnd:m,sources:x,reflectionInfo:b,reflectionAgentAnswer:y,qrInfoUrlExpands:w,allShow:C})})]})},i_=r(57606),ik=r(91980),iN=r(29499),iE=r(72454),iS=r(12045),iT=e=>{var t;let{thread:r}=e,s=(0,g.useTranslations)(),n=(0,v.useMemo)(()=>{var e;return(null===(e=r.recall_contexts)||void 0===e?void 0:e.length)>0?r.recall_contexts[0]:null},[null===(t=r.recall_contexts)||void 0===t?void 0:t.length]);return n?(0,f.jsx)("section",{className:"flex mb-6",children:(0,f.jsxs)("div",{className:"flex items-center gap-2 bg-blue-50 dark:bg-sky-950 rounded-lg px-3 py-2 w-fit",onClick:()=>{(0,rd.ZB)({type:"audio",id:null==n?void 0:n.other_info.file_id})},children:[(0,f.jsx)(n$.p5,{className:"w-7 h-7 text-blue-500"}),(0,f.jsxs)("div",{className:"flex flex-col gap-1 text-sm ",children:[(0,f.jsxs)("span",{className:"text-gray-800 dark:text-gray-200",children:[n.title," ",s("record")]}),(0,f.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[(0,f.jsx)(iE.Z,{className:"w-4 h-4"}),(0,f.jsx)("span",{className:"text-xs",children:(0,iS.t)(n.other_info.duration)})]})]})]})}):null},iF=r(70262),iL=e=>{let{thread:t}=e,r=(0,g.useTranslations)(),{mindmapList:s}=(0,tX.Z)(),{currentData:n}=(0,ng.Z)(),{is_self:a}=(0,rc.Z)(),[i,l]=(0,v.useState)(0),o=(0,v.useMemo)(()=>s?(null==s?void 0:s.find(e=>e.message_id===t.id))?2:(null==n?void 0:n.status)==="succeed"?1:0:(null==n?void 0:n.status)==="succeed"?1:-1,[s,t.id,null==n?void 0:n.status]),d=async()=>{console.log("\uD83D\uDE80 ~ init ~ mindmapList:",s),console.log("\uD83D\uDE80 ~ init ~ is_self:",a),!a||[-1,1,2].includes(o)||(await (0,tD.gw)(3e3),l(1),ng.Z.getState().setCurrentData({query:null==t?void 0:t.query,threadId:null==t?void 0:t.short_id,messageId:null==t?void 0:t.id,status:"loading"}))};return((0,v.useEffect)(()=>{d()},[]),console.log("mindmapStatus",o),a&&2!==o&&-1!==i)?(0,f.jsxs)("div",{className:(0,tV.Z)("flex flex-col gap-2 my-3","text-[#30394A] dark:text-[#babdc5]"),children:[(0,f.jsx)("h4",{className:"text-lg font-medium",children:r("agentConfig.generate_mindmap_title")}),(0,f.jsxs)("div",{className:(0,tV.Z)("flex border-1 rounded-lg w-full p-4 items-center gap-x-3","bg-[#F7F7F9] border-[#EBEEF3]","dark:bg-[#353B47] dark:border-[#454F5D]"),children:[(0,f.jsx)(e8.Z,{className:"animate-spin text-primary"}),(0,f.jsxs)("div",{children:[(null==t?void 0:t.query)?(0,f.jsx)("h5",{className:"text-lg font-bold",children:null==t?void 0:t.query}):null,(0,f.jsx)(tK.z,{variant:"link",className:"p-0 h-auto underline",disabled:o<1,onClick:()=>{ng.Z.getState().setCurrentData({query:null==t?void 0:t.query,threadId:null==t?void 0:t.short_id,messageId:null==t?void 0:t.id,status:"loading"})},children:r(o<1?"agentConfig.generating_mindmap_btn":"agentConfig.generate_mindmap_btn")})]})]})]}):null},iM=r(66336),iA=r(29921),iP=r(58014);let iZ=(0,tt.Z)("square-mouse-pointer",[["path",{d:"M12.034 12.681a.498.498 0 0 1 .647-.647l9 3.5a.5.5 0 0 1-.033.943l-3.444 1.068a1 1 0 0 0-.66.66l-1.067 3.443a.5.5 0 0 1-.943.033z",key:"xwnzip"}],["path",{d:"M21 11V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6",key:"14rsvq"}]]);var iI=r(21133),iD=r(13366),iR=e=>{let{thread:t,pptData:r,outline:s,autoShowPPT:n,setAutoShowPPT:a,template:i}=e,{isShowPptModal:l,setIsShowPptModal:o,setBesinessId:d,setAgentOutline:c,setIsGeneratedSuccess:u,isGeneratedSuccess:p,generateType:h,setUiModalType:m,setIsRegenerate:x,setBusinessType:b,setPreviewPPTData:y,businessId:w,setPptGenerateStep:j,setPPTLanguage:C}=(0,tZ.Z)(),{threads:_,isMyThread:k}=(0,tX.Z)(),{setPptStatus:N,pptStatus:E,pptDetail:S}=(0,t8.Z)(),T=(0,ra.Z)();(0,g.useLocale)();let F=(0,g.useTranslations)(),L=(0,th.ZP)(e=>e.isLogin),[M,A]=(0,v.useState)(),{isMobile:P}=(0,tU.Z)(),Z=(0,rt.Z)(),I=(0,v.useRef)(null);(0,rs.GS)("pptUsage"),(0,rs.Oi)("pptUsage");let D=(0,v.useMemo)(()=>{var e,r;return t.id?(null==s?void 0:null===(r=s.match(/# (.*)/))||void 0===r?void 0:null===(e=r[0])||void 0===e?void 0:e.replace("# ",""))||"PPT":F("agentPPT.ppt_loading_tip")},[s,t.id]),{language:R}=(0,iD.Z)();(0,v.useEffect)(()=>{u(!1)},[]);let z=(0,v.useCallback)(async()=>{if(t.id)try{let e=await (0,tI.OQ)({thread_id:t.id,businessType:tD.LB.MESSAGE});A(e);let r=tZ.Z.getState().allPptGenerateData;tZ.Z.getState().setAllPptGenerateData({...r,[t.id]:e}),!(null==e?void 0:e.cover_url)&&n&&t.answer&&setTimeout(()=>{q(),a(!1)},100)}catch(e){console.error("Failed to fetch PPT cache:",e),Z.error(F("error.fetch_failed"))}},[L,t.id,n,t.answer]);(0,v.useEffect)(()=>{z()},[z]),(0,v.useEffect)(()=>{L&&(u(!1),z())},[L,t.id]);let O=(0,v.useCallback)(()=>{var e;if(!(null==t?void 0:null===(e=t.template)||void 0===e?void 0:e.sub_topics))return!1;let r=t.template.sub_topics.find(e=>(null==e?void 0:e.title)==="ppt_generation");return null!=r&&!!r.tools&&r.tools.some(e=>(null==e?void 0:e.name)==="ppt_render")},[null==t?void 0:t.template]),B=async()=>{var e,t,r;let{subscriptionInfo:s}=rs.ZP.getState();if(!s)return!1;let n=null!==(r=null===(t=ri.Z.getState().pointsConfig)||void 0===t?void 0:null===(e=t.find(e=>"PPT_BASIC"===e.deduction_item))||void 0===e?void 0:e.points)&&void 0!==r?r:0,{balance:a,total_limit:i}=s.pointsUsage,{balance:l=0,total_limit:o=rl.a.LIMITED}=(null==s?void 0:s.pointsEnterpriseUsage)||{};return i===rl.a.UNLIMITED||!(a<n)||o===rl.a.UNLIMITED||!(l<n)||(rn.$.publish("showSubscriptionPlan",void 0),!1)},q=(0,v.useCallback)(async()=>{let e=O();if(!s&&!e){Z.default(F("generating"));return}if(t.id){a(!1);try{if(!k){Z.default(F("agentPPT.ppt_not_generated_sharer"));return}if(!await B()){tg.Z.info(F("ppt.usage_limit")),Z.default(F("agentPPT.ppt_quota_used_up_upgrade_plan"));return}if(e){let e=tX.Z.getState().threads,t=null==e?void 0:e.map(e=>{var t,r;return tD.OA.includes(null==e?void 0:e.category)||e.category===tJ.J5?"\n              Source:".concat(null==e?void 0:null===(r=e.recall_contexts)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.snippet,"\n              Query:").concat(null==e?void 0:e.query,"\n              Answer:").concat(null==e?void 0:e.answer,"\n              "):"\n              Query:".concat(null==e?void 0:e.query,"\n              Answer:").concat(null==e?void 0:e.answer)}).join("\n");C((0,tN._p)(R)),j(1),c(t)}else j(2),c(s);b(tD.LB.MESSAGE),N("generate"),m("generate"),d(t.id),o(!0),(0,tb.fk)(ty.U.GENERATE_PPT,{value:"generate"},!0)}catch(e){}}},[t.id,s,k,i,_,t]);(0,v.useEffect)(()=>{t.id&&p&&t.id===tZ.Z.getState().businessId&&(T.pollLastPpt({threadId:t.id,businessType:tD.LB.MESSAGE,onPollingResult:e=>{e&&A(e)}}).then(e=>{A(e)}).catch(e=>{console.error("Failed to poll PPT:",e),Z.error(F("error.poll_failed"))}),u(!1))},[p,t.id]);let H=(0,v.useCallback)(()=>{if(!M||2!==M.status){Z.default(F("ppt.generating_tip"));return}if(!k&&2!==M.status){Z.default(F("agentPPT.ppt_not_generated_sharer"));return}try{b(tD.LB.MESSAGE),N("preview"),m("preview"),y(M),x(!1),d(t.id),o(!0)}catch(e){console.error("Failed to preview PPT:",e),Z.error(F("error.preview_failed"))}},[t.id,M,k]),V=async()=>{try{var e;null===(e=I.current)||void 0===e||e.openCanvaEditor()}catch(e){console.error("Failed to import to Canva:",e),Z.error(F("error.canva_import_failed"))}};return(null==M?void 0:M.cover_url)?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"py-4",children:F("agentPPT.desc")}),(0,f.jsx)("div",{className:"flex flex-wrap gap-4 py-1 md:py-4 w-full",children:(0,f.jsxs)("div",{className:(0,iM.cn)("flex-1 flex flex-col mb-8","border border-gray-200 dark:border-gray-800 rounded-lg","transition-all duration-300 hover:border-blue-300 dark:hover:border-blue-800"),children:[(0,f.jsxs)("div",{className:"flex-none flex items-center justify-between p-4",children:[(0,f.jsx)("div",{className:"text-xl font-medium",children:F("ppt.title")}),(0,f.jsxs)("div",{className:"flex items-center justify-around gap-2",children:[k&&(0,f.jsx)(n3.pn,{children:(0,f.jsxs)(n3.u,{children:[(0,f.jsx)(n3.aJ,{asChild:!0,children:(0,f.jsx)(tw.A,{size:"sm",className:"bg-gray-100 dark:bg-gray-900 text-gray-500 dark:text-gray-400",onClick:()=>{if(!M){Z.default(F("ppt.generating_tip"));return}try{b(tD.LB.MESSAGE),y(M),N("preview"),m("edit"),x(!1),d(t.id),o(!0)}catch(e){console.error("Failed to edit PPT:",e),Z.error(F("error.edit_failed"))}},startContent:(0,f.jsx)(iA.Z,{size:16}),isIconOnly:!0})}),(0,f.jsx)(n3._v,{side:"top",children:(0,f.jsx)("p",{children:F("edit")})})]})}),(null==M?void 0:M.status)===2&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(n3.pn,{children:(0,f.jsxs)(n3.u,{children:[(0,f.jsx)(n3.aJ,{asChild:!0,children:(0,f.jsx)(tw.A,{size:"sm",className:"bg-gray-100 dark:bg-gray-900 text-gray-500 dark:text-gray-400",onClick:H,startContent:(0,f.jsx)(nu,{size:16}),isIconOnly:!0})}),(0,f.jsx)(n3._v,{side:"top",children:(0,f.jsx)("p",{children:F("preview_full_version")})})]})}),(0,f.jsx)(n3.pn,{children:(0,f.jsxs)(n3.u,{children:[(0,f.jsx)(n3.aJ,{asChild:!0,children:(0,f.jsx)(tw.A,{size:"sm",className:"bg-gray-100 dark:bg-gray-900 text-gray-500 dark:text-gray-400",onClick:()=>{(null==M?void 0:M.ppt_url)?window.open(M.ppt_url):Z.default(F("ppt.generating_ppt_tip"))},startContent:(0,f.jsx)(ti.Z,{size:16}),isIconOnly:!0})}),(0,f.jsx)(n3._v,{side:"top",children:(0,f.jsx)("p",{children:F("ppt.download")})})]})}),k&&(0,f.jsx)(n3.pn,{children:(0,f.jsxs)(n3.u,{children:[(0,f.jsx)(n3.aJ,{asChild:!0,children:(0,f.jsx)(tw.A,{size:"sm",className:"bg-gray-100 dark:bg-gray-900 text-gray-500 dark:text-gray-400",onClick:V,startContent:(0,f.jsx)(iI.rc,{}),isIconOnly:!0})}),(0,f.jsx)(n3._v,{side:"top",children:(0,f.jsx)("p",{children:F("ppt.edit_in_canva")})})]})})]})]})]}),(0,f.jsx)("div",{className:"flex-1 overflow-hidden flex items-center justify-center px-4 pb-4",children:(0,f.jsx)("img",{src:M.cover_url,className:(0,iM.cn)("flex-1 object-cover max-w-full rounded-lg cursor-pointer "),onClick:H})})]})}),(0,f.jsx)(tz.Z,{threadId:t.id,ref:I,businessType:tD.LB.MESSAGE})]}):(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:"cursor-pointer",style:{cursor:t.id?"pointer":"not-allowed",opacity:t.id?1:.5},children:[(0,f.jsx)("div",{className:"py-4",children:F("agentPPT.desc")}),(0,f.jsxs)("div",{className:"relative p-4 flex rounded-xl overflow-hidden transition-[height] mb-4 border border-[#E4E7EC] dark:border-[#333741] duration-500 ease-in-out bg-theme-bg-100 dark:bg-theme-bg-dark-100",onClick:q,children:[(null==M?void 0:M.status)===3?(0,f.jsx)("div",{className:"flex items-center justify-center px-[16px] box-border",children:(0,f.jsx)(iP.Z,{size:32})}):(0,f.jsx)("div",{className:"flex items-center justify-center px-[16px] box-border",children:t.id?(0,f.jsx)(iZ,{size:32}):(0,f.jsx)(nL.c,{})}),(0,f.jsxs)("div",{className:"ml-2",children:[(0,f.jsx)("div",{className:"text-[18px] font-bold",children:D}),(0,f.jsx)("div",{className:"text-[#0080FF] text-[16px] mt-[12px] underline",children:(null==M?void 0:M.status)===3?F("ppt.generate_failure_tip"):F("agentPPT.click")})]})]})]})})},iz=r(65077);let iO=(0,tt.Z)("scan-text",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 8h8",key:"1jbsf9"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M7 16h6",key:"1vyc9m"}]]);var iB=r(39676),iq=r(84915),iH=r(49759),iV=r(56975),iU=r(47014),iW=r(74538),iG=r(49992);r(96594);let i$=e=>{var t;let{source:r,index:s,rid:n}=e,a=(0,g.useTranslations)(),i=(0,tP.Z)(e=>e.extensionEnable),l=(0,tP.Z)(e=>e.legacyExtensionEnable),{title:o,articleData:d,other_info:c,snippet:u}=r;return(0,f.jsx)("div",{className:"relative rounded-lg flex flex-col gap-2",children:(0,f.jsx)(nw.Z,{source:r,placement:"left",rid:n,children:(0,f.jsx)("div",{className:"flex gap-3 w-full cursor-pointer p-3 hover:bg-gray-100 dark:hover:bg-[#444549] border-b dark:border-[#242A38] mb-3",onClick:()=>{if(null==c?void 0:c.source_url){if((0,r2.N0)()){(0,rd.oh)({url:c.source_url});return}i?window.open((0,tN.m1)(c.source_url),"_blank"):l?window.open((0,tN.m1)(c.source_url,!0),"_blank"):window.open(c.source_url,"_blank")}},children:(0,f.jsxs)("section",{children:[(0,f.jsx)("span",{className:"text-xs text-[#667085] dark:text-[#9295A0]",children:d.topic}),(0,f.jsx)("section",{className:"mt-1 leading-4 mb-4",children:(0,f.jsxs)("span",{className:"text-sm text-bold text-md",children:[o&&(0,f.jsxs)("div",{className:"text-[#667085] font-semibold leading-5 dark:text-[#9295A0]",children:[(0,f.jsxs)("span",{className:"text-sm",children:["[",s+1,"]"]})," ",(0,f.jsx)("span",{children:d.title})]}),(0,f.jsx)("div",{className:"text-[#98A2B3] dark:text-[#797E8D] text-xs leading-4 my-2",children:(0,f.jsx)("span",{children:d.source})}),(0,f.jsx)("div",{className:"text-[#667085] dark:text-[#9295A0] text-sm leading-5 box-border mb-3 max-h-[80px] line-clamp-3 overflow-hidden",children:(0,f.jsx)("span",{children:d.abstracts})}),(0,f.jsxs)("div",{className:"flex text-xs leading-5 text-[#667085] gap-2 flex-wrap dark:text-[#94A2B8]",children:[(null==c?void 0:c.authors)&&(null==c?void 0:null===(t=c.authors)||void 0===t?void 0:t.length)!==0&&(0,f.jsx)("span",{className:"py-0.5 px-1.5 bg-[#F5F7F9] rounded whitespace-nowrap dark:bg-[#2D323C]",children:(0,iG.$)((null==d?void 0:d.authors)||[])}),(null==c?void 0:c.publication_date)&&(0,f.jsx)("span",{className:"py-0.5 px-1.5 bg-[#EDF0F3] rounded whitespace-nowrap dark:bg-[#2D323C]",children:c.publication_date.slice(0,10)}),(null==c?void 0:c.type)&&(0,f.jsx)("span",{className:"py-0.5 px-1.5 bg-[#EDF0F3] rounded whitespace-nowrap dark:bg-[#2D323C]",children:d.type}),(null==c?void 0:c.cited_by_count)!==void 0&&(0,f.jsxs)("span",{className:"py-0.5 px-1.5 bg-[#EDF0F3] rounded whitespace-nowrap dark:bg-[#2D323C]",children:[c.cited_by_count," ",a("scholar.citations")]})]})]})}),(null==c?void 0:c.relevance)>0&&(0,f.jsx)("div",{className:"w-fit py-2 px-3 bg-[#E7F3FF] rounded-lg border border-[#A4D1FD] dark:border-[#6F9ECD] text-[#0080FF] text-xs font-medium dark:bg-[#2E3643]",children:"".concat((100*c.relevance).toFixed(0),"% ").concat(a("scholar.relevant"))})]})})})},s)},iY=e=>{let{sources:t,onOpen:r,isAll:s,isAllDisabled:n,articles:a,loadingMessage:i,rid:l}=e,o=(0,g.useTranslations)(),[d,c]=(0,v.useState)(!0),{isMobile:u}=(0,tU.Z)(),p=(0,v.useMemo)(()=>a.length<=3?a:a.slice(0,3),[a]);(0,v.useEffect)(()=>{s&&c(!1)},[s]);let h=(0,v.useMemo)(()=>t.length<=3?[]:t.slice(3,t.length).map(e=>{let{url:t,link:r}=e,s=(0,k.lx)(t||r||"").hostname;return"https://www.google.com/s2/favicons?domain=".concat(s,"&sz=",16)}),[t]);return(0,f.jsxs)("div",{className:"flex flex-col",children:[i&&(0,f.jsxs)("div",{className:"flex items-center justify-center min-h-10",children:[i!==o("no_sources")&&(0,f.jsx)("div",{className:"loader ball-rotate mr-8",children:(0,f.jsx)("div",{})}),(0,f.jsx)("span",{children:i})]}),a.length>0?(0,f.jsxs)(f.Fragment,{children:[(d?p:a).map((e,t)=>(0,f.jsx)("div",{children:s?(0,f.jsx)(i$,{index:t,source:e,rid:l}):(0,f.jsx)(tA.E.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{type:"spring",bounce:.4,duration:.8,delay:.4*(d?t:t-3)},children:(0,f.jsx)(i$,{index:t,source:e,rid:l})})},t)),s&&a.length>=3&&a.length!==t.length&&(0,f.jsx)("div",{className:"loader ball-rotate m-auto",children:(0,f.jsx)("div",{})})]}):0!==t.length&&t[0]&&t[0].title&&(0,f.jsx)("section",{className:"flex flex-col gap-5 mt-2.5",children:[,,,].fill("").map((e,t)=>(0,f.jsx)(rZ.O,{className:"max-w-sm h-28 bg-zinc-200 dark:bg-stone-900/30 mx-3"},t))}),d&&(0,f.jsx)("section",{children:(0,f.jsx)("section",{className:"relative z-[1] flex justify-end items-center",children:!!h.length&&(0,f.jsxs)("button",{className:(0,t_.cn)("flex items-center gap-1.5 text-sm","rounded-full py-1.5 pr-1.5 pl-3 my-1","text-[#0080FF] dark:text-[#0080FF]","bg-transparent hover:bg-default-100","transition-colors duration-150"),disabled:n,onClick:()=>{u?c(!1):r&&r()},children:[o("scholar.view_more_num",{number:h.length}),(0,f.jsx)(nc.Z,{size:18,className:"text-[#0080FF]"})]})})})]})};var iX=r(84593),iJ=r(3295),iK=r(48958),iQ=r(80538),i0=r(35279),i1=r(72070),i2=r.n(i1),i3=r(72881);let i5=e=>{let{source:t,index:r}=e,{isOpen:s,onOpen:n,onClose:a,onOpenChange:i}=(0,e5.q)(),{snippet:l,url:o,link:d,title:c}=t,u=(0,k.lx)(o||d||"").hostname,p=(0,g.useTranslations)(),h=()=>{window.open(t.link,"_blank","noopener,noreferrer")},{other_info:m}=t;m||(m=t);let v=m,x=v.file_type||"",b=(0,i3.b)(x),{isDark:y}=(0,rY.Z)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"relative rounded-lg flex flex-col gap-2",children:(0,f.jsx)("div",{className:"flex gap-3 w-full cursor-pointer rounded-lg pb-8",onClick:()=>n(),children:(0,f.jsxs)("section",{children:[(0,f.jsxs)("section",{className:"flex items-center gap-2",children:[(0,f.jsx)("span",{className:"flex-none inline-block w-[16px] h-[16px]",children:(0,f.jsx)(af.Z,{src:"https://www.google.com/s2/favicons?domain=".concat(u,"&sz=",16)})}),(0,f.jsx)("p",{className:"text-xs line-clamp-1 leading-normal break-all text-[#7A90B1] dark:text-[#94A2B8]",children:(0,k.CN)({url:d||""})})]}),(0,f.jsx)("section",{className:"mt-3 leading-4",children:(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)("span",{className:"mr-2 inline-flex items-center min-w-6",children:x&&(0,f.jsx)(i2(),{src:b,alt:x,width:24,height:24})}),(0,f.jsx)("span",{className:"text-sm font-semibold text-[#0A1C38] dark:text-white overflow-hidden",children:(0,f.jsx)("span",{className:"inline-block max-w-full overflow-hidden text-ellipsis whitespace-normal break-words",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:c})})]})}),(0,f.jsxs)("section",{className:"mt-2 text-xs leading-normal text-[#4C6DA1] dark:text-[#CBD4E1] flex relative",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:"flex-1 line-clamp-2 ".concat(v.thumbnail?"max-h-9":""),children:l}),(0,f.jsx)("p",{className:"mt-2 dark:text-[#94A2B8] ".concat(v.thumbnail?"min-h-4":"")})]}),v.thumbnail&&(0,f.jsx)("div",{className:"flex-shrink-0 flex items-end ml-2 rounded-lg overflow-hidden w-16 h-16  border-1 border-[#EAEFF4] dark:border-[#242A38]",children:(0,f.jsx)(i2(),{width:64,height:64,src:v.thumbnail,alt:t.title})}),v.thumbnail&&(0,f.jsx)("div",{className:"absolute top-0 right-0  ".concat(y?"bg-[#262626]":"bg-white"),children:(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",children:(0,f.jsx)("path",{d:"M0.200012 0L13 12.8H3.40002C1.6327 12.8 0.200012 11.3673 0.200012 9.6V0Z",fill:y?"#242A38":"#EAEFF4"})})})]})]})})},r),(0,f.jsx)(nz.R,{backdrop:"blur",size:"5xl",isOpen:s,onOpenChange:i,hideCloseButton:!0,children:(0,f.jsx)(nO.A,{children:e=>(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(nB.k,{className:"flex flex-col gap-1",children:(0,f.jsxs)("div",{className:"flex justify-between items-center bg-gray-10 min-h-[40px] ",children:[(0,f.jsx)("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:(0,f.jsx)(iK.Y,{value:t.link,radius:"full",readOnly:!0,endContent:(0,f.jsx)("button",{className:"focus:outline-none",type:"button",onClick:h,"aria-label":"toggle password visibility",children:(0,f.jsx)(iQ.Z,{className:"w-4 h-4 text-[#7A90B1]"})})})}),(0,f.jsx)("button",{className:"focus:outline-none w-5 h-5 flex items-center justify-center rounded-full bg-[#F6465D] ml-2",onClick:e,children:(0,f.jsx)(tC.Z,{size:16,className:"text-white"})})]})}),(0,f.jsx)(nq.I,{className:"flex flex-col flex-grow overflow-auto",children:(0,f.jsx)(i0.Z,{fileUrl:t.link||"",fileType:v.file_type||"",fileName:t.title})}),(0,f.jsx)(nH.R,{children:(0,f.jsx)("section",{className:"flex w-full items-center justify-center pb-8",children:(0,f.jsx)("section",{className:"flex gap-2",children:(0,f.jsx)("div",{className:"flex justify-center items-center  bg-gray-10",children:(0,f.jsx)("a",{href:t.link||"#",target:"_self",download:!0,rel:"noopener noreferrer",className:"text-blue-500 underline",children:(0,f.jsx)(tw.A,{color:"primary",children:p("download.label")})})})})})})]})})})]})},i6=e=>{let{sources:t,isDone:r,query:s,isAll:n}=e,a=(0,g.useTranslations)(),[i,l]=(0,v.useState)(!0),o=(0,v.useMemo)(()=>t.length<=3?t:t.slice(0,3),[t]);(0,v.useEffect)(()=>{n&&l(!1)},[n]);let d=(0,v.useMemo)(()=>t.length<=3?[]:t.slice(3,t.length).map(e=>{let{url:t,link:r}=e,s=(0,k.lx)(t||r||"").hostname;return"https://www.google.com/s2/favicons?domain=".concat(s,"&sz=",16)}),[t]);return(0,f.jsxs)("div",{className:"flex flex-col overflow-hidden",children:[t.length>0?(i?o:t).map((e,t)=>(0,f.jsx)(tA.E.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{type:"spring",bounce:.4,duration:.8,delay:.4*(i?t:t-3)},children:(0,f.jsx)(i5,{index:t,source:e})},t)):r?(0,f.jsx)("section",{className:"text-center my-10",children:a("search_result_notification",{query:s})}):(0,f.jsx)("section",{className:"flex flex-col gap-5",children:[,,,].fill("").map((e,t)=>(0,f.jsx)(rZ.O,{className:"max-w-sm h-28 bg-zinc-200 dark:bg-stone-900/30 mx-3"},t))}),i&&(0,f.jsxs)("section",{children:[(0,f.jsx)("section",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-gray-50 to-white"}),(0,f.jsxs)("section",{className:"relative z-[1] flex justify-end items-center pb-3",children:[(0,f.jsx)("section",{className:"flex flex-wrap gap-2",children:Array.from(new Set(d)).slice(0,3).map((e,t)=>(0,f.jsx)(af.Z,{src:e},t))}),!!d.length&&(0,f.jsx)("button",{className:(0,t_.cn)("flex-none px-3 py-1.5 rounded-lg","bg-transparent hover:bg-default-100","transition-colors duration-150"),"aria-label":"Collapse",onClick:()=>l(!1),children:(0,f.jsxs)("section",{className:"flex items-center gap-1.5 text-sm text-gray-500 dark:text-gray-400",children:[(0,f.jsx)("span",{children:a("view_more_num",{number:d.length})}),(0,f.jsx)(nc.Z,{size:18})]})})]})]})]})};var i4=r(27571),i7=r(4389),i8=e=>{var t,r,s,n;let{category:a,canEdit:i,thread:l}=e,o=(0,g.useTranslations)(),{selectedSources:d}=(0,i_.Z)(),[c,u]=(0,v.useState)("sources"),[p,h]=(0,v.useState)(!1),{isMobile:m}=(0,tU.Z)(),{setIsShowAgentSources:x,setEditSource:b}=(0,tP.Z)(),{setSelectedSources:w,setLastSelectedIndex:j}=i_.Z.getState(),C=(0,v.useMemo)(()=>"document"===a,[a]),_=(0,v.useMemo)(()=>"scholar"===a,[a]),k=(0,iJ.Z)(e=>e.autoTranslateSources),[N,E]=(0,v.useState)([]),[S,T]=(0,v.useState)(o("scholar.searching_databases")),F=(0,v.useRef)(0),L=(0,v.useRef)([]),M=e=>{e.preventDefault(),e.stopPropagation(),iJ.Z.getState().setAutoTranslateSources(!k)},A=()=>{w([]),j(null)},P=l&&l.id?null!==(n=null==l?void 0:null===(t=l.plan_info)||void 0===t?void 0:t.qr_list)&&void 0!==n?n:[null==l?void 0:l.query_rewriter_info].filter(Boolean):[],Z=(0,v.useMemo)(()=>{var e;return(null==l?void 0:null===(e=l.recall_contexts)||void 0===e?void 0:e.map(e=>({...e,url:e.link})))||[]},[null==l?void 0:l.recall_contexts]),I=(0,v.useMemo)(()=>Z,[Z]),D=(0,v.useMemo)(()=>[...new Set(I.map(e=>(0,ap.P)(e.snippet)))].length,[I]);(0,v.useEffect)(()=>{h(!1),w([])},[]),(0,v.useEffect)(()=>{let e=async()=>{if(!(null==I?void 0:I.length)||!I[0]||"{}"===JSON.stringify(I[0])||!I[0].title){T(o("no_sources"));return}try{T(o("scholar.reading_articles",{count:I.length}));let e=await (0,i4.q)({sources:I.slice(0,3)});E(e),T("");let t=await (0,i4.q)({sources:I.slice(3)});E(e=>[...e,...t]);let r=[...e,...t],s=i_.Z.getState().sourceAllMatchList,n=(0,io.w0)(),a=s.map(e=>{var t;let s=r.find(t=>t.title===e.title),a=(null==s?void 0:s.url)||e.link||"",i="".concat(l.rid,"-").concat(a,"-").concat(n),o=e.snippet.split("\n"),d=(0,i7.ND)((null==s?void 0:null===(t=s.articleData)||void 0===t?void 0:t.abstracts)||e.snippet||"").split("\n");return i_.Z.getState().addSourceOriginalList({id:i,rid:l.rid,link:e.link||"",original:o,translated:d,title:e.title,translatedTitle:(null==s?void 0:s.articleData.title)||e.title}),{...e,snippet:s?(0,i7.ND)(s.articleData.abstracts):(0,i7.ND)(e.snippet),title:(null==s?void 0:s.articleData.title)||e.title}});for(let e=0;e<a.length;e+=6){let t=a.slice(e,e+6),r=await (0,i7.UA)(t,!0);if(!r)return;r.forEach(e=>{i_.Z.getState().addHighlightItem(e)})}}catch(e){console.error("error:",e)}};I&&_&&I.length>0&&(L.current=I,e()),0===L.current.length&&(null==I?void 0:I.length)==0&&_?F.current=setTimeout(()=>{e()},1e4):I&&((null==I?void 0:I.length)>0||L.current.length>0)&&clearTimeout(F.current)},[I,o,_]);let R=()=>(0,f.jsxs)(f.Fragment,{children:[!C&&!_&&(0,f.jsx)(e6.e,{delay:0,content:o("translate_sources"),className:"bg-[#353B46] text-white dark:bg-[#353B46] dark:text-white",children:(0,f.jsx)(tK.z,{variant:"simple",className:(0,t_.cn)("mr-2",k&&"text-theme-blue-600 dark:text-[#0694FF] bg-[#F6F7F9] dark:bg-[#353B46]"),onPointerDown:M,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),M(e))},children:(0,f.jsx)(a8.vN,{className:"w-4 h-4",onPointerDown:M,tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),M(e))}})})}),i&&!C&&!_&&(0,f.jsx)(e6.e,{delay:0,className:"bg-[#353B46] text-white dark:bg-[#353B46] dark:text-white",content:o(p?"cancel_edit":"edit_source"),children:(0,f.jsx)(tK.z,{variant:"simple",className:(0,t_.cn)(p&&"text-theme-blue-600 dark:text-[#0694FF] bg-[#F6F7F9] dark:bg-[#353B46]"),onClick:()=>h(!p),children:(0,f.jsx)(te.Z,{className:"w-4 h-4"})})})]});return(0,f.jsx)("div",{className:(0,tV.Z)("flex flex-col",!m&&"h-[100vh]"),children:(0,f.jsxs)(a1.mQ,{defaultValue:c,onValueChange:e=>{u(e)},className:"p-0 m-0 h-auto mb-4 ",children:[(0,f.jsxs)("div",{className:(0,tV.Z)("bg-white flex dark:bg-background",m&&"justify-center"),children:[(0,f.jsxs)(a1.dr,{className:(0,tV.Z)("rounded-xl border dark:border-[#353B46] gap-1 p-1 bg-background ml-4 flex w-max my-3 h-auto",m&&"items-center"),children:[(0,f.jsxs)(a1.SP,{value:"sources",className:(0,tV.Z)("rounded-lg border-0 text-base h-8 px-3 m-0 text-sm gap-2 font-bold text-[#5F7698] dark:text-[#F3F5F7] hover:bg-[#F6F7F9] dark:hover:bg-[#353B46]","data-[state=active]:bg-[#F6F7F9] dark:data-[state=active]:bg-[#353B46] data-[state=active]:text-[#30394A] dark:data-[state=active]:text-white"),children:[I.length>0&&I.length," ",o("sources")]}),(0,f.jsx)(a1.SP,{value:"activity",className:(0,tV.Z)("rounded-lg border-0 text-base p-2 px-4 h-8 m-0 text-sm gap-2 font-bold text-[#5F7698] dark:text-[#F3F5F7] hover:bg-[#F6F7F9] dark:hover:bg-[#353B46]","data-[state=active]:bg-[#F6F7F9] dark:data-[state=active]:bg-[#353B46] data-[state=active]:text-[#30394A] dark:data-[state=active]:text-white"),children:o("think")})]}),"sources"===c&&!m&&(0,f.jsx)("div",{className:"absolute right-14 top-4 flex ",children:R()}),!m&&(0,f.jsx)("button",{className:"absolute right-2 rounded-full top-4 p-2 hover:bg-[#F6F7F9] dark:hover:bg-[#353B46]",onClick:()=>x(!1),children:(0,f.jsx)(tC.Z,{className:"cursor-pointer",size:18})})]}),"sources"===c&&(0,f.jsxs)(a1.nU,{value:"sources",className:(0,tV.Z)("flex flex-col",m&&"sources"===c?"h-[calc(80vh-120px)]":"max-h-[calc(100vh-64px)]"),children:["sources"===c&&m&&(0,f.jsx)("div",{className:"mt-2 flex ml-2",children:R()}),(0,f.jsx)(iB.o,{className:(0,tV.Z)("flex-1 p-6 custom-scrollbar overflow-x-hidden",m&&"p-2 pb-0"),children:C?(0,f.jsx)(i6,{sources:I||[],isDone:!0,isAll:!0,query:l.query||""}):_?(0,f.jsx)(iY,{sources:I||[],articles:N,isAll:!0,loadingMessage:S,rid:l.rid}):(0,f.jsx)(iq.F,{sources:I||[],isDone:!0,isAll:!0,canEdit:p,isVisible:!0,rid:l.rid})}),p&&d.length>0&&(0,f.jsxs)("div",{className:"flex justify-end p-6 gap-4",children:[d.length===(null==I?void 0:I.length)&&(0,f.jsxs)("p",{className:"flex items-center gap-2 text-sm text-theme-font-500 dark:text-theme-font-dark-500",children:[(0,f.jsx)(iX.Z,{size:16}),(0,f.jsx)("span",{children:o("min_source_required")})]}),(0,f.jsx)(tK.z,{color:"primary",disabled:d.length===(null==I?void 0:I.length),onClick:()=>{let e=[];I.map((t,r)=>{d.includes(r)||e.push(t)}),b(e),A()},children:o("delete_and_rewrite")})]})]}),"activity"===c&&(0,f.jsx)(a1.nU,{value:"activity",className:(0,tV.Z)("flex flex-col",m&&"activity"===c&&"h-[calc(80vh-120px)]"),children:(0,f.jsx)(iC,{defaultExpanded:!0,allShow:!0,defaultDiscoveryModeStyle:l.thread_type===y.yG&&[tJ.iV,tJ.NY].includes(l.mode),query:null==l?void 0:l.query,tools:(null==l?void 0:null===(r=l.tools)||void 0===r?void 0:r.filter(e=>"TransferToWriteReportAgent"!==e.name))||[],category:null==l?void 0:l.category,languageCount:D,processValue:100,queryPlans:(null==l?void 0:null===(s=l.plan_info)||void 0===s?void 0:s.plans)||[],relevancyInfo:null==l?void 0:l.relevancy_model_info,rewritersInfo:(null==l?void 0:l.query_rewriter_list)?null==l?void 0:l.query_rewriter_list:P,firstSources:I,secondSources:Z,reasoningText:(null==l?void 0:l.reasoning)||"",reasoningEnd:!0,sources:I,reflectionInfo:null==l?void 0:l.reflections,reflectionAgentAnswer:(null==l?void 0:l.reflection_agent_last_answer)||"",qrInfoUrlExpands:(null==l?void 0:l.mode)==="discovery"?((null==l?void 0:l.recall_contexts)||[]).filter(e=>!1!==e.is_expanded):[],topicTools:(null==l?void 0:l.topic_tools)||[]},(null==l?void 0:l._local_id)+"thread_stepper")})]})})},i9=()=>{let e=(0,g.useTranslations)(),t=(0,to.V)(),r=(0,to.V)(),{isMyThread:s,threads:n}=(0,tX.Z)(),{isShowMobileSource:a,setIsShowMobileSource:i,sourceType:l,agentSources:o,sourcesHtml:d,sourceTitle:c,threadIndex:u}=(0,tP.Z)(),p=async()=>{r.copy(await (0,nX.h_)(d))};return(0,f.jsx)(rp.Vq,{open:a,onOpenChange:()=>i(!1),children:(0,f.jsxs)(rp.cZ,{hideCloseButton:!0,className:"fixed bottom-0 top-auto translate-y-0",children:[(0,f.jsx)(rp.fK,{className:"text-left pb-0",children:(0,f.jsxs)(rp.$N,{className:"text-base",children:["think"===l&&(0,f.jsx)("div",{className:"flex",children:(0,f.jsx)("button",{onClick:()=>i(!1),className:"ml-auto",children:(0,f.jsx)(tC.Z,{className:"cursor-pointer",size:20})})}),"sources"===l&&(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)(iz.Z,{size:20}),(0,f.jsx)("div",{className:"ml-2 w-[200px] justify-start overflow-hidden text-ellipsis whitespace-nowrap",children:e("sources")}),(0,f.jsx)("button",{onClick:()=>i(!1),className:"ml-auto mr-0",children:(0,f.jsx)(tC.Z,{className:"cursor-pointer ",size:20})})]}),"html"===l&&(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)(iO,{size:20}),(0,f.jsx)("div",{className:"ml-2 w-[200px] justify-start overflow-hidden text-ellipsis whitespace-nowrap",children:c}),(0,f.jsxs)(iH.F,{placement:"top",offset:-2,children:[(0,f.jsx)(e6.e,{delay:0,content:e("copy_content"),children:(0,f.jsx)("div",{className:"ml-auto mr-2",children:(0,f.jsx)(iV.S,{children:(0,f.jsx)(tw.A,{size:"sm",radius:"full",className:"bg-transparent hover:text-gray-800",isIconOnly:!0,children:r.copied||t.copied?(0,f.jsx)(ts.Z,{size:20,color:"#4ba570"}):(0,f.jsx)(nS.Z,{size:16})})})})}),(0,f.jsxs)(iU.a,{"aria-label":"Topic actions",variant:"flat",children:[(0,f.jsx)(iW.W,{style:{position:"relative",pointerEvents:"auto"},className:"text-[#1D3C6D] hover:!bg-blue-100 hover:!text-[#1D3C6D] dark:text-[#EDF3FC] hover:dark:!bg-[#2E3643] hover:dark:!text-[#EDF3FC]",onPress:p,startContent:(0,f.jsx)(tp.eC,{className:"h-5 w-5"}),children:e("textFormat")},"copyText"),(0,f.jsx)(iW.W,{className:"text-[#1D3C6D] hover:!bg-blue-100 hover:!text-[#1D3C6D] dark:text-[#EDF3FC] hover:dark:!bg-[#2E3643] hover:dark:!text-[#EDF3FC]",onPress:()=>{let e=d.replace(/^\n\n/,"");t.copy(e)},style:{position:"relative",pointerEvents:"auto"},startContent:(0,f.jsx)(tp.WO,{className:"h-5 w-5"}),children:e("MarkdownFormat")},"copyMarkdown")]})]}),(0,f.jsx)("button",{onClick:()=>i(!1),className:"mr-0",children:(0,f.jsx)(tC.Z,{className:"cursor-pointer",size:20})})]})]})}),(0,f.jsxs)(rp.a7,{className:(0,t_.cn)("w-full pt-0 max-w-md mx-auto relative custom-scrollbar h-[80vh]","overflow-y-auto"),children:["sources"===l&&(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(iB.o,{className:"p-6 custom-scrollbar overflow-x-hidden",children:(0,f.jsx)(iq.F,{sources:o,canEdit:!1,isDone:!0,isAll:!0,isVisible:!0,rid:""})})}),"html"===l&&(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(iB.o,{className:"py-6 custom-scrollbar overflow-x-hidden",children:(0,f.jsx)("div",{className:(0,t_.cn)("prose prose-md dark:prose-invert max-w-full flex justify-center",rD().prose),children:(0,f.jsx)(rR.Z,{rid:"",loading:!1,isVisible:!0,className:"w-[80%] break-all",children:d})})})}),"think"===l&&(0,f.jsx)(i8,{category:n[0].category,canEdit:s,thread:n[u]})]})]})})},le=r(11333),lt=r.n(le),lr=function(){let e=(0,v.useRef)(null),[t,r]=(0,v.useState)(!1);return(0,v.useEffect)(()=>{if(!e.current)return;let t=new window.IntersectionObserver(e=>{let[t]=e;r(!(t.boundingClientRect.bottom>=window.innerHeight)&&t.intersectionRatio<1)},{threshold:[1],rootMargin:"-1px 0px 0px 0px"});return t.observe(e.current),()=>t.disconnect()},[]),{ref:e,isSticky:t}},ls=e=>{let{query:t,canEdit:r,onEditClick:s}=e,n=(0,g.useTranslations)(),{copy:a,copied:i}=(0,to.V)(),[l,o]=(0,v.useState)(!1),[d,c]=(0,v.useState)(!1),u=(0,v.useRef)(null);return(0,v.useEffect)(()=>{let e=()=>{u.current&&c(u.current.scrollHeight>200)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),(0,f.jsx)("div",{className:"w-full mb-8",children:(0,f.jsx)("h1",{className:"flex group justify-end items-center gap-2 text-base dark:text-white",children:(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsxs)("div",{className:"bg-[#F6F7F9] dark:bg-[#353B46] rounded-xl overflow-hidden",children:[(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)("pre",{ref:u,className:"m-4 whitespace-pre-wrap break-words text-inherit ".concat(l?"":"max-h-[196px] overflow-hidden"),children:t}),d&&!l&&(0,f.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-[48px] bg-[#F6F7F9]/70 dark:bg-[#353B46]/40 pointer-events-none"})]}),d&&(0,f.jsx)("div",{className:"px-4 pb-3",children:(0,f.jsx)("div",{onClick:()=>o(!l),className:"w-full cursor-pointer text-left text-sm text-[#0080FF] dark:text-[#0694FF] transition-colors flex items-center gap-1",children:n(l?"show_less":"show_more")})})]}),(0,f.jsxs)("div",{className:"absolute flex items-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bottom-[-26px] right-0 rounded-xl",children:[r&&(0,f.jsx)(e6.e,{placement:"bottom",content:n("rewrite_query_desc"),children:(0,f.jsx)("div",{className:"pr-2 cursor-pointer",onClick:s,children:(0,f.jsx)(te.Z,{size:16,className:"text-[#7F94B1] dark:text-[#B9BFCA]"})})}),(0,f.jsx)(e6.e,{content:n("copy"),placement:"bottom",children:(0,f.jsx)("div",{className:"pl-2 cursor-pointer",onClick:()=>{a(t)},children:i?(0,f.jsx)(ts.Z,{size:16,color:"#4ba570"}):(0,f.jsx)(nS.Z,{size:16,className:"text-[#7F94B1] dark:text-[#B9BFCA]"})})})]})]})})})},ln=r(2839),la=r(69593),li=r(82550),ll=r(20271);function lo(e){let{color:t="default",className:r}=e,s={default:"bg-blue-500",success:"bg-green-500",warning:"bg-yellow-500",error:"bg-red-500"};return(0,f.jsx)("div",{className:(0,eY.cn)("inline-flex items-center justify-center w-4 h-4",r),children:(0,f.jsxs)("div",{className:"relative inline-flex h-3 w-3",children:[(0,f.jsx)("span",{className:(0,eY.cn)("animate-ping absolute inline-flex h-full w-full rounded-full opacity-75",s[t])}),(0,f.jsx)("span",{className:(0,eY.cn)("relative inline-flex rounded-full h-3 w-3",s[t])})]})})}var ld=r(46264),lc=r(13288),lu=r(57434),lp=r(75450),lh=r(6229),lm=r(77774),lf=e=>{let{switchLabel:t,delay:r=500,type:s}=e,n=(0,g.useTranslations)(),[a,i]=(0,v.useState)(s?n("mcp"===s?"step.tool.invoke_mcp_tool":"sandbox"===s?"step.tool.invoke_code_sandbox_tool":"step.tool.invoking_tool"):t);return(0,v.useEffect)(()=>{let e=setTimeout(()=>{i(t)},r);return()=>clearTimeout(e)},[t,r]),(0,f.jsx)(ii,{label:a,labelClassName:"animate-[shimmer_2s_infinite_linear] text-sm bg-clip-text text-transparent bg-gradient-to-r from-theme-font-500 via-theme-font-900 to-theme-font-500 dark:from-theme-font-dark-500 dark:via-theme-font-dark-900 dark:to-theme-font-dark-500 bg-[length:200%_100%]",rewriters:[]})},lv=r(25339);let lx=e=>{let{isCompleted:t,toolName:r,searchItem:s,isShowView:n,callResult:a}=e,i=(0,g.useTranslations)(),{isMobile:l}=(0,tU.Z)(),{setSourcesHtml:o,setIsShowMobileSource:d,setIsShowAgentSources:c,setSourceTitle:u}=(0,tP.Z)();return(0,f.jsxs)("div",{className:"text-[#98A2B3] flex items-start my-2",children:[t?(0,f.jsx)(a8.e,{className:"text-theme-font-400 flex-shrink-0 w-4 h-4 mt-[2px] mr-2"}):(0,f.jsx)("span",{className:"inline-flex flex-shrink-0 w-4 h-4 items-center justify-center mt-[2px] mr-2",children:(0,f.jsx)(lo,{})}),"think"===r?(0,f.jsx)("div",{className:"flex-1 md:flex-none md:max-w-[60%] overflow-hidden whitespace-nowrap text-ellipsis",children:s}):(0,f.jsx)("span",{children:((e,t)=>{switch(e){case"think":return t;case"image_search":case"web_search":default:return i("step.tool.web_search",{queries:t});case"summary_file":case"summary_content":return i("step.tool.summary_file",{queries:t});case"knowledge_base_retrieval":return i("step.tool.knowledge_base_retrieval",{queries:t});case"web_scraper":case"web_reader":return i("step.tool.web_scraper",{urls:t});case"NOTION_SEARCH_NOTION_PAGE":return i("step.tool.name_search",{name:"Notion",queries:t});case"website_search":return i("step.tool.website_search",{sites:"",queries:t})}})(r,s)}),n&&a&&!(0,r2.zd)()&&(0,f.jsx)("div",{onClick:()=>{let e=a;switch(r){case"think":u(i("step.tool.thought_content")),e=s;break;case"web_scraper":u(i("step.tool.reading_webpage_done_desc"));break;default:u(s)}try{let t=JSON.parse(e||"");if(Array.isArray(t)){let e=t.map(e=>"object"==typeof e&&e.link&&e.title?"![".concat(e.title,"](").concat(e.link,")"):"").filter(Boolean).join("\n\n");o(e||"")}else o(e||"")}catch(t){o(e||"")}l?d(!0):c(!0)},className:"flex-shrink-0 bg-[#E9EEFF] ml-2 text-black dark:text-white p-1 text-xs dark:bg-gray-500 rounded-lg cursor-pointer text-sm ",children:i("step.tool.view_source")})]})},lg=e=>{let{isCompleted:t,toolName:r,searchItem:s,sourcesHtml:n,isTemplate:a,sourceItem:i}=e,l=(0,g.useTranslations)(),{isMobile:o}=(0,tU.Z)(),{setSourcesHtml:d,setSourceTitle:c,setIsShowMobileSource:u,setIsShowAgentSources:p}=(0,tP.Z)(),h=e=>{if((0,r2.N0)()){(0,rd.oh)({url:e});return}window.open(e,"_blank")};return(0,f.jsxs)("div",{className:"text-[#98A2B3] w-full flex items-center my-2",children:[t?(0,f.jsx)(a8.e,{className:"text-theme-font-400 flex-shrink-0 w-4 h-4 mt-[2px] mr-2"}):(0,f.jsx)("span",{className:"inline-flex flex-shrink-0 w-4 h-4 items-center justify-center mt-[2px] mr-2",children:(0,f.jsx)(lo,{})}),(0,f.jsxs)("div",{className:"flex items-center gap-2 w-[calc(100%-30px)]",children:[(0,f.jsx)("span",{className:"flex-shrink-0",children:t?l("step.tool.reading_webpage_done"):l("step.tool.reading_webpage")}),a?(0,f.jsx)("div",{onClick:()=>(0,tN.nG)(s),className:"flex-1 md:flex-none md:max-w-[60%] text-[#98A2B3] cursor-pointer underline hover:text-blue-500 overflow-hidden whitespace-nowrap text-ellipsis",children:s}):(0,f.jsx)(ic,{sourcesHtml:n,sourceItem:i,children:(0,f.jsx)("div",{className:"flex-1 md:flex-none md:max-w-[70%] text-[#98A2B3] cursor-pointer underline hover:text-blue-500 overflow-hidden whitespace-nowrap text-ellipsis",onClick:e=>{e.preventDefault(),e.stopPropagation(),h(s)},children:s})}),n&&a&&!(0,r2.zd)()&&(0,f.jsx)("div",{onClick:()=>{"think"===r?c(l("step.tool.thought_content")):c(l("step.tool.reading_webpage_done_desc")),d(n),o?u(!0):p(!0)},className:"flex-shrink-0 bg-[#E9EEFF] text-black dark:text-white p-1 text-xs dark:bg-gray-500 rounded-lg cursor-pointer text-sm ",children:l("step.tool.view_source")})]})]})};var lb=r(72035),ly=r(20796),lw=e=>{let{imageList:t}=e,r=(0,g.useTranslations)(),[s,n]=(0,v.useState)(!0),[a,i]=(0,v.useState)([]),{isOpen:l,onOpen:o,onClose:d}=(0,e5.q)(),[c,u]=(0,v.useState)(!1),[p,h]=(0,v.useState)([]),[m,x]=(0,v.useState)([]),[b,y]=(0,v.useState)(0),w=p.length>=a.length&&a.length>0;(0,v.useEffect)(()=>{let e=setTimeout(()=>u(!0),1e3);return()=>clearTimeout(e)},[]),(0,v.useEffect)(()=>{h([])},[]),(0,v.useEffect)(()=>{if(t&&t.length>0){h([]),i(t),n(!1);return}},[]);let j=()=>{let e=a[b].image.contextLink;(0,r2.N0)()&&(0,rd.oh)({url:e}),window.open(e,"_blank")},C=(e,t)=>{let r=e;do r=(r+t+a.length)%a.length;while(m.includes(r)&&r!==e);return r},_=e=>{if(l)switch(e.key){case"ArrowLeft":case"ArrowUp":y(e=>C(e,-1));break;case"ArrowRight":case"ArrowDown":y(e=>C(e,1))}};return(0,v.useEffect)(()=>{if(a.length>0){let e=setTimeout(()=>{a.forEach((e,t)=>{if(!p.includes(t)){let e=document.querySelector('[data-img-index="'.concat(t,'"]'));e&&(!e.complete||0===e.naturalWidth)&&h(e=>[...e,t])}})},1e4);return()=>clearTimeout(e)}},[]),(0,f.jsxs)(f.Fragment,{children:[!c&&(0,f.jsx)(av,{className:"my-20 w-full"}),(0,f.jsxs)("section",{className:(0,t_.cn)("pb-12",!c&&"hidden"),children:[s?(0,f.jsx)(av,{className:"my-20 w-full"}):!a.length&&(0,f.jsx)(f.Fragment,{}),w?(0,f.jsx)("section",{className:"text-center my-10",children:r("no_images")}):(0,f.jsx)("section",{className:"grid grid-cols-3 gap-2 mt-1.5",children:a.slice(0,9+p.length).map((e,t)=>p.includes(t)?null:(0,f.jsx)("section",{className:"aspect-square break-inside-avoid rounded-2xl border-1 border-slate-100 dark:border-transparent overflow-hidden bg-offset group transition-all duration-200 ease-in-out",children:(0,f.jsx)(tO.J,{className:"cursor-zoom-in m-0 z-0 w-full h-full object-cover transition-all ease-in-out hover:scale-[1.05] dark:brightness-75",classNames:{wrapper:"overflow-hidden hover:shadow-lg rounded-2xl h-full"},"data-img-index":t,src:e.link,width:"100%",height:"100%",shadow:"none",alt:e.title,onClick:()=>{x(p),y(t),o()},onError:()=>{setTimeout(()=>{h(e=>e.includes(t)?e:[...e,t])},0)}})},"img-".concat(t,"-").concat(e.link.split("/").pop())))})]}),(0,f.jsx)(nz.R,{size:"full",backdrop:"blur",isOpen:l,onClose:d,closeButton:(0,f.jsx)(f.Fragment,{}),onKeyDown:e=>_(e),classNames:{base:"h-full",backdrop:"bg-zinc-900/80"},children:(0,f.jsx)(nO.A,{className:"flex bg-transparent",children:e=>(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(nB.k,{className:"flex flex-col gap-1",children:(0,f.jsxs)("section",{className:"flex flex-col md:flex-row gap-4 border-b border-theme-border-100 dark:border-theme-border-dark-100 pb-5",children:[(0,f.jsx)("span",{className:"text-white text-base md:text-2xl truncate md:mr-auto",children:a[b].title}),(0,f.jsxs)("section",{className:"flex items-center gap-4",children:[(0,f.jsxs)(tw.A,{className:"mr-auto",variant:"ghost",radius:"full",onPress:j,children:[(0,f.jsx)(af.Z,{classNames:{wrapper:"w-4 flex-initial flex-shrink-0"},src:"https://www.google.com/s2/favicons?domain=".concat(a[b].displayLink,"&sz=",16)}),(0,f.jsx)("span",{className:"text-white",children:a[b].displayLink})]}),(0,f.jsx)(tw.A,{variant:"ghost",isIconOnly:!0,radius:"full",onPress:e,children:(0,f.jsx)(tC.Z,{color:"white"})})]})]})}),(0,f.jsxs)(nq.I,{className:"flex flex-auto flex-col md:flex-row gap-10 min-h-0",onClick:e,children:[(0,f.jsx)("section",{className:"flex w-full select-none py-md pl-lg min-h-0 flex-1",children:(0,f.jsx)("img",{className:"m-auto max-h-full rounded-md transition-all ease-in-out cursor-pointer dark:brightness-75",src:a[b].link,alt:b.toString(),onClick:e=>{e.stopPropagation(),window.open(a[b].link,"_blank")}},b)}),(0,f.jsx)("section",{className:"w-full md:w-32 overflow-auto",children:(0,f.jsx)("div",{className:"flex gap-4 flex-row md:flex-col",children:a.map((e,t)=>{if(!m.includes(t))return(0,f.jsx)("section",{className:"flex-shrink-0 break-inside-avoid",children:(0,f.jsx)("img",{className:(0,t_.cn)("h-32 w-32 bg-zinc-600 rounded-md object-cover cursor-pointer dark:brightness-75",b===t?"border-2 border-blue-500":"border-2 border-transparent"),src:e.link,width:"100%",height:"100%",alt:e.title,onClick:e=>{e.stopPropagation(),y(t)},onError:()=>{m.includes(t)||x(e=>[...e,t])}})},t)})})})]})]})})})]})};let lj=e=>{let{isCompleted:t,toolName:r,searchItem:s,callResult:n}=e,a=(0,g.useTranslations)();return(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:"text-[#98A2B3] flex items-start my-2",children:[t?(0,f.jsx)(a8.e,{className:"text-theme-font-400 flex-shrink-0 w-4 h-4 mt-[2px] mr-2"}):(0,f.jsx)("span",{className:"inline-flex flex-shrink-0 w-4 h-4 items-center justify-center mt-[2px] mr-2",children:(0,f.jsx)(lo,{})}),(0,f.jsx)("span",{children:((e,t)=>{switch(e){case"think":return t;case"image_search":case"web_search":default:return a("step.tool.web_search",{queries:t});case"summary_file":return a("step.tool.summary_file",{queries:t});case"knowledge_base_retrieval":return a("step.tool.knowledge_base_retrieval",{queries:t});case"web_scraper":case"web_reader":return a("step.tool.web_scraper",{urls:t});case"website_search":return a("step.tool.website_search",{sites:"",queries:t})}})(r,s)})]}),n&&(0,f.jsx)("div",{className:"text-[#98A2B3] flex items-center my-2",children:(()=>{let e=[];if("string"==typeof n)try{e=JSON.parse(n)}catch(e){return null}return Array.isArray(e)&&(0,f.jsx)(lw,{imageList:e})})()})]})},lC=e=>{var t,r,s,n,a,i,l,o,d,c,u,p,h,m;let{item:x,value:b,toolsLength:y,index:w,markdown:j}=e,C=(0,g.useTranslations)(),_=(e,t)=>{if(!t)return"";if(Array.isArray(t)){var r;return(null===(r=t.find(t=>t.link===e))||void 0===r?void 0:r.snippet)||""}return t},k=(e,t)=>{if(t&&Array.isArray(t))return t.find(t=>t.link===e)},N=(0,v.useMemo)(()=>e=>{var t,r,s;let{...n}=e,a=(0,to.V)(),i=(0,v.useRef)(null),l=(null==n?void 0:null===(s=n.children)||void 0===s?void 0:null===(r=s.props)||void 0===r?void 0:null===(t=r.className)||void 0===t?void 0:t.replace("hljs language-",""))||"";return(0,f.jsxs)("pre",{ref:i,className:"w-full relative whitespace-break-spaces",children:[(0,f.jsxs)("div",{className:"text-bold text-sm ml-3 mb-2 flex items-center",children:[(0,f.jsx)(iI.pT,{className:"h-4 w-4 mr-2"}),l||""]}),(0,f.jsx)(tw.A,{isIconOnly:!0,size:"sm",className:"absolute top-2 right-2 text-white",variant:"light",onPress:()=>{if(i.current){let e=i.current.innerText;a.copy(e)}},children:a.copied?(0,f.jsx)(ts.Z,{size:16,color:"#4ba570"}):(0,f.jsx)(nS.Z,{size:14})}),n.children]})},[]);return(0,f.jsxs)(f.Fragment,{children:[("image_search"===x.name||"ppt_outline_image_search"===x.name)&&(0,f.jsx)(lj,{isCompleted:100===b||y>w+1||!!j,toolName:x.name,searchItem:Array.isArray(null===(t=x.params)||void 0===t?void 0:t.search_queries)?x.params.search_queries.join(", "):JSON.stringify(null===(r=x.params)||void 0===r?void 0:r.search_queries),callResult:x.call_result}),(null===(s=x.params)||void 0===s?void 0:s.search_queries)&&"image_search"!==x.name&&(()=>{let e=[];try{Array.isArray(x.params.search_queries)?e=x.params.search_queries:"string"==typeof x.params.search_queries&&(e=JSON.parse(x.params.search_queries))}catch(t){e=[x.params.search_queries]}return e.map((e,t)=>(0,f.jsx)(lx,{isCompleted:100===b||y>w+1||!!j,toolName:x.name,searchItem:e},t))})(),(null===(n=x.params)||void 0===n?void 0:n.urls)&&(null===(i=x.params)||void 0===i?void 0:null===(a=i.urls)||void 0===a?void 0:a.map((e,t)=>(0,f.jsx)(lg,{isCompleted:100===b||y>w+1||!!j,sourcesHtml:_(e.url,x.call_result),sourceItem:k(e.url,x.call_result),toolName:x.name,searchItem:e.url,isTemplate:!0},t))),(null===(l=x.params)||void 0===l?void 0:l.url)&&(0,f.jsx)(lg,{isCompleted:100===b||y>w+1||!!j,sourcesHtml:x.call_result,toolName:x.name,searchItem:null===(o=x.params)||void 0===o?void 0:o.url,isTemplate:!0}),(null===(d=x.params)||void 0===d?void 0:d.thought)&&(0,f.jsx)(lx,{isCompleted:100===b||y>w+1||!!j,toolName:x.name,searchItem:x.params.thought,isShowView:!0,callResult:x.params.thought}),(null===(c=x.params)||void 0===c?void 0:c.query)&&(0,f.jsx)(lx,{isCompleted:100===b||y>w+1||!!j,toolName:x.name,searchItem:null===(u=x.params)||void 0===u?void 0:u.query,isShowView:!0,callResult:x.call_result}),"mcp"===x.tool_type&&x.name&&(0,f.jsxs)("div",{className:"text-[#98A2B3] flex items-center my-2",children:[100===b||y>w+1||j?(0,f.jsx)(a8.e,{className:"text-theme-font-400 mt-[2px] mr-2"}):(0,f.jsx)("span",{className:"inline-flex w-4 h-4 items-center justify-center mt-[2px] mr-2",children:(0,f.jsx)(lo,{})}),C("step.tool.fetching_data",{name:x.name})]}),(null===(p=x.params)||void 0===p?void 0:p.code)&&(0,f.jsx)(a$.U,{remarkPlugins:[lh.Z,lp.Z,lu.Z,la.Z,li.Z,ll.Z],rehypePlugins:[lm.Z,lc.Z,[ld.Z,{detect:!1,ignoreMissing:!0}],ln.Z],components:{pre:N},children:(e=>{try{let t=(0,nX.k5)((0,nX.SK)(e||""));return(t="".replace("",t)).replace(/^(\d+)\.(\s)/gm,"\n$1\\. ")}catch(t){return console.error("Error in escapedContent:",t),e||""}})("```".concat((null===(h=x.params)||void 0===h?void 0:h.language)||"","\n").concat(null===(m=x.params)||void 0===m?void 0:m.code,"\n```"))}),("image_generation"===x.name||"ppt_outline_image_search"===x.name)&&x.call_result&&(0,f.jsx)("div",{className:"text-[#98A2B3] flex items-center my-2",children:(()=>{let e=x.call_result;if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return console.error("call_result JSON error:",e),null}return Array.isArray(e)&&e.map((e,t)=>(0,f.jsx)(lb.O,{alt:e.description||"",src:(0,ly.JK)(e.url||"")},t))})()})]})};var l_=e=>{let{tools:t,value:r,markdown:s,thread:n,autoShowPPT:a,setAutoShowPPT:i,sources:l,isTemplate:o=!0,autoShowGraphic:d,setAutoShowGraphic:c,threadId:u}=e,p=(0,g.useTranslations)(),h=(0,tX.Z)(e=>e.threads),m=(0,tP.Z)(e=>e.extensionEnable),[x,b]=(0,v.useState)(t.map(e=>"image_generation"===e.name||"image_search"===e.name||"ppt_outline_image_search"===e.name)),[y,w]=(0,v.useState)(!!s);(0,v.useEffect)(()=>{w(!!s)},[s]),(0,v.useEffect)(()=>{if(y||100===r){b(e=>{let r=[...e];return t.length>0&&"image_generation"!==t[t.length-1].name&&"image_search"!==t[t.length-1].name&&"ppt_outline_image_search"!==t[t.length-1].name&&(r[t.length-1]=!1),r});return}},[r,y]),(0,v.useEffect)(()=>{y||100===r||b(e=>{let r=[...e];return t.length>0&&(r[t.length-1]=!0,t.length>1&&"image_generation"!==t[t.length-2].name&&"image_search"!==t[t.length-2].name&&"ppt_outline_image_search"!==t[t.length-2].name&&(r[t.length-2]=!1)),r})},[t]);let j=(0,tP.Z)(e=>e.legacyExtensionEnable),_=e=>{b(t=>{let r=[...t];return r[e]=!r[e],r})},k=(e,t)=>(0,f.jsx)("div",{children:(0,f.jsxs)("div",{className:"my-2",children:[(0,f.jsx)("span",{className:"inline-flex w-4 h-4 items-center justify-center mt-[2px] mr-2",children:(0,f.jsx)(lo,{})}),(0,f.jsx)(lf,{switchLabel:e,type:t})]})}),N={knowledge_base_retrieval:p("step.tool.searching_knowledge_base"),web_search:p("step.tool.searching_network"),web_scraper:p("step.tool.reading_webpage"),website_search:p("step.tool.accessing_link"),web_reader:p("step.tool.reading_webpage"),think:p("step.tool.thinking"),image_search:p("step.tool.searching_pictures"),image_generation:p("step.tool.generating_image"),ppt_outline_image_search:p("step.tool.generating_image")},E=e=>{try{let t=(0,nX.k5)((0,nX.SK)(e||""));return(t="".replace("",t)).replace(/^(\d+)\.(\s)/gm,"\n$1\\. ")}catch(t){return console.error("Error in escapedContent:",t),e||""}},S=(0,v.useMemo)(()=>e=>{let{node:t,...r}=e;if(!r.href)return null;let s=l?l[+r.href-1]:void 0,n=(null==s?void 0:s.url)||(null==s?void 0:s.link)||r.href,a=()=>{if((0,r2.N0)()){(0,rd.oh)({url:n});return}m?window.open((0,tN.m1)(n),"_blank"):j?window.open((0,tN.m1)(n,!0),"_blank"):window.open(n,"_blank")};if(!s){let e=r.children||n||"";if(/^-?\d+(\.\d+)?$/.test(e))return;let t=e.length>200?/https?:\/\/[-a-zA-Z0-9@:%._+~#=]{2,256}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)/g:RegExp(lv.FK,"gi"),s=t.exec(e),i=[];for(;null!==s&&s&&s[0]!==s.input;){let[e,r]=s,n=s.input.substring(0,s.index),a=new lv.fh(e,r),l=s.input.substring(s.index+s[0].length);s=t.exec(l),i=[...i,{type:"text",content:n},{type:"link",content:a.getAnchorText(),href:a.getAnchorHref()},{type:"text",content:s?"":l}]}let l="inline cursor-pointer no-underline text-blue-500 dark:text-blue-500 hover:underline";return i.length?(0,f.jsx)(f.Fragment,{children:i.map((e,t)=>"link"===e.type?(0,f.jsx)("a",{href:e.href,target:"_blank",className:l,children:e.content},t):e.content)}):(0,f.jsx)("a",{href:n,target:"_blank",className:l,onClick:a,children:r.children})}return(0,f.jsx)("span",{className:"footnote-ref inline-block mx-[2px] my-0 select-none",children:(0,f.jsx)(nw.Z,{source:s,rid:"",children:(0,f.jsx)("a",{className:"inline-block leading-normal !text-inherit cursor-pointer no-underline font-medium bg-theme-bg-300 dark:bg-theme-bg-dark-300 min-w-4 h-4 text-center rounded-full align-top text-xs",href:n,target:"_blank",onClick:e=>{e.preventDefault(),a()},children:r.href})})})},[l]);return(0,f.jsxs)("div",{className:"prose prose-md dark:prose-invert max-w-full markdown_markdown__wTkaE",children:[0==t.length&&o&&100!==r&&!s&&k(p("step.tool.understanding_problem")),t.filter(e=>e.params).map((e,l)=>{var o,d,c,u,m,v,g,b,y;return(0,f.jsxs)("div",{className:"mt-2 mb-4",children:[e.content&&(0,f.jsxs)("span",{className:"mt-2 mb-4",children:[(0,f.jsx)("span",{className:"[&>*]:block [&>*:last-child]:contents [&>ol:last-child>li:last-child]:contents",children:(0,f.jsx)(a$.U,{remarkPlugins:[lh.Z,lp.Z,lu.Z,la.Z,li.Z,ll.Z],rehypePlugins:[lm.Z,lc.Z,[ld.Z,{detect:!1,ignoreMissing:!0}],ln.Z],components:{a:S},children:E(e.content)})}),e.params&&"ppt_render"!==e.name&&![C.ab,C.fc,C.S].includes(e.name)&&(0,f.jsx)("span",{className:"align-middle inline-flex",children:x[l]?(0,f.jsx)(a9.Z,{className:"cursor-pointer prose align-middle inline h-5 w-5 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full p-0.5 transition-colors",onClick:()=>_(l)}):(0,f.jsx)(nc.Z,{className:"cursor-pointer group-hover:prose text-[#98A2B3] align-middle inline h-5 w-5 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full p-0.5 transition-colors",onClick:()=>_(l)})})]}),!e.content&&(t.length>l+1||s)&&e.params&&"ppt_render"!==e.name&&e.name!==C.ab&&(0,f.jsxs)("span",{className:"mt-2 mb-4",children:[(0,f.jsx)("span",{className:"text-[#7F94B1] dark:text-[#B9BFCA] [&>*]:block [&>*:last-child]:contents text-sm",children:p("step.tool.analysis_status")}),(0,f.jsx)("span",{className:"align-middle inline-flex",children:x[l]?(0,f.jsx)(a9.Z,{className:"cursor-pointer text-[#7F94B1] align-middle inline h-5 w-5 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full p-0.5 transition-colors",onClick:()=>_(l)}):(0,f.jsx)(nc.Z,{className:"cursor-pointer group-hover:prose text-[#7F94B1] align-middle inline h-5 w-5 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full p-0.5 transition-colors",onClick:()=>_(l)})})]}),!s&&100!==r&&t.length===l+1&&N[e.name]&&k(e.toolList&&e.toolList.length>0?N[e.toolList[e.toolList.length-1].name]:N[e.name],e.toolList&&e.toolList.length>0?e.toolList[e.toolList.length-1].name:e.name),"sandbox"===e.name&&!s&&100!==r&&t.length===l+1&&(null===(o=e.params)||void 0===o?void 0:o.code)&&k(p("step.tool.executing_command")),"mcp"===e.tool_type&&100!==r&&!s&&t.length===l+1&&k(p("step.tool.using_tool",{name:e.mcp_info.title}),e.tool_type),"ppt_render"===e.name&&!(0,t9.s2)()&&(null===(d=e.params)||void 0===d?void 0:d.ppt_content)&&(0,f.jsx)(iR,{thread:n,setAutoShowPPT:e=>i(e),pptData:(null==t?void 0:null===(c=t.find(e=>{var t,r;return(null==e?void 0:e.name)==="ppt_render"&&(null===(r=e.params)||void 0===r?void 0:null===(t=r.ppt_content)||void 0===t?void 0:t.length)}))||void 0===c?void 0:c.params)||null,autoShowPPT:a,outline:(null==t?void 0:null===(m=t.find(e=>{var t,r;return(null==e?void 0:e.name)==="ppt_render"&&(null===(r=e.params)||void 0===r?void 0:null===(t=r.ppt_content)||void 0===t?void 0:t.length)}))||void 0===m?void 0:null===(u=m.params)||void 0===u?void 0:u.ppt_content)||(null==h?void 0:null===(v=h[h.length-2])||void 0===v?void 0:v.answer)}),(0,f.jsx)(a7.M,{children:("image_generation"===e.name||"image_search"===e.name||"ppt_outline_image_search"===e.name||x[l])&&(0,f.jsx)(tA.E.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"flex my-0 overflow-hidden w-full",children:(0,f.jsxs)("div",{className:"flex w-full ".concat(x[l]?"my-4":"my-0 h-0 w-0"),children:[!(null===(g=e.params)||void 0===g?void 0:g.code)&&"image_generation"!==e.name&&"image_search"!==e.name&&"ppt_outline_image_search"!==e.name&&(0,f.jsx)("div",{className:(0,t_.cn)("bg-[#C9CFD8] flex-shrink-0 w-[2px] mr-4 ml-2 my-3.5","mcp"===e.tool_type||(null===(y=e.params)||void 0===y?void 0:null===(b=y.search_queries)||void 0===b?void 0:b.length)===1?"invisible":"")}),(0,f.jsx)("div",{className:"text-sm w-[calc(100%-30px)]",children:e.toolList&&e.toolList.length>0?e.toolList.map((n,a)=>(0,f.jsx)(lC,{item:n,value:r,toolsLength:t.length==l+1?e.toolList.length:e.toolList.length+1,index:a,markdown:s},a)):(0,f.jsx)(lC,{item:e,value:r,toolsLength:t.length,index:l,markdown:s})})]})},l)})]},l)})]})};function lk(e){let{color:t="default",className:r}=e,s={default:"bg-blue-500",success:"bg-green-500",warning:"bg-yellow-500",error:"bg-red-500"};return(0,f.jsx)("div",{className:(0,eY.cn)("inline-flex items-center justify-center w-2 h-2",r),children:(0,f.jsxs)("div",{className:"relative inline-flex h-[2px] w-[2px]",children:[(0,f.jsx)("span",{className:(0,eY.cn)("animate-ping absolute inline-flex h-full w-full rounded-full opacity-75",s[t])}),(0,f.jsx)("span",{className:(0,eY.cn)("relative inline-flex rounded-full h-[6px] w-[6px]",s[t])})]})})}var lN=e=>{var t;let{tools:r,value:s,thread:n,threadId:a}=e,i=(0,g.useTranslations)(),l=(0,g.useLocale)(),o=(0,rt.Z)(),d=async()=>{var e;(0,tb.fk)(ty.U.CREATE_SLIDES_PPT_AGENT,{value:"create_slides_ppt_agent"},!0);let t=null===(e=(await (0,nY.Vk)(l,"ppt_generation_v2")).data)||void 0===e?void 0:e.template_info;if(!t){o.error(i("ppt.failed_generate"));return}nJ.Z.getState().setTemplate(t);let r={query:i("generate_PPT_by_content")};r.model=t.sub_topics[0].llm_model,r.templateId=t.id;let s=(0,rM.MD)({...r,fromShortId:a,category:tJ.Wh,prefix:"/thread-chat"});window.open("/slides/".concat(C.yw,"?chatUrl=").concat(encodeURIComponent(s)),"_blank","noopener,noreferrer")};return(0,f.jsxs)("div",{className:"prose prose-md dark:prose-invert max-w-full markdown_markdown__wTkaE",children:[r.length>0&&"ppt_render"===r[r.length-1].name&&100!==s&&!r[r.length-1].params&&(0,f.jsx)("div",{children:(0,f.jsxs)("div",{className:"my-2",children:[(0,f.jsx)("span",{className:"inline-flex w-4 h-4 items-center justify-center mt-[2px] mr-2",children:(0,f.jsx)(lk,{})}),(0,f.jsx)(lf,{switchLabel:i("step.tool.generating_ppt")})]})}),r.length>0&&"sandbox"===r[r.length-1].name&&100!==s&&!r[r.length-1].params&&(0,f.jsx)("div",{children:(0,f.jsxs)("div",{className:"my-2",children:[(0,f.jsx)("span",{className:"inline-flex w-4 h-4 items-center justify-center mt-[2px] mr-2",children:(0,f.jsx)(lk,{})}),(0,f.jsx)(lf,{switchLabel:i("step.tool.generating_code"),type:"sandbox"})]})}),(null===(t=r.find(e=>e.name===C.ab))||void 0===t?void 0:t.name)&&n.id&&(0,f.jsxs)("div",{className:"my-2",children:[(0,f.jsxs)("div",{className:"mb-2",children:["\uD83C\uDF89 ",i("step.tool.confirmGeneratePPTMessage")]}),(0,f.jsx)(tK.z,{variant:"outline-primary",onClick:d,children:i("step.tool.confirmGenerate")})]})]})},lE=e=>{let{index:t,thread:r,messageId:s,shortId:n,rid:a,query:i,answer:l,sources:o,canEdit:d,onEditQueryClick:c,onReanswer:u,isFirst:p,onDelete:h,hideRewriteModel:m,hideChat:v,relates:x,pptCover:b,images:y,category:w}=e,j=(0,g.useTranslations)(),C=(0,tP.Z)(e=>e.loading);return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("section",{className:"flex gap-5 mr-4",children:[(0,f.jsx)("section",{className:"flex flex-wrap -ml-3"}),(0,f.jsxs)("section",{className:"flex ",children:[(0,f.jsxs)(iH.F,{children:[(0,f.jsx)(e6.e,{delay:0,content:j("rewrite"),children:(0,f.jsx)("div",{className:"max-w-fit",children:(0,f.jsx)(iV.S,{className:(0,t_.cn)(!(d&&!C)&&"hidden"),children:(0,f.jsx)(tw.A,{size:"sm",radius:"full",className:"rounded-lg bg-transparent hover:bg-[#F6F7F9] dark:hover:bg-[#353B46] text-[#4B5F7E] dark:text-[#F3F5F7]",isIconOnly:!0,children:(0,f.jsx)(rb.XL,{})})})})}),(0,f.jsxs)(iU.a,{"aria-label":"More actions",variant:"flat",children:[(0,f.jsx)(iW.W,{onPress:()=>c(!0),description:j("rewrite_query_desc"),children:j("edit_query")},"edit"),(0,f.jsx)(iW.W,{onPress:()=>u("pro"),endContent:(0,f.jsx)(nZ,{className:"rounded bg-theme-bg-300 dark:bg-theme-bg-dark-300 px-2 py-0.5 text-xs text-nowrap"}),description:j("pro_search_description"),children:"Pro Search"},"pro")]})]}),(0,f.jsx)(ar,{shortId:n,rid:a,answer:l,sources:o,canEdit:d,isFirst:p,isLast:!1,relates:x,onDelete:h,isShowRelates:!1,setIsShowRelates:()=>{},thread:r})]})]})})},lS=r(15893),lT=r(68681),lF=r(95191),lL=r(59892),lM=e=>{let{template:t}=e,r=(0,g.useTranslations)(),{isMyThread:s}=(0,tX.Z)(),n=(0,tc.useRouter)(),a=async()=>{let e=await (0,lF.Y)(t.title),r=(0,lL.b)(e);n.push("/agents/".concat(r,"-").concat(t.short_id)),s||(0,tb.fk)(ty.U.SIDEBAR_AGENT_SHARE_NEW_CHAT,{},!0)};return(0,f.jsxs)("div",{className:"px-6 py-6 mb-6 border border-[#EBEEF3] bg-white dark:border-[#454E5D] rounded-2xl border-[#E5E4E3] dark:bg-[#353B46] flex flex-col md:flex-row items-center",children:[(0,f.jsxs)("div",{className:"flex-1 flex flex-col items-center md:items-start",children:[(0,f.jsxs)("div",{className:"flex items-center flex-col md:flex-row",children:[(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)(iI.x0,{className:"w-6 h-6 text-[#30394A] dark:text-[#FFFFFF]"}),(0,f.jsx)("div",{className:"text-[#30394A] text-bold text-lg ml-2 dark:text-[#FFFFFF]",style:{wordBreak:"break-word",display:"block",overflowWrap:"break-word"},children:t.title})]}),(0,f.jsxs)("div",{className:"flex items-center whitespace-nowrap mt-2 md:mt-0",children:[(0,f.jsx)("div",{className:"text-[#ACB9CD] dark:text-[#737F96] hidden md:block",children:(0,f.jsx)(rB,{className:"w-5 h-5"})}),(0,f.jsx)("div",{className:"text-xs text-[#ACB9CD] dark:text-[#737F96]",children:r("agent.created_by",{name:(0,lS.D)(t)})})]})]}),(0,f.jsx)("div",{className:"mt-3 text-[#5F7698] text-center md:text-left dark:text-[#D0D4DC] text-xs",children:t.introduction})]}),(0,f.jsxs)(tK.z,{onClick:a,variant:"outline",className:"mt-6 md:mt-0 ml-0 border-0 text-[#0080FF] dark:text-[#0694FF] md:ml-6 flex rounded-2xl bg-[#EDFAFF] dark:bg-[#25364DCC] hover:bg-[#EDFAFF] hover:text-[#0080FF]",children:[(0,f.jsx)(lT.Z,{className:"w-5 h-5"}),r("new_chat")]})]})};let lA=e=>{var t;let{className:r,isOpenEditQuery:s,query:n,markdown:a,autoShowPPT:i,setAutoShowPPT:l,sources:o,loading:d,isVisible:c,isDocument:u,setIsOpenEditQuery:p,canEdit:h,tools:m,thread:v,onSaveByQueryEditor:x,messageId:b,processValue:y,rid:w,pptCover:j,queryCategory:C,onDelete:_,shortId:k,threadIndex:N,isLast:E,images:S,hideRewriteModel:T,onReanswer:F,error:L,isAnswerDone:M,relates:A,template:P,isChat:Z,autoShowGraphic:I,setAutoShowGraphic:D,isHideReply:R,retryGenerate:z,isFirstRetry:O}=e,B=(0,g.useTranslations)(),{isApp:q}=(0,re.b)(),H=(0,th.ZP)(e=>e.isLogin),{setAgentSources:V,setIsShowMobileSource:U,setIsShowAgentSources:W,isShowAgentSources:G,isShowMobileSource:$,sourceType:Y}=(0,tP.Z)(),{isMyThread:X}=(0,tX.Z)(),{isMobile:J}=(0,tU.Z)(),K=(0,r2.zd)();return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{className:(0,t_.cn)("thread-item scroll-mt-28 mb-4 pt-4 flex justify-center gap-10 flex-col lg:flex-row break-words thread-container-".concat(b),r),style:{wordBreak:"break-word"},children:(0,f.jsxs)("div",{className:"flex-grow flex flex-col min-w-[50%] max-w-3xl",children:[s?(0,f.jsx)(nN,{queryMode:v.mode,initialQuery:n,onSave:e=>{x(e)},onCancel:()=>{p(!1)}}):(0,f.jsx)(ls,{query:n,canEdit:h,onEditClick:()=>{p(!s)}}),(100===y&&!a&&!L&&0===m.length||(null==v?void 0:v.abort_tag)&&0===m.length&&!a)&&(0,f.jsx)("div",{className:"border rounded-lg p-8 flex text-[#4B5F7F] dark:text-[#9295A1] justify-center items-center",children:B("skip_answer")}),(0,f.jsxs)("div",{className:"py-2 px-4 rounded-xl",children:[(0,f.jsx)(l_,{threadId:k,tools:m,value:y,markdown:a,thread:v,autoShowPPT:i,setAutoShowPPT:l,sources:o,autoShowGraphic:I,setAutoShowGraphic:D}),(0,f.jsx)(rz,{skeleton:Z?"single":"multiple",markdown:a,sources:o,rid:w,loading:d,isVisible:c,messageId:b,isDocument:u,template:P,isShowSkeleton:!1}),(0,f.jsx)(lN,{tools:m,value:y,thread:v,threadId:k})]}),(null===(t=v.metadata)||void 0===t?void 0:t.answer_updated_at)&&(0,f.jsx)("div",{className:"text-[#5F7698] ml-4 pl-[12px] text-[12px] my-5 h-[16px] flex items-center border-l-4 border-[#E6E9EF] dark:text-[#D0D4DC] dark:border-[#454E5D]",children:B(X?"threadEdit.youEdited":"threadEdit.ownerEdited",{time:lt()(v.metadata.answer_updated_at).format("YYYY/MM/DD HH:mm")})}),L&&(0,f.jsx)(r3,{content:L||"",markdown:a,retryGenerate:z,isFirstRetry:O,isTemplate:!0}),(0,f.jsxs)("div",{className:"flex items-center ml-2 mb-4",children:[o.length>0&&(0,f.jsx)("div",{className:"flex items-center",children:(0,f.jsxs)("div",{onClick:K?void 0:()=>{if("sources"!==Y){V(o),J?U(!0):W(!0);return}V(o),J?U(!$):W(!G)},className:(0,t_.cn)("rounded-xl flex items-center p-2",!K&&"cursor-pointer hover:bg-[#F6F6F6] hover:dark:bg-theme-border-dark-200"),children:[o.slice(0,3).map((e,t)=>(0,f.jsx)("div",{children:(e.url||e.link||"").includes(".file")?(0,f.jsx)(rN.Z,{fileName:e.title,w:4,h:4}):(0,f.jsx)(nm.h,{src:"https://www.google.com/s2/favicons?domain=".concat(e.link,"&sz=",20),className:(0,t_.cn)("w-5 h-5",0!==t?"-ml-2.5":""),size:"md"})},t)),o.length>0&&(0,f.jsx)("p",{className:"text-small text-[#5F7698] font-medium ms-2 dark:text-[#D0D4DC]",children:B("search_result.sources_count",{count:o.length})})]})}),!K&&(0,f.jsx)("div",{className:"ml-auto items-center",children:!L&&M&&(0,f.jsx)(lE,{id:v.id,index:N,thread:v,messageId:b,shortId:k,rid:w,query:n,answer:a,sources:o,canEdit:h,onEditQueryClick:p,onReanswer:F,isFirst:0===N,isLast:E,onDelete:_,hideRewriteModel:T,hideChat:!H,relates:A||[],pptCover:j,images:S,category:C||""})})]}),!q&&!d&&(R||!X)&&E&&P&&P.template_type!==rv.W.DEFAULT&&(0,f.jsx)("div",{className:"animate-[fadeIn_0.3s_ease-in-out_1s_forwards] opacity-0",children:(0,f.jsx)(lM,{template:P})}),(0,f.jsx)(i9,{})]})})})};var lP=r(34097),lZ=r(11920),lI=e=>{var t,r,s;let{thread:n,template:a,threadId:i,autoShowGraphic:l,setAutoShowGraphic:o}=e,{setShowGraphicModel:d,setGraphicQueryData:c,allGraphicData:u}=(0,ry.Z)(),{threads:p,isMyThread:h}=(0,tX.Z)(),m=(0,g.useLocale)(),x=(0,g.useTranslations)(),y=(0,th.ZP)(e=>e.isLogin),[w,j]=(0,v.useState)(null),{isMobile:C}=(0,tU.Z)(),_=(0,rt.Z)(),k=(0,b.useRouter)().query,{language:N}=(0,iD.Z)(),E=(0,v.useMemo)(()=>n.id?n.query:x("agentPPT.ppt_loading_tip"),[n]),S=(0,v.useCallback)(()=>{if(!n.id||!h)return;let e=tX.Z.getState().threads,t=null==e?void 0:e.map(e=>"long_text"===e.category?"\n          Query:".concat(null==e?void 0:e.query,"\n          "):"\n          Query:".concat(null==e?void 0:e.query,"\n          Answer:").concat(null==e?void 0:e.answer)).join("\n");if(o(!1),!h&&!(null==w?void 0:w.smart_art_id)){_.default(x("graphic.sharer_not_generate"));return}c({messageId:n.id,threadId:i,language:N||"auto",inputText:t,query:n.query,canEdit:h,template:a,mode:"thread",smart_art_id:null==w?void 0:w.smart_art_id}),d(!0),(null==w?void 0:w.smart_art_id)||(0,tb.fk)(ty.U.SMARTART_CREATE,{messageId:n.id,threadId:i,query:n.query},!0)},[n,i,w,h,N,m,a,o,c,d,_]),T=(0,v.useCallback)(async e=>{tg.Z.info(x("drive.download_loading"),99999);try{var t,r,s,a;if("png"===e||"svg"===e){let s=(null==w?void 0:null===(r=w.images)||void 0===r?void 0:null===(t=r.find(t=>t.type===e))||void 0===t?void 0:t.path)||"";await (0,lZ.l)(s,"".concat(n.query,".").concat(e)),tg.Z.close()}else if("pdf"===e){let e=(null==w?void 0:null===(a=w.images)||void 0===a?void 0:null===(s=a.find(e=>"png"===e.type))||void 0===s?void 0:s.path)||"";await (0,lZ.F)({title:n.query,imageUrl:e,onProgress:e=>{tg.Z.info(x("drive.download_loading"),99999)},onError:e=>{tg.Z.error("".concat(e),3e3)},onComplete:()=>{tg.Z.close()},scale:1.5,quality:1,pageMargin:.8})}}catch(e){tg.Z.close(),tg.Z.error("".concat(e),3e3)}},[n,w]),F=(0,v.useCallback)(async()=>{if(n.id&&i)try{var e;let t=await (0,lP.b4)({thread_id:i,message_id:n.id});j(t.data),!(null===(e=t.data)||void 0===e?void 0:e.content)&&n.answer&&l&&setTimeout(()=>{S(),null==o||o(!1)},100)}catch(e){console.error("Failed to fetch PPT cache:",e),_.error(x("error.fetch_failed"))}},[y,n.id,l,i,n.answer]);return((0,v.useEffect)(()=>{n.answer&&n.id&&F()},[n.id,n.answer]),(0,v.useEffect)(()=>{"1"===k.showGraphic&&n.id===k.message_id&&null!==w&&S()},[k.showGraphic,k.message_id,n.id,w]),(0,v.useEffect)(()=>{n.id&&(null==u?void 0:u[n.id])&&j(null==u?void 0:u[n.id])},[u,n,w]),null==w?void 0:null===(t=w.images)||void 0===t?void 0:t.length)?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{className:"flex flex-wrap gap-4 py-1 md:py-4 w-full",children:(0,f.jsxs)("div",{className:(0,iM.cn)("flex-1 flex flex-col mb-8","border border-gray-200 dark:border-gray-800 rounded-lg","transition-all duration-300 hover:border-blue-300 dark:hover:border-blue-800"),children:[(0,f.jsxs)("div",{className:"flex-none flex items-center justify-between p-4",children:[(0,f.jsx)("div",{className:"text-xl font-medium",children:x("graphic.graphic")}),(0,f.jsxs)("div",{className:"flex items-center justify-around gap-2",children:[(0,f.jsxs)(rh.h_,{children:[(0,f.jsx)(rh.$F,{asChild:!0,children:(0,f.jsx)("div",{className:"w-[32px] h-[32px] flex items-center rounded-[8px] justify-center cursor-pointer bg-gray-100 dark:bg-gray-900 text-gray-500 dark:text-gray-400",children:(0,f.jsx)(ti.Z,{size:16})})}),(0,f.jsxs)(rh.AW,{className:"z-50",children:[(0,f.jsx)(rh.Xi,{onClick:()=>T("svg"),children:"SVG"}),(0,f.jsx)(rh.Xi,{onClick:()=>T("png"),children:"PNG"}),(0,f.jsx)(rh.Xi,{onClick:()=>T("pdf"),children:"PDF"})]})]}),h&&(0,f.jsx)(n3.pn,{children:(0,f.jsxs)(n3.u,{children:[(0,f.jsx)(n3.aJ,{asChild:!0,children:(0,f.jsx)(tw.A,{size:"sm",className:"bg-gray-100 dark:bg-gray-900 text-gray-500 dark:text-gray-400",onClick:S,startContent:(0,f.jsx)(nu,{size:16}),isIconOnly:!0})}),(0,f.jsx)(n3._v,{side:"top",children:(0,f.jsx)("p",{children:x("preview_full_version")})})]})})]})]}),(0,f.jsx)("div",{className:"flex-1 overflow-hidden flex items-center justify-center px-4 pb-4",children:(0,f.jsx)("img",{src:null==w?void 0:null===(s=w.images)||void 0===s?void 0:null===(r=s.find(e=>"png"===e.type))||void 0===r?void 0:r.path,alt:"image",onClick:S,className:(0,iM.cn)("flex-1 object-cover max-w-full rounded-lg cursor-pointer ")})})]})})}):(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:"cursor-pointer",style:{cursor:n.id?"pointer":"not-allowed",opacity:n.id?1:.5},children:[(0,f.jsx)("div",{className:"py-4",children:x("graphic.text")}),(0,f.jsxs)("div",{className:"relative p-4 flex rounded-xl overflow-hidden transition-[height] mb-4 border border-[#E4E7EC] dark:border-[#333741] duration-500 ease-in-out bg-theme-bg-100 dark:bg-theme-bg-dark-100",onClick:S,children:[(null==w?void 0:w.smart_art_id)?(0,f.jsx)("div",{className:"flex items-center justify-center px-[16px] box-border",children:(0,f.jsx)(iP.Z,{size:32})}):(0,f.jsx)("div",{className:"flex items-center justify-center px-[16px] box-border",children:n.id?(0,f.jsx)(iZ,{size:32}):(0,f.jsx)(nL.c,{})}),(0,f.jsxs)("div",{className:"ml-2",children:[(0,f.jsx)("div",{className:"text-[18px] font-bold w-full max-w-[400px] line-clamp-2",children:E}),(0,f.jsx)("div",{className:"text-[#0080FF] text-[16px] mt-[12px] underline",children:n.id?x("graphic.click_text"):x("graphic.graphic_loading_tip")})]})]})]})})},lD=r(57527);let lR=v.memo(e=>{var t;let{toolsData:r}=e,{allGraphicData:s,setAllGraphicData:n}=(0,ry.Z)(),{isMyThread:a}=(0,tX.Z)(),i=(0,g.useLocale)();(0,g.useTranslations)();let l=(0,th.ZP)(e=>e.isLogin),[o,d]=(0,v.useState)(null),c=(0,v.useRef)(null),[u,p]=(0,v.useState)(!1),h=(0,v.useRef)(void 0),m=r.id,x=null===(t=r.metadata)||void 0===t?void 0:t.thread_short_id,[b,y]=(0,v.useState)(!1),w=(0,v.useRef)(null),{isDark:j}=(0,rY.Z)(),C=(0,v.useCallback)(()=>{m&&(a||(null==o?void 0:o.smart_art_id))&&(p(!0),(null==o?void 0:o.smart_art_id)||(0,tb.fk)(ty.U.SMARTART_CREATE,{messageId:m,threadId:x,query:""},!0))},[o,a]),_=async(e,t)=>{try{return await e(t)}catch(r){return console.log("First attempt failed, retrying..."),await e(t)}};(0,v.useEffect)(()=>{if(null==o?void 0:o.smart_art_id)return;let e=e=>{var t,s,n,i,l,d,u;if(e.data.type){if("graphic:init"===e.data.type){if(m!==(null===(t=e.data.value)||void 0===t?void 0:t.unique_id))return;let{anonymousToken:d}=th.ZP.getState(),u=th.ZP.getState().userInfo,p=(null==u?void 0:u.user_org_member)?null==u?void 0:null===(n=u.user_org_member)||void 0===n?void 0:null===(s=n.org_member)||void 0===s?void 0:s.uid:null==u?void 0:u.uid;null===(l=c.current)||void 0===l||null===(i=l.contentWindow)||void 0===i||i.postMessage({type:"graphic:init",value:{tokens:{login:(0,r9.Nh)(),anonymous:d,visitor:(0,r9.Kd)()},options:{uid:p,canEdit:a,mode:"thread",thread_id:x,message_id:m,language:"auto",inputText:r.content||"",smart_art_id:null==o?void 0:o.smart_art_id,note_id:"",graphicTop:1,summaryDisabled:1}}},"*")}else if("graphic:data"===e.data.type){if((null===(d=e.data.value)||void 0===d?void 0:d.message_id)!==m)return;h.current=e.data.value}else if("graphic:createSuccess"===e.data.type){if((null===(u=e.data.value)||void 0===u?void 0:u.message_id)!==m||(h.current=e.data.value,!e.data.value.canEdit))return;"thread"===e.data.value.mode&&N(!1)}else e.data.type}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[r.id,null==o?void 0:o.smart_art_id]);let N=(0,v.useCallback)(function(){var e,t;let r=!(arguments.length>0)||void 0===arguments[0]||arguments[0];null===(t=c.current)||void 0===t||null===(e=t.contentWindow)||void 0===e||e.postMessage({type:"graphic:requestData"},"*");let s=window.setTimeout(()=>{var e,t;(null===(e=h.current)||void 0===e?void 0:e.message_id)===m&&(h.current&&h.current.content&&h.current.canEdit&&(0,lP.NK)({message_id:(null===(t=h.current)||void 0===t?void 0:t.message_id)||"",suffixList:[{path:"",suffix:"svg"},{path:"",suffix:"png"}]}).then(async e=>{let t=e.data.files;200===e.status&&Promise.all(t.map(e=>h.current?(0,lD.T)(e.path,h.current[e.type]):void 0)).then(async e=>{var r,s,a,i,l,o,d,c,u,p,f,v;let g=ry.Z.getState().allGraphicData,b={content:(null===(r=h.current)||void 0===r?void 0:r.content)||[],smart_art_id:(null===(s=h.current)||void 0===s?void 0:s.smart_art_id)||(null===(a=g[m])||void 0===a?void 0:a.smart_art_id)||"",current_template:(null===(i=h.current)||void 0===i?void 0:i.current_template)||"",images:t,theme:(null===(l=h.current)||void 0===l?void 0:l.theme)||"",summary:null===(o=h.current)||void 0===o?void 0:o.inputText,svg:null===(d=h.current)||void 0===d?void 0:d.svgString,language:null===(c=h.current)||void 0===c?void 0:c.language,ratio:null===(u=h.current)||void 0===u?void 0:u.ratio};if((null===(p=h.current)||void 0===p?void 0:p.smart_art_id)||(null===(f=g[m||""])||void 0===f?void 0:f.smart_art_id)){let e=await _(lP.KX,b);if(200===e.status){let t=new Date().getTime(),r={...b,...e.data,images:e.data.images.map(e=>{let r=(0,k.lx)(e.path);return r.searchParams.set("t",t.toString()),{...e,path:"".concat(r.toString())}})};n({...g,[m]:r})}}else{delete b.smart_art_id,b={...b,thread_id:x||"",message_id:m||""};let e=await _(lP.Vd,b);if(200===e.status){let r=null===(v=t.find(e=>"png"===e.type))||void 0===v?void 0:v.path;(0,k.lx)(null==r?void 0:r.split("?")[0]).searchParams.set("smart_art_id",e.data.smart_art_id);let s=new Date().getTime(),a={...b,...e.data,images:e.data.images.map(e=>{let t=(0,k.lx)(e.path);return t.searchParams.set("t",s.toString()),{...e,path:"".concat(t.toString())}})};n({...g,[m]:a})}}})}),r&&p(!1),window.clearTimeout(s))},400)},[a,s,n,r.id,h]),E=(0,v.useCallback)(async()=>{if(x)try{var e,t;let r=await (0,lP.b4)({thread_id:x,message_id:m});if(d(r.data),null===(e=r.data)||void 0===e?void 0:e.content){let e=ry.Z.getState().allGraphicData,t={...r.data,images:r.data.images.map(e=>{let t=new Date().getTime(),r=(0,k.lx)(e.path);return r.searchParams.set("t",t.toString()),{...e,path:"".concat(r.toString())}})};n({...e,[m||t.smart_art_id]:t})}(null===(t=r.data)||void 0===t?void 0:t.content)||setTimeout(()=>{C()},10)}catch(e){console.error("Failed to fetch PPT cache:",e)}},[l,C]);(0,v.useEffect)(()=>(!r.id||(null==o?void 0:o.smart_art_id)||(E(),clearTimeout(w.current),w.current=setTimeout(()=>{y(!0)},6e4)),()=>clearTimeout(w.current)),[r.id,null==o?void 0:o.smart_art_id]),(0,v.useEffect)(()=>{if(m&&(null==s?void 0:s[m])){let e=null==s?void 0:s[m];e&&(clearTimeout(w.current),d(e))}},[s,m]);let S=(0,v.useMemo)(()=>{let e=(0,k.lx)("https://smartart.felo.ai");return e.searchParams.append("locale",i),e.searchParams.append("unique_id",m),e.searchParams.append("theme",j?"dark":"light"),e.searchParams.append("v",new Date().getTime().toString()),e.toString()},[i,m,j]);return!a||b||(null==o?void 0:o.smart_art_id)?(0,f.jsx)(f.Fragment,{}):u&&(0,f.jsx)("iframe",{ref:c,allow:"clipboard-write",src:S,className:"absolute top-0 opacity-0"},m)});var lz=e=>{var t,r;let{toolsData:s,thread:n,threadId:a}=e,{setGraphicQueryData:i,graphicQueryData:l,allGraphicData:o,setAllGraphicData:d,setShowGraphicModel:c}=(0,ry.Z)(),{isMyThread:u}=(0,tX.Z)(),p=(0,g.useLocale)(),h=(0,g.useTranslations)(),m=(0,th.ZP)(e=>e.isLogin),[x,b]=(0,v.useState)(null),y=(0,v.useRef)(null),[w,j]=(0,v.useState)(!1),C=(0,rt.Z)(),_=(0,v.useRef)(void 0),{language:N}=(0,iD.Z)(),E=s.id,S=(null===(t=s.metadata)||void 0===t?void 0:t.thread_short_id)||a,[T,F]=(0,v.useState)(!1);(0,v.useEffect)(()=>{let e=setTimeout(()=>{F(!0)},6e4);return()=>clearTimeout(e)},[]);let{isDark:L}=(0,rY.Z)(),M=(0,v.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!E)return;let t="\n      Title:".concat(s.params.title,"\n      Description:").concat(s.params.description,"\n      Content:").concat(s.params.content,"\n      ");(u||(null==x?void 0:x.smart_art_id))&&(i({messageId:E,threadId:S,language:"auto",inputText:t,query:"",canEdit:u,template:void 0,mode:"thread",smart_art_id:null==x?void 0:x.smart_art_id}),e?c(!0):j(!0),(null==x?void 0:x.smart_art_id)||(0,tb.fk)(ty.U.SMARTART_CREATE,{messageId:E,threadId:S,query:""},!0))},[x,u,N,p,s,i,C,E,S]);(0,v.useCallback)(async e=>{tg.Z.info(h("drive.download_loading"),99999);try{var t,r,s,n;if("png"===e||"svg"===e){let s=(null==x?void 0:null===(r=x.images)||void 0===r?void 0:null===(t=r.find(t=>t.type===e))||void 0===t?void 0:t.path)||"";await (0,lZ.l)(s,"export.".concat(e)),tg.Z.close()}else if("pdf"===e){let e=(null==x?void 0:null===(n=x.images)||void 0===n?void 0:null===(s=n.find(e=>"png"===e.type))||void 0===s?void 0:s.path)||"";await (0,lZ.F)({title:"export",imageUrl:e,onProgress:e=>{tg.Z.info(h("drive.download_loading"),99999)},onError:e=>{tg.Z.error("".concat(e),3e3)},onComplete:()=>{tg.Z.close()},scale:1.5,quality:1,pageMargin:.8})}}catch(e){tg.Z.close(),tg.Z.error("".concat(e),3e3)}},[s,x]),(0,v.useEffect)(()=>{if(null==x?void 0:x.smart_art_id)return;let e=e=>{var t,r,n,a,i,l,o;if(e.data.type){if("graphic:init"===e.data.type){if(E!==(null===(t=e.data.value)||void 0===t?void 0:t.unique_id))return;let{anonymousToken:l}=th.ZP.getState(),o=th.ZP.getState().userInfo,d=(null==o?void 0:o.user_org_member)?null==o?void 0:null===(n=o.user_org_member)||void 0===n?void 0:null===(r=n.org_member)||void 0===r?void 0:r.uid:null==o?void 0:o.uid;null===(i=y.current)||void 0===i||null===(a=i.contentWindow)||void 0===a||a.postMessage({type:"graphic:init",value:{tokens:{login:(0,r9.Nh)(),anonymous:l,visitor:(0,r9.Kd)()},options:{uid:d,canEdit:u,mode:"thread",thread_id:S,message_id:E,language:"auto",inputText:s.params.content||"",smart_art_id:null==x?void 0:x.smart_art_id,note_id:""}}},"*")}else if("graphic:data"===e.data.type){if((null===(l=e.data.value)||void 0===l?void 0:l.message_id)!==E)return;_.current=e.data.value}else if("graphic:createSuccess"===e.data.type){if((null===(o=e.data.value)||void 0===o?void 0:o.message_id)!==E||(_.current=e.data.value,!e.data.value.canEdit))return;"thread"===e.data.value.mode&&A(!1)}else e.data.type}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[l,E,null==x?void 0:x.smart_art_id]);let A=(0,v.useCallback)(function(){var e,t;let r=!(arguments.length>0)||void 0===arguments[0]||arguments[0];null===(t=y.current)||void 0===t||null===(e=t.contentWindow)||void 0===e||e.postMessage({type:"graphic:requestData"},"*");let s=window.setTimeout(()=>{var e,t;(null===(e=_.current)||void 0===e?void 0:e.message_id)===E&&(_.current&&_.current.content&&_.current.canEdit&&(0,lP.NK)({message_id:(null===(t=_.current)||void 0===t?void 0:t.message_id)||"",suffixList:[{path:"",suffix:"svg"},{path:"",suffix:"png"}]}).then(e=>{let t=e.data.files;200===e.status&&Promise.all(t.map(e=>_.current?(0,lD.T)(e.path,_.current[e.type]):void 0)).then(e=>{var r,s,a,i,l,o,c,u,p,h,m;let f=ry.Z.getState().allGraphicData,v={content:(null===(r=_.current)||void 0===r?void 0:r.content)||[],smart_art_id:(null===(s=_.current)||void 0===s?void 0:s.smart_art_id)||(null===(a=f[E])||void 0===a?void 0:a.smart_art_id)||"",current_template:(null===(i=_.current)||void 0===i?void 0:i.current_template)||"",images:t,theme:(null===(l=_.current)||void 0===l?void 0:l.theme)||"",summary:null===(o=_.current)||void 0===o?void 0:o.inputText,svg:null===(c=_.current)||void 0===c?void 0:c.svgString,language:null===(u=_.current)||void 0===u?void 0:u.language,ratio:null===(p=_.current)||void 0===p?void 0:p.ratio};(null===(h=_.current)||void 0===h?void 0:h.smart_art_id)||(null===(m=f[E||""])||void 0===m?void 0:m.smart_art_id)?(0,lP.KX)(v).then(e=>{if(200===e.status){let t=new Date().getTime(),r={...v,...e.data,images:e.data.images.map(e=>{let r=(0,k.lx)(e.path);return r.searchParams.set("t",t.toString()),{...e,path:"".concat(r.toString())}})};d({...f,[E]:r})}}):(delete v.smart_art_id,v={...v,thread_id:S||"",message_id:E||""},(0,lP.Vd)(v).then(e=>{if(200===e.status){var r;let s=null===(r=t.find(e=>"png"===e.type))||void 0===r?void 0:r.path,a=(0,k.lx)(null==s?void 0:s.split("?")[0]);a.searchParams.set("thread_id",S),a.searchParams.set("message_id",E),a.searchParams.set("smart_art_id",e.data.smart_art_id),(0,lP.wt)(n.rid,{content:a.toString()});let i=new Date().getTime(),l={...v,...e.data,images:e.data.images.map(e=>{let t=(0,k.lx)(e.path);return t.searchParams.set("t",i.toString()),{...e,path:"".concat(t.toString())}})};d({...f,[E]:l})}}))})}),r&&j(!1),window.clearTimeout(s))},400)},[u,o,n.rid,l,d,E,_]),P=(0,v.useCallback)(async()=>{if(S)try{var e,t;let r=await (0,lP.b4)({thread_id:S,message_id:E});if(b(r.data),null===(e=r.data)||void 0===e?void 0:e.content){let e=ry.Z.getState().allGraphicData,t={...r.data,images:r.data.images.map(e=>{let t=new Date().getTime(),r=(0,k.lx)(e.path);return r.searchParams.set("t",t.toString()),{...e,path:"".concat(r.toString())}})};d({...e,[E||t.smart_art_id]:t})}(null===(t=r.data)||void 0===t?void 0:t.content)||setTimeout(()=>{M()},100)}catch(e){console.error("Failed to fetch PPT cache:",e),C.error(h("error.fetch_failed"))}},[m,E,S,M,C]);return((0,v.useEffect)(()=>{S&&E&&P()},[S,E]),(0,v.useEffect)(()=>{E&&(null==o?void 0:o[E])&&b(null==o?void 0:o[E])},[o,E]),(null==x?void 0:null===(r=x.images)||void 0===r?void 0:r.length)||!u||T)?(0,f.jsx)(f.Fragment,{}):w&&(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:"cursor-pointer",style:{cursor:E?"pointer":"not-allowed",opacity:E?1:.5},children:[(0,f.jsx)("div",{className:"py-4",children:h("graphic.text")}),(0,f.jsxs)("div",{className:"relative p-4 flex items-center justify-center rounded-xl overflow-hidden min-h-[200px] transition-[height] mb-4 border border-[#E4E7EC] dark:border-[#333741] duration-500 ease-in-out bg-theme-bg-100 dark:bg-theme-bg-dark-100",children:[(0,f.jsx)(nL.c,{}),(0,f.jsx)("iframe",{ref:y,allow:"clipboard-write",src:(()=>{let e=(0,k.lx)("https://smartart.felo.ai");return e.searchParams.append("locale",p),e.searchParams.append("unique_id",E),e.searchParams.append("theme",L?"dark":"light"),e.searchParams.append("v",new Date().getTime().toString()),e.toString()})(),className:"absolute top-0 opacity-0"})]})]})})},lO=r(90515);let lB=(0,tt.Z)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),lq=(0,tt.Z)("bell-off",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]]);function lH(){let e=(0,g.useTranslations)(),[t,r]=(0,v.useState)("default");(0,v.useEffect)(()=>{try{r(Notification.permission)}catch(e){console.log("error",e),r("denied")}},[]);let s=async()=>{try{"default"===Notification.permission&&(await Notification.requestPermission(),r(Notification.permission))}catch(e){console.log("error",e),r("denied")}};return(0,f.jsxs)("div",{className:"flex",children:["granted"===t&&(0,f.jsx)(n3.pn,{delayDuration:0,children:(0,f.jsxs)(n3.u,{children:[(0,f.jsx)(n3.aJ,{asChild:!0,children:(0,f.jsxs)("div",{className:"flex items-center cursor-pointer ml-auto",children:[(0,f.jsx)(lB,{size:16,className:"mr-2"}),(0,f.jsx)("span",{className:"text-base leading-none",children:e("step.enable")})]})}),(0,f.jsx)(n3._v,{className:"bg-[#353B46] text-white dark:bg-[#353B46] dark:text-white",children:e("step.notifyWhenComplete")})]})}),"denied"===t&&(0,f.jsx)(n3.pn,{delayDuration:0,children:(0,f.jsxs)(n3.u,{children:[(0,f.jsx)(n3.aJ,{asChild:!0,children:(0,f.jsx)(lq,{size:16,className:"ml-auto cursor-pointer"})}),(0,f.jsx)(n3._v,{className:"bg-[#353B46] text-white dark:bg-[#353B46] dark:text-white",children:e("step.notificationsBlocked")})]})}),"default"===t&&(0,f.jsxs)(tK.z,{variant:"outline-primary",onClick:s,className:"ml-auto",children:[(0,f.jsx)(lB,{size:12}),e("step.notifyMe")]})]})}let lV=()=>({sendMessageToParent:e=>{(0,r2.zd)()&&window.parent.postMessage(e,window.location.origin)}});var lU=r(43189);let lW=v.memo(e=>{var t,r,s,n,a,i,l,o,d,c,u,p,h,m,x,b,_,N,E,S,T,F,L,M,A,P,Z,I;let{className:D,queryCategory:R,rid:z,thread:O,ssrShortId:B,shortId:q,fromShortId:H,index:V=0,canEdit:U,isLast:W,pptCover:G,setThreadRid:$,documents:Y,showSteps:X,documentAction:J,firstIsDeep:K,template:Q,ssrUid:ee,isHideReply:et}=e,er=(0,g.useTranslations)(),es=(0,g.useLocale)(),en=new AbortController,{isApp:ea}=(0,re.b)(),ei=(0,th.ZP)(e=>e.isLogin);(0,tX.Z)(e=>e.threads);let el=(0,tX.Z)(e=>e.isMyThread),{list:eo}=(0,tj.Z)(),{setCoverUrl:ed,isShowPptModal:ec}=(0,tZ.Z)(),{setPptDetail:eu}=(0,t8.Z)(),ep=(0,ss.Z)(e=>e.documents),eh=(0,rs.GS)("used"),{allGraphicData:em}=(0,ry.Z)(),{sendMessageToParent:ef}=lV(),{clearPendingQueries:ev,addThread:ex,updateThread:eg,resetThread:eb,deleteThread:ey,updateAnswerWordCount:ew}=(0,tX.Z)(),{selectedSources:ej,setSecondSources:eC}=(0,i_.Z)(),e_=(0,v.useCallback)((e,t)=>{eg(V,e,t)},[V]),{client:ek,isConnected:eN,publish:eE,connectionInfo:eS}=(0,v.useContext)(n_.M),[eT,eF]=(0,v.useState)(!1),[eL,eM]=(0,v.useState)(!1),eA=!!O&&!!O.id,[eP,eZ,eI]=(0,a3.Z)((0,io.eX)(O.tools||[])),[eD,eR]=(0,v.useState)("discovery"===O.mode?(O.recall_contexts||[]).filter(e=>!1!==e.is_expanded):[]),[ez,eO]=(0,v.useState)(O.mode||""),[eB,eq]=(0,v.useState)(z),[eH,eV]=(0,v.useState)([]),[eU,eW]=(0,v.useState)("answer"),{setAgentSources:eG,setIsShowMobileSource:e$,setIsShowAgentSources:eY,isShowAgentSources:eX,isShowMobileSource:eJ,sourceType:eK,editSource:eQ,setEditSource:e0,setThreadIndex:e1,threadIndex:e2}=(0,tP.Z)(),{isMobile:e3}=(0,tU.Z)(),e5=(0,v.useRef)(null),{ref:e6,isSticky:e4}=lr(),[e7,e8]=(0,v.useState)(["1",eA&&O.expand_type&&"image"===O.expand_type.source?"2":""]),[e9,te]=(0,v.useState)(!1),[tt,tr,ts]=(0,a3.Z)(O.answer||""),[tn,ta,ti]=(0,a3.Z)(O.reflection_agent_last_answer||""),[tl,to]=(0,v.useState)(O.reasoning||""),[td,tc]=(0,v.useState)(!!O.answer),[tp,tm]=(0,v.useState)(""),[tf,tv,tw]=(0,a3.Z)(void 0),[tk,tE]=(0,v.useState)(O.reflections||[]),[tS,tT,tF]=(0,a3.Z)([]),[tL,tM]=(0,v.useState)(O.topic_tools||[]),tA=(0,v.useRef)(""),tI=O.id||"",tR=O.query||"",tz=O.related_questions,tB=O.relevancy_model_info,tq=O.images||[];null==O||O.model;let tH=(null==O?void 0:null===(t=O.plan_info)||void 0===t?void 0:t.plans)||[],tW=(0,v.useMemo)(()=>{var e;return(null==O?void 0:null===(e=O.recall_contexts)||void 0===e?void 0:e.map(e=>({...e,url:e.link})))||[]},[null==O?void 0:O.recall_contexts]),tG=(0,v.useMemo)(()=>{var e,t,r,s;return(null===(e=(null==O?void 0:null===(s=O.template)||void 0===s?void 0:null===(r=s.sub_topics)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.tools)||[])||void 0===e?void 0:e.findIndex(e=>["mindmap"].includes(null==e?void 0:e.name)))!==-1},[null==O?void 0:null===(r=O.template)||void 0===r?void 0:r.sub_topics]),t$=(0,v.useMemo)(()=>{var e,t,r,s;return(null===(e=(null==O?void 0:null===(s=O.template)||void 0===s?void 0:null===(r=s.sub_topics)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.tools)||[])||void 0===e?void 0:e.findIndex(e=>["smart_graph"].includes(null==e?void 0:e.name)))!==-1},[null==O?void 0:null===(s=O.template)||void 0===s?void 0:s.sub_topics]),tY=(0,v.useMemo)(()=>{var e,t,r,s;return(null===(e=(null==O?void 0:null===(s=O.template)||void 0===s?void 0:null===(r=s.sub_topics)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.tools)||[])||void 0===e?void 0:e.findIndex(e=>["mindmap","ppt_render"].includes(null==e?void 0:e.name)))!==-1},[null==O?void 0:null===(n=O.template)||void 0===n?void 0:n.sub_topics]);(0,v.useEffect)(()=>{if("web_summary"!==O.category&&0===V){tP.Z.getState().setWebSummarySources([]);return}let e=null==O?void 0:O.recall_contexts;if("web_summary"===O.category&&0===V){let t=[];if(e&&e.length>0)for(let r of e)r.snippet&&t.push({link:r.link||"",title:r.title||"",snippet:r.snippet||"",engine_name:r.engine_name||"",source_type:"",is_expanded:!1,other_info:r.other_info});tP.Z.getState().setWebSummarySources(t)}},[O]),(0,v.useEffect)(()=>{eC(tW)},[tW]);let tK=(0,v.useCallback)(e=>{e_("relevancy_model_info",e)},[]),tQ=(0,v.useCallback)(e=>{e_("plan_info.plans",e)},[]),t0=eA?null!==(I=null===(a=O.plan_info)||void 0===a?void 0:a.qr_list)&&void 0!==I?I:[O.query_rewriter_info].filter(Boolean):[],[t1,t2,t3]=(0,a3.Z)(t0),[t5,t6]=(0,v.useState)(!1),[t4,t7,rt]=(0,a3.Z)(null==O?void 0:O.category),[ra,ri]=(0,v.useState)(null),[rl,ro]=(0,v.useState)(!1),[rd,rc]=(0,v.useState)(eA?100:0),ru=(0,nF.Z)(rd),rh=(0,tP.Z)(e=>e.loading),rm=(0,v.useRef)(rh),rf=(0,tP.Z)(e=>e.extensionEnable),rg=(0,tP.Z)(e=>e.setExtensionError),rw=(0,tP.Z)(e=>e.isChat),rC=(0,tP.Z)(e=>e.setIsChat),r_=(0,tP.Z)(e=>e.startSearch),rk=(0,tP.Z)(e=>e.endSearch),rN=(0,tP.Z)(e=>e.startBeginAnswer),rE=(0,tP.Z)(e=>e.willBindTopicId),rS=(0,tP.Z)(e=>e.isTopicReply),rT=(0,tP.Z)(e=>e.isTopicSearchNetwork),rF=(0,v.useRef)({query:"",queryCategory:"",model:"",closeAutoRouting:!1,sources:void 0,documents:void 0}),[rL,rM]=(0,v.useState)(!1),rA=(0,tu.Z)(e=>e.updateItem),rP=(0,v.useRef)(null),[rZ,rI]=(0,v.useState)(!1),[rD,rR]=(0,v.useState)(!1),[rO,rB]=(0,v.useState)(eA&&(null==O?void 0:O.category)==="chat"),[rq,rH]=(0,v.useState)(eA&&((null==O?void 0:O.category)===tJ.J5||(null==O?void 0:O.category)===tJ.Ys)),[rU,rW]=(0,v.useState)(!1),[rG,r$]=(0,v.useState)(!1),[rY,rX]=(0,v.useState)(!1),[rJ,rK]=(0,v.useState)(W),rQ=(0,v.useRef)(null),[r0,r1]=(0,v.useState)(!0),r5=(0,v.useRef)(!1),r6=(0,v.useRef)(""),r4=(0,v.useMemo)(()=>tW.length>0?tW:eH,[eH,tW]),r8=(0,v.useMemo)(()=>[...new Set(r4.map(e=>(0,ap.P)(e.snippet)))].length,[r4]),r9=(0,v.useRef)(O._local_id||""),{getSingleMetric:se,startTimer:st,resetTimers:sn}=(0,au.q)(),[si,sl]=(0,v.useState)([]),sc=async e=>{if(!e)return[];try{let t=Array.from(e.matchAll(/```felo-images\n([\s\S]*?)```/g));return(await Promise.all(t.map(async e=>{try{var t,r;let s=null===(r=e[1])||void 0===r?void 0:null===(t=r.replace(/[\n\r\s]+/g," "))||void 0===t?void 0:t.trim(),n=JSON.parse(s);if(!(null==n?void 0:n.content))return null;let a=await (0,tN.rX)(null==n?void 0:n.content);return{id:a||"",metadata:{thread_short_id:"thread_".concat(a)||0},params:{content:n.content||""},content:n.content||""}}catch(e){return console.error("Error parsing JSON from felo-images block:",e),null}}))).filter(e=>null!==e)}catch(e){return console.error("Error parsing markdown:",e),[]}},su=async e=>{let t=await sc(e);t.length>0&&sl(e=>{let r=new Set(e.map(e=>e.id)),s=t.filter(e=>!r.has(e.id));return 0===s.length?e:[...e,...s]})};(0,v.useEffect)(()=>{su(tt)},[tt]);let sp=(0,v.useRef)(z+"-"+V);(0,v.useEffect)(()=>{sp.current=z+"-"+V},[z,V]);let sh=(0,v.useCallback)(e=>se(e,sp.current),[]),sm=(0,v.useCallback)(e=>{st(e,sp.current)},[st]),sf=(0,v.useCallback)(()=>{sh("startSearchTime")&&!sh("getResultTime")&&(sm("getResultTime"),(0,ao.b)("user_event_answer_start",r9.current),rN(),(0,tb.fk)(ty.U.THREAD_FIRST_CHARACTER_OUTPUT,{query:O.query}))},[rN,sh,sm,O.query]),sv=()=>{sm("startSearchTime"),r_(),(0,tb.Fw)(tR),(0,ao.b)("user_event_query_submit",r9.current)},sx=()=>{clearTimeout(rP.current||void 0),rk(),(0,tb.uu)(z,tR),(0,ao.b)("user_event_answer_end",r9.current),O.id&&e_("_local_id",r9.current);let e=sh("getResultTime");if(e){var t;let r=(e-sh("startSearchTime"))/1e3;(0,sd.I)({eventName:"query_search_time",eventParams:{event_category:"customEvent",event_label:r.toString(),value:1}}),(0,tb.fk)("query_search_time",{value:r.toString()});let s=null===(t=tX.Z.getState().getThreadByIndex(V))||void 0===t?void 0:t.mode;(0,tN.f8)(()=>{let e=sh("startSearchTime"),t=sh("getMqttResultTime");if(!e||!t)return;let r=Math.max(Math.min((t-e)/1e3,300),0).toFixed();(0,ao.a)("user_event_answer_received",r);let n="user_event_answer_received_basic";switch(s){case tJ.NY:n="user_event_answer_received_pro";break;case tJ.iV:n="user_event_answer_received_discovery";break;default:n="user_event_answer_received_basic"}(0,ao.a)(n,r)})}},sg=(0,v.useMemo)(()=>!!(U&&0===V&&W&&!B&&t4&&[tJ.me,tJ.gl].includes(t4))&&!!rO&&!rh,[V,W,U,B,t4,rO,rh]),sb=e=>{"image"===e.source&&!e7.includes("2")&&(e8([...e7,"2"]),e.images&&e.images.length>0&&e_("images",e.images))},sy=e=>{eR(e.filter(e=>!1!==e.is_expanded))},sw=e=>{ru.current<30&&rc(30),sm("firstSourcesTime"),eV(e)},sj=e=>{let t=t3.current||[];t.some(t=>JSON.stringify(t.rewriters)===JSON.stringify(e.rewriters))||(ru.current<50&&rc(50),sm("queryRewriterTime"),t2([...t,e]))},sC=e=>{ru.current<55&&rc(55),sm("secondSourcesTime"),tw.current?e_("recall_contexts",[...tF.current||[],...e]):(tT(e),e_("recall_contexts",e))},s_=e=>{ru.current<70&&rc(70),ta(e)},sk=e=>{sf(),ru.current<95&&rc(95),ri(null),tw.current?tm(e):tr(e),tc(!0)},sN=e=>{ru.current<80&&rc(80),ri(null),to(e)},sE=e=>{ru.current<70&&rc(70),ri(null),tE(e)},sS=e=>{tv(e)};(0,v.useEffect)(()=>{rd>=90&&rd<100&&(e_("tools",eP),e_("reasoning",tl),e_("query_rewriter_list",t3.current),e_("reflection_agent_last_answer",ti.current))},[rd]),(0,v.useEffect)(()=>{rm.current=rh,100===ru.current||!(ru.current>0)||rh||ts.current||(ro(!0),sx(),rc(100))},[rh]),(0,v.useEffect)(()=>{if(0===tX.Z.getState().pendingQueries.length)return;let e=tt.replace(/(`[\s\S]*?`|`.*?`)|\[(\d+)\]/g,(e,t,r)=>t||(r?"":e));ew(V,(e=(e=(0,iN.ZP)(e)).replace(/\n+/g,"\n")).length)},[tt]),(0,v.useEffect)(()=>{rK(W)},[W]);let sT=e=>{rc(100),ru.current=100,e_("related_questions",e)},sF=e=>{e&&(r5.current=!0,"You are not allowed to access this resource"===e&&rn.$.publish("showSubscriptionPlan",void 0)),rc(100),ru.current=100,ri(e)},sL=e=>{if(!eN||!ek)return!1;let t={process_id:r9.current,...e},r=!1;if(!eS)return!1;try{let s=e.short_id,n=e.existing_uuid,a=JSON.stringify({event_name:s?n?"edit_question":"followup_question":"ask_question",data:t});console.log("params...",a),eE(a),r=!0}catch(e){console.log("Failed to send confirmation message:",e)}return r},sM=e=>{if(eq(e.rid),$(e.rid),e_("rid",e.rid),e.short_id){e_("short_id",e.short_id);let t=(0,k.lx)(window.location.href);t.search="",history.replaceState(null,document.title,(0,tN.XU)(t.toString(),e.short_id))}(0,ao.b)("user_event_first_received",r9.current),(0,r2.zd)()&&ef({type:C.BX.THREAD_ACTION_UPDATE_SHORT_ID,value:{short_id:e.short_id}})},sA=e=>{tM(e),e_("topic_tools",e)},sP=e=>{try{ru.current<70&&rc(70);for(var t=0;t<e.length;t++){let r=e[t];if(!r||!r.name)break;r.content===ts.current&&sk(""),r.content===ti.current&&s_(""),eZ(e=>{let t="ppt_render"===r.name||"sandbox"===r.name||"mcp"===r.tool_type||r.name===C.ab;if(0===e.length){if(t)return[...e,r];if(!r.content&&r.params)return[{...r,toolList:[r]}]}if(e.length>0){let s=e[e.length-1];if(s.name===r.name&&!s.content&&!s.params)return[...e.slice(0,-1),r];if(t)return[...e,r];if(!r.content&&r.name===s.name&&("image_generation"===r.name||"image_search"===r.name||"ppt_outline_image_search"===r.name)){let t={...s,toolList:[...s.toolList||[s],r]};return[...e.slice(0,-1),t]}if("image_generation"===r.name||"image_search"===r.name||"ppt_outline_image_search"===r.name)return[...e,r];if(!r.content&&!s.content&&r.params&&s.params&&"image_generation"!==s.name&&"image_search"!==s.name&&"ppt_outline_image_search"!==s.name){let t={...s,toolList:[...s.toolList||[],r]};return[...e.slice(0,-1),t]}if(!r.content&&r.params&&s.content){let t={...r,toolList:[r]};return[...e,t]}}return[...e,r]})}e.length>0&&t6(!0),(null==e?void 0:e.findIndex(e=>"ppt_render"===e.name))!==-1?eF(!0):(null==e?void 0:e.findIndex(e=>"graphic_render"===e.name))!==-1&&eM(!0)}catch(t){console.error("onTools error:",t),eZ(t=>[...t,...e])}},sZ=e=>{(null==e?void 0:e.length)>0&&eZ(t=>[...t,...e])},sI=e=>{if(e)try{let t=Array.isArray(e)?e:[e];eZ(e=>e.map(e=>{if(e.toolList&&e.toolList.length>0)return{...e,toolList:e.toolList.map(e=>{var r,s;return{...e,call_result:null!==(s=null===(r=t.find(t=>{var r;return(null===(r=t.tool_call)||void 0===r?void 0:r.id)===e.id||t.id===e.id}))||void 0===r?void 0:r.call_result)&&void 0!==s?s:e.call_result}})};let r=t.find(t=>{var r;return(null===(r=t.tool_call)||void 0===r?void 0:r.id)===e.id||t.id===e.id});return r?{...e,call_result:r.call_result}:e}))}catch(e){console.log("error",e)}},sD=()=>{e_("hide_reply",!0)},sR=e=>{if(e){switch(e&&e_("category",e),e){case"web_summary":break;case"document":rI(!0);break;case"scholar":rR(!0);break;case"chat":0==V&&(rB(!0),rC(!0));break;case tJ.J5:case tJ.Ys:rH(!0)}r$(!0),sm("threadTypeTime")}},sz=e=>{e&&e_("source",e)},sO=e=>{let t;if(!e)return;let{message_id:r,rid:s,query:n,deduction:a,thread_info:{short_id:i,thread_type:l},message_auto_model:o}=e;if(eq(s),ri(null),ro(!0),e_("id",r),rE){let e=eo.findIndex(e=>e.short_id===rE);-1!==e&&(t=eo[e])}if(!tI&&tu.Z.getState().inited){let e={rid:i,query:n,topic:t,category:rt.current||tJ.gl,thread_type:l,...r6.current&&{agent_code:r6.current}};tu.Z.getState().addItem(e),(0,r2.zd)()&&(0,lU.W)("updateSidebarHistory",e)}t&&rn.$.publish("updateCurrentThreadTopic",{threadId:i,topic:t}),a&&a.model&&!o&&e_("model",a.model)},sB=async e=>{(null==e?void 0:e.type)==="POINTS"&&await rs.ZP.getState().refreshPointsInfo()<=0&&rW(!0)},sq=()=>{rc(100),ru.current=100,e_("answer",ts.current),e_("tools",eI.current),sx(),t6(!1);let e=tX.Z.getState().pendingQueries;if(e.length>0){if(V===e.length-1){ev();return}let t=V+1,r=e[t].query;if(!r)return;ex({_local_id:(0,j.x0)(),query:r,short_id:q||"",query_from:"agent",category:e[t].category,thread_type:y.yG,topic_id:e[t].topic_id,template:tX.Z.getState().threads[0].template})}else{if((0,t9.s2)()||ea)return;if(document.hidden&&"granted"===Notification.permission&&tA.current===tJ.iV&&(new Notification(er("step.reportReady"),{body:(0,i7.Hl)(tR,100),icon:"/favicon.ico"}).onclick=function(){window.focus(),this.close()}),Q){if(!(0,r2.zd)())return;let e=eI.current||[],t=tX.Z.getState().threads[0];e.some(e=>e.name===C.fc)&&(console.log("post message to create outline:",t.short_id),ef({type:C.BX.PPT_ACTION_CREATE_OUTLINE,value:{short_id:t.short_id}})),e.some(e=>e.name===C.VR)&&(console.log("post message to create html:",t.short_id),ef({type:C.BX.PPT_ACTION_HTML_GENERATED,value:{short_id:t.short_id}})),rn.$.publish("pptThreadDone",void 0)}}},sH=e=>{try{if(e){let t=location.pathname.replace(/^\/search\//,"");tu.Z.getState().updateItem({rid:t||"",query:e}),tX.Z.getState().setIsUpdateTitle(!0)}}catch(e){console.log("onUpdateTitle error",e)}},sV=()=>{eb(V),sk(""),rc(0),t2([]),r$(!1),t6(!1),eV([]),ro(!1),rM(!1),rI(!1),rR(!1),rH(!1),sn(),e8(["1"]),eZ([])},sU=async e=>{let{type:t,params:r}=e,{query:s="",mode:n,model:a="",queryCategory:i="",closeAutoRouting:l=!1,sources:o}=r;rh&&(en.abort(),await (0,tx.jB)(O.rid),tP.Z.getState().endSearch(),tr(""),e_("related_questions",[]),rP.current&&(clearTimeout(rP.current),rP.current=null));let d="";switch(t){case"query":s&&e_("query",s),0===V&&rA({rid:q||B||z,query:s}),n===tJ.iV&&tP.Z.getState().setIsDiscovery(!0),d=ty.U.THREAD_REANSWER_QUERY;break;case"pro":d=ty.U.THREAD_REANSWER_PRO;break;case"discovery":d=ty.U.THREAD_REANSWER_DISCOVERY;break;case"model":e_("model",a),d=ty.U.THREAD_REANSWER_4OMINI;break;case"category":d=ty.U.THREAD_REANSWER_CHAT;break;case"routing":d=ty.U.THREAD_REANSWER_FORCE_SEARCH;break;case"sources":d=ty.U.THREAD_REANSWER_DELETE_SOURCES}(0,tb.fk)(d,{query:s},!0),n===tJ.iV&&tP.Z.getState().setIsDiscovery(!0),rF.current={query:s,mode:"basic"===t?tJ.R_:n,model:a,queryCategory:i,closeAutoRouting:l,sources:o,documents:tY?(null==Y?void 0:Y.length)?Y:ep:Y,..."pro"===t&&!n&&{mode:tJ.NY}};let c=document.querySelectorAll(".thread-item");window.requestAnimationFrame(()=>{c[V].scrollIntoView({behavior:"smooth"})}),sV(),en&&rh&&en.abort(),eY(!1),e$(!1),sK("answer"),r9.current=(0,j.x0)(),sG(en),rF.current={query:"",mode:void 0,model:"",queryCategory:"",closeAutoRouting:!1,sources:void 0};let{setSelectedSources:u,setLastSelectedIndex:p}=i_.Z.getState();u([]),p(null)},sW=()=>{rP.current&&clearTimeout(rP.current),rP.current=setTimeout(()=>{r5.current||(sF("Service not responding"),sx(),(0,ao.b)("user_event_answer_timeout",r9.current))},18e4)},sG=async e=>{var t,r,s,n,a,i,l;let o;let d=Object.values(rF.current).some(Boolean),c=tX.Z.getState().threads[V];if(c&&c.id){sR(c.category),ro(!0);return}sv(),rc(10);let u=(null==c?void 0:c.answer)?sa:rf?so:sa,p=(()=>{if(rF.current.queryCategory)return rF.current.queryCategory;if(R)return R;if((0,r2.N0)()||"default"===tP.Z.getState().from)return"google";let e=sessionStorage.getItem(tJ.sd);return rf?e:e&&!["google","social","scholar","document"].includes(e)?"google":e||"google"})();t7(p),rB("chat"===p);let h=q||B;H?h=V||d?h:H:V||d||(h="");let m=p;0==V&&rC("chat"===p),0===V||rF.current.queryCategory||X||("chat"!==p||rw||(m="google"),rB(rw),m=rw?"chat":m);let f=tP.Z.getState().proSelected?tJ.NY:tJ.R_,{subscriptionInfo:v}=rs.ZP.getState(),{deviceUserInfo:x}=th.ZP.getState(),g=x&&x.pro_count>0;if(v&&eh||g||(f=tJ.R_),f===tJ.NY){let e=tP.Z.getState().getAndResetDiscovery();t6(e||(null==c?void 0:c.thread_type)===y.yG),e&&m!==tJ.aI&&(f=tJ.iV)}V>0&&f===tJ.iV&&!K&&(f=tJ.NY);let b=null==c?void 0:c.query,{sources:j,closeAutoRouting:C,model:_,mode:k}=rF.current,N=k||f,E="";c.template&&(E=(null===(n=c.template.sub_topics)||void 0===n?void 0:null===(s=n[0])||void 0===s?void 0:s.llm_model)||tP.Z.getState().agentModelList[0].value||"");let S=E||tP.Z.getState().selectedModel,T=N===tJ.R_?"":S,F=_||T,L=localStorage.getItem(n5.J.GTAG_EVENT_ACTIVATION)||th.ZP.getState().anonymousToken;c.template&&N===tJ.iV&&(N=tJ.NY),eO(N),tA.current=N,e_("mode",N),e_("model",F),e_("created_at",new Date().toISOString()),e_("device_id",L),e_("contexts_from",m),tc(!1),to(""),tv(void 0),tm(""),tc(!1),to(""),eR([]),tE([]),tT([]),ta(""),eZ([]),r6.current="",r5.current=!1,rS&&(o=rT);let M=c.thread_type;m===tJ.pN&&(M=y.Ts),c.template&&(M=y.yG,r6.current=c.template.code||""),tc(!1),u({mqttConnected:eN,controller:e,query:b,category:m,thread_type:M,contexts:(null==c?void 0:c.contexts)&&(null==c?void 0:c.contexts.length)>0?c.contexts:j&&j.length>0?[{query:b,contexts:j}]:void 0,existing_uuid:d?tI:"",search_uuid:r9.current,originRid:q||B,query_from:null!==(a=null==c?void 0:c.query_from)&&void 0!==a?a:"default",topic_short_id:rE||(null==c?void 0:c.topic_id),web_search:o,short_id:h,auto_routing:!C,onThreadHeaderInfo:sM,model:F,mode:N,preset_contexts:tP.Z.getState().webSummarySources,device_id:L,documents:(null==c?void 0:c.documents)||[],document_action:0===V&&J||"",...c.template&&{agent_info:{agent_id:c.template.short_id||"",steps:(null===(t=c.template.sub_topics)||void 0===t?void 0:t.map(e=>e.title))||[],current_step:V,params:c.template.params}},...c.sub_agent&&{sub_agent:c.sub_agent},...c.template&&{temp_tools:(0,w.Sq)(c.template)},onTools:sP,onHideReply:sD,onThreadType:sR,onQuery:sO,onMessageSource:sz,onRequestBefore:sL,onRequestStart:()=>{sm("requestStartTime")},onFirstSources:sw,onSenondSources:e=>{if(p===tJ.zA){let t=e.map(e=>({post_id:e.id,image_url:e.imageUrl})).flat().filter((e,t,r)=>t===r.findIndex(t=>t.post_id===e.post_id)&&!e.image_url.includes("search_result"));t.length>0&&(0,rj.Xs)(t,"XIAOHONGSHU")}sC(e)},onExpandType:sb,onRelevancyModelInfo:tK,onQueryPlans:tQ,onQueryRewritersInfo:sj,onMarkdown:sk,onRelates:sT,onDone:sq,onReasoningText:sN,onReflectionInfo:sE,onReflectionAnswer:sS,onReflectionAgentAnswer:s_,onQrInfoUrlExpands:sy,onTopicTools:sA,onError:e=>{sF(e),sx()},onSearchModeError:rg,resetTimeout:sW,onPreTools:sZ,onToolCallResult:sI,processValueRef:ru,onUpdateTitle:sH,onDeductionInfo:sB}),b&&z&&!r7.r8&&(0,sd.I)({eventName:"query_felo_search",eventParams:{event_category:"customEvent",event_label:b,value:1}}),b&&z&&(null===(i=(l=window).clarity)||void 0===i||i.call(l,"event","query_felo_search")),"chat"===p&&(0,tb.fk)(ty.U.FELO_SEARCH_CHAT,{query:b,shortId:q},!0),p===tJ.Ts&&(0,tb.fk)(ty.U.FELO_SEARCH_THREAD_VOICE,{query:b,shortId:q},!0),0!==V||d||(null===(r=c.template)||void 0===r?void 0:r.template_type)!==rv.W.CUSTOM||(0,tb.fk)(ty.U.SEARCH_AGENT_SIDEBAR_USE_ISA,{value:1},!0);let A=localStorage.getItem(n5.J.GTAG_EVENT_ACTIVATION),P=await (0,ik.f)();A||(localStorage.setItem(n5.J.GTAG_EVENT_ACTIVATION,P),(0,sd.I)({eventName:"first_search_activation",eventParams:{event_category:"customEvent",event_label:"first_search_activation",value:P}}))},s$=()=>{ey(V),(0,ah.Kp)(q||B||"",tI)},sY=e=>{let t=th.ZP.getState().isLogin,{isPro:r}=rs.ZP.getState();if(["pro","discovery"].includes(e)){if(!t){tg.Z.info(er("please_login_first"));return}if(!eh){r?tg.Z.error(er("pro_search_out_limit")):rn.$.publish("showSubscriptionPlan",void 0);return}"pro"===e&&sU({type:"pro",params:{}}),"discovery"===e&&sU({type:"discovery",params:{mode:tJ.iV,queryCategory:tJ.gl,closeAutoRouting:!0}})}else if("chat"===e)sU({type:"category",params:{model:"gpt-4o",queryCategory:"chat"}});else{if("gpt-4o-mini"===e){sU({type:"basic",params:{}});return}if(!eh){r?tg.Z.error(er("pro_search_out_limit")):rn.$.publish("showSubscriptionPlan",void 0);return}sU({type:"model",params:{model:e,mode:tJ.NY}})}};(0,v.useMemo)(()=>!(0,t9.s2)()||t4!==tJ.Ys&&R!==tJ.Ys||!(0,t9.s2)()||(null==tW?void 0:tW.length)>1,[R,null==tW?void 0:tW.length,t4]),(0,v.useEffect)(()=>{if(!ek)return;let e=(e,t)=>{let r=JSON.parse(t.toString());if(!rm.current&&!ts.current&&100===ru.current||r.process_id!==r9.current)return;if(!r){sF("NetworkError"),sx();return}let{data:s,fail_reason:n,status:a}=r;if("complete"===a)return;if(n){sF("string"==typeof n?n:n.message||JSON.stringify(n)),sx();return}if(!s)return;sm("mqttRequestStartTime"),sr({message:JSON.stringify(s),callbackMethod:{onThreadHeaderInfo:sM,onTools:sP,onHideReply:sD,onThreadType:sR,onQuery:sO,onMessageSource:sz,onFirstSources:sw,onSenondSources:sC,onExpandType:sb,onRelevancyModelInfo:tK,onQueryPlans:tQ,onQueryRewritersInfo:sj,onMarkdown:sk,onReasoningText:sN,onReflectionInfo:sE,onReflectionAnswer:sS,onReflectionAgentAnswer:s_,onTopicTools:sA,onQrInfoUrlExpands:sy,onRelates:sT,onDone:sq,onError:e=>{sF(e),sx()},resetTimeout:sW,onPreTools:sZ,onToolCallResult:sI,onUpdateTitle:sH,onDeductionInfo:sB}});let{type:i}=s;"answer"!==i&&"reasoning"!==i&&"tools"!==i||sh("getMqttResultTime")||sm("getMqttResultTime")};return ek.on("message",e),()=>{ek.off("message",e)}},[ek]),(0,v.useEffect)(()=>(sG(en),()=>{clearTimeout(rP.current||void 0),null==en||en.abort(),rk()}),[]),(0,v.useEffect)(()=>()=>{0===V&&ed("")},[z]),(0,v.useEffect)(()=>{let e=new IntersectionObserver(t=>{let[r]=t;r.isIntersecting&&(rX(!0),e.disconnect())},{root:null,rootMargin:"0px",threshold:.1});return rQ.current&&e.observe(rQ.current),()=>{rQ.current&&e.unobserve(rQ.current)}},[]);let sX=()=>{e_("_local_id",(0,j.x0)())};(0,v.useEffect)(()=>{["en","ja","ko","zh-hant"].includes(null==es?void 0:es.toLocaleLowerCase())||eu({status:tD.nV.SUCCESS})},[es]),(0,v.useEffect)(()=>{var e,t,r,s,n,a,i,l;(null==O?void 0:null===(s=O.template)||void 0===s?void 0:null===(r=s.sub_topics)||void 0===r?void 0:null===(t=r.find(e=>"ppt_generation"===e.title))||void 0===t?void 0:null===(e=t.tools)||void 0===e?void 0:e.find(e=>(null==e?void 0:e.name)==="ppt_render"))&&!O.id?eF(!0):(null==O?void 0:null===(l=O.template)||void 0===l?void 0:null===(i=l.sub_topics)||void 0===i?void 0:null===(a=i.find(e=>"smart_graph"===e.title))||void 0===a?void 0:null===(n=a.tools)||void 0===n?void 0:n.find(e=>(null==e?void 0:e.name)==="smart_graph"))&&!O.id&&eM(!0)},[]),(0,v.useEffect)(()=>(rn.$.subscribe("updateThreadAnswer",e=>{O.id===e.messageId&&sk((null==e?void 0:e.content)||"")}),()=>{rn.$.unsubscribe("updateThreadAnswer",()=>{})}),[O.id]);let sJ=(0,v.useRef)(null),sK=e=>{if(e5.current){let e=e5.current.getBoundingClientRect();(e.top<0||e.bottom>window.innerHeight)&&sJ.current.scrollIntoView({behavior:"smooth",block:"start"})}eW(e)};(0,v.useEffect)(()=>{e2===V&&eQ.length>0&&(sU({type:"sources",params:{sources:eQ,mode:O.mode}}),e0([]))},[eQ]),(0,v.useEffect)(()=>{(async()=>{if(!rh&&O.answer&&el&&O.id)try{let e=O.answer,{markdown:t,hasReplacement:r}=await (0,lO.ad)(e,em,tN.rX,k.lx);e=t;let{markdown:s,hasReplacement:n}=await (0,lO.gs)(e);if(e=s,r||n)try{at.Z.getState().saveEditById(O.id,e,()=>sk(e),()=>{},!1)}catch(e){console.error("Error saving edit:",e)}}catch(e){console.error("Error processing markdown:",e)}})()},[O.answer,O.id,rh,em,el]);let sQ=(0,v.useMemo)(()=>t4===tJ.aI||t4===tJ.J5||t4===tJ.Ys,[t4]);return(0,f.jsxs)(f.Fragment,{children:[Q&&Q.template_type===rv.W.CUSTOM?(0,f.jsx)(lA,{isOpenEditQuery:rL,query:tR,markdown:tt,autoShowPPT:eT,setAutoShowPPT:eF,sources:r4,loading:rh,isVisible:rY,isDocument:rZ,onSaveByQueryEditor:e=>{sU({type:"query",params:{query:e}})},thread:O,tools:eP,className:D,canEdit:U,setIsOpenEditQuery:rM,messageId:tI,rid:(null==O?void 0:O.rid)||eB,processValue:rd,pptCover:G,queryCategory:R,onDelete:s$,shortId:q||B,threadIndex:V,onReanswer:sY,isLast:W,images:tq,error:ra,isAnswerDone:rl,relates:tz,isChat:rO,template:Q,autoShowGraphic:eL,setAutoShowGraphic:eM,isHideReply:et,retryGenerate:sX,isFirstRetry:r0,hideRewriteModel:![tJ.me,tJ.gl,tJ.V9].includes(t4||"")}):(0,f.jsx)("div",{className:(0,t_.cn)("thread-item scroll-mt-28 mb-0 md:mb-10 flex justify-center gap-10 flex-col lg:flex-row break-words thread-container-".concat(tI),D),style:{wordBreak:"break-word"},ref:sJ,children:(0,f.jsxs)("div",{className:"relative flex-grow flex flex-col w-full min-w-[50%] max-w-3xl mx-auto",children:[(0,f.jsx)("div",{ref:e5,className:(0,t_.cn)("w-full z-[10] will-change-auto duration-200 ease-out pb-6",e4?"opacity-0":"opacity-100"),children:rL?(0,f.jsx)(nN,{queryMode:ez,initialQuery:tR,onSave:e=>{sU({type:"query",params:{query:e,mode:ez}})},onCancel:()=>{rM(!1)}}):(0,f.jsx)(nT,{query:tR,canEdit:U,onEditClick:()=>{rM(!rL)}})}),(0,f.jsxs)(a1.mQ,{defaultValue:eU,value:eU,onValueChange:sK,className:"p-0 m-0 h-auto mb-4",children:[(0,f.jsxs)("div",{ref:e6,className:(0,t_.cn)("mb-0 sticky z-[2] top-[-1px] bg-white dark:bg-background","-mt-[50px]"),children:[(0,f.jsx)("div",{className:(0,t_.cn)("line-clamp-1 pt-6 text-lg text-[#30394A] dark:text-white font-bold will-change-auto",e4?"opacity-100 translate-y-0 duration-200 ease-out":"opacity-0 translate-y-2 pointer-events-none duration-0"),children:tR}),(0,f.jsxs)(a1.dr,{className:"rounded-none bg-transparent flex p-0 h-auto gap-5 border-b dark:border-[#353B46] mb-8 w-full",children:[(0,f.jsxs)(a1.SP,{value:"answer",className:(0,tV.Z)("rounded-none border-b-[2px] border-transparent px-0 pb-3 pt-2 m-0 text-[#4B5F7E] text-sm gap-[6px] hover:text-[#30394A] dark:text-[#F3F5F7] hover:dark:text-white","data-[state=active]:bg-background data-[state=active]:shadow-none data-[state=active]:text-[#30394A] dark:data-[state=active]:text-white","data-[state=active]:border-[#30394A] dark:data-[state=active]:border-white","data-[state=active]:font-medium"),children:[ez===tJ.R_&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(rb.TP,{}),er("compare_page.answer")]}),ez===tJ.NY&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(rb.gb,{}),er("compare_page.pro_answer")]}),ez===tJ.iV&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(rb.NI,{}),er("research")]})]}),!sQ&&(0,f.jsxs)(a1.SP,{value:"images",disabled:100!==rd,className:(0,tV.Z)("rounded-none text-base border-b-[2px] border-transparent px-0 pb-3 pt-2 m-0 text-[#4B5F7E] text-sm gap-[6px] hover:text-[#30394A] dark:text-[#F3F5F7] hover:dark:text-white","data-[state=active]:bg-background data-[state=active]:shadow-none data-[state=active]:text-[#30394A] dark:data-[state=active]:text-white","data-[state=active]:border-[#30394A] dark:data-[state=active]:border-white","data-[state=active]:font-medium"),children:[(0,f.jsx)(a8.om,{className:"w-4 h-4"}),er("image")]}),!sQ&&(0,f.jsxs)(a1.SP,{value:"videos",disabled:100!==rd,className:(0,tV.Z)("rounded-none text-base border-b-[2px] border-transparent px-0 pb-3 pt-2 m-0 text-[#4B5F7E] text-sm gap-[6px] hover:text-[#30394A] dark:text-[#F3F5F7] hover:dark:text-white","data-[state=active]:bg-background data-[state=active]:shadow-none data-[state=active]:text-[#30394A] dark:data-[state=active]:text-white","data-[state=active]:border-[#30394A] dark:data-[state=active]:border-white","data-[state=active]:font-medium"),children:[(0,f.jsx)(a8.Hf,{className:"w-4 h-4"}),er("video")]}),(0,f.jsx)("div",{onClick:()=>{if(e3)e1(V),e$(!eJ);else{if(eX&&V!==e2||"think"!==eK&&eX){e1(V);return}eY(!eX),e1(V)}},className:(0,t_.cn)("rounded-none border-0 ml-auto px-0 pb-3 pt-2 text-sm gap-2 flex items-center cursor-pointer text-[#5F7698] dark:text-[#D0D4DC] hover:text-[#30394A] dark:hover:text-white",(rd<90||sQ&&r4.length<1)&&"invisible"),children:e3?(0,f.jsx)(f.Fragment,{children:er("sources")}):(0,f.jsxs)(f.Fragment,{children:[r4.length," ",er("source_from")," →"]})})]})]}),(0,f.jsxs)(a1.nU,{value:"answer",className:"mr-[1px]",children:[(0,t9.s2)()&&t4===tJ.Ts&&(0,f.jsx)(iT,{thread:O}),(0,t9.s2)()&&t4===tJ.Ys&&(null==O?void 0:null===(o=O.recall_contexts)||void 0===o?void 0:null===(l=o[0])||void 0===l?void 0:null===(i=l.other_info)||void 0===i?void 0:i.file_id)&&(0,f.jsx)("div",{className:"mb-4 -mt-3 rounded-xl bg-[#E4E4E7] dark:bg-[#27272A]",children:(0,f.jsx)("img",{alt:(null==O?void 0:null===(c=O.recall_contexts)||void 0===c?void 0:null===(d=c[0])||void 0===d?void 0:d.title)||"image",src:(0,iF.UK)((null==O?void 0:null===(h=O.recall_contexts)||void 0===h?void 0:null===(p=h[0])||void 0===p?void 0:null===(u=p.other_info)||void 0===u?void 0:u.file_id)||""),className:"w-full h-[calc((100vw-40px)*0.8)] object-cover overflow-hidden border-1 rounded-xl cursor-pointer",onClick:()=>{te(!0)}})}),rd<90&&!tt&&!ra&&rh&&(0,f.jsxs)(f.Fragment,{children:[ez===tJ.iV&&!e3&&!ea&&(0,f.jsx)(lH,{}),(0,f.jsx)(iC,{defaultExpanded:t5,defaultDiscoveryModeStyle:O.thread_type===y.yG&&[tJ.iV,tJ.NY].includes(O.mode),query:tR,tools:eP.filter(e=>"TransferToWriteReportAgent"!==e.name),category:t4,languageCount:r8,processValue:rd,queryPlans:tH,relevancyInfo:tB,rewritersInfo:t1,firstSources:eH,secondSources:tW,reasoningText:tl,reasoningEnd:td,sources:r4,reflectionInfo:tk,reflectionAgentAnswer:tn,qrInfoUrlExpands:eD,topicTools:tL},O._local_id+"thread_stepper")]}),(0,f.jsxs)("div",{children:[(!ra||tt)&&(0,f.jsxs)(f.Fragment,{children:[!tG&&t4&&(0,f.jsx)("div",{"data-id":tI,children:(0,f.jsx)(ny,{index:V,thread:O,threadId:q||B,messageId:tI,sources:r4,pptCover:G,threadTypeFrom:t4},O._local_id)}),(0,f.jsx)(rz,{skeleton:rO?"single":"multiple",markdown:tt,sources:r4,rid:(null==O?void 0:O.rid)||eB,loading:rh,isVisible:rY,messageId:tI,isDocument:rZ,reflectionAnswer:tp,reflectionAnswerStart:tf,template:Q,isShowSkeleton:!1}),(null===(m=eP.find(e=>"graphic_render"===e.name))||void 0===m?void 0:m.name)&&(0,f.jsx)(lz,{toolsData:eP.find(e=>"graphic_render"===e.name),thread:O,threadId:q||B}),O.id&&(null==O?void 0:null===(N=O.template)||void 0===N?void 0:null===(_=N.sub_topics)||void 0===_?void 0:null===(b=_.find(e=>"ppt_generation"===e.title))||void 0===b?void 0:null===(x=b.tools)||void 0===x?void 0:x.find(e=>(null==e?void 0:e.name)==="ppt_render"))&&!(0,t9.s2)()&&(0,f.jsx)(iR,{thread:O,setAutoShowPPT:e=>eF(e),pptData:(null==eP?void 0:null===(E=eP.find(e=>{var t,r;return(null==e?void 0:e.name)==="ppt_render"&&(null===(r=e.params)||void 0===r?void 0:null===(t=r.ppt_content)||void 0===t?void 0:t.length)}))||void 0===E?void 0:E.params)||null,autoShowPPT:eT,outline:tt||""}),!ee&&!ra&&rl&&tG?(0,f.jsx)(iL,{thread:O}):null,t$&&O.id&&(0,f.jsx)(lI,{thread:O,threadId:q||B,autoShowGraphic:eL,setAutoShowGraphic:eM}),tG&&t4&&(0,f.jsx)("div",{"data-id":tI,children:(0,f.jsx)(ny,{index:V,thread:O,threadId:q||B,messageId:tI,sources:r4,pptCover:G,threadTypeFrom:t4,isAgentMindmap:tG},O._local_id)}),rD&&(0,f.jsx)("section",{className:"mb-8",children:(0,f.jsx)(nj,{sources:r4,processValue:rd,messageId:tI,thread:O})}),(null===(S=O.metadata)||void 0===S?void 0:S.answer_updated_at)&&(0,f.jsx)("div",{className:"text-[#5F7698] pl-[12px] text-[12px] my-5 h-[16px] flex items-center border-l-4 border-[#E6E9EF] dark:text-[#D0D4DC] dark:border-[#454E5D]",children:er(el?"threadEdit.youEdited":"threadEdit.ownerEdited",{time:lt()(O.metadata.answer_updated_at).format("YYYY/MM/DD HH:mm")})}),ez===tJ.iV&&!ra&&100!==rd&&rh&&!rl&&(0,f.jsx)("div",{className:"flex justify-start items-center ml-[20px] mt-[-20px]",children:(0,f.jsx)("span",{className:"result-loader"})}),(null==O?void 0:O.abort_tag)&&!tt&&!r5.current&&(0,f.jsx)("div",{className:"border rounded-lg p-8 text-[#4B5F7F] dark:text-[#9295A1] my-4 flex justify-center items-center",children:er("skip_answer")}),!ra&&rl&&(0,f.jsx)(ac,{id:O.id,index:V,thread:O,messageId:tI,shortId:q||B,rid:eA?O.rid:eB,query:tR,answer:tp?"".concat(tt,"\n").concat(tp):tt,sources:r4,canEdit:U,onEditQueryClick:rM,onReanswer:sY,isFirst:0===V,isLast:W,mode:O.mode||"",onDelete:s$,hideRewriteModel:![tJ.me,tJ.gl,tJ.V9].includes(t4||""),hideChat:!ei,relates:tz||[],isShowRelates:rJ,setIsShowRelates:rK,pptCover:G,images:tq,category:R||""}),sg&&(0,f.jsx)("section",{className:"mt-8",children:(0,f.jsx)(a4,{shouldUseDiscovery:tR.length>18,onSearch:()=>{sU({type:"routing",params:{queryCategory:tJ.gl,closeAutoRouting:!0}})},onDiscoverySearch:()=>{sU({type:"routing",params:{mode:tJ.iV,queryCategory:tJ.gl,closeAutoRouting:!0}})}})}),(0,f.jsx)("div",{className:(0,t_.cn)("mt-8 border-t dark:border-[#353B46]",100!==rd&&"invisible")}),!tY&&!ra&&(q||B)&&rJ&&tz&&tz.length>0&&(0,f.jsx)("div",{className:"animate-[fadeIn_1s_ease-in-out]",children:(0,f.jsx)(rV,{disabled:rh,shortId:q||B,relates:tz,isFollowUpNew:!U,queryCategory:R})})]}),ra&&(0,f.jsx)(r3,{content:ra||"",markdown:tt,retryGenerate:sX,isFirstRetry:r0})]})]}),(0,f.jsx)(a2,{threadRid:(null==O?void 0:O.rid)||eB,images:tq,query:tR,isDisabled:rh})]})]})}),(0,f.jsx)(i9,{}),(0,f.jsxs)(rp.Vq,{open:e9,onOpenChange:()=>{te(!1)},children:[(0,f.jsx)(nC.T,{children:(0,f.jsx)(rp.$N,{children:(null==O?void 0:null===(F=O.recall_contexts)||void 0===F?void 0:null===(T=F[0])||void 0===T?void 0:T.title)||"image"})}),(0,f.jsx)(rp.cZ,{hideCloseButton:!0,"aria-describedby":void 0,className:(0,tV.Z)("max-w-screen-sm","bg-transparent border-none"),children:(0,f.jsxs)(rp.a7,{className:"w-full max-w-md mx-auto relative",children:[(0,f.jsx)("div",{className:"absolute -top-8 right-2 z-20",children:(0,f.jsx)(rp.GG,{className:"rounded-full p-1 bg-white/80 outline-none dark:bg-gray-700",children:(0,f.jsx)(tC.Z,{size:20})})}),(0,f.jsx)("div",{className:"relative mb-4 -mt-3  flex justify-center z-0 min-h-[200px] rounded-xl bg-[#E4E4E7] dark:bg-[#27272A]",children:(0,f.jsx)(tO.J,{classNames:{img:"max-h-[calc(100vh-160px)]"},radius:"sm",alt:(null==O?void 0:null===(M=O.recall_contexts)||void 0===M?void 0:null===(L=M[0])||void 0===L?void 0:L.title)||"image",src:(0,iF.UK)((null==O?void 0:null===(Z=O.recall_contexts)||void 0===Z?void 0:null===(P=Z[0])||void 0===P?void 0:null===(A=P.other_info)||void 0===A?void 0:A.file_id)||"")})})]})})]}),si.map(e=>(0,f.jsx)(lR,{toolsData:e},e.id)),ea&&ec&&(q||B)?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(rx.Z,{shortId:q||B||""})}):null,(ea||(0,t9.s2)())&&(q||B)&&(0,f.jsx)("div",{className:"!opacity-0 !pointer-events-none",children:(0,f.jsx)(rr,{shortId:q||B||""})})]})}),lG=e=>{let{threads:t,ssrShortId:r,ssrUid:s,fromShortId:n,firstThreadShortId:a,queryCategory:i,rid:l,isMyThread:o,pptCover:d,pendingQueriesLength:c,documentAction:u,isHideReply:p,isFeloIframe:h=!1,setThreadRid:m}=e;return(0,f.jsx)(f.Fragment,{children:t.map((e,v)=>{var x,g;let b=e.short_id||r;return(0,f.jsx)(lW,{className:(0,t_.cn)("last:mb-0 first:pt-0"),query:e.query,queryCategory:i,rid:l,thread:e,ssrShortId:b,shortId:a,fromShortId:n,index:v,canEdit:(o||!1)&&!h,isLast:v===t.length-1,setThreadRid:m,pptCover:v?void 0:d,showSteps:c>0,documentAction:u,firstIsDeep:(null===(x=t[0])||void 0===x?void 0:x.mode)==="discovery",template:(null===(g=t[0])||void 0===g?void 0:g.template)||null,ssrUid:s,isHideReply:p},e._local_id)})})},l$=()=>{let[e,t]=(0,v.useState)(!1),[r,s]=(0,v.useState)(!1);return(0,v.useEffect)(()=>{s((0,r2.zd)()),t(!0)},[]),{isMounted:e,isFeloIframe:r}},lY=e=>{let{fromShortId:t,threads:r,ssrShortId:s,ssrUid:n,firstThreadShortId:a,queryCategory:i,rid:l,isMyThread:o,pptCover:d,pendingQueriesLength:c,documentAction:u,isHideReply:p,scrollbarRef:h,setThreadRid:m}=e,{isMounted:v,isFeloIframe:x}=l$();return(0,f.jsx)("div",{ref:h,className:(0,t_.cn)(rL.Yu.scrollbar,x?rL.Yu.iframeScrollbar:rL.Yu.customScrollbar),children:(0,f.jsxs)("div",{className:(0,t_.cn)(rL.Yu.content,!x&&"mt-12"),children:[t&&!x&&(0,f.jsx)(rP,{threadId:t}),(0,f.jsx)("div",{className:(0,t_.cn)("divide-theme-border-200 dark:divide-theme-border-dark-200"),children:(0,f.jsx)(lG,{threads:r,ssrShortId:s,ssrUid:n,fromShortId:t,firstThreadShortId:a,queryCategory:i,rid:l,isMyThread:o,pptCover:d,pendingQueriesLength:c,documentAction:u,isHideReply:p,isFeloIframe:x,setThreadRid:m})})]})})};var lX=r(86968),lJ=r(28946),lK=r(94247),lQ=r(15729),l0=e=>{let{className:t,showLabel:r,queryCategory:s}=e,n=(0,g.useTranslations)(),{isChat:a,setIsChat:i}=(0,tP.Z)(),l={value:tJ.aI,title:n("extension.chat"),desc:n("extension.chat_desc"),icon:(0,f.jsx)(lJ.Z,{size:20}),visible:!0,disable:!1},o={value:tJ.gl,title:n("extension.all"),desc:n("extension.all_desc"),icon:(0,f.jsx)(a6.Z,{size:20}),visible:!0,disable:!1},[d,c]=(0,v.useState)(!1),[u,p]=(0,v.useState)(o),h=[{value:tJ.gl,title:n("extension.all"),desc:n("extension.all_desc"),icon:(0,f.jsx)(a6.Z,{size:20}),visible:!0,disable:!1},{value:tJ.V9,title:n("extension.all"),desc:n("extension.all_desc"),icon:(0,f.jsx)(a6.Z,{size:20}),visible:!0,disable:!1},{value:tJ.rN,title:n("extension.all"),desc:n("extension.all_desc"),icon:(0,f.jsx)(a6.Z,{size:20}),visible:!0,disable:!1},{value:tJ.aI,title:n("extension.chat"),desc:n("extension.chat_desc"),icon:(0,f.jsx)(lJ.Z,{size:20}),visible:!0,disable:!1},{value:tJ.pN,title:n("extension.social"),desc:n("extension.social_desc"),icon:(0,f.jsx)(lK.Z,{size:20}),visible:!0,disable:!1},{value:tJ.Kp,title:n("extension.academic"),desc:n("extension.academic_desc"),icon:(0,f.jsx)(tp.Od,{className:"w-5 h-5"}),visible:!0,disable:!1},{value:tJ.hs,title:n("extension.document"),desc:n("extension.document_desc"),icon:(0,f.jsx)(lQ.Z,{size:20}),visible:!0,disable:!1},{value:tJ.X7,title:n("extension.twitter"),desc:n("extension.twitter_desc"),icon:(0,f.jsx)(tp.iB,{className:"w-5 h-5"}),visible:!0,disable:!1}];return(0,v.useEffect)(()=>{if(s===tJ.aI)p(o);else{let e=h.find(e=>e.value===s);e&&p(e)}if(s===tJ.V9||s===tJ.aI){i(!0);return}i(!1)},[s]),(0,f.jsxs)(tB.j,{isOpen:d,onOpenChange:e=>c(e),placement:"bottom-start",children:[(0,f.jsx)(e6.e,{delay:0,closeDelay:0,content:n("changeResponseMode"),classNames:{content:["text-white bg-gray-600 dark:bg-[#353535]"]},children:(0,f.jsx)("div",{className:(0,t_.cn)("max-w-fit",t),children:(0,f.jsx)(tq.b,{children:(0,f.jsxs)(tw.A,{variant:"light",size:"sm",className:"text-inherit min-w-0 gap-1 pl-2 pr-1",isDisabled:!1,color:"default",children:[a?l.icon:(()=>{if(s===tJ.aI)return o.icon;let e=h.find(e=>e.value===s);return e?e.icon:null})(),r&&(a?l.title:(()=>{if(s===tJ.aI)return o.title;let e=h.find(e=>e.value===s);return e?e.title:null})()),(0,f.jsx)(a9.Z,{className:"opacity-60",size:16})]})})})}),(0,f.jsx)(tH.g,{className:"p-0",children:(0,f.jsxs)("section",{className:"p-2 w-60",children:[(0,f.jsxs)("button",{className:(0,t_.cn)("rounded-lg p-4 text-left w-full","hover:bg-[#E6E9EF] dark:hover:bg-[#454E5D] cursor-pointer",!a&&"text-blue-500"),onClick:()=>{i(!1),c(!1)},children:[(0,f.jsxs)("span",{className:"flex font-medium mb-1",children:[u.icon,(0,f.jsx)("span",{className:"ml-2",children:u.title})]}),(0,f.jsx)("span",{className:"opacity-50",children:u.desc})]}),(0,f.jsxs)("button",{className:(0,t_.cn)("rounded-lg p-4 text-left w-full","hover:bg-[#E6E9EF] dark:hover:bg-[#454E5D] cursor-pointer",a&&"text-blue-500"),onClick:()=>{i(!0),c(!1),(0,tb.fk)(ty.U.THREAD_FOLLOWUP_CHAT,{value:"chat"},!0)},children:[(0,f.jsxs)("span",{className:"flex font-medium mb-1",children:[l.icon,(0,f.jsx)("span",{className:"ml-2",children:l.title})]}),(0,f.jsx)("span",{className:"opacity-50",children:l.desc})]})]})})]})},l1=function(e){let{shortId:t,threadRid:r,loading:s,openInNewPage:n,queryCategory:a,onSubmitSucceed:i}=e,l=(0,b.useRouter)(),{pendingQueries:o,clearPendingQueries:d}=(0,tX.Z)(),{isChat:c}=(0,tP.Z)();return{startReply:(e,r,o)=>{let d=null==e?void 0:e.trim();t&&!s&&d&&(tP.Z.getState().startSearch("form"),n?(l.push((0,rM.MD)({query:d,fromShortId:t,category:c?tJ.aI:a}),void 0,{scroll:!0}),(0,tb.fk)(ty.U.THREAD_FOLLOWUP_SHARE_SUBMIT,{shortId:t,query:d},!0)):(tX.Z.getState().addThread({_local_id:(0,j.x0)(),query:d,short_id:t||"",query_from:"followup",template:r,documents:o}),a&&"scholar"===a&&setTimeout(()=>{window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},600)),null==i||i())},stopReply:async()=>{o.length>0&&d();let{threads:e}=tX.Z.getState();r&&(await (0,tx.jB)(r),tP.Z.getState().endSearch(),tX.Z.getState().updateThread(e.length-1,"abort_tag",!0)),(0,tb.fk)(1===e.length?ty.U.FIRST_ANSWER_PAUSED:ty.U.THREAD_FOLLOWUP_ANSWER_PAUSE,{query:e[e.length-1].query},!0)}}},l2=r(2240),l3=e=>{let{className:t,showLabel:r,queryCategory:s,onSelect:n}=e,a=(0,g.useTranslations)(),{isChat:i,setIsChat:l}=(0,tP.Z)(),[o,d]=(0,v.useState)(!1),c={value:tJ.aI,title:a("extension.chat"),desc:a("extension.chat_desc"),icon:(0,f.jsx)(lJ.Z,{size:20})},u={value:tJ.gl,title:a("extension.all"),desc:a("extension.all_desc"),icon:(0,f.jsx)(a6.Z,{size:20})},[p,h]=(0,v.useState)(u),m=[u,c,{value:tJ.V9,title:a("extension.all"),desc:a("extension.all_desc"),icon:(0,f.jsx)(a6.Z,{size:20})},{value:tJ.pN,title:a("extension.social"),desc:a("extension.social_desc"),icon:(0,f.jsx)(lK.Z,{size:20})},{value:tJ.Kp,title:a("extension.academic"),desc:a("extension.academic_desc"),icon:(0,f.jsx)(tp.Od,{className:"w-5 h-5"})},{value:tJ.hs,title:a("extension.document"),desc:a("extension.document_desc"),icon:(0,f.jsx)(lQ.Z,{size:20})},{value:tJ.X7,title:a("extension.twitter"),desc:a("extension.twitter_desc"),icon:(0,f.jsx)(tp.iB,{className:"w-5 h-5"})}];(0,v.useEffect)(()=>{if(s===tJ.aI)h(u);else{let e=m.find(e=>e.value===s);e&&h(e)}s===tJ.V9&&l(!0)},[s]),(0,v.useEffect)(()=>{s===tJ.aI&&l(!0)},[]);let x=e=>{l(e),d(!1),n(),e&&(0,tb.fk)(ty.U.THREAD_FOLLOWUP_CHAT,{value:"chat"},!0)};return(0,f.jsxs)("div",{className:(0,t_.cn)("relative",t),children:[(0,f.jsxs)("button",{className:"flex items-center gap-1 text-sm",onClick:e=>{e.preventDefault(),d(!o)},children:[i?c.icon:(()=>{if(s===tJ.aI)return u.icon;let e=m.find(e=>e.value===s);return e?e.icon:null})(),r&&(()=>{if(i)return a("extension.chat");let e=m.find(e=>e.value===s);return e?e.title:null})(),(0,f.jsx)(a9.Z,{className:"opacity-60",size:16})]}),o&&(0,f.jsx)("div",{className:"fixed inset-0 z-40 bg-black opacity-70",onClick:()=>d(!1)}),o&&(0,f.jsx)("div",{className:"fixed top-auto inset-0 rounded-t-3xl bg-white dark:bg-theme-bg-dark-100 z-50 overflow-y-auto",children:(0,f.jsxs)("div",{className:"p-6 space-y-8",children:[(0,f.jsxs)("button",{className:(0,t_.cn)("rounded-lg w-full text-left","hover:bg-[#E6E9EF] dark:hover:bg-[#454E5D] cursor-pointer",!i&&"text-blue-500"),onClick:()=>x(!1),children:[(0,f.jsxs)("span",{className:"flex items-center font-medium mb-1",children:[p.icon,(0,f.jsx)("span",{className:"ml-2",children:p.title})]}),(0,f.jsx)("span",{className:"opacity-50",children:p.desc})]}),(0,f.jsxs)("button",{className:(0,t_.cn)("rounded-lg w-full text-left","hover:bg-[#E6E9EF] dark:hover:bg-[#454E5D] cursor-pointer",i&&"text-blue-500"),onClick:()=>x(!0),children:[(0,f.jsxs)("span",{className:"flex items-center font-medium mb-1",children:[c.icon,(0,f.jsx)("span",{className:"ml-2",children:c.title})]}),(0,f.jsx)("span",{className:"opacity-50",children:c.desc})]})]})})]})},l5=r(12490),l6=r(96156),l4=e=>{let{className:t,showLabel:r}=e,s=(0,g.useTranslations)(),{isImageChat:n,setIsImageChat:a}=(0,ss.Z)(),i={value:tJ.aI,title:s("extension.chat"),desc:s("extension.chat_desc"),icon:(0,f.jsx)(lJ.Z,{size:20}),visible:!0,disable:!1},l={value:tJ.gl,title:s("extension.all"),desc:s("extension.all_desc"),icon:(0,f.jsx)(a6.Z,{size:20}),visible:!0,disable:!1},[o,d]=(0,v.useState)(!1);return(0,v.useEffect)(()=>{console.log("isImageChat",n);let e=n?tJ.Ys:"";tP.Z.getState().setExtensionSelected(e)},[n]),(0,v.useEffect)(()=>()=>{a(!0)},[]),(0,f.jsxs)(tB.j,{isOpen:o,onOpenChange:e=>d(e),placement:"bottom-start",children:[(0,f.jsx)(e6.e,{delay:0,closeDelay:0,content:s("changeResponseMode"),classNames:{content:["text-white bg-gray-600 dark:bg-[#353535]"]},children:(0,f.jsx)("div",{className:(0,t_.cn)("max-w-fit",t),children:(0,f.jsx)(tq.b,{children:(0,f.jsxs)(tw.A,{variant:"light",size:"sm",className:"text-inherit min-w-0 gap-1 pl-2 pr-1",isDisabled:!1,color:"default",children:[n?i.icon:n?i.icon:l.icon,r&&s(n?"extension.chat":"extension.all"),(0,f.jsx)(a9.Z,{className:"opacity-60",size:16})]})})})}),(0,f.jsx)(tH.g,{className:"p-0",children:(0,f.jsxs)("section",{className:"p-2 w-60",children:[(0,f.jsxs)("button",{className:(0,t_.cn)("rounded-lg p-4 text-left w-full","hover:bg-[#E6E9EF] dark:hover:bg-[#454E5D] cursor-pointer",!n&&"text-blue-500"),onClick:()=>{a(!1),d(!1)},children:[(0,f.jsxs)("span",{className:"flex font-medium mb-1",children:[l.icon,(0,f.jsx)("span",{className:"ml-2",children:l.title})]}),(0,f.jsx)("span",{className:"opacity-50",children:l.desc})]}),(0,f.jsxs)("button",{className:(0,t_.cn)("rounded-lg p-4 text-left w-full","hover:bg-[#E6E9EF] dark:hover:bg-[#454E5D] cursor-pointer",n&&"text-blue-500"),onClick:()=>{a(!0),d(!1),(0,tb.fk)(ty.U.THREAD_FOLLOWUP_CHAT,{value:"chat"},!0)},children:[(0,f.jsxs)("span",{className:"flex font-medium mb-1",children:[i.icon,(0,f.jsx)("span",{className:"ml-2",children:i.title})]}),(0,f.jsx)("span",{className:"opacity-50",children:i.desc})]})]})})]})},l7=r(26894),l8=r(53785),l9=r(34276),oe=()=>{let{threads:e}=(0,tX.Z)();return{threadCurrentFiles:(0,v.useMemo)(()=>e.flatMap(e=>{var t,r;return(null==e?void 0:null===(r=e.recall_contexts)||void 0===r?void 0:null===(t=r.filter(e=>{var t;return null==e?void 0:null===(t=e.other_info)||void 0===t?void 0:t.file_id}))||void 0===t?void 0:t.map(t=>{var r,s,n,a,i,l,o,d,c,u,p;return{id:null==t?void 0:null===(r=t.other_info)||void 0===r?void 0:r.file_id,title:null==t?void 0:t.title,size:(null==t?void 0:null===(s=t.other_info)||void 0===s?void 0:s.size)||0,token:(null==t?void 0:null===(n=t.other_info)||void 0===n?void 0:n.token)||0,pages:(null==t?void 0:null===(a=t.other_info)||void 0===a?void 0:a.pages)||0,progress:(null==t?void 0:null===(i=t.other_info)||void 0===i?void 0:i.progress)||100,status:(null==t?void 0:null===(l=t.other_info)||void 0===l?void 0:l.status)||"completed",type:(null==t?void 0:null===(o=t.other_info)||void 0===o?void 0:o.type)||(null==t?void 0:t.source_type)||"",created_at:(null==t?void 0:null===(d=t.other_info)||void 0===d?void 0:d.created_at)||"",modified_at:(null==t?void 0:null===(c=t.other_info)||void 0===c?void 0:c.modified_at)||"",length:(null==t?void 0:null===(u=t.other_info)||void 0===u?void 0:u.length)||0,words:(null==t?void 0:null===(p=t.other_info)||void 0===p?void 0:p.words)||0,threadId:(null==e?void 0:e.short_id)||""}}))||[]}).reduce((e,t)=>{let r=e.find(e=>e.id===t.id);return r?t.words>r.words&&(r.words=t.words):e.push(t),e},[]),[e])}},ot=r(56885),or=r(70113),os=v.memo(e=>{let{className:t,shortId:r,openInNewPage:s,threadRid:n,queryCategory:a,focus:i,template:l,mode:o,model:d,disabled:c}=e,u=(0,g.useTranslations)(),{isApp:p}=(0,re.b)(),h=(0,rf.Z)(e=>e.features),m=(0,rt.Z)(),{isDark:x}=(0,rY.Z)(),{isMobile:b}=(0,tU.Z)(),[y,j]=(0,v.useState)(""),C=(0,tP.Z)(e=>e.loading),_=(0,tP.Z)(e=>e.setLoading),k=(0,tP.Z)(e=>e.isBeginAnswer),[N,E]=(0,v.useState)(!1),[S,T]=(0,v.useState)(!1),F=ri.Z.getState().pointsConfig,{language:L,setLanguage:M}=(0,iD.Z)(),A=(0,th.ZP)(e=>e.isLogin),P=(0,v.useRef)(null),Z=(0,v.useRef)(null);(0,tP.Z)(e=>e.extensionSelected);let I=(0,v.useRef)(0),D=(0,v.useRef)(null),R=(0,l2.Z)(),{files:z,isUploading:O,isImageUploading:B,setFiles:q,setHomeFiles:H,threadImages:V,setThreadImages:U}=(0,ss.Z)(),{threadCurrentFiles:W}=oe(),{willBindTopicId:G,setWillBindTopicId:$,isTopicReply:Y,isTopicSearchNetwork:X,isSingleAgentCanUse:J}=(0,tP.Z)(),{proUsageQuota:K}=(0,nW.I)(),Q=(0,rs.Oi)("chatDocumentsUsage"),ee=(0,rs.ZP)(e=>e.isSearchOnlyProduct),et=(0,tP.Z)(e=>e.proSelected),{subscriptionInfo:er}=rs.ZP.getState(),es=(0,tP.Z)(e=>e.isDiscovery),[en,ea]=(0,v.useState)(!1),ei=(0,v.useMemo)(()=>b&&l,[b,l]),el=(0,v.useMemo)(()=>ei&&N,[ei,N]);(0,v.useEffect)(()=>{Y?$(G):$("")},[Y]);let eo=(0,v.useMemo)(()=>l&&(0,w.el)(l),[l]),ed=(0,v.useMemo)(()=>l&&(0,w.uI)(l),[l]),ec=(0,v.useMemo)(()=>!!l&&(0,w.u1)(l),[l]),eu=(0,v.useMemo)(()=>{var e;return!!l&&(null===(e=l.params)||void 0===e?void 0:e.some(e=>(0,w.Sc)(e.type)))},[l]),ep=(0,v.useMemo)(()=>l&&l.template_type===rv.W.CUSTOM,[l]),eh=(0,v.useMemo)(()=>l&&(0,w.qG)(l),[l]),em=(0,v.useMemo)(()=>l&&(0,w.mt)(l),[l]),ef=(0,v.useMemo)(()=>{if(!(null==er?void 0:er.pointsUsage))return 0;let{balance:e,total_limit:t}=er.pointsUsage;return t===rl.a.UNLIMITED?1/0:e},[er]),{startReply:ev,stopReply:ex}=l1({shortId:r,threadRid:n,loading:C,openInNewPage:s,onSubmitSucceed:()=>{j("")}}),eg=()=>{Y&&(0,tb.fk)(ty.U.COLLECTION_THREAD_SUBMIT_FOLLOWUP,{query:y,webSearch:X},!0)},eb=async()=>{var e;let{subscriptionInfo:t}=rs.ZP.getState();return t?!!Q||!(0>=((null==t?void 0:null===(e=t.chatDocumentsUsage)||void 0===e?void 0:e.balance)||0))||(rn.$.publish("showSubscriptionPlan",void 0),!1):(ey(),!1)},ey=()=>{rn.$.publish("showLogin",void 0)},ew=async e=>{var t,r,s;if(e.preventDefault(),C||O||B)return;if(l&&!A||es&&!A){ey();return}let n=null!==(r=null==F?void 0:null===(t=F.find(e=>"RESEARCH_AGENT"===e.deduction_item))||void 0===t?void 0:t.points)&&void 0!==r?r:0;if(es&&"number"==typeof ef&&ef<n||l&&0===ef){rn.$.publish("felo_showPaidModal",{type:"INSUFFICIENT_POINTS"});return}if(et&&0===ef&&0===K){rn.$.publish("felo_showPaidModal",{type:"INSUFFICIENT_QUERIES"});return}if(!await (0,l9.f)({query:null==y?void 0:y.trim(),setLoading:_})||a===tJ.J5&&!await eb())return;if($(""),eg(),!l&&ee&&(0,rM.eF)()){m.custom(u("cannot_use_model"));return}let i=l;l&&eo&&(i={...l,params:null===(s=l.params)||void 0===s?void 0:s.map(e=>(0,w.YX)(e.type)?{...e,value:L}:e)}),ev(y,i,z.concat(V).map(e=>e.id)),b&&N&&E(!1)},ej=e=>{var t,r;("/"===e.key||"、"===e.key)&&(null===(t=document.activeElement)||void 0===t?void 0:t.tagName)!=="TEXTAREA"&&(e.preventDefault(),null===(r=Z.current)||void 0===r||r.focus())},eC=(0,v.useMemo)(()=>{var e;return null==z||!z.length||!!((null==z?void 0:z.length)&&(null==z?void 0:null===(e=z.filter(e=>(null==e?void 0:e.status)==="completed"))||void 0===e?void 0:e.length))},[z]);(0,v.useEffect)(()=>(window.addEventListener("keydown",ej),()=>window.removeEventListener("keydown",ej)),[]),(0,v.useEffect)(()=>(0,rd.fu)(e=>{let{value:t}=e;ev(t)}),[r]),(0,v.useEffect)(()=>{let e=()=>{C&&n&&ex()};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[C,n,ex]),(0,v.useEffect)(()=>{if(!b)return;let e=e=>{P.current&&!P.current.contains(e.target)&&N&&!e.target.closest(".language-select-dropdown")&&E(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[N,b,eo,C,S]);let{uploadFiles:e_}=(0,ot.Z)({threadId:r}),ek=(0,v.useCallback)(e=>{var t;if(!r)return;if(W.length>=iF.Mr){m.default(u("search_attached_image.file_count_limit_exceeded_tip",{count:iF.Mr}));return}let s=null===(t=e.clipboardData)||void 0===t?void 0:t.items,n=null==s?void 0:s[0];if(!n||!n.type.startsWith("image"))return;let a=n.getAsFile();a&&(e.preventDefault(),e_([a]))},[r,e_,m,u,W]),eN=(0,v.useMemo)(()=>{if(a===tJ.Ys)return!0;if(a===tJ.Wh||a===tJ.aI){if(!W.length&&!(null==z?void 0:z.length))return!0;if(W.length)return W.some(e=>"image"===e.type);null==z||z.length}return!1},[a,z,W]),eE=(0,v.useMemo)(()=>!V.length&&!(W.length&&eN),[eN,V,W]);(0,v.useEffect)(()=>{if(!b){if(eN||ep||eo){E(!0);return}y.length>(b?0:20)?E(!0):E(!1)}},[y,b,eo,ep,eN]),(0,v.useEffect)(()=>{k&&(q([]),H([]),U([]))},[k]);let eS=(0,v.useMemo)(()=>a===tJ.J5,[a]);return(0,v.useEffect)(()=>{i&&Z.current&&!C&&Z.current.focus()},[i,C]),(0,f.jsxs)("form",{ref:P,className:(0,t_.cn)("relative flex flex-wrap items-center justify-center gap-x-2 gap-y-4","rounded-xl w-full p-3 z-40","border-[2px] border-[#EBEEF3] dark:border-[#545D6F]","bg-white dark:bg-[#202531] shadow-[0_4px_4px_rgba(0,0,0,0.08)]",!N&&"rounded-[4rem]",t),onSubmit:ew,onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),I.current+=1,1===I.current&&T(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),I.current-=1,0===I.current&&T(!1)},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{var t;if(e.preventDefault(),e.stopPropagation(),T(!1),I.current=0,ss.Z.getState().isUploading)return;let{files:r}=e.dataTransfer;console.log("files",r),(null==r?void 0:r.length)&&(null===(t=D.current)||void 0===t||t.handleFiles(r))},children:[c&&(0,f.jsx)("div",{className:"absolute inset-0 rounded-xl bg-black/10 dark:bg-white/30 opacity-50 z-50 cursor-not-allowed"}),el?(0,f.jsx)(f.Fragment,{}):l&&eo?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(e6.e,{delay:0,closeDelay:0,content:l.title,classNames:{content:["text-white bg-gray-600 dark:bg-[#353535]"]},children:(0,f.jsx)(tK.z,{size:"sm",variant:"secondary",className:(0,t_.cn)("text-inherit","rounded-full","w-8 h-8","cursor-default"),children:(0,f.jsx)(iI.x0,{className:"w-4 h-4 text-[#4B5F7E] dark:text-[#F3F5F7]"})})})}):eS||ed?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:(0,t_.cn)("flex items-center justify-center rounded-xl h-full absolute top-0 left-0 right-0 bottom-0 gap-1 pointer-events-none z-50  text-primary border-2 border-dashed border-transparent opacity-100","bg-primary/90 dark:bg-black/90","border-dashed border-primary bg-sky-50/80",!O&&S?"":"hidden",!N&&"rounded-[4rem]"),children:[(0,f.jsx)(lX.Z,{size:22}),u("searchAddition.drop_your_file_here")]}),(0,f.jsx)(l6.Z,{isMini:!0,threadId:r,loading:C,ref:D,historyFiles:W,type:"thread",disabled:!eE,isUseFileNewEngine:!!l&&(0,w.Of)(l)})]}):l&&l.template_type===rv.W.CUSTOM?(0,f.jsx)(e6.e,{delay:0,closeDelay:0,content:l.title,classNames:{content:["text-white bg-gray-600 dark:bg-[#353535]"]},children:(0,f.jsx)("div",{className:"flex items-center justify-center rounded-full w-8 h-8 bg-theme-bg-300 dark:bg-theme-bg-dark-300",children:(0,f.jsx)(iI.x0,{className:"w-4 h-4"})})}):(0,f.jsxs)(f.Fragment,{children:[Y&&(0,f.jsx)(l5.Z,{isReply:!0}),!Y&&(b&&a!==tJ.Ys?(0,f.jsx)(l3,{showLabel:N,queryCategory:a,onSelect:()=>{Z.current&&Z.current.focus()}},r):a===tJ.Ys?(0,f.jsx)(l4,{showLabel:N}):(0,f.jsx)(l0,{showLabel:N,queryCategory:eh?tJ.V9:a},r))]}),(0,f.jsxs)("div",{className:(0,t_.cn)(N?"-order-1 w-full":"flex-1"),children:[el&&(0,f.jsx)(()=>(0,f.jsx)(l8.zF,{open:en,onOpenChange:ea,children:(0,f.jsxs)("div",{className:"flex flex-col gap-2 mb-3 pb-3 border-b border-theme-bg-300 dark:border-theme-bg-dark-300",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,f.jsx)("div",{className:"flex items-center justify-center gap-2",children:l&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(tK.z,{size:"sm",variant:"secondary",className:(0,t_.cn)("text-inherit","rounded-full","w-8 h-8","cursor-default"),children:l.template_type===rv.W.DEFAULT?(0,f.jsx)(iI.WA,{className:"w-4 h-4 text-[#4B5F7E] dark:text-[#F3F5F7]"}):(0,f.jsx)(iI.x0,{className:"w-4 h-4 text-[#4B5F7E] dark:text-[#F3F5F7]"})}),(0,f.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:l.title})]})}),eo&&(0,f.jsx)(l8.wy,{asChild:!0,children:(0,f.jsx)(tK.z,{size:"sm",variant:"ghost",className:"w-6 h-6",children:(0,f.jsx)(a9.Z,{size:12,className:(0,t_.cn)("transition-transform duration-200",en&&"transform rotate-180")})})})]}),eo&&(0,f.jsx)(l8.Fw,{children:(0,f.jsx)("div",{className:"flex items-center gap-2",children:(0,f.jsx)(l7.Z,{hideAutoDetect:eu,language:L,onChangeLanguage:M})})})]})}),{}),(0,f.jsxs)("div",{className:(0,t_.cn)("relative flex items-center justify-center",N&&"px-2"),children:[(0,f.jsx)(nk.Z,{ref:Z,className:(0,t_.cn)("bg-inherit outline-none resize-none transition-height",y.length>tJ.N2&&"text-red-500","custom-scrollbar",b&&!N&&y&&"text-transparent overflow-hidden","w-full"),value:y,onChange:e=>j(e.target.value),onKeyDown:e=>{if(R.current&&13==e.keyCode&&"Enter"===e.key&&!e.shiftKey&&!b){var t;e.preventDefault(),null===(t=P.current)||void 0===t||t.requestSubmit()}},minRows:ep?2:1,maxRows:N?b?4:8:1,spellCheck:!1,onFocus:b?()=>{E(!0)}:void 0,onPaste:eN?ek:void 0,disabled:c}),y?b&&!N&&(0,f.jsx)("div",{className:(0,t_.cn)(N&&"px-2","absolute top-0 left-0 pointer-events-none","truncate max-w-full"),children:y}):(0,f.jsx)("div",{className:(0,t_.cn)(N&&"px-2","absolute top-0 left-0 pointer-events-none","text-gray-400 dark:text-gray-500","truncate max-w-full"),children:u("new_thread_placeholder")})]})]}),eo&&!b&&(0,f.jsx)("div",{className:"flex items-center gap-2",children:(0,f.jsx)(l7.Z,{hideAutoDetect:eu,language:L,onChangeLanguage:M})}),[tJ.Ys,tJ.Wh,tJ.aI].includes(a||"")&&!(eo||eh||!em)&&(0,f.jsx)(or.Z,{ref:D,threadId:r,historyImages:W,disabled:!eN}),(0,f.jsxs)("div",{className:(0,t_.cn)(N&&"ml-auto","flex items-center"),children:[y.length>tJ.N2&&(0,f.jsx)("div",{className:"flex text-sm text-red-600 ml-auto mr-2",children:tJ.N2-y.length}),(0,f.jsx)("div",{className:(0,t_.cn)(N&&"ml-auto mr-4","flex items-center mr-4"),children:!ec&&(0,f.jsx)(ad.ZP,{agentTemplate:l,isFollowUp:!0,mode:o})}),C?(a!==tJ.X7||k)&&n?(0,f.jsx)(e6.e,{closeDelay:0,placement:"top",content:u("stopAnswering"),children:(0,f.jsx)("section",{onClick:ex,className:"cursor-pointer text-[32px]",children:x?(0,f.jsx)(tp.MT,{}):(0,f.jsx)(tp.f$,{})})}):(0,f.jsx)(nL.c,{className:"px-2 h-8",classNames:{circle1:"".concat(x?"border-b-white":"border-b-[#b3bcca]"),circle2:"".concat(x?"border-b-white":"border-b-[#b3bcca]")},size:"sm"}):!y&&p&&h.includes("topBar")?(0,f.jsx)("button",{className:(0,t_.cn)("rounded-3xl px-2","w-8 h-8 bg-theme-bg-300 dark:bg-theme-bg-dark-300","active:opacity-50"),onClick:rd.Yr,children:(0,f.jsx)(rb.jc,{className:"w-4 h-4"})}):(0,f.jsx)("button",{className:(0,t_.cn)("rounded-3xl px-2","w-8 h-8",(null==y?void 0:y.trim())&&y.length<=tJ.N2&&!O&&!B&&eC?"bg-theme-blue-500 dark:bg-theme-blue-800 text-white":"bg-theme-bg-300 dark:bg-theme-bg-dark-300","active:opacity-50"),disabled:!(null==y?void 0:y.trim())||C||y.length>tJ.N2||O||B||!eC,children:(0,f.jsx)(t6.Z,{size:16})})]})]})}),on=r(29197);let oa=(0,tt.Z)("file-pen",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]),oi=e=>{let{shouldPreventNavigation:t,confirmMessage:r,onConfirm:s}=e,n=(0,tc.useRouter)(),a=(0,b.useRouter)(),i=e=>{if(t){if(!window.confirm(r))throw window.history.pushState(null,"",window.location.href),a.events.emit("routeChangeError",Error("Route Cancelled"),e,{shallow:!1}),"Route Cancelled";null==s||s()}},l=e=>{if(t)return e.preventDefault(),e.returnValue=r,r};(0,v.useEffect)(()=>(window.addEventListener("beforeunload",l),a.events.on("routeChangeStart",i),()=>{window.removeEventListener("beforeunload",l),a.events.off("routeChangeStart",i)}),[t,r,s,n])};var ol=r(542),oo=e=>{var t;let{steps:r,onClose:s}=e,n=(0,g.useTranslations)(),{isDark:a}=(0,rY.Z)(),{isMobile:i}=(0,tU.Z)(),{threads:l,pendingQueries:o,answerWordCount:d,clearPendingQueries:c}=(0,tX.Z)(),{isBeginAnswer:u}=(0,tP.Z)(),p=(0,v.useMemo)(()=>Math.max(0,l.length-1),[l.length]),h=r[p],m=(0,v.useMemo)(()=>{var e;return null===(e=l[p])||void 0===e?void 0:e.rid},[l,p]),x=(0,v.useMemo)(()=>!u||!m,[u,m]),b=(0,v.useMemo)(()=>o.length>0,[o]),y=(0,v.useMemo)(()=>{var e;return(null===(e=l[0])||void 0===e?void 0:e.category)===tJ.J5},[l.length]),w=(0,v.useMemo)(()=>l.reduce((e,t)=>{var r;return e+((null==t?void 0:null===(r=t.recall_contexts)||void 0===r?void 0:r.length)||0)},0),[l]),j=(0,v.useMemo)(()=>d.reduce((e,t)=>e+t,0),[d]),C=(0,v.useCallback)(async()=>{c(),m&&(await (0,tx.jB)(m),tP.Z.getState().endSearch())},[m]);return oi({shouldPreventNavigation:b,confirmMessage:n("agent.confirm_leave_step"),onConfirm:()=>{s(),C()}}),(0,v.useEffect)(()=>()=>{s(),C(),rm.Z.getState().clearTemplateData(),nJ.Z.getState().clearTemplate()},[]),(0,f.jsx)(nh.w,{className:"px-6 py-4 border-2 dark:border-none dark:bg-[#353B46]",children:(0,f.jsxs)("div",{className:"flex flex-col",children:[(0,f.jsxs)("div",{className:(0,t_.cn)("flex items-center justify-between gap-2"),children:[(0,f.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[b?(0,f.jsx)(nL.c,{size:"sm",className:"text-primary"}):(0,f.jsx)(iI.Ps,{className:"w-5 h-5 dark:text-white flex-shrink-0"}),(0,f.jsxs)("div",{className:"flex items-center gap-2 flex-wrap min-w-0 flex-1",children:[(0,f.jsx)("span",{className:"text-gray-600 dark:text-white text-base font-semibold whitespace-nowrap flex-shrink-0",children:n.rich("agent.research_step",{current:l.length||1,total:r.length||1,strong:e=>(0,f.jsx)("span",{className:"font-semibold text-blue-500",children:e})})}),!i&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"h-4 border-l border-gray-200 flex-shrink-0"}),(0,f.jsx)("div",{className:"min-w-0 flex-1",children:(0,f.jsx)("span",{className:"text-sm text-[#7f94b1] dark:text-gray-400 truncate block",children:h})})]})]})]}),b?(0,f.jsxs)("button",{className:(0,t_.cn)("flex items-center justify-center cursor-pointer gap-1","disabled:opacity-50 disabled:cursor-not-allowed text-primary text-sm"),onClick:()=>{x||C()},disabled:x,children:[(0,f.jsx)(iI.xn,{}),n(x?"step.searching":"stopAnswering")]}):(0,f.jsx)(tK.z,{variant:"ghost",size:"icon",onClick:s,className:"flex-shrink-0 h-8 w-8",children:(0,f.jsx)(tC.Z,{className:"h-4 w-4 font-bold"})})]}),i&&b&&(0,f.jsxs)("div",{className:"p-2 bg-[#fdf5ef] dark:bg-[#3c110e] text-[#d14625] dark:text-[#e68054] rounded-lg flex justify-start items-start gap-2 mt-2",children:[(0,f.jsx)("div",{className:"flex-none",children:(0,f.jsx)(on.Z,{className:"w-4 h-4 mt-0.5"})}),(0,f.jsx)("div",{className:"flex-1 justify-start text-sm",children:n("stop_reply_warning_modal_description")})]}),(0,f.jsxs)("div",{className:(0,t_.cn)("relative text-sm rounded-lg text-gray-400 dark:text-white","p-3 text-[#30394A] bg-theme-bg-100 dark:bg-theme-bg-dark-100","bg-[#f6f7f9] dark:bg-[#20232A] p-3 mt-4","overflow-hidden"),children:[(0,f.jsx)("span",{children:y?n.rich("agent.sites_researched_file",{count:(null===(t=l[0].recall_contexts)||void 0===t?void 0:t.length)||0,strong:e=>(0,f.jsx)("span",{className:"font-medium text-blue-500 mx-1",children:e})}):n.rich("agent.sites_researched",{count:w,strong:e=>(0,f.jsx)("span",{className:"font-medium text-blue-500 mx-1",children:e})})}),(0,f.jsx)("span",{children:n.rich("agent.creating_report",{count:j,strong:e=>(0,f.jsx)("span",{className:"font-medium text-blue-500 mx-1",children:e})})}),b&&(0,f.jsx)(ol.E,{value:l.length/r.length*100,className:"absolute bottom-0 left-0 right-0 h-1"})]}),(0,f.jsx)("div",{className:"flex items-center justify-end gap-2 text-sm text-gray-500 mt-4",children:!b&&(0,f.jsxs)(tK.z,{size:"sm",onClick:()=>{var e;(null===(e=l[0])||void 0===e?void 0:e.short_id)&&((0,tb.fk)(ty.U.AGENT_SEARCH_THREAD_REWRITE,{threadId:l[0].short_id},!0),(0,r2.N0)()?(0,rd.Te)({threads:l}):rm.Z.getState().setCurrentData({query:l[0].query,threadId:l[0].short_id,hasProSearchThread:!!l.find(e=>"concise"!==e.mode)}))},className:(0,t_.cn)(i&&"w-full"),children:[(0,f.jsx)(oa,{className:"w-4 h-4"}),(0,f.jsx)("span",{children:n("agent.open_document_in_editor")})]})})]})})};let od=e=>{var t,r,s,n,a,i,l,o;let{threads:d,queryCategory:c,firstThreadShortId:u,threadRid:p,isMyThread:h,showTemplateSteps:m,threadTemplateSteps:v,setShowTemplateSteps:x,replyFocus:g,isMobile:b,isHideReply:y,isAlreadyRenderPptOutline:w,isAlreadyRenderHtmlPage:j,isFeloIframe:C}=e,_=!y&&!((null===(t=d[0])||void 0===t?void 0:t.template)&&(null===(s=d[0])||void 0===s?void 0:null===(r=s.template)||void 0===r?void 0:r.template_type)===rv.W.DIRECT_DUTY)&&(h||!(null===(n=d[0])||void 0===n?void 0:n.template)||(null===(i=d[0])||void 0===i?void 0:null===(a=i.template)||void 0===a?void 0:a.template_type)===rv.W.DEFAULT);return 0===d.length?null:(0,f.jsx)("div",{className:(0,t_.cn)("sticky w-full left-2 right-2 bottom-0","lg:left-0 lg:right-auto lg:mx-auto","flex justify-center","z-20"),children:(0,f.jsx)("div",{className:(0,t_.cn)("w-full px-5 pb-4 md:pb-8",!C&&"bg-gradient-to-t from-background via-background/80 to-transparent"),children:(0,f.jsx)(tA.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"override-will-change",transition:{type:"spring",bounce:.4,duration:.8,delay:.5},children:(0,f.jsx)("div",{className:"max-w-3xl mx-auto",children:m?(0,f.jsx)(oo,{steps:v,onClose:()=>x(!1)}):_?(0,f.jsx)(os,{disabled:(w||j)&&C,focus:!!g||!b,shortId:u,threadRid:p,queryCategory:c,openInNewPage:!h,mode:null===(l=d[0])||void 0===l?void 0:l.mode,template:0===d.length?void 0:(null===(o=d[0])||void 0===o?void 0:o.template)||null}):null})})})})},oc=async(e,t)=>{let r=await fetch(t);return fetch(e,{method:"PUT",body:await r.blob()})},ou=e=>{let{canEdit:t}=e,r=(0,g.useTranslations)(),s=(0,g.useLocale)(),{isDark:n}=(0,rY.Z)(),a=(0,to.V)(),i=(0,nJ.Z)(e=>e.template),l=(0,v.useRef)(null),o=(0,v.useRef)(null),{currentData:d,clearCurrentData:c}=(0,ng.Z)();(0,th.gQ)();let{language:u}=(0,iD.Z)(),p=()=>{let e=(null==d?void 0:d.threadId)?"".concat(location.origin,"/search/").concat(d.threadId):location.href;history.replaceState({},"",e),c()},h=(0,v.useRef)(void 0),m=(0,v.useMemo)(()=>!!i&&(0,w.el)(i),[i]),x=(0,nF.Z)(t);(0,v.useEffect)(()=>{let e=e=>{var t,r,s,n,a,l,d,c,p,f;if(e.data.type){if("mindmap:init"===e.data.type){let{anonymousToken:e}=th.ZP.getState(),{currentData:s}=ng.Z.getState();console.log("\uD83D\uDE80 ~ onMessage ~ currentData:",s),null===(r=o.current)||void 0===r||null===(t=r.contentWindow)||void 0===t||t.postMessage({type:"mindmap:init",value:{tokens:{login:(0,r9.Nh)(),anonymous:e,visitor:(0,r9.Kd)()},options:{canEdit:x.current,mode:"thread",thread:null==s?void 0:s.threadId,message:null==s?void 0:s.messageId,language:(null==i?void 0:i.template_type)===rv.W.DIRECT_DUTY&&m?u:null}}},"*")}if("mindmap:data"===e.data.type)h.current=e.data.value;else if("mindmap:themeChange"===e.data.type)(0,tb.fk)(ty.U.MINDMAP_THEME_CHANGE,{value:e.data.value},!0);else if("mindmap:layoutChange"===e.data.type)(0,tb.fk)(ty.U.MINDMAP_LAYOUT_CHANGE,{value:e.data.value},!0);else if("mindmap:setting"===e.data.type)(0,tb.fk)(ty.U.MINDMAP_SETTING_CLICK,{value:e.data.value},!0);else if("mindmap:retry"===e.data.type)(0,tb.fk)(ty.U.MINDMAP_RETRY,{},!0);else if("mindmap:download"===e.data.type){let{currentData:t}=ng.Z.getState();(0,rd.DB)({type:"image/png",filename:"".concat(null==t?void 0:t.query,".png"),data:e.data.value.replace("data:image/png;base64,","")})}else if("mindmap:share"===e.data.type)b(),y(!1),null===(n=o.current)||void 0===n||null===(s=n.contentWindow)||void 0===s||s.postMessage({type:"mindmap:shareSucceed"},"*");else if("mindmap:status"===e.data.type){let{currentData:t}=ng.Z.getState();console.log("mindmap:status",e.data),(null==e?void 0:null===(l=e.data)||void 0===l?void 0:null===(a=l.value)||void 0===a?void 0:a.statusCode)===402&&rn.$.publish("felo_showPaidModal",{type:(null==e?void 0:null===(c=e.data)||void 0===c?void 0:null===(d=c.value)||void 0===d?void 0:d.codeMessage)||null,data:{}}),t&&ng.Z.getState().setCurrentData({...t,status:null==e?void 0:null===(f=e.data)||void 0===f?void 0:null===(p=f.value)||void 0===p?void 0:p.status})}}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[u]);let b=()=>{let{currentData:e}=ng.Z.getState();if(!e)return;let t=t3.Z.getState().current,r=new URL("".concat(location.origin,"/search/").concat(e.threadId));r.searchParams.append("showMindmap",e.messageId),t&&r.searchParams.append("invite",t),a.copy(r.toString()),rc.Z.getState().setShareData({type:"mindmap",link:r.toString()}),rc.Z.getState().setShowThreadModel(!0),(0,tb.fk)(ty.U.THREAD_MINDMAP_SHARE,{id:e.threadId},!0)},y=function(){var e,t;let r=!(arguments.length>0)||void 0===arguments[0]||arguments[0];null===(t=o.current)||void 0===t||null===(e=t.contentWindow)||void 0===e||e.postMessage({type:"mindmap:requestData"},"*");let s=window.setTimeout(()=>{if(d&&h.current&&h.current.svg){var e,t;console.log("getted mindmap close data",h.current);let{threadId:r,messageId:s}=d;(0,rj.KC)({message_id:s,suffix:["png","svg"]}).then(e=>{let t=e.data.images;200===e.status&&Promise.all(t.map(e=>h.current?oc(e.path,h.current[e.type]):void 0)).then(e=>{var n,a,i;console.log("upload mindmap succeed",e);let l={type:(null===(n=h.current)||void 0===n?void 0:n.layout)||"",thread_id:r,message_id:s,covers:t,content:{config:{layout:(null===(a=h.current)||void 0===a?void 0:a.layout)||"",theme:(null===(i=h.current)||void 0===i?void 0:i.theme)||""}}};(0,rj.pK)(l).then(e=>{200===e.status&&(h.current=void 0,tX.Z.getState().updateMindMapItem(r,s,{...l,...e.data}))})})}),(0,rj.M)({thread_id:r,message_id:s,seq:h.current.seq||void 0}),(0,rd.HF)({type:"image/png",filename:"".concat(null==d?void 0:d.query,".png"),data:null===(t=h.current)||void 0===t?void 0:null===(e=t.png)||void 0===e?void 0:e.replace("data:image/png;base64,",""),thread_id:r,message_id:s})}r&&p(),window.clearTimeout(s)},200)};return(0,f.jsx)(rp.Vq,{open:!!d,onOpenChange:()=>{let{currentData:e}=ng.Z.getState();if(!["loading","generate","answering"].includes((null==e?void 0:e.status)||"")){if(!t){p();return}y()}},children:(0,f.jsxs)(rp.cZ,{className:"max-w-screen-xl overflow-hidden",ref:l,onOpenAutoFocus:e=>e.preventDefault(),"aria-describedby":void 0,hideCloseButton:["loading","generate","answering"].includes((null==d?void 0:d.status)||""),children:[(0,f.jsx)(rp.fK,{className:"relative z-10 pointer-events-none",children:(0,f.jsx)(rp.$N,{children:r("mindmap")})}),(0,f.jsx)("iframe",{ref:o,allow:"clipboard-write",className:(0,tV.Z)("-mt-[3.75rem] flex-1 min-h-[80vh] w-full"),src:(()=>{if(!d)return;let e=new URL("https://mindmap.felo.ai");return e.searchParams.append("locale",s),e.searchParams.append("theme",n?"dark":"light"),e.toString()})(),style:{visibility:"hidden"},onLoad:()=>o.current&&(o.current.style.visibility="visible")})]})})};var op=function(e){let{threadId:t,templateData:r,onCompleted:s,onError:n}=e,[a,i]=(0,v.useState)(!1),[l,o]=(0,v.useState)(!1),[d,c]=(0,v.useState)(void 0),[u,p]=(0,v.useState)("gpt-4o"),[h,m]=(0,v.useState)(""),[f,x]=(0,v.useState)([]),g=(0,v.useRef)();return{loading:a,hasContent:l,start:async()=>{g.current&&g.current.abort(),i(!0),m(""),x([]);let e=!1;g.current=new AbortController;try{let{templateQuery:a,template:l}=r||{},o=await (0,tx.eB)(g.current,t,{model:u,style:d,query:a||"",template_id:(null==l?void 0:l.id)||""});if(console.log("\uD83D\uDE80 ~ start ~ response:",o),(null==o?void 0:o.status)!==200){let e=await o.json();if(console.log("\uD83D\uDE80 ~ start ~ json:",e),"You exceeded your current quota"===e.detail){n("exceedQuota"),i(!1);return}throw Error(null==e?void 0:e.detail)}if("application"===o.headers.get("content-type")){let e=await o.json();if("You exceeded your current quota"===e.detail){n("exceedQuota"),i(!1);return}}for await(let t of(0,st.U)(o,g.current.signal)){if(!t.data)return;let r=JSON.parse(t.data);"integration_outline"===r.type?m(r.data.text):"answer"===r.type?(e=!0,m(r.data.text)):"final_contexts"===r.type?x(r.data.sources):"completed"===r.type&&s(r.data.text)}}catch(e){console.log("error",e)}console.log("end"),g.current=void 0,i(!1),o(e)},stop:()=>{var e;null===(e=g.current)||void 0===e||e.abort(),i(!1)},reset:()=>{i(!1),m(""),x([])},content:h,sources:f,model:u,setModel:p,style:d,setStyle:c}};let oh=(e,t)=>e.map(e=>{var r,s,n,a,i,l,o;let d=e.answer;d=(d="".replace("",d)).replace(/((\[\d+\][ \t]*)+)/g,e=>{let t=e.match(/\[\d+\]/g);return t&&t.length>3?t.slice(0,3).join(" "):e});let c=t?null===(a=t.find(t=>t.message_id===e.id))||void 0===a?void 0:null===(n=a.images)||void 0===n?void 0:null===(s=n.covers)||void 0===s?void 0:null===(r=s.find(e=>"png"===e.type))||void 0===r?void 0:r.path:"";d=d.replace(/\[(\d+)\]/g,(t,r)=>{let s=e.recall_contexts[Number(r)-1];return s?"[".concat(r,"](").concat(s.link,") "):t});let u=null===(i=ry.Z.getState().allGraphicData)||void 0===i?void 0:i[e.id],p="",h=(null==u?void 0:null===(o=u.images)||void 0===o?void 0:null===(l=o.find(e=>"png"===e.type))||void 0===l?void 0:l.path)||"";if(h){let e=new URL(h);e.searchParams.set("smart_art_id",u.smart_art_id),p=e.toString()}return"# ".concat(e.query,"\n\n").concat(c?"![mindmap](".concat(c,")"):"","\n\n").concat(d,"\n\n").concat(h?"![graphic](".concat(p,")"):"","\n  \n\n\n ").concat(e.recall_contexts.length>0?':sourceButton{sourcesId="'.concat(e.id,'" count="').concat(e.recall_contexts.length,'"}'):"","\n\n  \n\n")}).join("\n\n"),om=(e,t)=>e+='\n\n:sourceButton{count="'.concat(t.length,'"}'),of=e=>{var t;let r=(0,b.useRouter)(),s=(0,nF.Z)(e.threadId),[n,a]=(0,v.useState)(!1),{threads:i,mindmapList:l}=(0,tX.Z)(),o=(0,g.useTranslations)(),d=e.title||(null===(t=i[0])||void 0===t?void 0:t.query);return{loading:n,convertToNote:async function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];try{a(!0),tg.Z.info(o("drive.importing"));let t=oh(i,l),n=i.map(e=>({id:e.id,sourceList:e.recall_contexts})),c=await (0,al.SB)({thread_id:s.current,title:d.slice(0,100)+" - "+lt()().format("YYYY-MM-DD HH:mm:ss")||"",content:t,other:{sources:n}});200===c.status&&(e?(tg.Z.success(o("drive.import_successful")),window.open("/docs/".concat(c.data.note_id),"_blank")):r.push("/docs/".concat(c.data.note_id)))}catch(e){console.error("Failed to convert thread to note:",e),tg.Z.error(o("drive.import_failed")+e)}finally{a(!1)}(0,tb.fk)(ty.U.DOCS_CREATE,{thread_id:s.current},!0)},convertSummaryToNote:async(e,t)=>{try{a(!0),tg.Z.info(o("drive.importing"));let r=await (0,al.SB)({thread_id:s.current,title:d.slice(0,100)+" - "+lt()().format("YYYY-MM-DD HH:mm:ss")||"",content:om(e,t),other:{sources:t}});200===r.status&&(window.open("/docs/".concat(r.data.note_id),"_blank"),tg.Z.close(),tg.Z.success(o("drive.import_successful")))}catch(e){console.error("Failed to convert thread to note:",e),tg.Z.close(),tg.Z.error(o("drive.import_failed")+e)}finally{a(!1)}}}},ov=(0,tt.Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ox=(0,tt.Z)("circle-stop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]);var og=r(21581);let ob=()=>{var e;let t=(0,g.useTranslations)(),{proUsageQuota:r,isLogin:s,isPro:n}=(0,nW.I)();(0,nF.Z)(r);let{currentData:a,clearCurrentData:i,templateData:l}=(0,rm.Z)(),{convertToNote:o,convertSummaryToNote:d}=of({threadId:(null==a?void 0:a.threadId)||""}),c=(0,v.useRef)(null),u=ri.Z.getState().getPointsByDeductionItem("DOCUMENT_GEN"),p=(0,rs.ZP)(e=>{var t,r,s;return null!==(s=null===(r=e.subscriptionInfo)||void 0===r?void 0:null===(t=r.pointsUsage)||void 0===t?void 0:t.balance)&&void 0!==s?s:0}),[h,m]=(0,v.useState)(0),{loading:x,hasContent:b,content:y,sources:w,start:j,stop:C,model:_,setModel:k,style:N,setStyle:E,reset:S}=op({threadId:null==a?void 0:a.threadId,templateData:l,onCompleted:e=>{L(e)},onError:e=>{m(0),rn.$.publish("showSubscriptionPlan",void 0)}}),T=(0,nF.Z)(y),F=(0,nF.Z)(w);(0,v.useEffect)(()=>{0===h?C():1===h&&j()},[h]),(0,v.useEffect)(()=>{a&&(S(),m(0))},[a]);let L=e=>{d(e||T.current,F.current).then(()=>{(0,tb.fk)(ty.U.AGENT_SEARCH_THREAD_REWRITE_DOC,{threadId:null==a?void 0:a.threadId},!0),i()})};return(0,v.useEffect)(()=>{c.current&&c.current.scrollTo({top:c.current.scrollHeight})},[y]),(0,f.jsx)(rp.Vq,{open:!!a,onOpenChange:()=>i(),children:(0,f.jsxs)(rp.cZ,{className:(0,eY.cn)("flex flex-col overflow-hidden px-0",0===h?"max-w-3xl":"max-w-7xl h-[calc(100%-4em)]","dark:bg-[#464E5D]"),"aria-describedby":void 0,onOpenAutoFocus:e=>e.preventDefault(),children:[(0,f.jsx)(rp.fK,{className:"relative z-10 pointer-events-none pb-2",children:(0,f.jsxs)(rp.$N,{className:"text-base font-bold",children:[0===h?t("rewrite_to_docs.select_title"):1===h?t("rewrite_to_docs.generating_title"):null,x&&(0,f.jsx)(og.Z,{className:"ml-2 inline-block"})]})}),0===h&&(0,f.jsxs)(rp.a7,{className:"pb-6",children:[(0,f.jsxs)("section",{className:"px-0 py-0 mb-4",children:[(0,f.jsx)("div",{className:"space-y-2 border-b-1 border-b-gray-100 pb-4 dark:border-b-[#5C667A]",children:(0,f.jsxs)("button",{className:(0,eY.cn)("flex w-full","justify-between items-center","p-2 px-4 rounded-lg","disabled:opacity-60","bg-[#F6F7F9] dark:bg-[#353B46]",void 0===N&&"text-primary-500 bg-theme-blue-100 dark:bg-[#25364d]"),disabled:x,onClick:()=>E(void 0),children:[(0,f.jsxs)("div",{className:"text-left",children:[(0,f.jsx)("span",{className:"text-base",children:t("rewrite_to_docs.original")}),(0,f.jsx)("p",{className:"text-[12px]",children:t("rewrite_to_docs.original_tips")})]}),void 0===N&&(0,f.jsx)("div",{children:(0,f.jsx)(ts.Z,{size:14})})]})}),(0,f.jsxs)("div",{className:"space-y-2",children:[(0,f.jsx)("h3",{className:(0,eY.cn)("font-bold text-lg my-5",""),children:t("rewrite_to_docs.ai_title")}),(0,f.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[{value:void 0,label:"rewrite_to_docs.original",desc:"rewrite_to_docs.original_tips"},{value:"workplace",label:"rewrite_to_docs.workplace"},{value:"academic",label:"rewrite_to_docs.academic"},{value:"news_release",label:"rewrite_to_docs.news_release"},{value:"speech_script",label:"rewrite_to_docs.speech_script"}].filter(e=>e.value).map(e=>(0,f.jsxs)("button",{className:(0,eY.cn)("flex w-full","justify-between items-center","bg-[#F6F7F9] text-current dark:bg-[#353B46]","p-2 px-4 rounded-lg","disabled:opacity-60",e.value===N&&"text-primary-500 bg-theme-blue-100 dark:bg-[#25364d]"),disabled:x,onClick:()=>E(e.value),children:[(0,f.jsx)("div",{className:"text-left",children:(0,f.jsx)("span",{className:"text-base",children:t(e.label)})}),e.value===N&&(0,f.jsx)("div",{children:(0,f.jsx)(ts.Z,{size:14})})]},e.value))})]})]}),N&&(0,f.jsxs)("div",{className:"h-[42px] box-border border-[#D3D9E4] border-1 rounded-[12px] flex items-center justify-center mb-4 w-full",children:[t("model"),":",(null===(e=[{value:"gpt-4o",label:"GPT-4o",isPro:!0}].find(e=>e.value===_))||void 0===e?void 0:e.label)||"",(0,f.jsx)("span",{className:"ml-2 rounded text-orange-500 bg-orange-200 dark:bg-theme-bg-dark-300 px-2 py-0.5 text-xs",children:"Pro"})]}),(0,f.jsx)(tK.z,{className:"mx-auto block w-full",onClick:()=>{if(void 0===N){o(!0),i();return}if(r<=0||p<=0){if(!s){rn.$.publish("showLogin",void 0);return}rn.$.publish("showSubscriptionPlan",void 0);return}m(h+1)},children:t("rewrite_to_docs.next")}),N&&(0,f.jsx)("div",{className:"text-center mt-2 w-full text-[14px] flex items-center justify-center",children:s?p?(0,f.jsxs)("div",{className:"flex items-center gap-1",children:[t("rewrite_to_docs.rewriting_use",{quota:u})," "]}):(0,f.jsxs)("div",{className:"flex items-center gap-1",children:[t("rewrite_to_docs.rewriting_Upgrade",{quota:u})," ",(0,f.jsx)(tK.z,{variant:"link",className:"px-0 py-0 text-[14px] ml-1",onClick:()=>rn.$.publish("showSubscriptionPlan",void 0),children:t("subscription.upgrade_pro_now")})," "]}):(0,f.jsxs)("div",{className:"flex items-center ",children:[t("rewrite_to_docs.rewriting_login")," ",(0,f.jsx)(tK.z,{variant:"link",className:"px-0 py-0 text-[14px] ml-1",onClick:()=>rn.$.publish("showLogin",void 0),children:t("extension.login")})," "]})})]}),1===h&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(rp.a7,{className:"flex flex-col flex-1 min-h-0",children:y?(0,f.jsxs)("div",{ref:c,className:"flex-1 p-6 rounded-lg bg-theme-bg-100 dark:bg-theme-bg-dark-100 overflow-auto custom-scrollbar prose prose-md dark:prose-invert max-w-full",children:[(0,f.jsx)(rR.Z,{sources:w,children:y}),(0,f.jsx)(og.Z,{className:"ml-2"})]}):x?(0,f.jsxs)("div",{className:"w-full",children:[(0,f.jsx)("div",{className:"animate-pulse rounded-md h-5 w-96 max-w-full bg-theme-bg-100 dark:bg-theme-bg-dark-100 mb-4"}),(0,f.jsx)("div",{className:"animate-pulse rounded-md h-5 w-[80%] bg-theme-bg-100 dark:bg-theme-bg-dark-100 mb-4"}),(0,f.jsx)("div",{className:"animate-pulse rounded-md h-5 w-[60%] bg-theme-bg-100 dark:bg-theme-bg-dark-100 mb-4"}),(0,f.jsx)("div",{className:"animate-pulse rounded-md h-5 w-[40%] bg-theme-bg-100 dark:bg-theme-bg-dark-100 mb-4"}),(0,f.jsx)("div",{className:"animate-pulse rounded-md h-5 bg-theme-bg-100 dark:bg-theme-bg-dark-100 mb-4"}),(0,f.jsx)("div",{className:"animate-pulse rounded-md h-5 bg-theme-bg-100 dark:bg-theme-bg-dark-100 mb-4"}),(0,f.jsx)("div",{className:"animate-pulse rounded-md h-5 w-[80%] bg-theme-bg-100 dark:bg-theme-bg-dark-100 mb-4"}),(0,f.jsx)("div",{className:"animate-pulse rounded-md h-5 w-[50%] bg-theme-bg-100 dark:bg-theme-bg-dark-100 mb-4"})]}):null}),(0,f.jsxs)(rp.cN,{className:"gap-4",children:[(0,f.jsxs)(tK.z,{variant:"outline",className:"mr-auto dark:bg-transparent dark:border-[#5C667A]",onClick:()=>m(h-1),children:[(0,f.jsx)(ov,{}),t("rewrite_to_docs.back")]}),x&&(0,f.jsxs)(tK.z,{onClick:C,children:[(0,f.jsx)(ox,{}),t("rewrite_to_docs.stop")]}),!x&&b&&(0,f.jsxs)(tK.z,{variant:"outline-primary",onClick:()=>L(),children:[(0,f.jsx)(oa,{}),t("note.convert")]})]})]})]})})};var oy=r(61258),ow=r(29847),oj=r(20061),oC=r(67185),o_=r(57207),ok=r(24785);let oN=e=>{let{src:t,alt:r,...s}=e,{shouldRender:n,imageError:a,imageSrc:i}=(0,ok.f)(t||"");return a?null:n?(0,f.jsx)("img",{src:i,alt:r,...s,className:"max-w-full h-auto"}):(0,f.jsx)("span",{className:"inline-block [&~br]:hidden"})},oE=v.memo(e=>{let{children:t,sources:r,rid:s,loading:n,isVisible:a,getExpansionSources:i,isDocument:l}=e,o=(0,v.useRef)(""),[d,c]=(0,v.useState)(!1);(0,v.useRef)([]);let u=(0,v.useRef)(null),{sourceAllMatchList:p}=(0,i_.Z)();(0,v.useEffect)(()=>{let e=(null==r?void 0:r.some(e=>"scholar"===e.engine_name||"scholar"===e.engine))||!1;!n&&a&&(d||!i||e||(c(!0),(0,nX.LY)(s||"")))},[n,a,i,d]);let h=(0,v.useMemo)(()=>{let e=(0,nX.k5)((0,nX.SK)(t||""));return e="".replace("",e),o.current=e,e},[t]);return(0,v.useEffect)(()=>{let e=e=>{u.current&&u.current.contains(e.target)&&(e.preventDefault(),(0,nX.$5)(e))};return document.addEventListener("copy",e),()=>{document.removeEventListener("copy",e)}},[]),(0,f.jsx)("div",{ref:u,className:"w-full overflow-hidden",children:(0,f.jsx)(a$.U,{className:rD().markdown,remarkPlugins:[lh.Z,lp.Z,lu.Z,la.Z,li.Z,ll.Z],rehypePlugins:[lm.Z,lc.Z,[ld.Z,{detect:!1,ignoreMissing:!0}],ln.Z],components:{p:e=>(0,f.jsx)("p",{...e,dir:"auto"}),img:e=>(0,f.jsx)(oN,{...e})},children:h})})});var oS=r(55039),oT=e=>{var t;let{qrcodeData:r,threadList:s,threadData:n}=e,{cacheThreadImg:a,fontSize:i,backgroundTemplate:l,shareTemplate:o,typographyTheme:d}=(0,rc.Z)(),c=(0,g.useTranslations)();return(0,f.jsx)(f.Fragment,{children:0===s.length?(0,f.jsx)("div",{children:(0,f.jsx)(nL.c,{})}):(0,f.jsxs)("div",{className:"threadMarkdownView ".concat(o.parentId),style:{width:"440px",padding:"48px 24px",boxSizing:"border-box",fontSize:"".concat(oC.jo*i,"px"),borderRadius:"12px",fontFamily:d.value,...l.styleObject,...null==l?void 0:null===(t=l.otherOptions)||void 0===t?void 0:t.styleDocument},children:[s.slice(0,3).map((e,t)=>{var r,s,a;let i=0===t?n.title:e.query,o=i.length>35?"".concat(i.slice(0,35),"..."):i;return(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{style:{fontSize:"1.71em",lineHeight:"1.83em",fontWeight:"bold",textAlign:"left",marginBottom:"24px",boxSizing:"border-box",overflowWrap:"anywhere",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden",textOverflow:"ellipsis",maxHeight:"4em",wordBreak:"auto-phrase",color:l.titleColor},className:"shareTitle overflow-hidden overflow-ellipsis line-clamp-2",children:o}),(0,f.jsx)("div",{style:{padding:"24px",borderRadius:"16px",color:"#323232",marginBottom:"24px",...l.bodyStyle,...null==l?void 0:null===(r=l.otherOptions)||void 0===r?void 0:r.styleDocument},className:"shareMarkdown",children:(0,f.jsxs)("div",{children:[0!==t&&(0,f.jsx)("div",{style:{lineHeight:"1.6em",height:"3.2em",paddingBottom:"8px",fontWeight:"bold",textAlign:"left",overflowWrap:"anywhere",...l.threadTitleStyle,color:l.titleColor},className:"shareThreadItemTitle overflow-hidden overflow-ellipsis line-clamp-2",children:e.query}),(null===(s=tX.Z.getState().mindmapList.find(t=>t.message_id===e.id))||void 0===s?void 0:s.images)&&(0,f.jsx)("div",{className:"border border-gray-300 p-2 rounded-lg mb-4 bg-cover bg-center w-full pointer-events-none bg-white",children:(0,f.jsx)(oS.default,{content:(null===(a=e.mindmap)||void 0===a?void 0:a.content)||"",query:e.query,messageId:e.id,index:t,showDispose:!1})}),(0,f.jsx)("div",{className:(0,t_.cn)("prose prose-md dark:prose-invert max-w-full",rD().prose),style:{marginBottom:"24px",color:l.textColor},children:(0,f.jsx)(oE,{children:e.answer.replace(/\[\d+\]/g,"")})})]},e.id)})]},e.id)}),s.length>3&&(0,f.jsxs)("div",{style:{margin:"24px auto",fontSize:"12px",width:"90%",lineHeight:"20px"},children:[c("shareThread.moreThread")," "]}),(0,f.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,f.jsxs)("div",{className:"w-[calc(100%-100px)]",children:[(0,f.jsx)("div",{className:"flex gap-2 justify-end text-[24px] font-bold",children:(0,f.jsxs)("div",{className:"flex items-center relative h-[36px] leading-[36px]",children:[(0,f.jsx)("div",{className:"logoIcon mr-2 w-[34px] h-[34px] leading-[36px]",children:l.logoIcon}),(0,f.jsx)("div",{className:"h-[36px] leading-[36px]",children:c("shareThread.qrcodeTitle")})]})}),(0,f.jsx)("div",{className:"text-[12px] text-right mt-2 leading-[20px]",children:c("shareThread.qrcodeTip")})]}),(0,f.jsx)("div",{className:"border-[8px] border-white rounded-[12px] ml-4 w-[88px]",style:{background:l.qrcodeBg},children:(0,f.jsx)("img",{src:r,className:"w-[88px]",alt:""})})]})]})})},oF=r(19073);let oL=e=>{var t,r;let{threadData:s}=e,{shareStatus:n,setShareStatus:a,is_self:i,thread_id:l,showThreadModel:o,shareData:d}=(0,rc.Z)(),c=(0,th.ZP)(e=>e.isLogin),u=(0,to.V)(),[p,h]=(0,v.useState)(!1),{isApp:m}=(0,re.b)(),x=(0,th.gQ)(),b=(0,th.ZP)(e=>e.userInfo),y=null==b?void 0:null===(r=b.user_org_member)||void 0===r?void 0:null===(t=r.org_settings)||void 0===t?void 0:t.share_permission_config.personal_thread_share,w=(0,g.useTranslations)(),j=e=>{(0,tN.eW)(e),"whatsapp"===e?(0,tb.fk)(ty.U.THREAD_SHARE_SHARE_WHATSAPP,{id:l},!0):"twitter"===e?(0,tb.fk)(ty.U.THREAD_SHARE_SHARE_X,{id:l},!0):"facebook"===e?(0,tb.fk)(ty.U.THREAD_SHARE_SHARE_FACEBOOK,{id:l},!0):"line"===e&&(0,tb.fk)(ty.U.THREAD_SHARE_SHARE_LINE,{id:l},!0)};(0,v.useEffect)(()=>{o&&C()},[o]);let C=()=>{h(!0);let e=t3.Z.getState().current,t=new URL("".concat(location.origin,"/search/").concat(l));e&&t.searchParams.append("invite",e),u.copy("share"===d.type?t.toString():d.link),(0,tb.fk)(ty.U.THREAD_SHARE_SHARE_COPYLINK,{id:l},!0),setTimeout(()=>{h(!1)},3e3)},_=e=>{i&&a(e)};return(0,f.jsxs)(f.Fragment,{children:[i&&c&&(0,f.jsx)("div",{className:"w-full cursor-pointer border rounded-[12px] p-[8px] [padding-left:24px] [padding-right:24px] box-border mb-[16px] ".concat("PRIVATE"===n?"border-[#0080FF]":"border-[#E4E7EC]"),onClick:()=>_("PRIVATE"),children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center gap-[16px]",children:[(0,f.jsx)("div",{className:"w-[32px] text-[#475467] dark:text-white",children:(0,f.jsx)(ru.aL,{})}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h1",{className:"text-[16px] font-bold text-[#344054] dark:text-white",children:w("shareThread.secret")}),(0,f.jsx)("div",{className:"text-[12px] text-[#98A2B3]",style:{lineHeight:"18px"},children:w("shareThread.onlyAuthorCanView")})]})]}),(0,f.jsx)("div",{children:"PRIVATE"===n&&(0,f.jsx)(ru.gw,{})})]})}),x&&(0,f.jsx)("div",{className:"w-full cursor-pointer border rounded-[12px] p-[8px] [padding-left:24px] [padding-right:24px] mb-[16px] box-border ".concat("PARTIAL_PUBLIC"===n?"border-[#0080FF]":"border-[#E4E7EC]"),onClick:()=>_("PARTIAL_PUBLIC"),style:{opacity:i?1:.3,cursor:i?"pointer":"not-allowed"},children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center gap-[16px]",children:[(0,f.jsx)("div",{className:"w-[32px] text-[#475467] dark:text-white",children:(0,f.jsx)(oF.Z,{size:28})}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h1",{className:"text-[16px] font-bold text-[#344054] dark:text-white",children:w("shareThread.enterprise_title")}),(0,f.jsx)("div",{className:"text-[12px] text-[#98A2B3] ",style:{lineHeight:"18px"},children:w("shareThread.enterprise_desc")})]})]}),(0,f.jsx)("div",{children:"PARTIAL_PUBLIC"===n&&(0,f.jsx)(ru.gw,{})})]})}),(c&&i&&!x||y&&x&&c||"PUBLIC"===n)&&(0,f.jsx)("div",{className:"w-full cursor-pointer border rounded-[12px] p-[8px] [padding-left:24px] [padding-right:24px]  box-border ".concat("PUBLIC"===n?"border-[#0080FF]":"border-[#E4E7EC]"),onClick:()=>_("PUBLIC"),style:{opacity:i?1:.3,cursor:i?"pointer":"not-allowed"},children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center gap-[16px]",children:[(0,f.jsx)("div",{className:"w-[32px] text-[#475467] dark:text-white",children:(0,f.jsx)(ru.u_,{})}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h1",{className:"text-[16px] font-bold text-[#344054] dark:text-white",children:w("shareThread.shareable")}),(0,f.jsx)("div",{className:"text-[12px] text-[#98A2B3] ",style:{lineHeight:"18px"},children:w("shareThread.anyoneWithLinkCanView")})]})]}),(0,f.jsx)("div",{children:"PUBLIC"===n&&(0,f.jsx)(ru.gw,{})})]})}),"PRIVATE"!==n&&(0,f.jsxs)(f.Fragment,{children:[!m&&(0,f.jsxs)("div",{className:"flex items-center justify-between w-full mt-8 mx-2 shareSites",children:[(0,f.jsxs)("div",{onClick:()=>j("line"),className:"w-[48px] cursor-pointer flex flex-col items-center gap-2",children:[(0,f.jsx)("img",{className:"w-[48px]",src:"/shareThreadImg/line.png",alt:""}),(0,f.jsx)("div",{className:"text-[12px] text-[#98A2B3] dark:text-white",children:"LINE"})]}),(0,f.jsxs)("div",{onClick:()=>j("twitter"),className:"w-[48px] cursor-pointer flex flex-col items-center gap-2",children:[(0,f.jsx)("img",{className:"w-[48px]",src:"/shareThreadImg/twiterlogo.png",alt:""}),(0,f.jsx)("div",{className:"text-[12px] text-[#98A2B3] dark:text-white",children:"X/Twitter"})]}),(0,f.jsxs)("div",{onClick:()=>j("facebook"),className:"w-[48px] cursor-pointer flex flex-col items-center gap-2",children:[(0,f.jsx)("img",{className:"w-[48px]",src:"/shareThreadImg/fblogo.png",alt:""}),(0,f.jsx)("div",{className:"text-[12px] text-[#98A2B3] dark:text-white",children:"Facebook"})]}),(0,f.jsxs)("div",{onClick:()=>j("whatsapp"),className:"w-[48px] cursor-pointer flex flex-col items-center gap-2",children:[(0,f.jsx)("img",{className:"w-[48px]",src:"/shareThreadImg/whatsapp.png",alt:""}),(0,f.jsx)("div",{className:"text-[12px] text-[#98A2B3] dark:text-white",children:"WhatsApp"})]})]}),(0,f.jsx)("div",{className:"w-full mt-8",children:(0,f.jsx)(e6.e,{isOpen:p,content:(0,f.jsx)("div",{className:"p-2 bg-black bg-opacity-70 text-white rounded-lg dark:bg-white dark:text-black",children:w("shareThread.copySuccess")}),classNames:{content:["p-0"]},children:(0,f.jsx)(tw.A,{className:"w-full h-[48px] rounded-[12px] text-[14px]",color:"primary",onClick:C,disabled:p,children:w("shareThread.copyLink")})})})]})]})};var oM=e=>{var t;let{qrcodeData:r,threadList:s,threadData:n}=e,{cacheThreadImg:a,fontSize:i,backgroundTemplate:l,shareTemplate:o,typographyTheme:d}=(0,rc.Z)(),c=(0,g.useTranslations)();return(0,f.jsx)(f.Fragment,{children:0===s.length?(0,f.jsx)("div",{children:(0,f.jsx)(nL.c,{})}):(0,f.jsxs)("div",{className:"threadMarkdownView ".concat(o.parentId),style:{width:"440px",boxSizing:"border-box",fontSize:"".concat(oC.jo*i,"px"),borderRadius:"12px",fontFamily:d.value,...l.styleObject,...null==l?void 0:null===(t=l.otherOptions)||void 0===t?void 0:t.styleDocument},children:[(0,f.jsx)(ru.y_,{}),s.slice(0,3).map((e,t)=>{var r,s;let a=0===t?n.title:e.query,i=a.length>35?"".concat(a.slice(0,35),"..."):a;return(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{style:{margin:"12px 48px",fontSize:"1.71em",lineHeight:"1.83em",fontWeight:"bold",textAlign:"left",marginBottom:"24px",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden",textOverflow:"ellipsis",wordBreak:"auto-phrase",color:l.titleColor,overflowWrap:"anywhere"},className:"shareTitle overflow-hidden overflow-ellipsis line-clamp-2",children:i}),(0,f.jsxs)("div",{style:{padding:"24px 48px",color:"#323232",boxSizing:"border-box",backgroundImage:"url(/shareThreadImg/gridBg.png)",...l.bodyStyle},className:"shareMarkdown",children:[(null===(r=tX.Z.getState().mindmapList.find(t=>t.message_id===e.id))||void 0===r?void 0:r.images)&&(0,f.jsx)("div",{className:"border border-gray-300 p-2 rounded-lg mb-4 bg-cover bg-center w-full pointer-events-none bg-white",children:(0,f.jsx)(oS.default,{content:(null===(s=e.mindmap)||void 0===s?void 0:s.content)||"",query:e.query,messageId:e.id,index:t,showDispose:!1})}),(0,f.jsx)("div",{className:(0,t_.cn)("prose prose-md dark:prose-invert max-w-full",rD().prose),style:{marginBottom:"24px",color:l.textColor},children:(0,f.jsx)(oE,{children:e.answer.replace(/\[\d+\]/g,"")})})]})]},e.id)}),s.length>3&&(0,f.jsxs)("div",{style:{margin:"24px auto",fontSize:"12px",width:"90%",lineHeight:"20px"},children:[c("shareThread.moreThread")," "]}),(0,f.jsxs)("div",{className:"flex justify-between mt-6",style:{padding:"0 24px",boxSizing:"border-box"},children:[(0,f.jsxs)("div",{className:"w-[calc(100%-100px)]",children:[(0,f.jsx)("div",{className:"flex gap-2 justify-end text-[24px] font-bold",children:(0,f.jsxs)("div",{className:"flex items-center relative h-[36px] leading-[36px]",children:[(0,f.jsx)("div",{className:"logoIcon mr-2 w-[34px] h-[34px] leading-[36px]",children:l.logoIcon}),(0,f.jsx)("div",{className:"h-[36px] leading-[36px]",children:c("shareThread.qrcodeTitle")})]})}),(0,f.jsx)("div",{className:"text-[12px] text-right mt-2 leading-[20px]",children:c("shareThread.qrcodeTip")})]}),(0,f.jsx)("div",{className:"border-[8px] border-white rounded-[12px] ml-4 w-[88px]",style:{background:l.qrcodeBg},children:(0,f.jsx)("img",{src:r,className:"w-[88px]",alt:""})})]}),(0,f.jsx)(ru.S9,{})]})})},oA=r(72135);let oP=r.n(oA)()(()=>Promise.resolve().then(r.bind(r,55039)),{loadableGenerated:{webpack:()=>[55039]},ssr:!1});var oZ=e=>{var t,r,s,n,a,i;let{qrcodeData:l,threadList:o,threadData:d}=e,{cacheThreadImg:c,fontSize:u,backgroundTemplate:p,shareTemplate:h,typographyTheme:m}=(0,rc.Z)(),v=(0,g.useTranslations)();return(0,f.jsx)(f.Fragment,{children:0===o.length?(0,f.jsx)("div",{children:(0,f.jsx)(nL.c,{})}):(0,f.jsxs)("div",{className:"threadMarkdownView ".concat(h.parentId),style:{width:"440px",padding:"12px 24px",boxSizing:"border-box",fontSize:"".concat(oC.jo*u,"px"),borderRadius:"12px",fontFamily:m.value,...p.styleObject,...null===(t=p.otherOptions)||void 0===t?void 0:t.styleDocument},children:[(0,f.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",position:"relative",top:"26px"},children:(0,ru.PW)({dotBg:(null==p?void 0:null===(r=p.otherOptions)||void 0===r?void 0:r.dotBg)||"#B3C3B9",lineBg:(null==p?void 0:null===(s=p.otherOptions)||void 0===s?void 0:s.lineBg)||"#EEE8E1",lineBorder:(null==p?void 0:null===(n=p.otherOptions)||void 0===n?void 0:n.lineBorder)||"#4A7B5D",dotBorder:(null==p?void 0:null===(a=p.otherOptions)||void 0===a?void 0:a.lineBorder)||(null==p?void 0:null===(i=p.otherOptions)||void 0===i?void 0:i.dotBg)||"#fff"})}),o.slice(0,3).map((e,t)=>{var r,s;let n=0===t?d.title:e.query,a=n.length>35?"".concat(n.slice(0,35),"..."):n;return(0,f.jsx)("div",{children:(0,f.jsxs)("div",{style:{padding:"24px",paddingTop:"40px",color:"#323232",marginBottom:"24px",backgroundImage:"url(/shareThreadImg/gridBg.png)",...p.bodyStyle},className:"shareMarkdown",children:[(0,f.jsx)("div",{style:{fontSize:"1.71em",lineHeight:"1.83em",fontWeight:"bold",textAlign:"left",marginBottom:"24px",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden",textOverflow:"ellipsis",overflowWrap:"anywhere",maxHeight:"4em",color:"#FFFFFF"===p.titleColor?p.textColor:p.titleColor},className:"shareTitle overflow-hidden overflow-ellipsis line-clamp-2",children:a}),(null===(r=tX.Z.getState().mindmapList.find(t=>t.message_id===e.id))||void 0===r?void 0:r.images)&&(0,f.jsx)("div",{className:"border border-gray-300 p-2 rounded-lg mb-4 bg-cover bg-center w-full pointer-events-none bg-white",children:(0,f.jsx)(oP,{content:(null===(s=e.mindmap)||void 0===s?void 0:s.content)||"",query:e.query,messageId:e.id,index:t,showDispose:!1})}),(0,f.jsx)("div",{className:(0,t_.cn)("prose prose-md dark:prose-invert max-w-full",rD().prose),style:{marginBottom:"24px",color:p.textColor},children:(0,f.jsx)(oE,{children:e.answer.replace(/\[\d+\]/g,"")})})]})},e.id)}),o.length>3&&(0,f.jsxs)("div",{style:{margin:"24px auto",fontSize:"12px",width:"90%",lineHeight:"20px"},children:[v("shareThread.moreThread")," "]}),(0,f.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,f.jsxs)("div",{className:"w-[calc(100%-100px)]",children:[(0,f.jsx)("div",{className:"flex gap-2 justify-end text-[24px] font-bold",children:(0,f.jsxs)("div",{className:"flex items-center relative h-[36px] leading-[36px]",children:[(0,f.jsx)("div",{className:"logoIcon mr-2 w-[34px] h-[34px] leading-[36px]",children:p.logoIcon}),(0,f.jsx)("div",{className:"h-[36px] leading-[36px]",children:v("shareThread.qrcodeTitle")})]})}),(0,f.jsx)("div",{className:"text-[12px] text-right mt-2 leading-[20px]",children:v("shareThread.qrcodeTip")})]}),(0,f.jsx)("div",{className:"border-[8px] border-white rounded-[12px] ml-4 w-[88px]",style:{background:p.qrcodeBg},children:(0,f.jsx)("img",{src:l,className:"w-[88px]",alt:""})})]})]})})},oI=e=>{var t,r;let{qrcodeData:s,threadList:n,threadData:a}=e,{cacheThreadImg:i,fontSize:l,backgroundTemplate:o,shareTemplate:d,typographyTheme:c}=(0,rc.Z)(),u=(0,g.useTranslations)();return(0,f.jsx)(f.Fragment,{children:0===n.length?(0,f.jsx)("div",{children:(0,f.jsx)(nL.c,{})}):(0,f.jsxs)("div",{className:"threadMarkdownView ".concat(d.parentId),style:{position:"relative",width:"440px",padding:"48px 24px",boxSizing:"border-box",fontSize:"".concat(oC.jo*l,"px"),borderRadius:"12px",fontFamily:c.value,...o.styleObject,...null==o?void 0:null===(t=o.otherOptions)||void 0===t?void 0:t.styleDocument},children:[(0,f.jsx)("div",{style:{fontSize:"1.6em",lineHeight:"1.8",fontWeight:"bold",textAlign:"center",alignItems:"center",marginBottom:"34px",overflowWrap:"anywhere",transform:"rotate(-3.52deg)",position:"relative",marginLeft:"12px",marginRight:"24px",zIndex:"2",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden",textOverflow:"ellipsis",wordBreak:"auto-phrase",backgroundImage:"url(/shareThreadImg/advancedTag.png)",backgroundSize:"cover",color:o.titleColor},className:"shareTitle overflow-hidden overflow-ellipsis line-clamp-2",children:a.title.length>35?"".concat(a.title.slice(0,35),"..."):a.title}),(0,f.jsx)("div",{style:{position:"absolute",top:"68px",right:"5px"},children:(0,f.jsx)("img",{src:"/shareThreadImg/FloretsSvg.png",alt:""})}),(0,f.jsx)("div",{style:{padding:"24px",borderRadius:"16px",color:"#323232",backgroundImage:"url(/shareThreadImg/gridBg.png)",...o.bodyStyle,...null==o?void 0:null===(r=o.otherOptions)||void 0===r?void 0:r.styleDocument},className:"shareMarkdown",children:n.slice(0,3).map((e,t)=>{var r,s;let n=e.query,a=n.length>35?"".concat(n.slice(0,35),"..."):n;return(0,f.jsxs)("div",{children:[0!==t&&(0,f.jsx)("div",{style:{fontSize:"20px",lineHeight:"1.6em",height:"3.2em",paddingBottom:"8px",fontWeight:"bold",textAlign:"left",overflowWrap:"anywhere",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden",textOverflow:"ellipsis",maxHeight:"4em",wordBreak:"auto-phrase",...o.threadTitleStyle,color:o.titleColor},className:"shareThreadItemTitle overflow-hidden overflow-ellipsis line-clamp-2",children:a}),(null===(r=tX.Z.getState().mindmapList.find(t=>t.message_id===e.id))||void 0===r?void 0:r.images)&&(0,f.jsx)("div",{className:"border border-gray-300 p-2 rounded-lg mb-4 bg-cover bg-center w-full pointer-events-none bg-white",children:(0,f.jsx)(oS.default,{content:(null===(s=e.mindmap)||void 0===s?void 0:s.content)||"",query:e.query,messageId:e.id,index:t,showDispose:!1})}),(0,f.jsx)("div",{className:(0,t_.cn)("prose prose-md dark:prose-invert max-w-full",rD().prose),style:{marginBottom:"24px",color:o.textColor},children:(0,f.jsx)(oE,{children:e.answer.replace(/\[\d+\]/g,"")})})]},e.id)})}),n.length>3&&(0,f.jsxs)("div",{style:{margin:"24px auto",fontSize:"12px",width:"90%",lineHeight:"20px"},children:[u("shareThread.moreThread")," "]}),(0,f.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,f.jsxs)("div",{className:"w-[calc(100%-100px)]",children:[(0,f.jsx)("div",{className:"flex gap-2 justify-end text-[24px] font-bold",children:(0,f.jsxs)("div",{className:"flex items-center relative h-[36px] leading-[36px]",children:[(0,f.jsx)("div",{className:"logoIcon mr-2 w-[34px] h-[34px] leading-[36px]",children:o.logoIcon}),(0,f.jsx)("div",{className:"h-[36px] leading-[36px]",children:u("shareThread.qrcodeTitle")})]})}),(0,f.jsx)("div",{className:"text-[12px] text-right mt-2 leading-[20px]",children:u("shareThread.qrcodeTip")})]}),(0,f.jsx)("div",{className:"border-[8px] border-white rounded-[12px] ml-4 w-[88px]",style:{background:o.qrcodeBg},children:(0,f.jsx)("img",{src:s,className:"w-[88px]",alt:""})})]})]})})},oD=e=>{var t;let{qrcodeData:r,threadList:s,threadData:n,baseImgUrl:a}=e,{cacheThreadImg:i,fontSize:l,backgroundTemplate:o,shareTemplate:d,typographyTheme:c}=(0,rc.Z)(),u=(0,g.useTranslations)();return(0,f.jsx)(f.Fragment,{children:0===s.length?(0,f.jsx)("div",{children:(0,f.jsx)(nL.c,{})}):(0,f.jsx)("div",{className:"threadMarkdownView ".concat(d.parentId),style:{width:"440px",padding:"48px 24px",boxSizing:"border-box",fontSize:"".concat(oC.jo*l,"px"),borderRadius:"12px",fontFamily:c.value,backgroundSize:"contain",backgroundImage:"".concat(a),...null==o?void 0:o.styleObject,...null==o?void 0:null===(t=o.otherOptions)||void 0===t?void 0:t.styleDocument},children:(0,f.jsxs)("div",{style:{paddingTop:"24px",padding:"24px",color:"#323232",borderRadius:"16px",...o.bodyStyle},className:"shareMarkdown",children:[s.slice(0,3).map((e,t)=>{var r,s;let a=0===t?n.title:e.query,i=a.length>35?"".concat(a.slice(0,35),"..."):a;return(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{style:{fontSize:"1.71em",lineHeight:"1.83em",fontWeight:"bold",textAlign:"left",marginBottom:"24px",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden",textOverflow:"ellipsis",wordBreak:"auto-phrase",color:o.threadTitleStyle.color,overflowWrap:"anywhere"},className:"shareTitle overflow-hidden overflow-ellipsis line-clamp-2",children:i}),(null===(r=tX.Z.getState().mindmapList.find(t=>t.message_id===e.id))||void 0===r?void 0:r.images)&&(0,f.jsx)("div",{className:"border border-gray-300 p-2 rounded-lg mb-4 bg-cover bg-center w-full pointer-events-none bg-white",children:(0,f.jsx)(oS.default,{content:(null===(s=e.mindmap)||void 0===s?void 0:s.content)||"",query:e.query,messageId:e.id,index:t,showDispose:!1})}),(0,f.jsx)("div",{className:(0,t_.cn)("prose prose-md dark:prose-invert max-w-full",rD().prose),style:{marginBottom:"24px",color:o.textColor},children:(0,f.jsx)(oE,{children:e.answer.replace(/\[\d+\]/g,"")})})]},e.id)}),s.length>3&&(0,f.jsxs)("div",{style:{margin:"24px auto",fontSize:"14px",width:"90%",lineHeight:"20px"},children:[u("shareThread.moreThread")," "]}),(0,f.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,f.jsxs)("div",{className:"w-[calc(100%-100px)]",children:[(0,f.jsx)("div",{className:"flex gap-2 justify-end text-[24px] font-bold",children:(0,f.jsxs)("div",{className:"flex items-center relative h-[36px] leading-[36px]",children:[(0,f.jsx)("div",{className:"logoIcon mr-2 w-[34px] h-[34px] leading-[36px]",children:o.logoIcon}),(0,f.jsx)("div",{className:"h-[36px] leading-[36px]",children:u("shareThread.qrcodeTitle")})]})}),(0,f.jsx)("div",{className:"text-[12px] text-right mt-2 leading-[20px]",children:u("shareThread.qrcodeTip")})]}),(0,f.jsx)("div",{className:"border-[8px] border-white rounded-[12px] ml-4 w-[88px]",style:{background:o.qrcodeBg},children:(0,f.jsx)("img",{src:r,className:"w-[88px]",alt:""})})]})]})})})},oR=e=>{var t;let{qrcodeData:r,threadList:s,threadData:n}=e,{cacheThreadImg:a,fontSize:i,backgroundTemplate:l,shareTemplate:o,typographyTheme:d}=(0,rc.Z)(),c=(0,g.useTranslations)();return(0,f.jsx)(f.Fragment,{children:0===s.length?(0,f.jsx)("div",{children:(0,f.jsx)(nL.c,{})}):(0,f.jsxs)("div",{className:"threadMarkdownView ".concat(o.parentId),style:{width:"440px",padding:"12px 24px",boxSizing:"border-box",fontSize:"".concat(oC.jo*i,"px"),borderRadius:"12px",fontFamily:d.value,paddingTop:"48px",...l.styleObject,...null==l?void 0:null===(t=l.otherOptions)||void 0===t?void 0:t.styleDocument},children:[s.slice(0,3).map((e,t)=>{var r,s;let a=0===t?n.title:e.query,i=a.length>35?"".concat(a.slice(0,35),"..."):a;return(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{style:{position:"relative"},children:[(0,f.jsx)("div",{style:{width:"372px",fontSize:"1.71em",lineHeight:"66px",fontWeight:"bold",textAlign:"left",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:l.titleColor,zIndex:"2",position:"absolute",top:"-82px",padding:"0 24px",left:"0px"},className:"shareTitle",children:i}),(0,f.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",padding:"0 12px",top:"-92px",zIndex:0},children:(0,f.jsx)(ru.WD,{})})]}),(0,f.jsx)("div",{style:{border:"3px solid #86BFF5",borderRadius:"12px",padding:"12px",marginTop:"104px"},children:(0,f.jsxs)("div",{style:{padding:"24px",paddingTop:"40px",color:"#323232",marginBottom:"24px",border:"2px dashed #86BFF5",borderRadius:"12px",...l.bodyStyle},className:"shareMarkdown",children:[(null===(r=tX.Z.getState().mindmapList.find(t=>t.message_id===e.id))||void 0===r?void 0:r.images)&&(0,f.jsx)("div",{className:"border border-gray-300 p-2 rounded-lg mb-4 bg-cover bg-center w-full pointer-events-none bg-white",children:(0,f.jsx)(oS.default,{content:(null===(s=e.mindmap)||void 0===s?void 0:s.content)||"",query:e.query,messageId:e.id,index:t,showDispose:!1})}),(0,f.jsx)("div",{className:(0,t_.cn)("prose prose-md dark:prose-invert max-w-full",rD().prose),style:{marginBottom:"24px",color:l.textColor},children:(0,f.jsx)(oE,{children:e.answer.replace(/\[\d+\]/g,"")})})]})},e.id)]},t)}),s.length>3&&(0,f.jsxs)("div",{style:{margin:"24px auto",fontSize:"12px",width:"90%",lineHeight:"20px"},children:[c("shareThread.moreThread")," "]}),(0,f.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,f.jsxs)("div",{className:"w-[calc(100%-100px)]",children:[(0,f.jsx)("div",{className:"flex gap-2 justify-end text-[24px] font-bold",children:(0,f.jsxs)("div",{className:"flex items-center relative h-[36px] leading-[36px]",children:[(0,f.jsx)("div",{className:"logoIcon mr-2 w-[34px] h-[34px] leading-[36px]",children:l.logoIcon}),(0,f.jsx)("div",{className:"h-[36px] leading-[36px]",children:c("shareThread.qrcodeTitle")})]})}),(0,f.jsx)("div",{className:"text-[12px] text-right mt-2 leading-[20px]",children:c("shareThread.qrcodeTip")})]}),(0,f.jsx)("div",{className:"border-[8px] border-white rounded-[12px] ml-4 w-[88px]",style:{background:l.qrcodeBg},children:(0,f.jsx)("img",{src:r,className:"w-[88px]",alt:""})})]})]})})},oz=e=>{var t;let{qrcodeData:r,threadList:s,threadData:n}=e,{cacheThreadImg:a,fontSize:i,backgroundTemplate:l,shareTemplate:o,typographyTheme:d}=(0,rc.Z)(),c=(0,g.useTranslations)();return(0,f.jsx)(f.Fragment,{children:0===s.length?(0,f.jsx)("div",{children:(0,f.jsx)(nL.c,{})}):(0,f.jsxs)("div",{className:"threadMarkdownView ".concat(o.parentId),style:{width:"440px",padding:"32px 12px",boxSizing:"border-box",fontSize:"".concat(oC.jo*i,"px"),borderRadius:"12px",fontFamily:d.value,...l.styleObject,...null==l?void 0:null===(t=l.otherOptions)||void 0===t?void 0:t.styleDocument},children:[s.slice(0,3).map((e,t)=>{var r,s,a,i;let o=0===t?n.title:e.query,d=o.length>35?"".concat(o.slice(0,35),"..."):o;return(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{style:{height:"36px",borderRadius:"999px",zIndex:"0",...null===(r=l.otherOptions)||void 0===r?void 0:r.headerLineStyle},children:" "}),(0,f.jsxs)("div",{style:{position:"relative",margin:"0 24px",marginTop:"-16px",padding:"24px",paddingTop:"40px",color:"#323232",marginBottom:"0px",zIndex:"1",...l.bodyStyle},className:"shareMarkdown",children:[(0,f.jsx)("div",{style:{position:"absolute",top:"0",right:"0",width:"100%",height:"10px",background:null==l?void 0:null===(s=l.otherOptions)||void 0===s?void 0:s.headerBg}}),(0,f.jsx)("div",{style:{fontSize:"1.71em",lineHeight:"1.83em",fontWeight:"bold",textAlign:"left",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden",textOverflow:"ellipsis",overflowWrap:"anywhere",wordBreak:"auto-phrase",marginBottom:"24px",color:"#FFFFFF"===l.titleColor?l.textColor:l.titleColor},className:"shareTitle overflow-hidden overflow-ellipsis line-clamp-2",children:d}),(null===(a=tX.Z.getState().mindmapList.find(t=>t.message_id===e.id))||void 0===a?void 0:a.images)&&(0,f.jsx)("div",{className:"border border-gray-300 p-2 rounded-lg mb-4 bg-cover bg-center w-full pointer-events-none bg-white",children:(0,f.jsx)(oS.default,{content:(null===(i=e.mindmap)||void 0===i?void 0:i.content)||"",query:e.query,messageId:e.id,index:t,showDispose:!1})}),(0,f.jsx)("div",{className:(0,t_.cn)("prose prose-md dark:prose-invert max-w-full",rD().prose),style:{marginBottom:"24px",color:l.textColor},children:(0,f.jsx)(oE,{children:e.answer.replace(/\[\d+\]/g,"")})})]})]},e.id)}),(0,f.jsx)("img",{src:"/shareThreadImg/emailTag.png",alt:"",style:{width:"100%",padding:"0px 24px"}}),(0,f.jsxs)("div",{style:{margin:"0px 24px",background:" linear-gradient(180deg, #eee 0%, #FFF 17.36%)"},children:[s.length>3&&(0,f.jsxs)("div",{style:{margin:"24px auto",fontSize:"12px",width:"90%",lineHeight:"20px"},children:[c("shareThread.moreThread")," "]}),(0,f.jsxs)("div",{className:"flex justify-between",style:{padding:"24px"},children:[(0,f.jsxs)("div",{className:"w-[calc(100%-100px)]",children:[(0,f.jsx)("div",{className:"flex gap-2 justify-end text-[24px] font-bold",children:(0,f.jsxs)("div",{className:"flex items-center relative h-[36px] leading-[36px]",children:[(0,f.jsx)("div",{className:"logoIcon mr-2 w-[34px] h-[34px] leading-[36px]",children:l.logoIcon}),(0,f.jsx)("div",{className:"h-[36px] leading-[36px]",children:c("shareThread.qrcodeTitle")})]})}),(0,f.jsx)("div",{className:"text-[12px] text-right mt-2 leading-[20px]",children:c("shareThread.qrcodeTip")})]}),(0,f.jsx)("div",{className:"border-[8px] border-white rounded-[12px] ml-4 w-[88px]",style:{background:l.qrcodeBg},children:(0,f.jsx)("img",{src:r,className:"w-[88px]",alt:""})})]})]})]})})},oO=e=>{var t;let{qrcodeData:r,threadList:s,threadData:n}=e,{cacheThreadImg:a,fontSize:i,backgroundTemplate:l,shareTemplate:o,typographyTheme:d}=(0,rc.Z)(),c=(0,g.useTranslations)();return(0,f.jsx)(f.Fragment,{children:0===s.length?(0,f.jsx)("div",{children:(0,f.jsx)(nL.c,{})}):(0,f.jsx)("div",{className:"threadMarkdownView ".concat(o.parentId),style:{width:"440px",padding:"48px 24px",boxSizing:"border-box",borderRadius:"12px",fontSize:"".concat(oC.jo*i,"px"),fontFamily:d.value,...l.styleObject,...null==l?void 0:null===(t=l.otherOptions)||void 0===t?void 0:t.styleDocument},children:s.slice(0,3).map((e,t)=>{var a,i,o,d;let u=0===t?n.title:e.query,p=u.length>35?"".concat(u.slice(0,35),"..."):u;return(0,f.jsxs)("div",{style:{position:"relative"},children:[(0,f.jsx)("div",{style:{position:"absolute",width:"100%",top:"8px",bottom:"-8px",right:"-8px",border:"3px solid #0865AA",background:null===(a=l.otherOptions)||void 0===a?void 0:a.collisionBg}}),(0,f.jsxs)("div",{style:{position:"relative",zIndex:"10"},children:[(0,f.jsx)("div",{style:{fontSize:"1.71em",lineHeight:"1.83",fontWeight:"bold",textAlign:"left",boxSizing:"border-box",overflowWrap:"anywhere",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden",textOverflow:"ellipsis",wordBreak:"auto-phrase",padding:"8px 24px",border:"3px solid #0865AA",color:l.titleColor,background:null===(i=l.otherOptions)||void 0===i?void 0:i.collisionBg},className:"shareTitle overflow-hidden overflow-ellipsis line-clamp-2",children:p}),(0,f.jsxs)("div",{style:{padding:"24px",color:"#323232",marginBottom:"24px",border:"3px solid #0865AA",borderTop:"none",...l.bodyStyle},className:"shareMarkdown",children:[(0,f.jsxs)("div",{children:[0!==t&&(0,f.jsx)("div",{style:{fontSize:"20px",lineHeight:"1.6em",height:"3.2em",paddingBottom:"8px",fontWeight:"bold",textAlign:"left",overflowWrap:"anywhere",...l.threadTitleStyle,color:l.titleColor},className:"shareThreadItemTitle overflow-hidden overflow-ellipsis line-clamp-2",children:e.query}),(null===(o=tX.Z.getState().mindmapList.find(t=>t.message_id===e.id))||void 0===o?void 0:o.images)&&(0,f.jsx)("div",{className:"border border-gray-300 p-2 rounded-lg mb-4 bg-cover bg-center w-full pointer-events-none bg-white",children:(0,f.jsx)(oS.default,{content:(null===(d=e.mindmap)||void 0===d?void 0:d.content)||"",query:e.query,messageId:e.id,index:t,showDispose:!1})}),(0,f.jsx)("div",{className:(0,t_.cn)("prose prose-md dark:prose-invert max-w-full",rD().prose),style:{marginBottom:"24px",color:l.textColor},children:(0,f.jsx)(oE,{children:e.answer.replace(/\[\d+\]/g,"")})})]},e.id),(2==t||t+1===s.length)&&(0,f.jsxs)(f.Fragment,{children:[" ",s.length>3&&(0,f.jsxs)("div",{style:{margin:"24px auto",fontSize:"12px",width:"90%",lineHeight:"20px"},children:[c("shareThread.moreThread")," "]}),(0,f.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,f.jsxs)("div",{className:"w-[calc(100%-100px)]",children:[(0,f.jsx)("div",{className:"flex gap-2 justify-end text-[24px] font-bold",children:(0,f.jsxs)("div",{className:"flex items-center relative h-[36px] leading-[36px]",children:[(0,f.jsx)("div",{className:"logoIcon mr-2 w-[34px] h-[34px] leading-[36px]",children:l.logoIcon}),(0,f.jsx)("div",{className:"h-[36px] leading-[36px]",children:c("shareThread.qrcodeTitle")})]})}),(0,f.jsx)("div",{className:"text-[12px] text-right mt-2 leading-[20px]",children:c("shareThread.qrcodeTip")})]}),(0,f.jsx)("div",{className:"border-[8px] border-white rounded-[12px] ml-4 w-[88px]",style:{background:l.qrcodeBg},children:(0,f.jsx)("img",{src:r,className:"w-[88px]",alt:""})})]})]})]})]})]},e.id)})})})},oB=e=>{var t,r,s;let{threadList:n,threadData:a,dataLoading:i}=e,{shareStatus:l,cacheThreadImg:o,setCacheThreadImg:d,fontSize:c,setFontSize:u,typographyTheme:p,backgroundTemplate:h,setBackgroundTemplate:m,setTypographyTheme:x,thread_id:b,shareTemplate:y,setShareTemplate:w,shareData:j}=(0,rc.Z)(),[C,_]=(0,v.useState)(""),{isMobile:k}=(0,tU.Z)(),N=(0,g.useTranslations)(),[E,S]=(0,v.useState)(!1),T=()=>{let e=j.link;oj.toDataURL(e.toString(),{width:256,errorCorrectionLevel:"H",margin:0,color:{dark:"#0080ff00",light:"#F4F4F4FF"}}).then(e=>{_(e)}).catch(e=>{console.error(e)})},F=e=>{S(!0);let t=document.querySelector(".threadMarkdownView");tg.Z.info(N("ppt.generating"),999999),(0,tN.hh)(t,e).then(t=>{tg.Z.close(),S(!1),t&&"img"===e&&tg.Z.success(N("shareThread.copyImgSuccess"))}).catch(e=>{S(!1),tg.Z.close(),e&&tg.Z.error("Error")}).finally(()=>{tg.Z.close()}),(0,tb.fk)("link"===e?ty.U.THREAD_SHARE_DOWNLOAD_IMG:ty.U.THREAD_SHARE_COPY_IMG,{id:b},!0)};return(0,v.useEffect)(()=>{T()},[]),(0,f.jsxs)("div",{className:"flex h-[740px] shareThread ",children:[!k&&"share"===j.type&&(0,f.jsx)(f.Fragment,{children:i?(0,f.jsx)("div",{className:"flex flex-col w-[600px] shareThreadMarkdown",children:(0,f.jsx)(nL.c,{})}):(0,f.jsxs)("div",{className:"flex flex-col w-[600px] shareThreadMarkdown",children:[(0,f.jsxs)("div",{id:"threadMarkdown",style:{"--blodtitle-color":h.threadTitleStyle.color},className:"flex flex-col items-center h-full overflow-auto share-scrollbar p-[32px] [padding-left:56px] [padding-right:56px]",children:["shareTemplate1"===y.parentId&&(0,f.jsx)(oT,{qrcodeData:C,threadList:n,threadData:a}),"shareTemplate2"===y.parentId&&(0,f.jsx)(oM,{qrcodeData:C,threadList:n,threadData:a}),"shareTemplate3"===y.parentId&&(0,f.jsx)(oZ,{qrcodeData:C,threadList:n,threadData:a}),"shareTemplate4"===y.parentId&&(0,f.jsx)(oI,{qrcodeData:C,threadList:n,threadData:a}),["shareTemplate5","shareTemplate6","shareTemplate7","shareTemplate8","shareTemplate9","shareTemplate10"].includes(y.parentId)&&(0,f.jsx)(oD,{qrcodeData:C,threadList:n,threadData:a,baseImgUrl:(null===oC.jW||void 0===oC.jW?void 0:null===(s=oC.jW.find(e=>e.id===y.defaultBgID))||void 0===s?void 0:null===(r=s.otherOptions)||void 0===r?void 0:null===(t=r.styleDocument)||void 0===t?void 0:t.backgroundImage)||""}),"shareTemplate15"===y.parentId&&(0,f.jsx)(oR,{qrcodeData:C,threadList:n,threadData:a}),["shareTemplate16","shareTemplate17"].includes(y.parentId)&&(0,f.jsx)(oz,{qrcodeData:C,threadList:n,threadData:a}),"shareTemplate18"===y.parentId&&(0,f.jsx)(oO,{qrcodeData:C,threadList:n,threadData:a})]}),(0,f.jsxs)("div",{className:"flex items-center justify-around w-full p-[20px] [padding-left:24px] [padding-right:24px] box-border h-[124px] border-t border-[#ECEFF4] dark:border-[#2F333B]",children:[(0,f.jsx)("div",{children:(0,f.jsxs)(o_.J2,{modal:!0,onOpenChange:e=>{e&&(0,tb.fk)(ty.U.THREAD_SHARE_SHARE_CHANGE_IMG,{id:b},!0)},children:[(0,f.jsx)(o_.xo,{asChild:!0,children:(0,f.jsxs)("div",{className:"flex flex-col items-center gap-[16px] cursor-pointer text-[14px] text-[#475467] hover:text-[#FA7931] dark:text-white",children:[(0,f.jsx)(ru.X4,{}),N("shareThread.customSnapshot")]})}),(0,f.jsx)(o_.yk,{className:"w-[376px]",children:(0,f.jsxs)(oy.n,{"aria-label":"Options",variant:"underlined",color:"primary",children:[(0,f.jsx)(ow.r,{title:N("shareThread.selectTemplate"),className:"w-full",children:(0,f.jsx)("div",{className:"h-[420px]  overflow-auto mx-auto  share-scrollbar relative",children:(0,f.jsx)("div",{className:"flex items-center flex-wrap gap-[8px] box-border mx-auto",style:{width:"100%"},children:oC.Qz.map((e,t)=>(0,f.jsx)("img",{onClick:()=>{w(e),m(oC.jW.find(t=>t.id===e.defaultBgID))},alt:"templateImg",src:e.templateImg,width:98,height:130,className:"flex items-center justify-center w-[98px] h-[130px] border rounded-[4px] ".concat(e.parentId===y.parentId?"border-[#1890FF]":"border-[#E4E7EC]")},"".concat(e.parentId,"-").concat(t)))})})},"template"),(0,f.jsx)(ow.r,{title:N("shareThread.customize"),children:(0,f.jsxs)("div",{className:"h-[420px] w-[340px] [padding-left:8px]  overflow-auto share-scrollbar",children:[(0,f.jsx)("div",{className:"text-[#98A2B3] dark:text-white",style:{marginBottom:"8px",lineHeight:"20px"},children:N("shareThread.customizeDescription")}),(0,f.jsx)("div",{className:"font-bold text-[14px] text-[#475467] dark:text-white",style:{lineHeight:"24px"},children:N("shareThread.background")}),(0,f.jsxs)("div",{className:"flex items-center flex-wrap w-full gap-[8px] my-[16px]",children:[(0,f.jsx)("div",{onClick:()=>{m(y.defaultBg)},className:"w-[32px] h-[32px] rounded-[4px] mb-[8px] border ".concat(y.defaultBg.id===(null==h?void 0:h.id)?"border-[#1890FF]":"border-[#E4E7EC]"),style:{...y.defaultBg.styleObject,backgroundImage:"url(".concat(y.defaultBg.previewImg,")"),backgroundSize:"cover",borderRadius:"50%"}},y.defaultBg.id),oC.jW.filter(e=>e.id!=y.defaultBg.id).slice(0,23).map(e=>(0,f.jsx)("div",{onClick:()=>{m(e)},className:"w-[32px] h-[32px] rounded-[4px] mb-[8px] border ".concat(e.id===(null==h?void 0:h.id)?"border-[#1890FF]":"border-[#E4E7EC]"),style:{...e.styleObject,backgroundImage:"url(".concat(e.previewImg,")"),backgroundSize:"cover",borderRadius:"50%"}},e.id))]}),(0,f.jsx)("div",{className:"font-bold text-[14px] text-[#475467] dark:text-white",style:{lineHeight:"24px"},children:N("shareThread.typographyTheme")}),(0,f.jsx)("div",{className:"flex items-center gap-[8px] mt-[16px]",children:oC.Oq.map(e=>(0,f.jsx)("div",{className:"p-[12px] box-border text-center text-[14px] leading-[20px] border min-w-[98px] cursor-pointer rounded-[4px] ".concat(e===p?"border-[#1890FF]":"border-[#E4E7EC]"),onClick:()=>x(e),children:N("shareThread.".concat(e.id))},e.id))}),(0,f.jsxs)("div",{className:"flex items-center mt-[16px] text-[#475467] dark:text-white ",children:[(0,f.jsx)("div",{className:"font-bold text-[14px] mr-[32px] ",children:N("shareThread.fontSize")}),(0,f.jsx)("div",{className:"flex items-center gap-[8px]",children:oC.TE.map((e,t)=>(0,f.jsx)("div",{className:"p-[12px] box-border text-center border rounded-[4px] cursor-pointer ".concat(e===c?"border-[#1890FF]":"border-[#E4E7EC]"),style:{fontSize:oC.jo*e+"px",width:"44px",height:"44px"},onClick:()=>u(e),children:N("shareThread.font")},t))})]})]})},"custom")]})})]})}),!(0,tN.zc)()&&(0,f.jsxs)("div",{className:"flex flex-col items-center gap-[16px] cursor-pointer text-[14px] text-[#475467] hover:text-[#FA7931] dark:text-white",onClick:()=>F("img"),children:[(0,f.jsx)(ru.Hg,{}),N("shareThread.copySnapshot")]}),(0,f.jsxs)("div",{className:"flex flex-col items-center gap-[16px] cursor-pointer text-[14px] text-[#475467] hover:text-[#FA7931] dark:text-white",onClick:()=>F("link"),children:[(0,f.jsx)(ru.fR,{}),N("shareThread.downloadSnapshot")]})]})]})}),(0,f.jsxs)("div",{className:"flex flex-col items-center w-full max-w-[396px] p-[24px] box-border border-l border-[#ECEFF4] shareContainer dark:border-[#2F333B]",children:[(0,f.jsx)("div",{className:"text-[20px] font-bold mb-[24px] text-[#475467] overflow-hidden overflow-ellipsis line-clamp-2 dark:text-white",style:{wordBreak:"keep-all",lineHeight:"28px",height:"56px",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden",textOverflow:"ellipsis",overflowWrap:"anywhere"},children:(null==a?void 0:a.title)||""}),(0,f.jsx)(oL,{threadData:a}),"PRIVATE"!==l&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"mt-[48px] mb-[8px] border-[12px] border-[#F5F7F9] rounded-[12px]",style:{background:"linear-gradient(to right bottom, rgb(36, 171, 247), rgb(40, 121, 251))"},children:(0,f.jsx)("img",{src:C,alt:"",className:"w-[108px]"})}),(0,f.jsx)("div",{className:"text-[#98A2B3] dark:text-white text-[12px]",style:{marginTop:"8px"},children:N("shareThread.lineMobileScanToShare")})]})]}),E&&(0,f.jsx)("div",{className:"shareLoading bg-white  dark:bg-black",style:{position:"absolute",top:"0",left:"0",bottom:"0",width:"100%",height:"100%",opacity:"0.5"}})]})},oq=r(86811),oH=()=>{let{showThreadModel:e,setShowThreadModel:t,setShareStatus:r,setIsSelf:s,thread_id:n,setIsChange:a,shareData:i}=(0,rc.Z)(),{isMobile:l}=(0,re.b)(),o=(0,g.useTranslations)(),d=(0,th.gQ)(),[c,u]=(0,v.useState)([]),[p,h]=(0,v.useState)(),[m,x]=(0,v.useState)(!1),{userInfo:b}=(0,th.ZP)(),y=(0,th.ZP)(e=>e.isLogin),w=(0,rt.Z)(),j=(0,v.useCallback)(async()=>{x(!0);try{var e,t;let i=await function(e,t){let r;let s=Date.now(),n=fetch(e,t);return r=setTimeout(()=>{let t=Date.now()-s;!function(e,t){let r=JSON.stringify({report_application:"glaritySearch",browser_language:"",browser_version:"",device_id:"",browser_type:"nodejs",os_type:"nodejs",event_time:new Date().getTime(),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,ext:JSON.stringify({event_type:"fetch_history_slow",log_type:"api",data:{url:e,duration:t}})});fetch("".concat("https://log.felo.ai","/api/data"),{method:"POST",body:r})}(e.toString(),t)},1e3),n.then(e=>(clearTimeout(r),e)).catch(e=>{throw clearTimeout(r),e})}("".concat(r7.XJ,"/search/threads/").concat(n),{method:"GET",headers:{Authorization:y?(0,rj.LP)():""},credentials:"include"});if(!i.ok){let e=await i.json().catch(()=>({}));if(403===i.status)throw Error(o("error.unauthorized"));throw Error(e.message||"Failed to fetch data, status: ".concat(i.status))}let l=await i.json();h(l);let c=null==l?void 0:null===(e=l.permission)||void 0===e?void 0:e.is_self,p=null==l?void 0:null===(t=l.permission)||void 0===t?void 0:t.is_change;s(c),a(p),c&&!p&&(d?r("PARTIAL_PUBLIC"):r("PUBLIC")),u(l.messages),x(!1)}catch(e){x(!1),w.error(e.toString())}},[n]);return((0,v.useEffect)(()=>{n&&e&&j()},[n,e]),l)?(0,f.jsx)(oq.yo,{open:e,onOpenChange:t,children:(0,f.jsxs)(oq.ue,{side:"bottom",children:[(0,f.jsx)(oq.Tu,{className:"flex justify-between items-center",children:(0,f.jsx)(oq.bC,{className:"text-left text-lg w-full",children:o("shareThread.shareThread")})}),(0,f.jsx)("div",{className:"py-6 px-2",children:(0,f.jsx)(oL,{threadData:p})})]})}):(0,f.jsx)(rp.Vq,{open:e,onOpenChange:t,children:(0,f.jsxs)(rp.cZ,{className:"",style:{maxWidth:"share"===i.type?"1000px":"396px"},children:[(0,f.jsx)(rp.fK,{className:"flex justify-between items-center pb-0",children:(0,f.jsx)(rp.$N,{className:"text-lg font-medium w-full",children:(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("div",{className:"w-5",children:(0,f.jsx)(ru.u_,{})}),o("shareThread.shareThread")]})})}),(0,f.jsx)(oB,{threadData:p,threadList:c,dataLoading:m})]})})},oV=e=>{let{open:t,onOpenChange:r}=e,s=(0,g.useTranslations)();return(0,f.jsx)(rp.Vq,{open:t,onOpenChange:r,children:(0,f.jsxs)(rp.cZ,{className:"sm:max-w-[425px] rounded-lg w-[calc(100%-4rem)]",hideCloseButton:!0,children:[(0,f.jsxs)(rp.fK,{className:"text-center",children:[(0,f.jsx)(rp.$N,{className:"text-lg font-medium mb-4",children:s("stop_reply_warning_modal_title")}),(0,f.jsx)(rp.Be,{className:"text-base text-left",children:s("stop_reply_warning_modal_description")})]}),(0,f.jsx)(rp.cN,{className:"flex flex-row gap-3 mt-4",children:(0,f.jsx)(tK.z,{variant:"outline",className:"flex-1 rounded-md bg-primary hover:bg-primary/80 text-white text-base py-6",onClick:()=>r(!1),tabIndex:-1,children:s("searchAddition.to_web_use_file_upload_btn")})})]})})};let oU=e=>{let{isMyThread:t,showAnswerStopWarningModal:r,setShowAnswerStopWarningModal:s}=e;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(oH,{}),(0,f.jsx)(ou,{canEdit:t||!1}),(0,f.jsx)(ob,{}),(0,f.jsx)(oV,{open:r,onOpenChange:s}),(0,f.jsx)(lD.C,{type:"thread",onNoteUpdateGraphic:(e,t,r)=>{rn.$.publish("onNoteUpdateGraphic",{id:e,imgUrl:t,newId:r})},onNoteAddGraphic:(e,t,r,s)=>{rn.$.publish("onNoteAddGraphic",{id:e,imgUrl:t,isLoading:r,tempId:s})}})]})};var oW=e=>{let{visible:t,closeDrawer:r,children:s}=e,n=(0,v.useRef)(null),a=(0,v.useRef)(null),{isDark:i}=(0,rY.Z)();return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{ref:n,className:"bg-[#f6f7f9] dark:bg-[#353B46] min-w-[300px] overflow-y-auto custom-scrollbar\n            h-[100vh] flex flex-col ".concat(i?"dark":""," transition-all ").concat(t?"":" opacity-0 invisible"),children:[(0,f.jsx)("button",{onClick:r,ref:a,className:"absolute z-10 text-[#667085] dark:text-[#B9BFCA] top-5 right-4 hover:text-gray-800",children:(0,f.jsx)(tC.Z,{className:"cursor-pointer",size:22})}),s]})})},oG=()=>{let e=(0,g.useTranslations)(),t=(0,to.V)(),r=(0,to.V)(),s=(0,iJ.Z)(e=>e.autoTranslateSources),{isShowAgentSources:n,setIsShowAgentSources:a,sourceType:i,agentSources:l,sourcesHtml:o,sourceTitle:d}=(0,tP.Z)(),c=async()=>{r.copy(await (0,nX.h_)(o))},u=e=>{e.preventDefault(),e.stopPropagation(),iJ.Z.getState().setAutoTranslateSources(!s)};return(0,f.jsxs)(oW,{visible:n,closeDrawer:()=>a(!1),children:["sources"===i&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("header",{className:"sticky top-0 px-6 flex-initial text-large font-semibold border-b border-slate-200 dark:border-[#6D7276] flex flex-col gap-1",children:[(0,f.jsxs)("div",{className:"flex items-center gap-2 h-[62px]",children:[(0,f.jsx)(iz.Z,{})," ",e("sources")]}),(0,f.jsx)("div",{className:"absolute right-14 top-4 flex ",children:(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(e6.e,{delay:0,content:e("translate_sources"),className:"bg-[#353B46] text-white dark:bg-[#353B46] dark:text-white",children:(0,f.jsx)(tK.z,{variant:"simple",className:(0,t_.cn)("mr-2",s&&"text-theme-blue-600 dark:text-[#0694FF] bg-[#F6F7F9] dark:bg-[#353B46]"),onPointerDown:u,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),u(e))},children:(0,f.jsx)(a8.vN,{className:"w-4 h-4",onPointerDown:u,tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),u(e))}})})})})})]}),(0,f.jsx)(iB.o,{className:"p-6 custom-scrollbar overflow-x-hidden",children:(0,f.jsx)(iq.F,{sources:l,canEdit:!1,isDone:!0,isAll:!0,isVisible:!0,rid:""})})]}),"html"===i&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("header",{className:"sticky top-0 px-6 flex-initial text-base font-semibold border-b border-slate-200 dark:border-[#6D7276] flex flex-col gap-1",children:(0,f.jsxs)("div",{className:"flex items-center gap-2 h-[62px]",children:[(0,f.jsx)(iO,{size:18,className:"flex-shrink-0"}),(0,f.jsx)("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:d}),(0,f.jsxs)(iH.F,{placement:"top",offset:-2,children:[(0,f.jsx)(e6.e,{delay:0,content:e("copy_content"),children:(0,f.jsx)("div",{className:"max-w-fit ml-auto mr-5",children:(0,f.jsx)(iV.S,{children:(0,f.jsx)(tK.z,{size:"sm",className:"bg-transparent hover:bg-transparent hover:text-gray-800 text-[#667085] dark:text-[#B9BFCA]",children:r.copied||t.copied?(0,f.jsx)(ts.Z,{size:20,color:"#4ba570"}):(0,f.jsx)(nS.Z,{size:18})})})})}),(0,f.jsxs)(iU.a,{"aria-label":"Topic actions",variant:"flat",children:[(0,f.jsx)(iW.W,{className:"text-[#1D3C6D] hover:!bg-blue-100 hover:!text-[#1D3C6D] dark:text-[#EDF3FC] hover:dark:!bg-[#2E3643] hover:dark:!text-[#EDF3FC]",onPress:c,startContent:(0,f.jsx)(tp.eC,{className:"h-5 w-5"}),children:e("textFormat")},"copyText"),(0,f.jsx)(iW.W,{className:"text-[#1D3C6D] hover:!bg-blue-100 hover:!text-[#1D3C6D] dark:text-[#EDF3FC] hover:dark:!bg-[#2E3643] hover:dark:!text-[#EDF3FC]",onPress:()=>{let e=o.replace(/^\n\n/,"");t.copy(e)},startContent:(0,f.jsx)(tp.WO,{className:"h-5 w-5"}),children:e("MarkdownFormat")},"copyMarkdown")]})]})]})}),(0,f.jsx)(iB.o,{className:"py-6 custom-scrollbar overflow-x-hidden",children:(0,f.jsx)("div",{className:(0,t_.cn)("prose prose-md dark:prose-invert max-w-full flex justify-center",rD().prose),children:(0,f.jsx)(rR.Z,{rid:"",loading:!1,isVisible:!0,className:"w-[80%] break-all",children:o})})})]})]})},o$=r(65129),oY=r(35769),oX=r(58343),oJ=r(59699),oK=x[" useId ".trim().toString()]||(()=>void 0),oQ=0;function o0(e){let[t,r]=v.useState(oK());return(0,oJ.b)(()=>{e||r(e=>e??String(oQ++))},[e]),e||(t?`radix-${t}`:"")}var o1=r(937);function o2(e){let t=function(e){let t=v.forwardRef((e,t)=>{let r,s;let{children:n,...a}=e,i=v.isValidElement(n)?(r=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning?n.ref:(r=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning?n.props.ref:n.props.ref||n.ref:void 0,l=(0,oY.e)(i,t);if(v.isValidElement(n)){let e=function(e,t){let r={...t};for(let s in t){let n=e[s],a=t[s];/^on[A-Z]/.test(s)?n&&a?r[s]=(...e)=>{let t=a(...e);return n(...e),t}:n&&(r[s]=n):"style"===s?r[s]={...n,...a}:"className"===s&&(r[s]=[n,a].filter(Boolean).join(" "))}return{...e,...r}}(a,n.props);return n.type!==v.Fragment&&(e.ref=l),v.cloneElement(n,e)}return v.Children.count(n)>1?v.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=v.forwardRef((e,r)=>{let{children:s,...n}=e,a=v.Children.toArray(s),i=a.find(o5);if(i){let e=i.props.children,s=a.map(t=>t!==i?t:v.Children.count(e)>1?v.Children.only(null):v.isValidElement(e)?e.props.children:null);return(0,f.jsx)(t,{...n,ref:r,children:v.isValidElement(e)?v.cloneElement(e,void 0,s):null})}return(0,f.jsx)(t,{...n,ref:r,children:s})});return r.displayName=`${e}.Slot`,r}var o3=Symbol("radix.slottable");function o5(e){return v.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===o3}var o6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=o2(`Primitive.${t}`),s=v.forwardRef((e,s)=>{let{asChild:n,...a}=e,i=n?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,f.jsx)(i,{...a,ref:s})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),o4=r(94545),o7=r(40129),o8="dismissableLayer.update",o9=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),de=v.forwardRef((e,t)=>{let{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:n,onFocusOutside:a,onInteractOutside:i,onDismiss:l,...o}=e,d=v.useContext(o9),[c,u]=v.useState(null),p=c?.ownerDocument??globalThis?.document,[,h]=v.useState({}),x=(0,oY.e)(t,e=>u(e)),g=Array.from(d.layers),[b]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(b),w=c?g.indexOf(c):-1,j=d.layersWithOutsidePointerEventsDisabled.size>0,C=w>=y,_=function(e,t=globalThis?.document){let r=(0,o4.W)(e),s=v.useRef(!1),n=v.useRef(()=>{});return v.useEffect(()=>{let e=e=>{if(e.target&&!s.current){let s=function(){dr("dismissableLayer.pointerDownOutside",r,a,{discrete:!0})},a={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",n.current),n.current=s,t.addEventListener("click",n.current,{once:!0})):s()}else t.removeEventListener("click",n.current);s.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",e),t.removeEventListener("click",n.current)}},[t,r]),{onPointerDownCapture:()=>s.current=!0}}(e=>{let t=e.target,r=[...d.branches].some(e=>e.contains(t));!C||r||(n?.(e),i?.(e),e.defaultPrevented||l?.())},p),k=function(e,t=globalThis?.document){let r=(0,o4.W)(e),s=v.useRef(!1);return v.useEffect(()=>{let e=e=>{e.target&&!s.current&&dr("dismissableLayer.focusOutside",r,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}(e=>{let t=e.target;[...d.branches].some(e=>e.contains(t))||(a?.(e),i?.(e),e.defaultPrevented||l?.())},p);return(0,o7.e)(e=>{w!==d.layers.size-1||(s?.(e),!e.defaultPrevented&&l&&(e.preventDefault(),l()))},p),v.useEffect(()=>{if(c)return r&&(0===d.layersWithOutsidePointerEventsDisabled.size&&(m=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(c)),d.layers.add(c),dt(),()=>{r&&1===d.layersWithOutsidePointerEventsDisabled.size&&(p.body.style.pointerEvents=m)}},[c,p,r,d]),v.useEffect(()=>()=>{c&&(d.layers.delete(c),d.layersWithOutsidePointerEventsDisabled.delete(c),dt())},[c,d]),v.useEffect(()=>{let e=()=>h({});return document.addEventListener(o8,e),()=>document.removeEventListener(o8,e)},[]),(0,f.jsx)(o6.div,{...o,ref:x,style:{pointerEvents:j?C?"auto":"none":void 0,...e.style},onFocusCapture:(0,oX.M)(e.onFocusCapture,k.onFocusCapture),onBlurCapture:(0,oX.M)(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:(0,oX.M)(e.onPointerDownCapture,_.onPointerDownCapture)})});function dt(){let e=new CustomEvent(o8);document.dispatchEvent(e)}function dr(e,t,r,{discrete:s}){let n=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});(t&&n.addEventListener(e,t,{once:!0}),s)?n&&aX.flushSync(()=>n.dispatchEvent(a)):n.dispatchEvent(a)}de.displayName="DismissableLayer",v.forwardRef((e,t)=>{let r=v.useContext(o9),s=v.useRef(null),n=(0,oY.e)(t,s);return v.useEffect(()=>{let e=s.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),(0,f.jsx)(o6.div,{...e,ref:n})}).displayName="DismissableLayerBranch";var ds="focusScope.autoFocusOnMount",dn="focusScope.autoFocusOnUnmount",da={bubbles:!1,cancelable:!0},di=v.forwardRef((e,t)=>{let{loop:r=!1,trapped:s=!1,onMountAutoFocus:n,onUnmountAutoFocus:a,...i}=e,[l,o]=v.useState(null),d=(0,o4.W)(n),c=(0,o4.W)(a),u=v.useRef(null),p=(0,oY.e)(t,e=>o(e)),h=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(s){let e=function(e){if(h.paused||!l)return;let t=e.target;l.contains(t)?u.current=t:dc(u.current,{select:!0})},t=function(e){if(h.paused||!l)return;let t=e.relatedTarget;null===t||l.contains(t)||dc(u.current,{select:!0})};document.addEventListener("focusin",e),document.addEventListener("focusout",t);let r=new MutationObserver(function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&dc(l)});return l&&r.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[s,l,h.paused]),v.useEffect(()=>{if(l){du.add(h);let e=document.activeElement;if(!l.contains(e)){let t=new CustomEvent(ds,da);l.addEventListener(ds,d),l.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){let r=document.activeElement;for(let s of e)if(dc(s,{select:t}),document.activeElement!==r)return}(dl(l).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&dc(l))}return()=>{l.removeEventListener(ds,d),setTimeout(()=>{let t=new CustomEvent(dn,da);l.addEventListener(dn,c),l.dispatchEvent(t),t.defaultPrevented||dc(e??document.body,{select:!0}),l.removeEventListener(dn,c),du.remove(h)},0)}}},[l,d,c,h]);let m=v.useCallback(e=>{if(!r&&!s||h.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){let t=e.currentTarget,[s,a]=function(e){let t=dl(e);return[dd(t,e),dd(t.reverse(),e)]}(t);s&&a?e.shiftKey||n!==a?e.shiftKey&&n===s&&(e.preventDefault(),r&&dc(a,{select:!0})):(e.preventDefault(),r&&dc(s,{select:!0})):n===t&&e.preventDefault()}},[r,s,h.paused]);return(0,f.jsx)(o6.div,{tabIndex:-1,...i,ref:p,onKeyDown:m})});function dl(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function dd(e,t){for(let r of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(r,{upTo:t}))return r}function dc(e,{select:t=!1}={}){if(e&&e.focus){var r;let s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&(r=e)instanceof HTMLInputElement&&"select"in r&&t&&e.select()}}di.displayName="FocusScope";var du=(n=[],{add(e){let t=n[0];e!==t&&t?.pause(),(n=dp(n,e)).unshift(e)},remove(e){n=dp(n,e),n[0]?.resume()}});function dp(e,t){let r=[...e],s=r.indexOf(t);return -1!==s&&r.splice(s,1),r}var dh=v.forwardRef((e,t)=>{let{container:r,...s}=e,[n,a]=v.useState(!1);(0,oJ.b)(()=>a(!0),[]);let i=r||n&&globalThis?.document?.body;return i?aX.createPortal((0,f.jsx)(o6.div,{...s,ref:t}),i):null});dh.displayName="Portal";var dm=r(44921),df=0;function dv(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var dx=r(37995),dg="right-scroll-bar-position",db="width-before-scroll-bar";function dy(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var dw="undefined"!=typeof window?v.useLayoutEffect:v.useEffect,dj=new WeakMap,dC=(void 0===a&&(a={}),(void 0===i&&(i=function(e){return e}),l=[],o=!1,d={read:function(){if(o)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return l.length?l[l.length-1]:null},useMedium:function(e){var t=i(e,o);return l.push(t),function(){l=l.filter(function(e){return e!==t})}},assignSyncMedium:function(e){for(o=!0;l.length;){var t=l;l=[],t.forEach(e)}l={push:function(t){return e(t)},filter:function(){return l}}},assignMedium:function(e){o=!0;var t=[];if(l.length){var r=l;l=[],r.forEach(e),t=l}var s=function(){var r=t;t=[],r.forEach(e)},n=function(){return Promise.resolve().then(s)};n(),l={push:function(e){t.push(e),n()},filter:function(e){return t=t.filter(e),l}}}}).options=(0,dx.pi)({async:!0,ssr:!1},a),d),d_=function(){},dk=v.forwardRef(function(e,t){var r,s,n,a,i=v.useRef(null),l=v.useState({onScrollCapture:d_,onWheelCapture:d_,onTouchMoveCapture:d_}),o=l[0],d=l[1],c=e.forwardProps,u=e.children,p=e.className,h=e.removeScrollBar,m=e.enabled,f=e.shards,x=e.sideCar,g=e.noIsolation,b=e.inert,y=e.allowPinchZoom,w=e.as,j=e.gapMode,C=(0,dx._T)(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=(r=[i,t],s=function(e){return r.forEach(function(t){return dy(t,e)})},(n=(0,v.useState)(function(){return{value:null,callback:s,facade:{get current(){return n.value},set current(value){var e=n.value;e!==value&&(n.value=value,n.callback(value,e))}}}})[0]).callback=s,a=n.facade,dw(function(){var e=dj.get(a);if(e){var t=new Set(e),s=new Set(r),n=a.current;t.forEach(function(e){s.has(e)||dy(e,null)}),s.forEach(function(e){t.has(e)||dy(e,n)})}dj.set(a,r)},[r]),a),k=(0,dx.pi)((0,dx.pi)({},C),o);return v.createElement(v.Fragment,null,m&&v.createElement(x,{sideCar:dC,removeScrollBar:h,shards:f,noIsolation:g,inert:b,setCallbacks:d,allowPinchZoom:!!y,lockRef:i,gapMode:j}),c?v.cloneElement(v.Children.only(u),(0,dx.pi)((0,dx.pi)({},k),{ref:_})):v.createElement(void 0===w?"div":w,(0,dx.pi)({},k,{className:p,ref:_}),u))});dk.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},dk.classNames={fullWidth:db,zeroRight:dg};var dN=function(e){var t=e.sideCar,r=(0,dx._T)(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw Error("Sidecar medium not found");return v.createElement(s,(0,dx.pi)({},r))};dN.isSideCarExport=!0;var dE=r(12985),dS=function(){var e=0,t=null;return{add:function(r){if(0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=(0,dE.V)();return t&&e.setAttribute("nonce",t),e}())){var s,n;(s=t).styleSheet?s.styleSheet.cssText=r:s.appendChild(document.createTextNode(r)),n=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(n)}e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},dT=function(){var e=dS();return function(t,r){v.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},dF=function(){var e=dT();return function(t){return e(t.styles,t.dynamic),null}},dL={left:0,top:0,right:0,gap:0},dM=function(e){return parseInt(e||"",10)||0},dA=function(e){var t=window.getComputedStyle(document.body),r=t["padding"===e?"paddingLeft":"marginLeft"],s=t["padding"===e?"paddingTop":"marginTop"],n=t["padding"===e?"paddingRight":"marginRight"];return[dM(r),dM(s),dM(n)]},dP=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return dL;var t=dA(e),r=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-r+t[2]-t[0])}},dZ=dF(),dI="data-scroll-locked",dD=function(e,t,r,s){var n=e.left,a=e.top,i=e.right,l=e.gap;return void 0===r&&(r="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(s,";\n   padding-right: ").concat(l,"px ").concat(s,";\n  }\n  body[").concat(dI,"] {\n    overflow: hidden ").concat(s,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(s,";"),"margin"===r&&"\n    padding-left: ".concat(n,"px;\n    padding-top: ").concat(a,"px;\n    padding-right: ").concat(i,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(l,"px ").concat(s,";\n    "),"padding"===r&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(dg," {\n    right: ").concat(l,"px ").concat(s,";\n  }\n  \n  .").concat(db," {\n    margin-right: ").concat(l,"px ").concat(s,";\n  }\n  \n  .").concat(dg," .").concat(dg," {\n    right: 0 ").concat(s,";\n  }\n  \n  .").concat(db," .").concat(db," {\n    margin-right: 0 ").concat(s,";\n  }\n  \n  body[").concat(dI,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(l,"px;\n  }\n")},dR=function(){var e=parseInt(document.body.getAttribute(dI)||"0",10);return isFinite(e)?e:0},dz=function(){v.useEffect(function(){return document.body.setAttribute(dI,(dR()+1).toString()),function(){var e=dR()-1;e<=0?document.body.removeAttribute(dI):document.body.setAttribute(dI,e.toString())}},[])},dO=function(e){var t=e.noRelative,r=e.noImportant,s=e.gapMode,n=void 0===s?"margin":s;dz();var a=v.useMemo(function(){return dP(n)},[n]);return v.createElement(dZ,{styles:dD(a,!t,n,r?"":"!important")})},dB=!1;if("undefined"!=typeof window)try{var dq=Object.defineProperty({},"passive",{get:function(){return dB=!0,!0}});window.addEventListener("test",dq,dq),window.removeEventListener("test",dq,dq)}catch(e){dB=!1}var dH=!!dB&&{passive:!1},dV=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return"hidden"!==r[t]&&!(r.overflowY===r.overflowX&&"TEXTAREA"!==e.tagName&&"visible"===r[t])},dU=function(e,t){var r=t.ownerDocument,s=t;do{if("undefined"!=typeof ShadowRoot&&s instanceof ShadowRoot&&(s=s.host),dW(e,s)){var n=dG(e,s);if(n[1]>n[2])return!0}s=s.parentNode}while(s&&s!==r.body);return!1},dW=function(e,t){return"v"===e?dV(t,"overflowY"):dV(t,"overflowX")},dG=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},d$=function(e,t,r,s,n){var a,i=(a=window.getComputedStyle(t).direction,"h"===e&&"rtl"===a?-1:1),l=i*s,o=r.target,d=t.contains(o),c=!1,u=l>0,p=0,h=0;do{var m=dG(e,o),f=m[0],v=m[1]-m[2]-i*f;(f||v)&&dW(e,o)&&(p+=v,h+=f),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!d&&o!==document.body||d&&(t.contains(o)||t===o));return u&&(n&&1>Math.abs(p)||!n&&l>p)?c=!0:!u&&(n&&1>Math.abs(h)||!n&&-l>h)&&(c=!0),c},dY=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},dX=function(e){return[e.deltaX,e.deltaY]},dJ=function(e){return e&&"current"in e?e.current:e},dK=0,dQ=[],d0=(c=function(e){var t=v.useRef([]),r=v.useRef([0,0]),s=v.useRef(),n=v.useState(dK++)[0],a=v.useState(dF)[0],i=v.useRef(e);v.useEffect(function(){i.current=e},[e]),v.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(n));var t=(0,dx.ev)([e.lockRef.current],(e.shards||[]).map(dJ),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(n))})}}},[e.inert,e.lockRef.current,e.shards]);var l=v.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!i.current.allowPinchZoom;var n,a=dY(e),l=r.current,o="deltaX"in e?e.deltaX:l[0]-a[0],d="deltaY"in e?e.deltaY:l[1]-a[1],c=e.target,u=Math.abs(o)>Math.abs(d)?"h":"v";if("touches"in e&&"h"===u&&"range"===c.type)return!1;var p=dU(u,c);if(!p)return!0;if(p?n=u:(n="v"===u?"h":"v",p=dU(u,c)),!p)return!1;if(!s.current&&"changedTouches"in e&&(o||d)&&(s.current=n),!n)return!0;var h=s.current||n;return d$(h,t,e,"h"===h?o:d,!0)},[]),o=v.useCallback(function(e){if(dQ.length&&dQ[dQ.length-1]===a){var r="deltaY"in e?dX(e):dY(e),s=t.current.filter(function(t){var s;return t.name===e.type&&(t.target===e.target||e.target===t.shadowParent)&&(s=t.delta)[0]===r[0]&&s[1]===r[1]})[0];if(s&&s.should){e.cancelable&&e.preventDefault();return}if(!s){var n=(i.current.shards||[]).map(dJ).filter(Boolean).filter(function(t){return t.contains(e.target)});(n.length>0?l(e,n[0]):!i.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),d=v.useCallback(function(e,r,s,n){var a={name:e,delta:r,target:s,should:n,shadowParent:function(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}(s)};t.current.push(a),setTimeout(function(){t.current=t.current.filter(function(e){return e!==a})},1)},[]),c=v.useCallback(function(e){r.current=dY(e),s.current=void 0},[]),u=v.useCallback(function(t){d(t.type,dX(t),t.target,l(t,e.lockRef.current))},[]),p=v.useCallback(function(t){d(t.type,dY(t),t.target,l(t,e.lockRef.current))},[]);v.useEffect(function(){return dQ.push(a),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:p}),document.addEventListener("wheel",o,dH),document.addEventListener("touchmove",o,dH),document.addEventListener("touchstart",c,dH),function(){dQ=dQ.filter(function(e){return e!==a}),document.removeEventListener("wheel",o,dH),document.removeEventListener("touchmove",o,dH),document.removeEventListener("touchstart",c,dH)}},[]);var h=e.removeScrollBar,m=e.inert;return v.createElement(v.Fragment,null,m?v.createElement(a,{styles:"\n  .block-interactivity-".concat(n," {pointer-events: none;}\n  .allow-interactivity-").concat(n," {pointer-events: all;}\n")}):null,h?v.createElement(dO,{gapMode:e.gapMode}):null)},dC.useMedium(c),dN),d1=v.forwardRef(function(e,t){return v.createElement(dk,(0,dx.pi)({},e,{ref:t,sideCar:d0}))});d1.classNames=dk.classNames;var d2=r(19800),d3="Dialog",[d5,d6]=(0,o$.b)(d3),[d4,d7]=d5(d3),d8=e=>{let{__scopeDialog:t,children:r,open:s,defaultOpen:n,onOpenChange:a,modal:i=!0}=e,l=v.useRef(null),o=v.useRef(null),[d,c]=(0,o1.T)({prop:s,defaultProp:n??!1,onChange:a,caller:d3});return(0,f.jsx)(d4,{scope:t,triggerRef:l,contentRef:o,contentId:o0(),titleId:o0(),descriptionId:o0(),open:d,onOpenChange:c,onOpenToggle:v.useCallback(()=>c(e=>!e),[c]),modal:i,children:r})};d8.displayName=d3;var d9="DialogTrigger",ce=v.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,n=d7(d9,r),a=(0,oY.e)(t,n.triggerRef);return(0,f.jsx)(o6.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":cy(n.open),...s,ref:a,onClick:(0,oX.M)(e.onClick,n.onOpenToggle)})});ce.displayName=d9;var ct="DialogPortal",[cr,cs]=d5(ct,{forceMount:void 0}),cn=e=>{let{__scopeDialog:t,forceMount:r,children:s,container:n}=e,a=d7(ct,t);return(0,f.jsx)(cr,{scope:t,forceMount:r,children:v.Children.map(s,e=>(0,f.jsx)(dm.z,{present:r||a.open,children:(0,f.jsx)(dh,{asChild:!0,container:n,children:e})}))})};cn.displayName=ct;var ca="DialogOverlay",ci=v.forwardRef((e,t)=>{let r=cs(ca,e.__scopeDialog),{forceMount:s=r.forceMount,...n}=e,a=d7(ca,e.__scopeDialog);return a.modal?(0,f.jsx)(dm.z,{present:s||a.open,children:(0,f.jsx)(co,{...n,ref:t})}):null});ci.displayName=ca;var cl=o2("DialogOverlay.RemoveScroll"),co=v.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,n=d7(ca,r);return(0,f.jsx)(d1,{as:cl,allowPinchZoom:!0,shards:[n.contentRef],children:(0,f.jsx)(o6.div,{"data-state":cy(n.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),cd="DialogContent",cc=v.forwardRef((e,t)=>{let r=cs(cd,e.__scopeDialog),{forceMount:s=r.forceMount,...n}=e,a=d7(cd,e.__scopeDialog);return(0,f.jsx)(dm.z,{present:s||a.open,children:a.modal?(0,f.jsx)(cu,{...n,ref:t}):(0,f.jsx)(cp,{...n,ref:t})})});cc.displayName=cd;var cu=v.forwardRef((e,t)=>{let r=d7(cd,e.__scopeDialog),s=v.useRef(null),n=(0,oY.e)(t,r.contentRef,s);return v.useEffect(()=>{let e=s.current;if(e)return(0,d2.Ry)(e)},[]),(0,f.jsx)(ch,{...e,ref:n,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,oX.M)(e.onCloseAutoFocus,e=>{e.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:(0,oX.M)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:(0,oX.M)(e.onFocusOutside,e=>e.preventDefault())})}),cp=v.forwardRef((e,t)=>{let r=d7(cd,e.__scopeDialog),s=v.useRef(!1),n=v.useRef(!1);return(0,f.jsx)(ch,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(s.current||r.triggerRef.current?.focus(),t.preventDefault()),s.current=!1,n.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(s.current=!0,"pointerdown"!==t.detail.originalEvent.type||(n.current=!0));let a=t.target;r.triggerRef.current?.contains(a)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),ch=v.forwardRef((e,t)=>{let{__scopeDialog:r,trapFocus:s,onOpenAutoFocus:n,onCloseAutoFocus:a,...i}=e,l=d7(cd,r),o=v.useRef(null),d=(0,oY.e)(t,o);return v.useEffect(()=>{let e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??dv()),document.body.insertAdjacentElement("beforeend",e[1]??dv()),df++,()=>{1===df&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),df--}},[]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(di,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:n,onUnmountAutoFocus:a,children:(0,f.jsx)(de,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":cy(l.open),...i,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(c_,{titleId:l.titleId}),(0,f.jsx)(ck,{contentRef:o,descriptionId:l.descriptionId})]})]})}),cm="DialogTitle",cf=v.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,n=d7(cm,r);return(0,f.jsx)(o6.h2,{id:n.titleId,...s,ref:t})});cf.displayName=cm;var cv="DialogDescription",cx=v.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,n=d7(cv,r);return(0,f.jsx)(o6.p,{id:n.descriptionId,...s,ref:t})});cx.displayName=cv;var cg="DialogClose",cb=v.forwardRef((e,t)=>{let{__scopeDialog:r,...s}=e,n=d7(cg,r);return(0,f.jsx)(o6.button,{type:"button",...s,ref:t,onClick:(0,oX.M)(e.onClick,()=>n.onOpenChange(!1))})});function cy(e){return e?"open":"closed"}cb.displayName=cg;var cw="DialogTitleWarning",[cj,cC]=(0,o$.k)(cw,{contentName:cd,titleName:cm,docsSlug:"dialog"}),c_=({titleId:e})=>{let t=cC(cw),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return v.useEffect(()=>{e&&!document.getElementById(e)&&console.error(r)},[r,e]),null},ck=({contentRef:e,descriptionId:t})=>{let r=cC("DialogDescriptionWarning"),s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${r.contentName}}.`;return v.useEffect(()=>{let r=e.current?.getAttribute("aria-describedby");t&&r&&!document.getElementById(t)&&console.warn(s)},[s,e,t]),null},cN="AlertDialog",[cE,cS]=(0,o$.b)(cN,[d6]),cT=d6(),cF=e=>{let{__scopeAlertDialog:t,...r}=e,s=cT(t);return(0,f.jsx)(d8,{...s,...r,modal:!0})};cF.displayName=cN,v.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...s}=e,n=cT(r);return(0,f.jsx)(ce,{...n,...s,ref:t})}).displayName="AlertDialogTrigger";var cL=e=>{let{__scopeAlertDialog:t,...r}=e,s=cT(t);return(0,f.jsx)(cn,{...s,...r})};cL.displayName="AlertDialogPortal";var cM=v.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...s}=e,n=cT(r);return(0,f.jsx)(ci,{...n,...s,ref:t})});cM.displayName="AlertDialogOverlay";var cA="AlertDialogContent",[cP,cZ]=cE(cA),cI=function(e){let t=({children:e})=>(0,f.jsx)(f.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=o3,t}("AlertDialogContent"),cD=v.forwardRef((e,t)=>{let{__scopeAlertDialog:r,children:s,...n}=e,a=cT(r),i=v.useRef(null),l=(0,oY.e)(t,i),o=v.useRef(null);return(0,f.jsx)(cj,{contentName:cA,titleName:cR,docsSlug:"alert-dialog",children:(0,f.jsx)(cP,{scope:r,cancelRef:o,children:(0,f.jsxs)(cc,{role:"alertdialog",...a,...n,ref:l,onOpenAutoFocus:(0,oX.M)(n.onOpenAutoFocus,e=>{e.preventDefault(),o.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,f.jsx)(cI,{children:s}),(0,f.jsx)(cU,{contentRef:i})]})})})});cD.displayName=cA;var cR="AlertDialogTitle",cz=v.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...s}=e,n=cT(r);return(0,f.jsx)(cf,{...n,...s,ref:t})});cz.displayName=cR;var cO="AlertDialogDescription",cB=v.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...s}=e,n=cT(r);return(0,f.jsx)(cx,{...n,...s,ref:t})});cB.displayName=cO;var cq=v.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...s}=e,n=cT(r);return(0,f.jsx)(cb,{...n,...s,ref:t})});cq.displayName="AlertDialogAction";var cH="AlertDialogCancel",cV=v.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...s}=e,{cancelRef:n}=cZ(cH,r),a=cT(r),i=(0,oY.e)(t,n);return(0,f.jsx)(cb,{...a,...s,ref:i})});cV.displayName=cH;var cU=({contentRef:e})=>{let t=`\`${cA}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${cA}\` by passing a \`${cO}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${cA}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return v.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null};let cW=v.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,f.jsx)(cM,{className:(0,eY.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s,ref:t})});cW.displayName=cM.displayName;let cG=v.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,f.jsxs)(cL,{children:[(0,f.jsx)(cW,{}),(0,f.jsx)(cD,{ref:t,className:(0,eY.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...s})]})});cG.displayName=cD.displayName;let c$=e=>{let{className:t,...r}=e;return(0,f.jsx)("div",{className:(0,eY.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};c$.displayName="AlertDialogHeader";let cY=e=>{let{className:t,...r}=e;return(0,f.jsx)("div",{className:(0,eY.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};cY.displayName="AlertDialogFooter";let cX=v.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,f.jsx)(cz,{ref:t,className:(0,eY.cn)("text-lg font-semibold",r),...s})});cX.displayName=cz.displayName;let cJ=v.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,f.jsx)(cB,{ref:t,className:(0,eY.cn)("text-sm text-muted-foreground",r),...s})});cJ.displayName=cB.displayName;let cK=v.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,f.jsx)(cq,{ref:t,className:(0,eY.cn)((0,tK.d)(),r),...s})});cK.displayName=cq.displayName;let cQ=v.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,f.jsx)(cV,{ref:t,className:(0,eY.cn)((0,tK.d)({variant:"outline"}),"mt-2 sm:mt-0",r),...s})});cQ.displayName=cV.displayName;var c0=r(33265),c1=r(76972),c2=r(76356),c3=r(41529),c5=r(8510),c6=r(26831),c4=r(66292),c7=r.n(c4),c8=r(64155),c9=r(24321),ue=r(53492),ut=r(5245),ur=r(62273);let us=(0,tt.Z)("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]),un=(0,tt.Z)("redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);var ua=r(98065),ui=r(62814),ul=r(60351),uo=r(65740),ud=r(37280),uc=r(95214),uu=r(55571),up=r(51853),uh=r(31162),um=r(12387),uf=r(92683),uv=e=>{let{editor:t,handleImportToFeloDoc:r,onSave:s,onClose:n,isUpdated:a}=e,i=(0,g.useTranslations)(),{copied:l,copy:o}=(0,to.V)(),{editMessage:d}=(0,at.Z)(),c=async e=>{var r;let s=null===(r=e.target.files)||void 0===r?void 0:r[0];if(s){if(s.size>5242880){tg.Z.error(i("note.format.img_limit_size",{size:"5"})),e.target.value="";return}try{let e=await (0,al.Jd)(s,(null==d?void 0:d.id)||"");e.data&&(null==t||t.commands.insertImage({src:e.data,alt:"image",title:"",width:"auto"}))}catch(e){console.error("Upload error:",e)}e.target.value=""}};return t?(0,f.jsxs)("div",{className:"border-b  px-4 py-3 z-10  bg-white dark:bg-black flex flex-wrap sticky top-0 left-0  pr-[60px] items-center gap-y-3",children:[(0,f.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,f.jsx)(tK.z,{variant:"ghost",size:"sm",onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().undo(),title:i("note.format.undo"),className:"w-8 h-8 p-0",children:(0,f.jsx)(us,{className:"h-4 w-4"})}),(0,f.jsx)(tK.z,{variant:"ghost",size:"sm",onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().redo(),title:i("note.format.redo"),className:"w-8 h-8 p-0",children:(0,f.jsx)(un,{className:"h-4 w-4"})})]}),(0,f.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,f.jsx)("div",{className:"w-[1px] h-[20px] bg-[#E6E9EF] mx-2 dark:bg-[#353B46] "}),(0,f.jsx)(uf.T,{editor:t}),(0,f.jsx)("div",{className:"w-[1px] h-[20px] bg-[#E6E9EF] mx-2 dark:bg-[#353B46]"})]}),(0,f.jsx)(tK.z,{variant:"ghost",size:"sm",onClick:()=>t.chain().focus().toggleBold().run(),className:"w-8 h-8 p-0 ".concat(t.isActive("bold")?"bg-muted":""),title:i("note.format.bold"),children:(0,f.jsx)(ua.Z,{className:"h-4 w-4"})}),(0,f.jsx)(tK.z,{variant:"ghost",size:"sm",onClick:()=>t.chain().focus().toggleItalic().run(),className:"w-8 h-8 p-0 ".concat(t.isActive("italic")?"bg-muted":""),title:i("note.format.italic"),children:(0,f.jsx)(ui.Z,{className:"h-4 w-4"})}),(0,f.jsx)(tK.z,{variant:"ghost",size:"sm",onClick:()=>t.chain().focus().toggleStrike().run(),className:"w-8 h-8 p-0 ".concat(t.isActive("strike")?"bg-muted":""),title:i("note.format.strike_through"),children:(0,f.jsx)(ul.Z,{className:"h-4 w-4"})}),(0,f.jsx)(tK.z,{variant:"ghost",size:"sm",onClick:()=>t.chain().focus().toggleBulletList().run(),className:"w-8 h-8 p-0 ".concat(t.isActive("bulletList")?"bg-muted":""),title:i("note.format.bullet_list"),children:(0,f.jsx)(uo.Z,{className:"h-4 w-4"})}),(0,f.jsx)(tK.z,{variant:"ghost",size:"sm",onClick:()=>t.chain().focus().toggleOrderedList().run(),className:"w-8 h-8 p-0 ".concat(t.isActive("orderedList")?"bg-muted":""),title:i("note.format.numbered_list"),children:(0,f.jsx)(ud.Z,{className:"h-4 w-4"})}),(0,f.jsx)(tK.z,{variant:"ghost",size:"sm",className:"w-8 h-8 p-0 ",children:(0,f.jsx)(uc.Z,{className:"h-4 w-4"})}),(0,f.jsxs)("div",{className:"flex gap-1",children:[(0,f.jsxs)(rh.h_,{children:[(0,f.jsx)(rh.$F,{asChild:!0,children:(0,f.jsxs)(tK.z,{variant:"ghost",size:"sm",className:"w-8 h-8 p-0 ",children:[" ",(0,f.jsx)(uu.Z,{})]})}),(0,f.jsxs)(rh.AW,{align:"center",className:"max-w-68",children:[(0,f.jsxs)(rh.Xi,{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{var e;return null===(e=document.getElementById("image-upload"))||void 0===e?void 0:e.click()},children:[(0,f.jsx)(up.Z,{className:"w-4 h-4"}),(0,f.jsx)("span",{children:i("note.upload_file")})]}),(0,f.jsxs)(rh.Xi,{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{c1.Z.getState().setShowAICreateModal(!0)},children:[(0,f.jsx)(uu.Z,{className:"w-4 h-4"}),(0,f.jsx)("span",{children:i("note.ai_tool.drawing")})]})]})]}),(0,f.jsx)("input",{id:"image-upload",type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:c,className:"hidden"})]}),(0,f.jsxs)("div",{className:"flex gap-[6px] items-center ",children:[(0,f.jsx)(tK.z,{variant:"outline",size:"sm",onClick:()=>{t&&(o(t.storage.markdown.get()),tg.Z.success(i("threadEdit.content_copied")))},title:i("copyMarkdown"),className:"w-8 h-8 p-0",children:l?(0,f.jsx)(ts.Z,{className:"h-4 w-4 text-green-500"}):(0,f.jsx)(nS.Z,{className:"h-4 w-4"})}),(0,f.jsxs)(o_.J2,{children:[(0,f.jsx)(o_.xo,{asChild:!0,children:(0,f.jsx)(tK.z,{size:"sm",className:"w-8 h-8 p-0",title:i("rewrite_to_docs.title"),children:(0,f.jsx)(uh.Z,{className:"w-4 h-4"})})}),(0,f.jsx)(o_.yk,{className:"min-w-[200px] w-fit p-1 ",children:(0,f.jsx)("div",{className:"w-auto flex flex-col space-y-0.5",children:(0,f.jsxs)(tK.z,{variant:"ghost",className:"h-8 w-auto px-2 text-sm",onClick:()=>null==r?void 0:r(t.storage.markdown.get()),children:[(0,f.jsx)(oa,{className:"w-4 h-4 "})," ",i("rewrite_to_docs.title")]})})})]}),(0,f.jsxs)(tK.z,{size:"sm",onClick:()=>s(t.storage.markdown.get()),className:"ml-auto px-3",title:i("threadEdit.save_submit"),children:[(0,f.jsx)(um.Z,{className:"w-4 h-4 "}),i("threadEdit.save_submit")]})]}),(0,f.jsx)(tK.z,{variant:"ghost",size:"sm",onClick:n,title:i("close"),className:"w-9 h-9 p-0 select-none absolute right-5 top-[12px]",children:(0,f.jsx)(tC.Z,{className:"h-4 w-4"})})]}):null},ux=r(5588),ug=e=>{let{editor:t}=e,[r,s]=(0,v.useState)(""),[n,a]=(0,v.useState)(""),i=(0,g.useTranslations)();return(0,v.useEffect)(()=>{if((null==t?void 0:t.isActive("image"))||(null==t?void 0:t.isActive("customImage"))){let e=t.getAttributes("image").src?t.getAttributes("image"):t.getAttributes("customImage");s(e.src||""),a(e.alt||"")}},[t]),(0,f.jsxs)("div",{className:"flex flex-col gap-2 p-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-md",children:[(0,f.jsxs)("div",{className:" flex flex-row gap-2 items-center",children:[(0,f.jsxs)("div",{className:"text-xs min-w-[32px] w-auto",children:[i("topic.link"),":"]}),(0,f.jsx)(ux.I,{id:"image-url",value:r,onChange:e=>s(e.target.value),className:"h-8 text-sm",placeholder:"https://example.com/image.jpg"})]}),(0,f.jsxs)("div",{className:" flex flex-row gap-2 items-center",children:[(0,f.jsxs)("div",{className:"text-xs min-w-[32px] w-auto",children:[i("agent.description"),":"]}),(0,f.jsx)(ux.I,{id:"alt-text",value:n,onChange:e=>a(e.target.value),className:"h-8 text-sm",placeholder:"image"})]}),(0,f.jsx)(tK.z,{onClick:()=>{((null==t?void 0:t.isActive("image"))||(null==t?void 0:t.isActive("customImage")))&&t.chain().focus().setImage({src:r,alt:n}).run()},size:"sm",className:"w-full mt-1",children:i("save")})]})},ub=e=>{let{content:t,onChange:r,onEditorReady:s,convertSummaryToNote:n,onSave:a,onClose:i,isUpdated:l,setIsUpdated:o}=e,d=(0,c6.jE)({extensions:[c2.Vg.configure({image:!1,blockMenu:!1}),c2.X6,c5.Z,c3.d.configure({inline:!0,allowBase64:!0})],content:"",enablePasteRules:!0,onUpdate:e=>{let{editor:t}=e;null==r||r(t.getHTML()),o(!0)},editorProps:{handlePaste:(e,t)=>{var r,s;let n=Array.from((null===(r=t.clipboardData)||void 0===r?void 0:r.items)||[]);if(n.some(e=>-1!==e.type.indexOf("image")))return t.preventDefault(),n.forEach(e=>{if(0===e.type.indexOf("image")){let t=e.getAsFile();t&&h(t)}}),!0;let a=null===(s=t.clipboardData)||void 0===s?void 0:s.getData("text/html");if(a){t.preventDefault();let e=document.createElement("div");e.innerHTML=a,e.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach(e=>{e.removeAttribute("id")});let r=e.innerHTML;return null==d||d.commands.insertContent(r),!0}return!1},handleDrop:(e,t)=>{var r;let s=null===(r=t.dataTransfer)||void 0===r?void 0:r.files;if(!(null==s?void 0:s.length))return!1;let n=Array.from(s).filter(e=>(0,c0.isAllowedImageType)(e.type));return!!n.length&&(t.preventDefault(),n.forEach(h),!0)},transformPastedHTML:e=>e,transformPastedText:e=>e}}),{createImgList:c,setCreatedImgList:u}=(0,c1.Z)(),p=(0,ur.J)(d),h=async e=>{if(!(0,c0.isAllowedImageType)(e.type)){tg.Z.error(x("note.format.img_type_error"));return}if(e.size>5242880){tg.Z.error(x("note.format.img_limit_size",{size:"5"}));return}try{let t=await (0,al.Jd)(e,"10001");t.data&&(null==d||d.commands.insertImage({src:t.data,alt:"image",title:""}))}catch(e){console.error("Upload error:",e),tg.Z.error(x("note.format.upload_failed"))}},{isMobile:m}=(0,re.b)(),x=(0,g.useTranslations)(),{setGraphicQueryData:b,setShowGraphicModel:y}=(0,ry.Z)(),{editThreadId:w}=(0,at.Z)();(0,v.useEffect)(()=>{d&&t&&(null==d||d.storage.markdown.set(t),null==d||d.commands.setTextSelection(0))},[d,t]),(0,v.useEffect)(()=>{d&&(null==s||s(d))},[d,s]);let j=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!d)return;let{to:s}=d.state.selection;d.chain().focus().insertContentAt(s,{type:"customImage",attrs:{src:t,"data-id":e,class:"smart-art ".concat(r?"image-loading":"")}}).run()},C=(e,t,r)=>{d&&d.chain().updateSmartArtImage({oldId:e,src:t,newId:r||e,removeClass:"image-loading"}).run()};(0,v.useEffect)(()=>{let e=rn.$.subscribe("onNoteAddGraphic",e=>{j(e.id,e.imgUrl,e.isLoading)}),t=rn.$.subscribe("onNoteUpdateGraphic",e=>{C(e.id,e.imgUrl,e.newId)});return()=>{e(),t()}},[d]);let _=()=>d?d.state.doc.textBetween(d.state.selection.from,d.state.selection.to):"",k=e=>{if(!e.length){tg.Z.warning(x("graphic.select_text_not_empty"),3e3);return}b({messageId:(0,c8.Z)(),threadId:(0,c8.Z)(),language:"auto",inputText:e,query:"",canEdit:!0,template:void 0,note_id:new Date().getTime()+""+Math.floor(1e4*Math.random()),smart_art_id:"",mode:"note"}),y(!0),(0,tb.fk)(ty.U.DOCS_CREATE_SMARTART,{query:"",note_id:""},!0)},N=(0,v.useRef)(new Map),E=(0,v.useCallback)(async()=>{if(w)try{let e=await (0,al._q)(w);e.data&&(u(e.data.images.map(e=>({url:e}))),N.current.set(w,e.data.images))}catch(e){}},[w]),S=(0,v.useCallback)(c7()(async()=>{if(!w||0===c.length)return;let e=JSON.stringify(c.map(e=>e.url));if(N.current.get(w)!==e)try{await (0,al.AG)({thread_id:w,images:c.map(e=>e.url)}),N.current.set(w,e)}catch(e){}},300),[w,c]);return(0,v.useEffect)(()=>{w&&(u([]),E())},[w,E]),(0,v.useEffect)(()=>(w&&c.length>0&&S(),()=>{S.cancel()}),[w,c,S]),(0,v.useEffect)(()=>()=>{N.current.clear(),S.cancel()},[S]),(0,f.jsxs)("div",{className:"w-full flex flex-col relative",children:[(0,f.jsx)(uv,{editor:d,handleImportToFeloDoc:n,onSave:a,onClose:i,isUpdated:l}),(0,f.jsx)("div",{id:"docsContainer",className:"flex-1 overflow-auto custom-scrollbar",children:(0,f.jsx)(c6.kg,{editor:d,className:"px-6 py-4",children:(0,f.jsx)(c6.NM,{editor:d,tippyOptions:{arrow:!1,zIndex:12,placement:m?"bottom-start":"top-start",popperOptions:{modifiers:[{name:"preventOverflow",options:{boundary:"viewport",padding:8}}]},maxWidth:"calc(100vw - 16px)"},shouldShow:p.shouldShow,children:(0,f.jsxs)("div",{children:[(null==d?void 0:d.isActive("image"))||(null==d?void 0:d.isActive("customImage"))&&(0,f.jsx)(ug,{editor:d}),!(null==d?void 0:d.isActive("image"))&&!(null==d?void 0:d.isActive("customImage"))&&(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:"flex gap-2 z-[1] p-2 bg-white dark:bg-theme-bg-dark-100 border border-theme-border-200 dark:border-theme-border-dark-200 rounded-lg shadow-md select-none",children:[d&&(0,f.jsx)(ut.Z,{editor:d}),(0,f.jsxs)(ue.S,{onClick:()=>k(_()),children:[(0,f.jsxs)("div",{className:"flex items-center gap-1 justify-center text-sm hover:text-[#0694FF]",children:[(0,f.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 20 20",fill:"none",children:[(0,f.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.30425 1.75631C9.57637 1.63673 9.88646 1.63673 10.1586 1.75631C10.3865 1.85645 10.5238 2.02847 10.6 2.13484C10.6739 2.23795 10.7503 2.36836 10.8226 2.49185L13.8262 7.61877C13.8301 7.62544 13.834 7.63214 13.8379 7.63885C13.9105 7.76272 13.9872 7.89351 14.0411 8.00858C14.0962 8.12628 14.1807 8.33295 14.1542 8.5838C14.1226 8.88381 13.9638 9.15391 13.721 9.32837C13.5187 9.47367 13.3001 9.50442 13.1705 9.51616C13.0437 9.52766 12.8916 9.52763 12.7464 9.52759C12.7386 9.52759 12.7309 9.52759 12.7233 9.52759H6.73956C6.73189 9.52759 6.72419 9.52759 6.71647 9.52759C6.57125 9.52763 6.41912 9.52766 6.29229 9.51616C6.16276 9.50442 5.94409 9.47367 5.74187 9.32837C5.49907 9.15391 5.34025 8.88381 5.3086 8.5838C5.28214 8.33295 5.36668 8.12628 5.42178 8.00858C5.47564 7.89351 5.55232 7.76271 5.62493 7.63883C5.62886 7.63213 5.63278 7.62544 5.63668 7.61877L8.62854 2.51182C8.63242 2.50519 8.63632 2.49853 8.64023 2.49185C8.71254 2.36836 8.7889 2.23795 8.8628 2.13484C8.93903 2.02847 9.07636 1.85645 9.30425 1.75631ZM9.73142 3.3769L6.94177 8.1387H12.5211L9.73142 3.3769ZM14.1826 11.5032C12.6498 11.5032 11.4213 12.729 11.4213 14.2238C11.4213 15.7186 12.6498 16.9444 14.1826 16.9444C15.7153 16.9444 16.9438 15.7186 16.9438 14.2238C16.9438 12.729 15.7153 11.5032 14.1826 11.5032ZM10.0324 14.2238C10.0324 11.9465 11.8983 10.1143 14.1826 10.1143C16.4668 10.1143 18.3327 11.9465 18.3327 14.2238C18.3327 16.5011 16.4668 18.3333 14.1826 18.3333C11.8983 18.3333 10.0324 16.5011 10.0324 14.2238ZM4.08134 10.2941H7.1872C7.47124 10.2941 7.72446 10.294 7.93468 10.311C8.15895 10.3291 8.39435 10.3699 8.62455 10.4858C8.95988 10.6547 9.23404 10.9249 9.40637 11.2591C9.5251 11.4894 9.56682 11.725 9.5853 11.9485C9.60255 12.1572 9.60254 12.4084 9.60253 12.6885V15.7591C9.60254 16.0392 9.60255 16.2904 9.5853 16.4991C9.56682 16.7226 9.5251 16.9582 9.40637 17.1885C9.23404 17.5227 8.95988 17.793 8.62455 17.9618C8.39435 18.0777 8.15895 18.1185 7.93468 18.1366C7.72445 18.1536 7.47122 18.1536 7.18717 18.1536H4.08138C3.79732 18.1536 3.54409 18.1536 3.33386 18.1366C3.10959 18.1185 2.87419 18.0777 2.64399 17.9618C2.30866 17.793 2.0345 17.5227 1.86217 17.1885C1.74344 16.9582 1.70172 16.7226 1.68325 16.4991C1.66599 16.2904 1.666 16.0392 1.66602 15.7591V12.6885C1.666 12.4084 1.66599 12.1572 1.68325 11.9485C1.70172 11.725 1.74344 11.4894 1.86217 11.2591C2.0345 10.9249 2.30866 10.6547 2.64399 10.4858C2.87419 10.3699 3.10959 10.3291 3.33386 10.311C3.54408 10.294 3.7973 10.2941 4.08134 10.2941ZM3.26862 11.7263C3.19328 11.7643 3.13355 11.824 3.09664 11.8956C3.09664 11.8956 3.07851 11.9286 3.06741 12.0629C3.05546 12.2075 3.05491 12.4004 3.05491 12.714V15.7336C3.05491 16.0472 3.05546 16.2401 3.06741 16.3847C3.07851 16.519 3.09662 16.552 3.09662 16.552C3.13354 16.6236 3.19328 16.6834 3.26862 16.7213C3.27257 16.7233 3.30767 16.7411 3.44564 16.7522C3.59318 16.7641 3.78958 16.7647 4.10649 16.7647H7.16205C7.47896 16.7647 7.67536 16.7641 7.8229 16.7522C7.96086 16.7411 7.99584 16.7234 7.99979 16.7214C8.07513 16.6834 8.13499 16.6236 8.17191 16.552C8.17191 16.552 8.18987 16.5209 8.20113 16.3847C8.21308 16.2401 8.21364 16.0472 8.21364 15.7336V12.714C8.21364 12.4004 8.21308 12.2075 8.20113 12.0629C8.19003 11.9286 8.17193 11.8956 8.17193 11.8956C8.13501 11.824 8.07526 11.7643 7.99992 11.7263C7.99597 11.7243 7.96087 11.7065 7.8229 11.6954C7.67536 11.6835 7.47896 11.683 7.16205 11.683H4.10649C3.78958 11.683 3.59318 11.6835 3.44564 11.6954C3.30767 11.7065 3.27257 11.7243 3.26862 11.7263Z",fill:"currentColor"}),(0,f.jsx)("path",{d:"M3.74777 2.08335C3.80937 2.08196 3.86922 2.1051 3.91379 2.14764C3.96182 2.18989 3.99298 2.24796 4.00249 2.31122C4.04745 2.56542 4.09234 2.7797 4.13677 2.95331C4.17264 3.10112 4.23052 3.24295 4.30767 3.37404C4.37276 3.48191 4.46345 3.57266 4.57134 3.63771C4.69806 3.71168 4.83566 3.76532 4.97906 3.79641C5.18306 3.84257 5.38941 3.87943 5.59673 3.90708C5.66149 3.91635 5.72145 3.94797 5.76519 3.9966C5.78707 4.01865 5.80488 4.04509 5.81646 4.07391C5.82803 4.10276 5.83331 4.13398 5.83273 4.16506C5.83386 4.23042 5.8095 4.29359 5.76519 4.34165C5.72095 4.38962 5.66021 4.41879 5.5951 4.42303C5.38671 4.44486 5.17946 4.47899 4.97499 4.52476C4.80655 4.56299 4.66645 4.61458 4.55588 4.68019C4.44693 4.74683 4.35875 4.83669 4.29058 4.94875C4.22341 5.06087 4.16797 5.20402 4.12456 5.37762C4.08222 5.55272 4.04122 5.76758 4.00249 6.02215C3.9941 6.08503 3.96377 6.14291 3.91623 6.18491C3.89401 6.20636 3.8677 6.22338 3.83892 6.23456C3.81004 6.24574 3.77873 6.25091 3.74777 6.25002C3.71725 6.25059 3.68667 6.2449 3.65826 6.23374C3.62991 6.22257 3.60369 6.20607 3.58176 6.18491C3.53562 6.14152 3.50555 6.08387 3.49549 6.02134C3.45054 5.76713 3.40446 5.55285 3.35796 5.37925C3.31251 5.20737 3.25603 5.06694 3.18788 4.95851C3.12286 4.84966 3.03576 4.76226 2.92746 4.69566C2.82052 4.63004 2.68336 4.57675 2.51649 4.53697C2.35066 4.49719 2.14472 4.4592 1.89881 4.42303C1.83116 4.41322 1.77478 4.38448 1.73036 4.33596C1.68805 4.28934 1.6651 4.228 1.66607 4.16506C1.66474 4.1015 1.68888 4.04012 1.7328 3.99416C1.77637 3.94523 1.83692 3.91401 1.90207 3.90708C2.11059 3.88483 2.31781 3.85187 2.523 3.80861C2.69194 3.77038 2.83117 3.71849 2.93967 3.65236C3.04817 3.5855 3.13955 3.49351 3.20578 3.38462C3.2828 3.25087 3.3391 3.10622 3.37342 2.95575C3.42379 2.74308 3.46449 2.52767 3.49468 2.31122C3.5025 2.24827 3.53298 2.19007 3.58013 2.14764C3.62608 2.10609 3.68582 2.083 3.74777 2.08335Z",fill:"currentColor"})]})," ",(0,f.jsx)("span",{children:x("graphic.name")})," "]})," "]})]})})]})})})}),d&&(0,f.jsx)(c9.Z,{height:"calc(-60px + 100vh)",editor:d})]})};let uy=(0,v.forwardRef)((e,t)=>{let{}=e,r=(0,g.useTranslations)(),{openMessageEditor:s,setOpenMessageEditor:n,editMessage:a,editMessageMarkdown:i,uploading:l}=(0,at.Z)(),{updateGraphicData:o}=(0,ry.Z)(),[d,c]=(0,v.useState)(!1),u=(0,v.useRef)(null),[p,h]=(0,v.useState)(!1),m=e=>{let t=e.replace(/\\([\$\{\}\[\]\(\)])/g,(e,t)=>t);try{at.Z.getState().saveEdit(t,()=>{rn.$.publish("updateThreadAnswer",{content:t,messageId:(null==a?void 0:a.id)||""}),tg.Z.success(r("save_success"))},()=>tg.Z.error(r("save_failed"))),Object.entries(o).forEach(e=>{let[t,r]=e;(0,lP.KX)(r)})}catch(e){console.error(e)}},x=async e=>{try{tg.Z.info(r("drive.importing"));let t=await (0,al.SB)({thread_id:(null==a?void 0:a.id)||"",title:(null==a?void 0:a.query.slice(0,100))+" - "+lt()().format("YYYY-MM-DD HH:mm:ss")||"",content:om(e,(null==a?void 0:a.recall_contexts)||[]),other:{sources:(null==a?void 0:a.recall_contexts)||[]}});200===t.status&&(window.open("/docs/".concat(t.data.note_id),"_blank"),tg.Z.success(r("drive.import_successful")))}catch(e){console.error("Failed to convert thread to note:",e),tg.Z.error(r("drive.import_failed")+e)}},b=e=>{if(!e&&l){tg.Z.info(r("threadEdit.img_uploading"));return}if(!e&&u.current){let e=u.current.storage.markdown.get();if(d){h(!0);return}y(e,!1)}else n(e),tP.Z.getState().setIsShowAgentSources(e)};(0,v.useImperativeHandle)(t,()=>({handleOpenChange:b}));let y=(e,t)=>{if(l){tg.Z.info(r("threadEdit.img_uploading"));return}t&&(null==m||m(e)),n(!1),tP.Z.getState().setIsShowAgentSources(!1)},w=e=>{u.current&&y(u.current.storage.markdown.get(),e),h(!1)};return(0,v.useEffect)(()=>{let e=e=>{if("Escape"===e.key&&s&&(e.preventDefault(),e.stopPropagation(),u.current)){let{from:e}=u.current.state.selection;u.current.chain().blur().setTextSelection(e).run()}};return window.addEventListener("keydown",e,!0),()=>{window.removeEventListener("keydown",e,!0)}},[s]),(0,v.useEffect)(()=>{if(s)c(!1);else{var e;null===(e=u.current)||void 0===e||e.destroy()}},[s]),(0,v.useEffect)(()=>{l?tg.Z.info(r("threadEdit.img_uploading"),5e3):tg.Z.close()},[l]),(0,f.jsxs)(f.Fragment,{children:[" ",(0,f.jsx)(ub,{content:i,onChange:()=>c(!0),convertSummaryToNote:x,onEditorReady:e=>{u.current=e},onSave:e=>y(e,!0),onClose:()=>b(!1),isUpdated:d,setIsUpdated:c}),(0,f.jsx)(cF,{open:p,onOpenChange:h,children:(0,f.jsxs)(cG,{className:"max-w-[568px]",children:[(0,f.jsxs)(c$,{className:"relative",children:[(0,f.jsx)(cX,{className:"text-[18px]",children:r("confirmClose.title")}),(0,f.jsx)(cJ,{className:"text-base py-5 leading-8",children:r("confirmClose.description")}),(0,f.jsx)("button",{onClick:()=>h(!1),className:"absolute top-0 right-0 rounded-sm opacity-70  hover:opacity-100 cursor-pointer p-0 m-0 !mt-0",children:(0,f.jsx)(tC.Z,{className:"h-6 w-6"})})]}),(0,f.jsxs)(cY,{children:[(0,f.jsx)(cQ,{onClick:()=>w(!1),className:"text-base items-center justify-center h-12 p-0 px-4 rounded-[8px]",children:r("confirmClose.cancelButton")}),(0,f.jsx)(cK,{onClick:()=>w(!0),className:"text-base items-center justify-center h-12 p-0 px-4 rounded-[8px]",children:r("confirmClose.confirmButton")})]})]})})]})}),uw=e=>{var t;let{isMyThread:r,threads:s,shouldShow:n,isAnimating:a,isMobile:i}=e,{isShowAgentSources:l,sourceType:o,threadIndex:d}=(0,tP.Z)(),{openMessageEditor:c,setOpenMessageEditor:u}=(0,at.Z)();return i?(0,f.jsx)(rp.Vq,{open:c,onOpenChange:u,children:(0,f.jsx)(rp.cZ,{className:"max-w-full h-[100dvh] p-0 gap-0",children:(0,f.jsx)("div",{className:"flex-1 overflow-auto custom-scrollbar",children:(0,f.jsx)(uy,{})})})}):(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(a7.M,{mode:"wait",children:n&&!i&&(0,f.jsxs)(U,{minSize:25,className:(0,t_.cn)("transition-all duration-300 ease-in-out overflow-x-hidden min-w-[320px]",a?"animate-slide-in":"animate-slide-out"),defaultSize:"messageEdit"===o?53:30,children:[("html"===o||"sources"===o)&&(0,f.jsx)(oG,{}),"think"===o&&(0,f.jsx)(i8,{category:null===(t=s[0])||void 0===t?void 0:t.category,canEdit:r,thread:s[d]}),"messageEdit"===o&&!i&&(0,f.jsx)("div",{className:"w-full h-[100vh] box-border dark:bg-black p-0 threadEdit overflow-auto custom-scrollbar",children:(0,f.jsx)(uy,{})})]})})})};var uj=r(55994);class uC{static checkThreadPermissions(e,t,r){return{isMyThread:e,canEdit:e,canShare:e||"PUBLIC"===t,permission:t}}static handlePermissionChange(e,t){t&&t(e)}static canEditThread(e,t){return e&&!t}static canShareThread(e,t){return e||"PUBLIC"===t}static getShareStatus(e,t,r){return t?e?"PRIVATE":"PUBLIC":r||"PUBLIC"}static requiresLogin(e,t){return(null==e?void 0:e.get("requiresLogin"))==="true"&&!t}}let u_=e=>{let{props:t,ssrShortId:r,templateId:s}=e,n=(0,b.useRouter)(),a=(0,tc.useSearchParams)(),{threads:i,isNewThread:l,threadQueryUuid:o,replyQuery:d,documents:c,thread_type:u}=t,{initThreads:p,addThreads:h,initPendingQuery:m,clearThreads:f,setMindmapList:x}=(0,tX.Z)(),{clearItem:g}=(0,i_.Z)(),{language:y}=(0,iD.Z)(),w=(0,th.ZP)(e=>e.isLogin),C=(0,tP.Z)(e=>e.extensionEnable),k=()=>n.push("/search"),N=(0,v.useCallback)(async()=>{try{var e;if(!r)return;let t=await (0,tx.kY)(r);(null===(e=t.items)||void 0===e?void 0:e.length)>0&&(t.items.forEach(e=>{var t,r;e._local_id||(e._local_id=(0,j.x0)()),e.documents=null!==(r=null===(t=e.recall_contexts)||void 0===t?void 0:t.map(e=>{var t;return null==e?void 0:null===(t=e.other_info)||void 0===t?void 0:t.file_id}).filter(Boolean))&&void 0!==r?r:[]}),h(t.items))}catch(e){console.log("error:",e)}},[r,h]);return{init:(0,v.useCallback)(async()=>{let e;if(void 0===w||void 0===C)return;let t=(0,r9.a_)();if(uC.requiresLogin(a,t)){tR.Z.getState().setLoginModalVisible(!0);return}let n=localStorage.getItem(uj.o.FELO_ACTIVE_QUERY);if(s&&(0,r2.N0)()){(0,rd.eo)();let t=await (0,rd.C1)({type:"onGetMultiAgentPlan"});t&&(e=t.template,n=JSON.stringify(t))}if(l){let t=n?JSON.parse(n):{};if((0,r2.N0)()&&o){(0,rd.Lk)({id:o||""});let e=await (0,rd.C1)({type:"onGetThreadQuery"});e&&e.query&&(t.rawQuery=e.query)}if(o&&t.threadQueryUuid&&t.threadQueryUuid!==o){k();return}i[0].query||(i[0].query=t.rawQuery),t.template&&(e=t.template,nJ.Z.getState().setTemplate(e));let r=t.multiQuery;r&&r.length&&(i[0]={...i[0],query:r[0].query,category:r[0].category,topic_id:r[0].category===tJ.RQ?r[0].source_id:""},m(r.map(e=>({query:e.query,category:e.category,topic_id:e.category===tJ.RQ?e.source_id:void 0}))))}let h=_.initializeThreads(i,{ssrShortId:r,thread_type:u,agentTemplate:e,agentParamsLanguage:y,isNewThread:l,documents:c});s&&e&&h[0]&&!h[0].id&&(h[0].template=e),d&&setTimeout(()=>{(0,tN.f8)(()=>{tX.Z.getState().addThread(_.createAutoReplyThread(d,r))})},1e3),g(),f(),p(h),N()},[t,r,s,a,y,d,l,i,o,c,u,w,C]),fetchThreadMessages:N}},uk=e=>{var t,r;let{props:s,ssrUid:n,ssrVisitorId:a}=e,{threads:i,isSelf:l,permission:o,isChange:d}=s,{threads:c,isMyThread:u,setIsMyThread:p,clearFailedImageList:h}=(0,tX.Z)(),m=(0,th.ZP)(e=>e.userInfo),f=(0,th.ZP)(e=>e.isLogin),{setIsSelf:x}=(0,rc.Z)(),g=(0,v.useRef)(n||a||""),b=(0,v.useRef)(new Set),y=null===(t=c[0])||void 0===t?void 0:t.id,w=null===(r=c[0])||void 0===r?void 0:r._local_id;(0,v.useEffect)(()=>{var e,t,r;if(void 0===f)return;if(!i||!i.length){p(!1);return}let s=(null==m?void 0:null===(t=m.user_org_member)||void 0===t?void 0:null===(e=t.org_member)||void 0===e?void 0:e.member_id)||m.uid,n=ai.Z.get("visitor_id"),a="visitor_id";if(!n){let e=localStorage.getItem(a);e||(e=(0,j.x0)(),localStorage.setItem(a,e)),n=e}(null===(r=c[0])||void 0===r?void 0:r.id)||!w||b.current.has(w)||(g.current=f?s:n,b.current.add(w)),p(_.isMyThread(g.current,s,n,f))},[f,y,w]),(0,v.useEffect)(()=>{if(i&&i.length&&!i[0].id){tX.Z.getState().setMindmapList([]);let e=uC.getShareStatus(!!f,u,o);rc.Z.getState().setShareStatus(e,!1),x(!!f)}},[f,i,u]),(0,v.useEffect)(()=>{o&&(rc.Z.getState().setShowLimitModal(!1),rc.Z.getState().setShareStatus(o,!1),rc.Z.getState().setIsSelf(!!l),rc.Z.getState().setIsChange(!!d))},[o,l,d]);let C=uC.checkThreadPermissions(u,o,l);return{isMyThread:u,threadPermissions:C,threadStates:{isHideReply:_.shouldHideReply(c),isAlreadyRenderPptOutline:_.isAlreadyRenderPptOutline(c),isAlreadyRenderHtmlPage:_.isAlreadyRenderHtmlPage(c)},threadAuthorIdRef:g,cleanup:()=>{tX.Z.getState().clearThreads(),h()}}},uN=e=>{var t;let{threads:r,ssrShortId:s,isFeloIframe:n}=e,[a,i]=(0,v.useState)({isAnimating:!1,shouldShow:!1,threadRid:"",threadTemplateSteps:[],showTemplateSteps:!1,showAnswerStopWarningModal:!1,autoScrollEnabled:!s&&!!n}),{isShowAgentSources:l,setIsShowAgentSources:o,setIsShowMobileSource:d,setClearSources:c}=(0,tP.Z)(),{pendingQueries:u}=(0,tX.Z)(),p=(0,v.useRef)(null),h=null===(t=r[0])||void 0===t?void 0:t._local_id;return(0,v.useEffect)(()=>{o(!1),d(!1),c()},[h,o,d,c]),(0,v.useEffect)(()=>{i(e=>({...e,showTemplateSteps:!1,threadTemplateSteps:[],threadRid:""}))},[s]),(0,v.useEffect)(()=>{u.length>0&&i(e=>({...e,showTemplateSteps:!0,threadTemplateSteps:u.map(e=>e.query)}))},[u]),(0,v.useEffect)(()=>{if(l)document.body.style.overflow="hidden",i(e=>({...e,shouldShow:!0,isAnimating:!0}));else{i(e=>({...e,isAnimating:!1}));let e=setTimeout(()=>{i(e=>({...e,shouldShow:!1}))},200);return()=>clearTimeout(e)}},[l]),(0,v.useEffect)(()=>(a.shouldShow?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[a.shouldShow]),(0,v.useEffect)(()=>{N.shouldAutoScroll(r,s)&&N.scrollToNewThread()},[r.length,s]),(0,v.useEffect)(()=>{let e=!s&&!!n;i(t=>({...t,autoScrollEnabled:e}))},[n,s]),(0,v.useEffect)(()=>{if(!(0,r2.N0)())return;let e=()=>{"visible"===document.visibilityState&&tX.Z.getState().pendingQueries.length>0&&i(e=>({...e,showAnswerStopWarningModal:!0}))};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[]),{uiState:a,scrollbarRef:p,updateUIState:e=>{i(t=>({...t,...e}))},setThreadRid:e=>{i(t=>({...t,threadRid:e}))},setThreadTemplateSteps:e=>{i(t=>({...t,threadTemplateSteps:e}))},setShowTemplateSteps:e=>{i(t=>({...t,showTemplateSteps:e}))},setShowAnswerStopWarningModal:e=>{i(t=>({...t,showAnswerStopWarningModal:e}))},setAutoScrollEnabled:e=>{i(t=>({...t,autoScrollEnabled:e}))}}};var uE=r(93635);let uS=()=>{let e=(0,g.useTranslations)(),{sendMessageToParent:t}=lV(),{threads:r,addThread:s}=(0,tX.Z)(),n=(0,tX.Z)(e=>{var t;return null===(t=e.threads[0])||void 0===t?void 0:t.short_id}),a=(0,v.useRef)([]),i=e=>{a.current.push(e)},l=()=>{let e=[...a.current];for(let t of(a.current=[],e))t&&t()},o=r=>{var a;let l=e("ppt.auto_reply_create_ppt_query"),o=null===(a=tX.Z.getState().threads[0])||void 0===a?void 0:a.template;s({_local_id:(0,j.x0)(),query:l,short_id:n||"",query_from:"followup",thread_type:y.yG,template:o,contexts:[{query:"outline",contexts:[{link:"",title:"outline",snippet:"",other_info:{slides:r.newPlan}}]}]}),i(()=>{t({type:C.BX.PPT_ACTION_CREATE_PPT,value:{short_id:""}})})},d=t=>{var r;let a=e("ppt.auto_reply_update_outline_query"),l=null===(r=tX.Z.getState().threads[0])||void 0===r?void 0:r.template;s({_local_id:(0,j.x0)(),query:a,short_id:n||"",query_from:"followup",thread_type:y.yG,sub_agent:C.S,template:l,contexts:[{query:"slides",contexts:[{link:"",title:"original_outline",snippet:"",other_info:{slides:t.oldPlan}},{link:"",title:"modified_outline",snippet:"",other_info:{slides:t.newPlan}}]}]}),i(()=>{o(t)})};(0,v.useEffect)(()=>rn.$.subscribe("pptThreadDone",()=>{l()}),[r]),(0,v.useEffect)(()=>{if((0,r2.zd)())return window.addEventListener("message",e,!1),()=>{window.removeEventListener("message",e)};function e(e){if(e.origin!==window.location.origin){console.warn("can not receive message from: ".concat(e.origin,"，current origin: ").concat(window.location.origin));return}let t=e.data;if(t&&t.type&&t.type===C.BX.PPT_ACTION_CREATE_PPT_AUTO_REPLY){console.log("receive message:",t);let e=t.value;e.hasChange?d(e):o(e)}}},[])};var uT=e=>{var t,r,s,n,a,i;let{url:l,threads:o,shareImg:d,shortId:c,uid:u,visitorId:p,title:h,fromShortId:m}=e,x=(0,g.useTranslations)(),y=(0,b.useRouter)(),{isMobile:w}=(0,tU.Z)(),{threads:j,pendingQueries:C}=(0,tX.Z)(),k=(0,th.ZP)(e=>e.userInfo),{extensionSelected:E}=(0,tP.Z)(),S=N.generateOgUrl(l),T=N.generateMetaTitle((null===(t=o[0])||void 0===t?void 0:t.query)||"",x),F=N.generateMetaDescription((null===(r=o[0])||void 0===r?void 0:r.answer)||"",x),L=y.query.rid,M=y.query.template_id,A=N.generateRid(L),{isMounted:P,isFeloIframe:Z}=l$(),{init:I}=u_({props:e,ssrShortId:c,templateId:M}),{isMyThread:D,threadStates:R,cleanup:z}=uk({props:e,ssrUid:u,ssrVisitorId:p}),{uiState:O,scrollbarRef:B,setThreadRid:q,setShowTemplateSteps:H,setShowAnswerStopWarningModal:V}=uN({threads:j,ssrShortId:c,isFeloIframe:Z}),U=_.getQueryCategory(j,C,e.queryType,e.queryCategory,E);(0,uE.G)(B),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{containerRef:t,threshold:r=10,enabled:s=!0,behavior:n="auto"}=e,a=(0,v.useRef)(null),i=t||a,[l,o]=(0,v.useState)(!0),d=(0,v.useRef)(0),c=(0,v.useRef)(!0),u=(0,v.useRef)(null),p=(0,v.useCallback)(()=>{if(!s)return!1;let e=i.current;if(!e){let e=window.pageYOffset||document.documentElement.scrollTop;return Math.abs(document.documentElement.scrollHeight-window.innerHeight-e)<=r}let{scrollTop:t,scrollHeight:n,clientHeight:a}=e;return Math.abs(n-a-t)<=r},[s,r,i]),h=(0,v.useCallback)(()=>{if(!s)return;let e=i.current;e?e.scrollTo({top:e.scrollHeight,behavior:n}):window.scrollTo({top:document.documentElement.scrollHeight,behavior:n})},[s,n,i]),m=(0,v.useCallback)(()=>{s&&(u.current||(u.current=requestAnimationFrame(()=>{u.current=null;let e=p();o(e),c.current=e})))},[s,p]),f=(0,v.useCallback)(()=>{if(!s)return;let e=i.current;if(!e)return;let t=e.scrollHeight;t!==d.current&&(d.current=t,c.current&&requestAnimationFrame(()=>{h(),o(!0),c.current=!0}))},[s,h,i]);(0,v.useEffect)(()=>{if(!s)return;let e=i.current||window;e.addEventListener("scroll",m,{passive:!0});let t=p();return o(t),c.current=t,()=>{e.removeEventListener("scroll",m)}},[s,m,p,i]),(0,v.useEffect)(()=>{if(!s)return;let e=i.current;if(!e)return;d.current=e.scrollHeight;let t=new MutationObserver(()=>{f()});t.observe(e,{childList:!0,subtree:!0});let r=new ResizeObserver(()=>{f()});return r.observe(e),()=>{t.disconnect(),r.disconnect()}},[s,f,i]),(0,v.useEffect)(()=>()=>{u.current&&cancelAnimationFrame(u.current)},[])}({containerRef:B,enabled:O.autoScrollEnabled}),uS(),(0,v.useEffect)(()=>{I()},[L,I]),(0,v.useEffect)(()=>z,[]);let W=null===(s=j[0])||void 0===s?void 0:s.short_id;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(e3,{title:T,description:F,shareImg:d,ogUrl:S}),(0,f.jsx)(eK,{showSidebar:O.shouldShow,mainContent:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(rF,{queryCategory:U,threadId:W,title:h||(null===(n=j[0])||void 0===n?void 0:n.query),isMyThread:D,threadUid:(null===(a=j[0])||void 0===a?void 0:a.uid)||(null==k?void 0:k.uid),template:(null===(i=j[0])||void 0===i?void 0:i.template)||null,ssrShortId:c,isFeloIframe:Z,isMounted:P}),(0,f.jsx)(lY,{fromShortId:m,threads:j,ssrShortId:c,ssrUid:u,firstThreadShortId:W,queryCategory:U,rid:A,isMyThread:D,pptCover:e.pptCover,pendingQueriesLength:C.length,documentAction:e.documentAction,isHideReply:R.isHideReply,scrollbarRef:B,setThreadRid:q}),(0,f.jsx)(od,{threads:j,queryCategory:U,firstThreadShortId:W,threadRid:O.threadRid,isMyThread:D,showTemplateSteps:O.showTemplateSteps,threadTemplateSteps:O.threadTemplateSteps,setShowTemplateSteps:H,replyFocus:e.replyFocus,isMobile:w,isHideReply:R.isHideReply,isAlreadyRenderPptOutline:R.isAlreadyRenderPptOutline,isAlreadyRenderHtmlPage:R.isAlreadyRenderHtmlPage,isFeloIframe:Z}),(0,f.jsx)(oU,{isMyThread:D,showAnswerStopWarningModal:O.showAnswerStopWarningModal,setShowAnswerStopWarningModal:V})]}),sidebar:(0,f.jsx)(uw,{isMyThread:D,threads:j,shouldShow:O.shouldShow,isAnimating:O.isAnimating,isMobile:w})})]})},uF=!0,uL=e=>(0,f.jsx)(uT,{...e})},14059:function(e,t,r){"use strict";r.d(t,{y:function(){return n}});var s=r(31022);let n=e=>{var t;return"gpt-4o-mini"===e?"Felo Basic":(null===(t=s.Z.getState().allModelList.find(t=>t.value===e))||void 0===t?void 0:t.label)||e}},12045:function(e,t,r){"use strict";r.d(t,{l:function(){return s},t:function(){return a}});let s=(e,t)=>{if(!e)return"";let r=new Date(e);if(isNaN(r.getTime()))return"";let s=(new Date(n().replace(" ","T")).getTime()-r.getTime())/1e3;return s<0?(console.warn("Future date detected. Returning empty string."),""):s<60?t("time.just_now"):s<3600?t("time.minutes_ago",{minutes:Math.floor(s/60)}):s<=86400?t("time.hours_ago",{hours:Math.floor(s/3600)}):s<=604800?t("time.days_ago",{days:Math.floor(s/86400)}):s<=2592e3?t("time.weeks_ago",{weeks:Math.floor(s/604800)}):s<=31536e3?t("time.months_ago",{months:Math.floor(s/2592e3)}):t("time.years_ago",{years:Math.floor(s/31536e3)})},n=()=>{let e=new Date,t=e.getUTCFullYear(),r=String(e.getUTCMonth()+1).padStart(2,"0"),s=String(e.getUTCDate()).padStart(2,"0"),n=String(e.getUTCHours()).padStart(2,"0"),a=String(e.getUTCMinutes()).padStart(2,"0"),i=String(e.getUTCSeconds()).padStart(2,"0");return"".concat(t,"-").concat(r,"-").concat(s," ").concat(n,":").concat(a,":").concat(i)},a=e=>"".concat(String(Math.floor(e/60)).padStart(2,"0"),":").concat(String(e%60).padStart(2,"0"))},85625:function(){},96594:function(){},41282:function(){},12767:function(){},36512:function(){},74049:function(e,t,r){"use strict";var s=r(36257);function n(){}function a(){}a.resetWarningCache=n,e.exports=function(){function e(e,t,r,n,a,i){if(i!==s){var l=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:n};return r.PropTypes=r,r}},40507:function(e,t,r){e.exports=r(74049)()},36257:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},21241:function(e){"use strict";var t;t=function(){var e={},t={};return e.on=function(e,r){var s={name:e,handler:r};return t[e]=t[e]||[],t[e].unshift(s),s},e.off=function(e){var r=t[e.name].indexOf(e);-1!==r&&t[e.name].splice(r,1)},e.trigger=function(e,r){var s,n=t[e];if(n)for(s=n.length;s--;)n[s].handler(r)},e},e.exports=t},56644:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,n=(s=r(69e3))&&s.__esModule?s:{default:s};t.default={pauseVideo:{acceptableStates:[n.default.ENDED,n.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[n.default.ENDED,n.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[n.default.ENDED,n.default.PLAYING,n.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},e.exports=t.default},78868:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=l(r(27185)),n=l(r(38078)),a=l(r(2732)),i=l(r(56644));function l(e){return e&&e.__esModule?e:{default:e}}var o=(0,s.default)("youtube-player"),d={};d.proxyEvents=function(e){var t={},r=function(r){var s="on"+r.slice(0,1).toUpperCase()+r.slice(1);t[s]=function(t){o('event "%s"',s,t),e.trigger(r,t)}},s=!0,n=!1,i=void 0;try{for(var l,d=a.default[Symbol.iterator]();!(s=(l=d.next()).done);s=!0){var c=l.value;r(c)}}catch(e){n=!0,i=e}finally{try{!s&&d.return&&d.return()}finally{if(n)throw i}}return t},d.promisifyPlayer=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={},s=function(s){t&&i.default[s]?r[s]=function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.then(function(e){var t=i.default[s],n=e.getPlayerState(),a=e[s].apply(e,r);return t.stateChangeRequired||Array.isArray(t.acceptableStates)&&-1===t.acceptableStates.indexOf(n)?new Promise(function(r){e.addEventListener("onStateChange",function s(){var n=e.getPlayerState(),a=void 0;"number"==typeof t.timeout&&(a=setTimeout(function(){e.removeEventListener("onStateChange",s),r()},t.timeout)),Array.isArray(t.acceptableStates)&&-1!==t.acceptableStates.indexOf(n)&&(e.removeEventListener("onStateChange",s),clearTimeout(a),r())})}).then(function(){return a}):a})}:r[s]=function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.then(function(e){return e[s].apply(e,r)})}},a=!0,l=!1,o=void 0;try{for(var d,c=n.default[Symbol.iterator]();!(a=(d=c.next()).done);a=!0){var u=d.value;s(u)}}catch(e){l=!0,o=e}finally{try{!a&&c.return&&c.return()}finally{if(l)throw o}}return r},t.default=d,e.exports=t.default},69e3:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},e.exports=t.default},2732:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],e.exports=t.default},38078:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],e.exports=t.default},70905:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=l(r(21241)),a=l(r(32425)),i=l(r(78868));function l(e){return e&&e.__esModule?e:{default:e}}var o=void 0;t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=(0,n.default)();if(o||(o=(0,a.default)(l)),t.events)throw Error("Event handlers cannot be overwritten.");if("string"==typeof e&&!document.getElementById(e))throw Error('Element "'+e+'" does not exist.');t.events=i.default.proxyEvents(l);var d=new Promise(function(r){(void 0===e?"undefined":s(e))==="object"&&e.playVideo instanceof Function?r(e):o.then(function(s){var n=new s.Player(e,t);return l.on("ready",function(){r(n)}),null})}),c=i.default.promisifyPlayer(d,r);return c.on=l.on,c.off=l.off,c},e.exports=t.default},32425:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,n=(s=r(27499))&&s.__esModule?s:{default:s};t.default=function(e){return new Promise(function(t){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function){t(window.YT);return}var r="http:"===window.location.protocol?"http:":"https:";(0,n.default)(r+"//www.youtube.com/iframe_api",function(t){t&&e.trigger("error",t)});var s=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){s&&s(),t(window.YT)}})},e.exports=t.default},40598:function(e,t,r){"use strict";r.d(t,{h:function(){return C}});var s=r(52676),n=()=>(0,s.jsxs)("svg",{"aria-hidden":"true",fill:"none",height:"80%",role:"presentation",viewBox:"0 0 24 24",width:"80%",children:[(0,s.jsx)("path",{d:"M12 2C9.38 2 7.25 4.13 7.25 6.75C7.25 9.32 9.26 11.4 11.88 11.49C11.96 11.48 12.04 11.48 12.1 11.49C12.12 11.49 12.13 11.49 12.15 11.49C12.16 11.49 12.16 11.49 12.17 11.49C14.73 11.4 16.74 9.32 16.75 6.75C16.75 4.13 14.62 2 12 2Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M17.0809 14.1489C14.2909 12.2889 9.74094 12.2889 6.93094 14.1489C5.66094 14.9989 4.96094 16.1489 4.96094 17.3789C4.96094 18.6089 5.66094 19.7489 6.92094 20.5889C8.32094 21.5289 10.1609 21.9989 12.0009 21.9989C13.8409 21.9989 15.6809 21.5289 17.0809 20.5889C18.3409 19.7389 19.0409 18.5989 19.0409 17.3589C19.0309 16.1289 18.3409 14.9889 17.0809 14.1489Z",fill:"currentColor"})]}),[a,i]=(0,r(95374).k)({name:"AvatarGroupContext",strict:!1}),l=r(84563),o=r(38946),d=r(91988),c=(0,o.tv)({slots:{base:["flex","relative","justify-center","items-center","box-border","overflow-hidden","align-middle","text-white","z-0",...d.Dh],img:["flex","object-cover","w-full","h-full","transition-opacity","!duration-500","opacity-0","data-[loaded=true]:opacity-100"],fallback:[...d.z6,"flex","items-center","justify-center"],name:[...d.z6,"font-normal","text-center","text-inherit"],icon:[...d.z6,"flex","items-center","justify-center","text-inherit","w-full","h-full"]},variants:{size:{sm:{base:"w-8 h-8 text-tiny"},md:{base:"w-10 h-10 text-tiny"},lg:{base:"w-14 h-14 text-small"}},color:{default:{base:l.J.solid.default},primary:{base:l.J.solid.primary},secondary:{base:l.J.solid.secondary},success:{base:l.J.solid.success},warning:{base:l.J.solid.warning},danger:{base:l.J.solid.danger}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"},full:{base:"rounded-full"}},isBordered:{true:{base:"ring-2 ring-offset-2 ring-offset-background dark:ring-offset-background-dark"}},isDisabled:{true:{base:"opacity-disabled"}},isInGroup:{true:{base:["-ms-2 data-[hover=true]:-translate-x-3 rtl:data-[hover=true]:translate-x-3 transition-transform","data-[focus-visible=true]:-translate-x-3 rtl:data-[focus-visible=true]:translate-x-3"]}},isInGridGroup:{true:{base:"m-0 data-[hover=true]:translate-x-0"}},disableAnimation:{true:{base:"transition-none",img:"transition-none"},false:{}}},defaultVariants:{size:"md",color:"default",radius:"full"},compoundVariants:[{color:"default",isBordered:!0,class:{base:"ring-default"}},{color:"primary",isBordered:!0,class:{base:"ring-primary"}},{color:"secondary",isBordered:!0,class:{base:"ring-secondary"}},{color:"success",isBordered:!0,class:{base:"ring-success"}},{color:"warning",isBordered:!0,class:{base:"ring-warning"}},{color:"danger",isBordered:!0,class:{base:"ring-danger"}}]});(0,o.tv)({slots:{base:"flex items-center justify-center h-auto w-max",count:"hover:-translate-x-0"},variants:{isGrid:{true:"inline-grid grid-cols-4 gap-3"}}});var u=r(15832),p=r(49336),h=r(48824),m=r(7909),f=r(5421),v=r(85151),x=r(49975),g=r(36064),b=r(75271),y=r(29560),w=r(41721),j=(0,r(82664).Gp)((e,t)=>{let{Component:r,ImgComponent:a,src:l,icon:o=(0,s.jsx)(n,{}),alt:d,classNames:j,slots:C,name:_,showFallback:k,fallback:N,getInitials:E,getAvatarProps:S,getImageProps:T}=function(e={}){var t,r,s,n,a,l,o;let d=(0,u.w)(),j=i(),C=!!j,{as:_,ref:k,src:N,name:E,icon:S,classNames:T,fallback:F,alt:L=E||"avatar",imgRef:M,color:A=null!=(t=null==j?void 0:j.color)?t:"default",radius:P=null!=(r=null==j?void 0:j.radius)?r:"full",size:Z=null!=(s=null==j?void 0:j.size)?s:"md",isBordered:I=null!=(n=null==j?void 0:j.isBordered)&&n,isDisabled:D=null!=(a=null==j?void 0:j.isDisabled)&&a,isFocusable:R=!1,getInitials:z=f.e,ignoreFallback:O=!1,showFallback:B=!1,ImgComponent:q="img",imgProps:H,className:V,onError:U,...W}=e,G=_||"span",$=(0,h.gy)(k),Y=(0,h.gy)(M),{isFocusVisible:X,isFocused:J,focusProps:K}=(0,g.F)(),{isHovered:Q,hoverProps:ee}=(0,w.X)({isDisabled:D}),et=null!=(o=null!=(l=e.disableAnimation)?l:null==d?void 0:d.disableAnimation)&&o,er="loaded"===(0,y.d)({src:N,onError:U,ignoreFallback:O}),es="string"==typeof q,en=(!N||!er)&&B,ea=(0,b.useMemo)(()=>{var e;return c({color:A,radius:P,size:Z,isBordered:I,isDisabled:D,isInGroup:C,disableAnimation:et,isInGridGroup:null!=(e=null==j?void 0:j.isGrid)&&e})},[A,P,Z,I,D,et,C,null==j?void 0:j.isGrid]),ei=(0,v.W)(null==T?void 0:T.base,V),el=(0,b.useMemo)(()=>R||"button"===_,[R,_]),eo=(0,b.useCallback)((e={})=>({ref:$,tabIndex:el?0:-1,"data-hover":(0,x.PB)(Q),"data-focus":(0,x.PB)(J),"data-focus-visible":(0,x.PB)(X),className:ea.base({class:(0,v.W)(ei,null==e?void 0:e.className)}),...(0,p.d)(W,ee,el?K:{})}),[el,ea,ei,K,W]),ed=(0,b.useCallback)((e={})=>({ref:Y,src:N,"data-loaded":(0,x.PB)(er),className:ea.img({class:null==T?void 0:T.img}),...(0,p.d)(H,e,(0,m.z)({disableAnimation:et},{enabled:es}))}),[ea,er,H,et,N,Y,es]);return{Component:G,ImgComponent:q,src:N,alt:L,icon:S,name:E,imgRef:Y,slots:ea,classNames:T,fallback:F,isImgLoaded:er,showFallback:en,ignoreFallback:O,getInitials:z,getAvatarProps:eo,getImageProps:ed}}({...e,ref:t}),F=(0,b.useMemo)(()=>!k&&l?null:N?(0,s.jsx)("div",{"aria-label":d,className:C.fallback({class:null==j?void 0:j.fallback}),role:"img",children:N}):_?(0,s.jsx)("span",{"aria-label":d,className:C.name({class:null==j?void 0:j.name}),role:"img",children:E(_)}):(0,s.jsx)("span",{"aria-label":d,className:C.icon({class:null==j?void 0:j.icon}),role:"img",children:o}),[k,l,N,_,j]);return(0,s.jsxs)(r,{...S(),children:[l&&(0,s.jsx)(a,{...T(),alt:d}),F]})});j.displayName="NextUI.Avatar";var C=j},79852:function(e,t,r){"use strict";r.d(t,{fC:function(){return y},z$:function(){return w}});var s=r(75271),n=r(42478),a=r(64457),i=r(52676),l="Progress",[o,d]=(0,n.b)(l),[c,u]=o(l),p=s.forwardRef((e,t)=>{var r,s;let{__scopeProgress:n,value:l=null,max:o,getValueLabel:d=f,...u}=e;(o||0===o)&&!g(o)&&console.error((r=`${o}`,`Invalid prop \`max\` of value \`${r}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let p=g(o)?o:100;null===l||b(l,p)||console.error((s=`${l}`,`Invalid prop \`value\` of value \`${s}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let h=b(l,p)?l:null,m=x(h)?d(h,p):void 0;return(0,i.jsx)(c,{scope:n,value:h,max:p,children:(0,i.jsx)(a.WV.div,{"aria-valuemax":p,"aria-valuemin":0,"aria-valuenow":x(h)?h:void 0,"aria-valuetext":m,role:"progressbar","data-state":v(h,p),"data-value":h??void 0,"data-max":p,...u,ref:t})})});p.displayName=l;var h="ProgressIndicator",m=s.forwardRef((e,t)=>{let{__scopeProgress:r,...s}=e,n=u(h,r);return(0,i.jsx)(a.WV.div,{"data-state":v(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...s,ref:t})});function f(e,t){return`${Math.round(e/t*100)}%`}function v(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function x(e){return"number"==typeof e}function g(e){return x(e)&&!isNaN(e)&&e>0}function b(e,t){return x(e)&&!isNaN(e)&&e<=t&&e>=0}m.displayName=h;var y=p,w=m},1262:function(e,t,r){"use strict";r.d(t,{VY:function(){return Y},aV:function(){return G},fC:function(){return W},xz:function(){return $}});var s=r(75271),n=r(29161),a=r(42478),i=r(49204),l=r(75732),o=r(52676),d=r(8921),c=r(22413),u=r(90808),p=r(30710),h=r(5185),m="rovingFocusGroup.onEntryFocus",f={bubbles:!1,cancelable:!0},v="RovingFocusGroup",[x,g,b]=function(e){let t=e+"CollectionProvider",[r,n]=(0,a.b)(t),[d,c]=r(t,{collectionRef:{current:null},itemMap:new Map}),u=e=>{let{scope:t,children:r}=e,n=s.useRef(null),a=s.useRef(new Map).current;return(0,o.jsx)(d,{scope:t,itemMap:a,collectionRef:n,children:r})};u.displayName=t;let p=e+"CollectionSlot",h=s.forwardRef((e,t)=>{let{scope:r,children:s}=e,n=c(p,r),a=(0,i.e)(t,n.collectionRef);return(0,o.jsx)(l.g7,{ref:a,children:s})});h.displayName=p;let m=e+"CollectionItemSlot",f="data-radix-collection-item",v=s.forwardRef((e,t)=>{let{scope:r,children:n,...a}=e,d=s.useRef(null),u=(0,i.e)(t,d),p=c(m,r);return s.useEffect(()=>(p.itemMap.set(d,{ref:d,...a}),()=>void p.itemMap.delete(d))),(0,o.jsx)(l.g7,{[f]:"",ref:u,children:n})});return v.displayName=m,[{Provider:u,Slot:h,ItemSlot:v},function(t){let r=c(e+"CollectionConsumer",t);return s.useCallback(()=>{let e=r.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${f}]`));return Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},n]}(v),[y,w]=(0,a.b)(v,[b]),[j,C]=y(v),_=s.forwardRef((e,t)=>(0,o.jsx)(x.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,o.jsx)(x.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,o.jsx)(k,{...e,ref:t})})}));_.displayName=v;var k=s.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:a,loop:l=!1,dir:d,currentTabStopId:v,defaultCurrentTabStopId:x,onCurrentTabStopIdChange:b,onEntryFocus:y,preventScrollOnEntryFocus:w=!1,...C}=e,_=s.useRef(null),k=(0,i.e)(t,_),N=(0,h.gm)(d),[E=null,S]=(0,p.T)({prop:v,defaultProp:x,onChange:b}),[F,L]=s.useState(!1),M=(0,u.W)(y),A=g(r),P=s.useRef(!1),[Z,I]=s.useState(0);return s.useEffect(()=>{let e=_.current;if(e)return e.addEventListener(m,M),()=>e.removeEventListener(m,M)},[M]),(0,o.jsx)(j,{scope:r,orientation:a,dir:N,loop:l,currentTabStopId:E,onItemFocus:s.useCallback(e=>S(e),[S]),onItemShiftTab:s.useCallback(()=>L(!0),[]),onFocusableItemAdd:s.useCallback(()=>I(e=>e+1),[]),onFocusableItemRemove:s.useCallback(()=>I(e=>e-1),[]),children:(0,o.jsx)(c.WV.div,{tabIndex:F||0===Z?-1:0,"data-orientation":a,...C,ref:k,style:{outline:"none",...e.style},onMouseDown:(0,n.M)(e.onMouseDown,()=>{P.current=!0}),onFocus:(0,n.M)(e.onFocus,e=>{let t=!P.current;if(e.target===e.currentTarget&&t&&!F){let t=new CustomEvent(m,f);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=A().filter(e=>e.focusable);T([e.find(e=>e.active),e.find(e=>e.id===E),...e].filter(Boolean).map(e=>e.ref.current),w)}}P.current=!1}),onBlur:(0,n.M)(e.onBlur,()=>L(!1))})})}),N="RovingFocusGroupItem",E=s.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:a=!0,active:i=!1,tabStopId:l,...u}=e,p=(0,d.M)(),h=l||p,m=C(N,r),f=m.currentTabStopId===h,v=g(r),{onFocusableItemAdd:b,onFocusableItemRemove:y}=m;return s.useEffect(()=>{if(a)return b(),()=>y()},[a,b,y]),(0,o.jsx)(x.ItemSlot,{scope:r,id:h,focusable:a,active:i,children:(0,o.jsx)(c.WV.span,{tabIndex:f?0:-1,"data-orientation":m.orientation,...u,ref:t,onMouseDown:(0,n.M)(e.onMouseDown,e=>{a?m.onItemFocus(h):e.preventDefault()}),onFocus:(0,n.M)(e.onFocus,()=>m.onItemFocus(h)),onKeyDown:(0,n.M)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){m.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=function(e,t,r){var s;let n=(s=e.key,"rtl"!==r?s:"ArrowLeft"===s?"ArrowRight":"ArrowRight"===s?"ArrowLeft":s);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(n))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)))return S[n]}(e,m.orientation,m.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let n=v().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)n.reverse();else if("prev"===t||"next"===t){var r,s;"prev"===t&&n.reverse();let a=n.indexOf(e.currentTarget);n=m.loop?(r=n,s=a+1,r.map((e,t)=>r[(s+t)%r.length])):n.slice(a+1)}setTimeout(()=>T(n))}})})})});E.displayName=N;var S={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function T(e,t=!1){let r=document.activeElement;for(let s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}var F=r(48101),L="Tabs",[M,A]=(0,a.b)(L,[w]),P=w(),[Z,I]=M(L),D=s.forwardRef((e,t)=>{let{__scopeTabs:r,value:s,onValueChange:n,defaultValue:a,orientation:i="horizontal",dir:l,activationMode:u="automatic",...m}=e,f=(0,h.gm)(l),[v,x]=(0,p.T)({prop:s,onChange:n,defaultProp:a});return(0,o.jsx)(Z,{scope:r,baseId:(0,d.M)(),value:v,onValueChange:x,orientation:i,dir:f,activationMode:u,children:(0,o.jsx)(c.WV.div,{dir:f,"data-orientation":i,...m,ref:t})})});D.displayName=L;var R="TabsList",z=s.forwardRef((e,t)=>{let{__scopeTabs:r,loop:s=!0,...n}=e,a=I(R,r),i=P(r);return(0,o.jsx)(_,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:s,children:(0,o.jsx)(c.WV.div,{role:"tablist","aria-orientation":a.orientation,...n,ref:t})})});z.displayName=R;var O="TabsTrigger",B=s.forwardRef((e,t)=>{let{__scopeTabs:r,value:s,disabled:a=!1,...i}=e,l=I(O,r),d=P(r),u=V(l.baseId,s),p=U(l.baseId,s),h=s===l.value;return(0,o.jsx)(E,{asChild:!0,...d,focusable:!a,active:h,children:(0,o.jsx)(c.WV.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":p,"data-state":h?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:u,...i,ref:t,onMouseDown:(0,n.M)(e.onMouseDown,e=>{a||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(s)}),onKeyDown:(0,n.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(s)}),onFocus:(0,n.M)(e.onFocus,()=>{let e="manual"!==l.activationMode;h||a||!e||l.onValueChange(s)})})})});B.displayName=O;var q="TabsContent",H=s.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,forceMount:a,children:i,...l}=e,d=I(q,r),u=V(d.baseId,n),p=U(d.baseId,n),h=n===d.value,m=s.useRef(h);return s.useEffect(()=>{let e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,o.jsx)(F.z,{present:a||h,children:({present:r})=>(0,o.jsx)(c.WV.div,{"data-state":h?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":u,hidden:!r,id:p,tabIndex:0,...l,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:r&&i})})});function V(e,t){return`${e}-trigger-${t}`}function U(e,t){return`${e}-content-${t}`}H.displayName=q;var W=D,G=z,$=B,Y=H}},function(e){e.O(0,[5140,306,8846,2706,4578,1277,1414,7469,8201,8669,6164,4049,7595,8058,2313,7815,4737,6793,2170,7437,7774,4462,7716,1765,6330,4386,4781,5568,8247,4598,3265,2888,9774,179],function(){return e(e.s=17948)}),_N_E=e.O()}]);