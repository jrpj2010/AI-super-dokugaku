# 20240822 EASTASIA, アジルコア,TANREN３社MT

[https://vimeo.com/1001504606/2e8ac06db9?share=copy](https://vimeo.com/1001504606/2e8ac06db9?share=copy)

[https://vimeo.com/1001504606/2e8ac06db9?share=copy](https://vimeo.com/1001504606/2e8ac06db9?share=copy)

▶️ログ：

[GMT20240822-055832_Recording.transcript.vtt](20240822%20EASTASIA,%20%E3%82%A2%E3%82%B7%E3%82%99%E3%83%AB%E3%82%B3%E3%82%A2,TANREN%EF%BC%93%E7%A4%BEMT%2041c52dce3f3f4108ab5aa14ddc2fa495/GMT20240822-055832_Recording.transcript.vtt)

[meeting_saved_chat.txt](20240822%20EASTASIA,%20%E3%82%A2%E3%82%B7%E3%82%99%E3%83%AB%E3%82%B3%E3%82%A2,TANREN%EF%BC%93%E7%A4%BEMT%2041c52dce3f3f4108ab5aa14ddc2fa495/meeting_saved_chat.txt)

▶️議事録

> **Azure移行計画に関する打ち合わせ**
> 
> 
> ---
> 
> ### 議事の要旨:
> 
> - Azure移行計画に関する打ち合わせ。
> - **OS、データベース、ストレージ、動画変換サービスそれぞれについて、現状の課題と移行計画について議論された。**
> - 各サービスの移行は、セキュリティアップデートの停止、サービスの廃止などの状況を鑑み、可能な限り迅速に進める必要があることが確認された。
> - **特にストレージの移行については、8月31日までにクラシックストレージアカウントが廃止されるため、早急な対応が必要である。**
> - データベースの移行では、日付処理に関する問題が発生する可能性があるため、動作確認を徹底する必要がある。
> - 動画変換サービスは、MediaKindへの移行が決定し、アカウント作成と招待が完了。
> - 今後のスケジュールについては、チャットワークで個別に調整する。
> 
> ## Azure移行計画:
> 
> ### MediaKind導入:
> 
> - *動画変換サービスのMediaKind導入について [00:07] **
>     - ビットムービーからMediaKindへの移行を決定 [00:07]
>         - ビットムービーでの動画変換において、回転情報が正しく読み込まれない問題が発生 [00:06]
>             - 縦横比が間違ってサムネイルが横伸びしてしまう [00:06]
>                 - 回転情報を自分で読み込み、逆向きに渡す必要がある [00:06]
>                     - FFMpegを間接的に読み込む必要があり、複雑な処理になってしまう [00:07]
>             - MediaKindで問題なく動作することを確認 [00:07]
>                 - Azureストレージとの連携も問題ない [00:07]
>     - MediaKindの課金はAzure経由で行われることを確認 [00:09]
>         - マーケットプレイス経由の請求を確認 [00:09]
>     - MediaKindのAPIについて [00:10]
>         - 組織のAPI取得方法に従って作成を依頼 [00:10]
>     - MediaKindのリソース作成について [00:11]
>         - 佐藤さんのアカウントで作成したMediaKindのリソースを、総務部の課金で利用できるようにする方法を検討 [00:11]
>             - MediaKindのアカウントは申し込んだ人が管理者になるため、佐藤さんのアカウントで作成する必要がある [00:11]
>                 - 総務部の課金で利用できるようにするために、佐藤さんのアカウントを総務部のテナントに招待する必要がある [00:12]
>                     - 佐藤さんのアカウントは、別のAzure環境で作られたアカウントであるため、招待できない [00:20]
>                         - Azure ADに存在するアカウントでないと招待できない [00:21]
>                             - 佐藤さんのアカウントは、Microsoftアカウントであるため、Azure ADアカウントに変換する必要がある [00:21]
>                                 - 佐藤さんのAzure ADアカウントを新たに作成し、MediaKindのアカウントに紐づける [00:27]
>                                     - 組織設定からユーザーを招待する機能を利用して、作成したアカウントを招待 [00:36]
>                                         - 招待機能は管理者のみが使用できるため、佐藤さんのアカウントで組織管理者になる必要がある [00:36]
>                                             - MediaKindの管理画面から、ユーザー管理画面に移動し、ユーザーを招待 [00:38]
> 
> ### OS移行:
> 
> - *OS移行について [00:40] **
>     - セントOSのサポートが終了しているため、移行が必要 [00:41]
>         - セキュリティアップデートが提供されなくなる [00:41]
>     - 移行先として、AlmaLinuxを採用 [00:41]
>         - CentOSと中身が変わらず、ライセンス費用も発生しない [00:42]
>     - 移行方法として、新規VM作成と切り替えを採用 [00:42]
>         - 既存のレコード情報は、rsyncで移行 [00:43]
>     - 新規VMをロードバランサーに組み込む [00:43]
> 
> ### データベース移行:
> 
> - *データベース移行について [00:43] **
>     - 単一サーバーが提供終了のため、フレキシブルサーバーへの移行が必要 [00:43]
>     - アプリからの接続は確認済み [00:44]
>     - 移行に伴い、日付処理に関する問題が発生する可能性がある [00:44]
>         - ドライバーのバージョンが上がり、オブジェクトとのマッピングに影響が出る可能性 [00:47]
>     - 移行前に動作確認を徹底する [00:44]
>         - 問題があれば、対応策を検討 [00:44]
> 
> ### ストレージ移行:
> 
> - *ストレージ移行について [00:50] **
>     - MediaKindへの移行が落ち着いてから実施 [00:50]
>     - クラシックストレージアカウントは、8月31日までに廃止される [00:59]
>         - 8月31日以降は、アクセスできなくなる [01:00]
>     - 移行は、Azureポータルから実施可能 [00:52]
>         - 検証と準備の2段階で実施 [00:52]
>             - 準備段階で、新しいストレージアカウントが作成される [00:52]
>                 - コミットすると、古いストレージアカウントは削除される [00:53]
>     - 移行前に、必要なデータを取り出す [00:56]
>     - 移行は、夜間などサービス利用が少ない時間帯に実施 [01:00]
>     - 水曜日までに移行を完了させる [01:00]
> 
> ## 今後のスケジュール:
> 
> - MediaKindへの移行が完了次第、ストレージ移行の計画を具体化する [00:50]
> - ストレージ移行は、来週中に実施 [00:59]
>     - 水曜日までに移行を完了させる [01:00]
>     - サービス停止を伴うため、夜間など利用が少ない時間帯に実施 [01:00]
> - 詳細なスケジュールは、チャットワークで調整 [01:12]
> 

完