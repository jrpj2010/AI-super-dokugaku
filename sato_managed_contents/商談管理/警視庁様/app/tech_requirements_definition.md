# 技術要件定義書：会話分析＆フィードバックHTML生成アプリケーション (MVP)

## 1. 全体アーキテクチャ (MVP方針)
MVP（Minimum Viable Product）段階では、**クライアントサイドJavaScript**を主軸とし、サーバーサイドの処理を最小限にするか、もしくは完全にクライアントサイドで完結させることを目指す。これにより、開発の迅速化とデプロイの容易性を確保する。

## 2. フロントエンド技術
-   **HTML5**: セマンティックな構造でコンテンツを記述。
-   **CSS3**:
    -   レイアウト（Flexbox, Grid）。
    -   スタイリング（LINE風UI、XYZビジュアライゼーション、ツールチップ等）。
    -   レスポンシブデザインの考慮（簡易的な対応でも可）。
-   **JavaScript (ES6+)**:
    -   **DOM操作**: トークスクリプトのパース、HTML構造の動的生成、分析結果の埋め込み。
    -   **テキスト解析ロジック**:
        -   発言者と発言内容の分離。
        -   XYZタグのルールベース判定ロジック（キーワードマッチング、文長、特定表現の検出など）。
        -   コミュニケーション評価コメントのテンプレートベース生成。
    -   **UIインタラクション**: サイドバーナビゲーションのスクロールスパイ、ツールチップ表示。
-   **ライブラリ/フレームワーク**:
    -   原則として、MVPでは外部ライブラリへの依存を最小限にする。
    -   もし複雑な状態管理やUI構築が必要と判断された場合は、軽量なライブラリ（例: Preact, Svelte, Alpine.jsなど）の導入を検討するが、まずはVanilla JSでの実現を目指す。
    -   Chart.jsやMermaid.jsのようなグラフ描画ライブラリは、現状のHTML出力では必須ではないが、将来的な拡張として考慮。

## 3. バックエンド技術 (MVPでは原則不要)
-   MVPでは、全ての処理をクライアントサイド（ブラウザ上）で行うことを目指す。
-   もし、より高度なNLP処理（例：BERTなどの大規模モデル）を導入する場合は、Pythonバックエンド（Flask/FastAPI）とAPI連携が必要になるが、これはMVP以降のフェーズとする。

## 4. データ形式
-   **入力**: プレーンテキストまたはMarkdown形式のトークスクリプト。
    -   構造化されたJSON形式での内部表現も検討（発言者、タイムスタンプ、発言内容、XYZタグ、評価コメントなど）。
-   **出力**: 単一のHTMLファイル。CSSとJavaScriptはインラインまたは`<style>`, `<script>`タグで内包。

## 5. 開発環境
-   **バージョン管理**: Git, GitHub (または GitLab/Bitbucket)。
-   **エディタ/IDE**: VSCode推奨。
-   **ブラウザ開発ツール**: 各ブラウザのデベロッパーツールを積極的に活用。

## 6. 非機能要件への対応
-   **処理速度**: クライアントサイドでの処理効率を考慮し、ループ処理やDOM操作の最適化に留意する。大規模なスクリプトに対応するためには、処理の非同期化や分割も検討。
-   **セキュリティ**: クライアントサイド完結型であれば、ユーザーデータが外部サーバーに送信されないため、セキュリティリスクは比較的低い。ただし、XSSなどの基本的なウェブ脆弱性には注意する。

## 7. テスト
-   **手動テスト**: 主要ブラウザでの表示・動作確認。
-   **単体テスト (将来検討)**: 主要なJavaScript関数（テキスト解析、タグ付けロジックなど）に対して、JestやMochaなどのテストフレームワークを用いた単体テストの導入を検討。

## 8. デプロイ (MVP)
-   静的なHTML、CSS、JavaScriptファイル群なので、GitHub Pages, Netlify, Vercelなどの静的ホスティングサービスで容易にデプロイ可能。
