# 仕様要件定義書：会話分析＆フィードバックHTML生成アプリケーション

## 1. 概要
本アプリケーションは、ユーザーが提供する二人以上の会話のトークスクリプトを解析し、「思考3DXYZメソッド」に基づいて各発言者のコミュニケーション戦略を分析・評価する。その結果を、視覚的に分かりやすい単一のHTMLファイルとして出力し、ユーザーにフィードバックを提供することを目的とする。

## 2. 基本機能
### 2.1. 入力機能
-   ユーザーは、テキスト形式（プレーンテキストまたはMarkdown）で会話のトークスクリプトを入力できる。
    -   入力形式：発言者名と発言内容が明確に区別できる形式（例：`発言者A: こんにちは`）。
    -   将来的にはファイルアップロード（.txt, .md）にも対応。
-   会話の主要な登場人物（例：警察側、佐藤氏側）をユーザーが指定できる。
    -   指定がない場合は、システムが自動的に2者を識別しようと試みる（例：最初の2名）。

### 2.2. 分析機能
-   システムは、入力されたトークスクリプトを解析し、各発言ごとに以下の分析を行う。
    -   **発言者の特定**: どちらの発言か（例：警察、佐藤）。
    -   **XYZ軸のタグ付け**: 各発言に対し、X軸（超具体化/超抽象化/超構造化）、Y軸（過去/現代/未来）、Z軸（初級/中級/上級）のカテゴリを（システムが判断できる範囲で）自動的に割り当てる。
        -   MVP段階では、主要なキーワードや文脈からルールベースまたは簡易的な機械学習モデルで判定。将来的にはより高度なNLPモデルの利用を検討。
    -   **コミュニケーション評価・フィードバック (対話相手の発言に対して)**:
        -   一方の発言（例：佐藤氏）が、もう一方の発言（例：警察側）や会話の流れに対して、XYZ軸の観点から適切だったか、別の可能性はなかったかを評価するコメントを自動生成する。
        -   評価のポイント：「適切だった点(GOOD)」「別の可能性・改善点(CONSIDER/BETTER)」など。
        -   ミスコミュニケーションの可能性を指摘。

### 2.3. 出力機能
-   分析結果を、単一のHTMLファイルとして生成し、ユーザーがダウンロードまたはブラウザで直接表示できるようにする。
-   HTMLのレイアウト：
    -   左カラム（固定サイドバー）:
        -   会話全体の流れを示すナビゲーション（大テーマへのアンカーリンク）。
        -   XYZタグの凡例（マウスオーバーで解説ツールチップ表示）。
    -   右カラム（メインコンテンツ）:
        -   会話のヘッダー情報（タイトルなど）。
        -   会話ブロックを時系列に表示。
            -   LINE風の吹き出しUI（左：相手、右：自分/分析対象者）。
            -   各発言に対するXYZ軸のビジュアライゼーション（選択されたタグが強調表示されるインジケーター）。
            -   分析対象者の発言後には、2カラムの分析エリアを表示。
                -   左側：XYZビジュアライゼーションと発言内容の簡単な解説。
                -   右側：「コミュニケーション評価・フィードバック」の詳細コメント。
-   CSSとJavaScriptはHTMLファイルに内包する。

## 3. ユーザーインターフェース (MVP)
-   シンプルなWebインターフェース。
-   トークスクリプト入力用のテキストエリア。
-   分析対象者（例：佐藤氏に該当する名前）を指定する入力フィールド。
-   「分析実行」ボタン。
-   分析結果HTMLの表示エリアまたはダウンロードリンク。

## 4. 非機能要件 (MVP)
-   **処理速度**: 数十行程度の短い会話であれば、数秒以内に結果を表示。
-   **対応ブラウザ**: 最新版のChrome, Firefox, Safari, Edge。
-   **セキュリティ**: 入力されたトークスクリプトはサーバーに保存せず、処理後速やかに破棄する（もしサーバーサイド処理を含む場合）。クライアントサイドのみで完結する場合はこの限りではない。

## 5. 将来的な拡張機能
-   複数ファイル形式のアップロード対応。
-   XYZタグ付けの精度向上（機械学習モデルの強化）。
-   ユーザーによるXYZタグの手動修正機能。
-   分析結果の保存・再表示機能。
-   より詳細なコミュニケーションパターンの分析と可視化。
-   チームでの利用を想定した共有機能。
