# 工程定義書 - 会話フロービジュアライザー

## 1. 概要
本書は、「会話フロービジュアライザー」プロジェクトの開発工程、進め方、管理方法について定義する。開発フェーズ、タスク管理、バージョン管理などの方針を示す。

**プロジェクトリポジトリ**: `conversation-flow-visualizer`

## 2. 開発フェーズ (Roadmap)

本プロジェクトは、以下のフェーズで段階的に開発を進める。各フェーズの詳細は `metadata.json` 内の `roadmap` セクション及び `PROJECT_STATUS.md` を参照。

### 2.1. フェーズ 0: プロトタイプ (Prototype) - 完了済
*   **目標**: 基本的な音声入力からテキスト変換、単一ノードとしての表示、基本ズーム・パン機能の実装。
*   **主要成果物**:
    *   音声入力とGoogle Gemini API連携によるリアルタイム文字起こし。
    *   文字起こし結果の画面表示（単一ノード）。
    *   キャンバスのズーム・パン機能の基礎。
    *   リアルタイム音声波形表示。
    *   複数ノード分割表示の基礎。
    *   ノードの選択、アイコン表示、ツールチップ表示の基礎。
    *   ノード間の時系列エッジ描画。

### 2.2. フェーズ 1: MVP (Minimum Viable Product) - 進行中
*   **目標**: 主要な可視化機能と基本的なユーザビリティを備えた、実用最小限の製品を開発する。
*   **主要タスク**:
    *   **[進行中]** 依存関係分析アルゴリズムの初期バージョン実装（キーワード再出現に基づく点線エッジなど）。
    *   **[未着手]** ハンバーガーメニューの実装とナビゲーション機能。
    *   **[未着手]** PNG/SVG形式でのエクスポート機能。
    *   **[未着手]** IndexedDBへのローカル保存・読み込み機能。
    *   **[未着手]** 主要なキーボードショートカットの実装。
    *   **[未着手]** UI/UXの洗練（アニメーション、レスポンシブ対応の基礎）。
    *   **[未着手]** 詳細なエラーハンドリングとユーザーフィードバックの改善。

### 2.3. フェーズ 2: 製品化 (Productize) - 将来
*   **目標**: MVPを基に、より堅牢で多機能な製品へと発展させる。
*   **主要検討項目**:
    *   クラウドバックエンドとの連携（データ同期、ユーザーアカウント）。
    *   複数ユーザーによる共有・共同編集・リプレイ機能。
    *   モバイル/タブレットデバイスへのUI最適化。
    *   より高度なNLP処理（精密な文分割、話法分岐の検出など）。
    *   国際化対応（英語UIなど）。
    *   包括的なアクセシビリティ対応。

## 3. 開発プロセス

*   **基本方針**: アジャイル的なアプローチを採用し、イテレーションを繰り返しながら段階的に機能を開発・改善していく。
*   **イテレーション**: 各TODOリスト項目を一つの小さなイテレーション単位として捉え、実装→確認→（必要に応じて修正）のサイクルを回す。
*   **コミュニケーション**: ユーザー（この場合は開発を依頼しているあなた）からのフィードバックを重視し、適宜方針を調整する。
*   **テスト**: 各機能実装後、基本的な動作確認を行う。将来的には単体テスト、結合テストを導入検討。

## 4. タスク管理

*   **管理ファイル**: `PROJECT_STATUS.md` をプロジェクトルートに配置し、主要タスクの進捗状況、完了/未完了、バージョン情報（簡易的な日付ベースまたは機能マイルストーン）、作業内容のサマリーを記録・更新する。
*   **タスクの粒度**: TODOリストの各項目を基本単位とする。大規模な項目はサブタスクに分解して管理する。
*   **優先順位**: 基本的にTODOリストの上から順に実施するが、ユーザーからの要望や技術的依存関係により変動する可能性がある。

## 5. バージョン管理

*   **ツール**: Git (ローカル環境での開発を想定)。
*   **ブランチ戦略 (推奨)**:
    *   `main` (または `master`): 安定版のコード。
    *   `develop`: 現在の開発中のコード。
    *   フィーチャーブランチ (`feature/task-name`): 個別の機能開発やバグ修正ごとに作成し、完了後に `develop` へマージ。
*   **コミットメッセージ**: 変更内容が分かるように、具体的かつ簡潔に記述する。
*   **リリースノート**: `PROJECT_STATUS.md` のバージョン情報が簡易的なリリースノートの役割を兼ねる。

## 6. ビルドとデプロイ (現状のAI Studio環境)

*   **ビルド**: AI Studio環境では、提供されたファイル (`index.html`, `index.tsx`, `style.css`等) が直接的に解釈・実行されるため、明示的なユーザーによるビルドステップは不要。
*   **デプロイ**: AI Studio環境に変更を適用（コードの更新）することで、自動的に新しいバージョンが反映される。
*   **バージョン識別**: `PROJECT_STATUS.md` に記載するバージョン情報（例: `v0.2.1-edge-drawing`）で、デプロイされた機能セットを識別する。

## 7. 開発環境 (推奨)
*   コードエディタ: VS Codeなど、TypeScript/React開発に適したもの。
*   ブラウザ: 最新版のGoogle Chrome または Firefox (開発者ツールが充実しているため)。
*   Node.js/npm: ローカルでのパッケージ管理や開発サーバー実行のため (現状のCDNベースでは必須ではないが、将来的な拡張性を考慮)。