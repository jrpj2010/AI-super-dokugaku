
{
  "description": "Generated by Gemini.",
  "prompt": "system_name: 会話フロービジュアライザー\nversion: 0.1\npurpose: >\n  商談やミーティング中の発話をリアルタイムに構造分解し、\n  ブロック（ノード）と依存線（エッジ）で可視化。\n  キーワードの伏線回収や話法の分岐点を一目で把握し、\n  トーク改善・分析に役立てる。\n\nactors:\n  - name: ユーザー\n    description: 発話する人物。商談担当・講師など。\n  - name: 観察者\n    description: 後からビジュアルを閲覧・分析する人（上司・コーチ等）。\n  - name: システム\n    description: 音声入力、解析、レンダリングを行う Web アプリ。\n\nfunctional_requirements:\n  capture_audio:\n    description: ブラウザマイクで音声をストリーミング取得\n    realtime: true\n    fallback_upload: WAV/MP3\n  speech_to_text:\n    engine: WebSpeechAPI | AzureCognitiveServices | GoogleSpeechV2\n    language: ja-JP\n    latency_ms: 500\n  sentence_segmentation:\n    method: 科学的文節分割 + 独自ルール\n    granularity: 一文 or 意味塊\n  dependency_analysis:\n    goals:\n      - 時系列依存（直列線）\n      - キーワード再出現依存（点線）\n      - 話法分岐（IF ノード）\n    algorithm: TF-IDF キーフレーズ抽出 + 文字列類似度 + ルールベース\n  graph_rendering:\n    library: ReactFlow | D3.js | PixiJS\n    zoom:\n      min: 0.1\n      max: 2.0\n      controls: plus_minus_buttons\n    pan: drag\n  ui_blocks:\n    style:\n      shape: rounded_rectangle\n      base_color: \"#2a2d31\"\n      accent_icons:\n        - \"!\"  # exclamation\n        - \"💡\" # light-bulb\n      tooltip_on_hover: true\n      tooltip_content: markdown_supported\n    creation_flow: >\n      新しい発話が認識されるたび左側に生成し、右方向へ展開。\n  icon_annotations:\n    types:\n      - exclamation:\n          meaning: 要注意・重要ポイント\n      - lightbulb:\n          meaning: アイデア・提案\n  transcript_timeline:\n    waveform_display: true\n    position: bottom_left\n  export:\n    formats: PNG | SVG | JSON (構造データ)\n    screenshot_hotkey: Ctrl+Shift+S\n  storage:\n    mode: localIndexedDB | optional_cloud_backend\n    retention_days: 30\n\nnon_functional_requirements:\n  performance:\n    target_fps: 60\n    max_nodes_1h: 600\n  scalability: single_user_realtime; future_multi_user\n  accessibility:\n    color_contrast_WCAG: AA\n    keyboard_nav: true\n  security:\n    https_only: true\n    audio_encryption: TLS\n  privacy:\n    opt_in_recording: true\n    gdpr_ready: true\n  i18n: ja_JP 基本、将来 en_US\n\nui_spec:\n  canvas:\n    resolution: 1920x1080\n    background_color: \"#121417\"\n    accent_color: \"#3a8cff\"  # 控えめブルー\n  layout:\n    top_bar:\n      items: [hamburger_menu, title \"TRANSCRIPT\", spacer, zoom_out, zoom_in]\n    left_column: dynamic_nodes\n    right_panel: optional_tooltip_popovers\n  animation:\n    node_enter: fade_slide\n    edge_draw: dotted_line_grow\n    tooltip: scale_fade\n\ncomponents:\n  frontend:\n    framework: React 18\n    state_mgmt: Zustand | Redux\n    websocket_client: native | socket.io\n  backend:\n    language: Node.js 20\n    websocket_server: socket.io\n    speech_service_proxy: express\n  nlp_engine:\n    library: spaCy | SudachiPy\n    keyword_model: TfidfVectorizer\n  database:\n    local: IndexedDB\n    cloud_optional: Firestore\n\ndata_flow:\n  - step: \"Mic Stream → STT Engine\"\n  - step: \"STT Result → Sentence Segmentation\"\n  - step: \"Segment → Dependency Analyzer\"\n  - step: \"Analyzed Node → Graph Renderer\"\n  - step: \"UI updates via WebSocket\"\n\nassumptions_and_open_points:\n  - STT エンジンはインターネット接続必須\n  - 1時間超の長時間セッション時のパフォーマンス検証が未実施\n  - モバイル対応は Phase-2 で検討\n  - OAuth 認証でマルチユーザー判別を予定\n\nroadmap:\n  phase_0_prototype:\n    - 音声→テキスト→ノード即時生成\n    - 基本ズーム・パン\n  phase_1_mvp:\n    - 依存線アルゴリズム v1\n    - ツールチップ & アイコン注釈\n    - PNG/SVG エクスポート\n  phase_2_productize:\n    - クラウド同期\n    - マルチユーザ共有・リプレイ\n    - モバイル/タブレット UI\n\n\n---\n\nUI/UXデザイン\n\nui_ux_spec:\n  purpose: >\n    発話をリアルタイムで構造分解して可視化する\n    「会話フロービジュアライザー」Web アプリの\n    UI / UX 要件定義書。\n  target_resolution: \"1920x1080\"   # フルHD 基準\n  breakpoints:\n    - 1920\n    - 1440\n    - 1280\n    - 768          # タブレット縦\n  layout:\n    top_bar:\n      height: 56px\n      background: \"#1c1f23\"\n      elements:\n        - type: icon_button\n          id: hamburger\n          icon: menu\n          position: left\n        - type: label\n          id: title\n          text: \"TRANSCRIPT\"\n          position: left\n          margin_left: 16px\n        - type: flex_spacer\n        - type: icon_button\n          id: zoom_out\n          icon: minus\n          aria_label: \"ズームアウト\"\n        - type: icon_button\n          id: zoom_in\n          icon: plus\n          aria_label: \"ズームイン\"\n    canvas:\n      id: graph_canvas\n      position: absolute\n      top: 56px\n      bottom: 96px    # 波形バー分\n      left: 0\n      right: 0\n      background: \"#121417\"\n      pan: drag\n      zoom:\n        min: 0.1\n        max: 2.0\n        step: 0.1\n    waveform_bar:\n      height: 96px\n      background: \"#121417\"\n      elements:\n        - type: mic_button\n          id: mic_toggle\n          size: 64px\n          position: left\n          states:\n            active: {icon: mic_on, color: \"#3a8cff\"}\n            inactive: {icon: mic_off, color: \"#666\"}\n        - type: waveform_display\n          id: waveform\n          position: fill\n          bar_color: \"#3a8cff\"\n          bar_width: 2px\n          bar_gap: 2px\n  tokens:\n    color:\n      bg_primary: \"#121417\"\n      bg_secondary: \"#1c1f23\"\n      node_bg: \"#2a2d31\"\n      edge: \"#5c6b7a\"\n      edge_dependency: \"#5c6b7a80\"   # 50% α\n      accent: \"#3a8cff\"\n      text_primary: \"#e9ecef\"\n      text_secondary: \"#98a0aa\"\n    font:\n      family: \"'Noto Sans JP', sans-serif\"\n      size_base: 14px\n      size_h1: 20px\n      size_node: 16px\n    radius:\n      node: 6px\n      button: 4px\n  components:\n    node_block:\n      shape: rounded_rectangle\n      padding: \"8px 12px\"\n      min_width: 120px\n      background: token.color.node_bg\n      text_style: {color: token.color.text_primary, font_size: token.font.size_node}\n      icon_slot:\n        size: 20px\n        margin_right: 6px\n        default_icons:\n          - id: exclamation\n            svg: \"exclamation-circle\"\n            meaning: \"重要ポイント\"\n          - id: lightbulb\n            svg: \"lightbulb\"\n            meaning: \"アイデア・提案\"\n      states:\n        hover:\n          border: {color: token.color.accent, width: 1px}\n        selected:\n          shadow: \"0 0 8px #3a8cff80\"\n    edge_line:\n      default:\n        stroke: token.color.edge\n        stroke_width: 1px\n        style: solid\n      dependency:\n        stroke: token.color.edge_dependency\n        stroke_width: 1px\n        style: dotted\n      arrow: false\n    tooltip:\n      trigger: hover_node_or_icon\n      max_width: 260px\n      background: token.color.bg_secondary\n      text_style: {color: token.color.text_primary, font_size: token.font.size_base}\n      pointer: bottom_center\n      animation: fade_in 150ms\n    zoom_controls:\n      placement: top_bar\n      buttons: [zoom_out, zoom_in]\n      tooltip: auto\n    mic_button:\n      states:\n        default: {bg: token.color.node_bg}\n        active:  {bg: token.color.accent}\n        hover:   {bg: \"#3a8cffdd\"}\n  interactions:\n    - name: mic_toggle\n      action: start_stop_recording\n    - name: node_hover\n      action: show_tooltip\n    - name: canvas_drag\n      action: pan_view\n    - name: wheel_scroll\n      action: zoom_view\n    - name: zoom_button_click\n      action: zoom_in_out\n    - name: node_drag\n      action: manual_relayout   # optional (編集モード)\n  states:\n    recording:\n      mic_button: active\n      waveform_display: visible\n      canvas: accepts_new_nodes\n    paused:\n      mic_button: inactive\n      waveform_display: dimmed\n      canvas: read_only\n    loading:\n      overlay_spinner: true\n    error:\n      mic_permission_denied: show_modal(\"マイクの権限がありません\")\n  animations:\n    node_spawn: {type: fade_slide_from_left, duration: 200ms}\n    edge_draw: {type: sweep, duration: 200ms}\n    tooltip: {type: fade_scale, duration: 150ms}\n    zoom: {type: smooth, duration: 200ms}\n  accessibility:\n    keyboard_shortcuts:\n      toggle_mic: \"M\"\n      zoom_in: \"+\"\n      zoom_out: \"-\"\n      focus_next_node: \"Tab\"\n    aria_labels:\n      mic_button: \"録音開始／停止\"\n      zoom_in: \"ズームイン\"\n      zoom_out: \"ズームアウト\"\n    color_contrast: \"WCAG 2.1 AA 準拠\"\n  localization:\n    default_locale: ja-JP\n    supported_locales: [ja-JP, en-US]\n    i18n_keys:\n      title: \"ui.title.transcript\"\n      zoom_in: \"ui.button.zoom_in\"\n      zoom_out: \"ui.button.zoom_out\"\n  responsive_guidelines:\n    - breakpoint: 1440\n      canvas_padding: 32px\n    - breakpoint: 1280\n      hide_tooltips_by_default: true\n      node_font_size: 14px\n    - breakpoint: 768\n      top_bar_height: 48px\n      waveform_height: 72px\n      node_font_size: 12px\n  open_questions:\n    - マルチセレクト編集モードの要不要\n    - 色覚バリアフリー向けカラーパレット切替\n    - モバイル UI は Phase-2 以降か？\n\n```",
  "requestFramePermissions": [
    "microphone"
  ],
  "name": "App"
}
